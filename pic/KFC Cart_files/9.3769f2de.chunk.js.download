(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[9,103],{812:function(e,t,a){"use strict";a.r(t),a.d(t,"removeCouponHandler",(function(){return u})),a.d(t,"quantityModifierOnClickHandler",(function(){return m}));var i=a(3),n=a(317),o=a(25),d=a(54),c=a(918),l=a(6),r=a(4),s=a(2);const u=e=>{let{setCartItem:t,item:a,setCouponModal:i,setQuantityActionData:n,quantityAction:o}=e;i(!0),t(a),n(o)},m=e=>{let{paymentDiscountAmounts:t,setCartItem:a,item:i,setCouponModal:n,setQuantityActionData:o,quantityAction:d,event:c,updateItemQuantity:l}=e;null!==t&&void 0!==t&&t.length?u({setCartItem:a,item:i,setCouponModal:n,setQuantityActionData:o,quantityAction:d}):l(i,d,c)};t.default=e=>{var t,a;const{itemQuantity:u,itemCount:v,updateItemQuantity:p,quantityAction:b,item:j,itemName:O,cartItemCount:f,maxItemCountPerLineItem:I,hideChild:h=!1,type:g="",paymentDiscountAmounts:C=[],removeSingleItem:y=!1}=e,{QUANTITY_INCREASE_DECREASE:N}=d.a;var x="".concat(Object(l.translateWithI18Next)(r.a.DECREASE_QUANTITY_BY)," ").concat(O),E="".concat(Object(l.translateWithI18Next)(r.a.INCREASE_QUANTITY_BY),"  ").concat(O);const T=Object(o.c)((e=>{var t;return null===(t=e.cartReducer)||void 0===t?void 0:t.isUpdateQuantityLoading})),[D,S]=Object(i.useState)(!1),[A,P]=Object(i.useState)({}),[_,M]=Object(i.useState)(""),L=Object(o.c)((e=>{var t,a,i,n,o,d;return(null===(t=e.cartReducer)||void 0===t?void 0:t.isBasketDetailsLoading)||(null===(a=e.cartReducer)||void 0===a?void 0:a.isUpdateQuantityLoading)||(null===(i=e.cartReducer)||void 0===i?void 0:i.isValidateBasketLoading)||(null===(n=e.storesReducer)||void 0===n?void 0:n.isStoreStatusLoading)||(null===(o=e.orderReducer)||void 0===o?void 0:o.isCreateOrderLoading)||(null===(d=e.orderReducer)||void 0===d?void 0:d.isPlaceOrder)}));return Object(s.jsxs)("div",{className:"cart-food-quantity-change",children:[!y&&+v===+u||null!==j&&void 0!==j&&j.isProductPromo&&(null===j||void 0===j?void 0:j.minQuantity)===(null===j||void 0===j?void 0:j.maxQuantity)?Object(s.jsx)(n.a,{className:"button quantity-decrease",disabled:!0,"data-testid":"quantity-minus",ariaLable:"minus",children:!h&&Object(s.jsx)("span",{children:"-"})}):Object(s.jsx)(n.a,{className:"button quantity-decrease",ariaLable:x,disabled:T||L,onClickHandler:e=>m({paymentDiscountAmounts:C,setCartItem:P,item:j,setCouponModal:S,setQuantityActionData:M,quantityAction:b.Decrease,event:e,updateItemQuantity:p}),"data-testid":"quantity-minus",type:g,children:!h&&Object(s.jsx)("span",{children:"-"})}),Object(s.jsx)("span",{className:"cart-food-quantity",children:v}),Object(s.jsx)("span",{className:"sr-only",role:"alert",children:"Quantity updated to ".concat(v)}),Object(s.jsx)(n.a,{className:".transparent-btn button quantity-increase",ariaLable:E,"data-testid":"quantity-plus",type:g,onClickHandler:e=>m({paymentDiscountAmounts:C,setCartItem:P,item:j,setCouponModal:S,setQuantityActionData:M,quantityAction:b.Increase,event:e,updateItemQuantity:p}),disabled:!!(0!==I&&f+v>I||null!==j&&void 0!==j&&null!==(t=j.discountComponents)&&void 0!==t&&null!==(a=t[0])&&void 0!==a&&a.isDiscounteditem)||(T||L),children:!h&&Object(s.jsx)("span",{children:"+"})}),D&&Object(s.jsx)(c.a,{cartItem:A,setCouponModal:S,quantityAction:_,updateItemQuantity:p,flag:N})]})}},899:function(e,t,a){"use strict";t.a={NINE_TILES:9,FIVE_TILES:5,SIX_TILES:6,SEVEN_TILES:7,BROWSE_CATEGORIES:"browsecategory",VIEW_ALL_MENU:"viewAllMenu",MENU:"/menu",ADD_TO_CART:"addToCart",ITEM_QUANTITY:1}},900:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a(3);var i=a(968),n=a.n(i),o=(a(969),a(970),a(2));const d=e=>{const{settings:t,carousalRef:a}=e;return Object(o.jsx)(n.a,{...t,ref:a,children:e.children})};d.defaultProps={settings:null,carousalRef:null},t.b=d},903:function(e,t,a){"use strict";var i=a(812);a.d(t,"a",(function(){return i.default}))},913:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return u}));var i=a(19),n=a(9),o=a(5),d=a(11);a(0);const c=async function(e,t,a,d){var c;let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";await i.a.registerEvent(null===n.a||void 0===n.a||null===(c=n.a.add_to_cart)||void 0===c?void 0:c.name,{data:{event:"add_to_cart",userType:t||"",ecommerce:{items:[e],currency:l,value:a||"",coupon:d||""}}},o.xb)},l=e=>{i.a.registerEvent("editPersonalInformation",{"%event%":"editPersonalInformation","%firstName%":e.firstName||"NA","%lastName%":e.lastName||"NA","%email%":e.email||e.emailId||"NA","%phone%":e.phone||e.phoneNumber||"NA","%dateOfBirth%":e.dateOfBirth||e.year&&"".concat(e.year,"-").concat(Object(d.O)(e.month),"-").concat(e.day)||"NA","%postCode%":e.postalCode||"NA","%user_id%":e.user_id||"NA","%braze_dob%":e.year&&"".concat(e.year,", ").concat(Object(d.O)(e.month),", ").concat(e.day)||"NA"},o.xb)},r=e=>{i.a.registerEvent("updateCommunicationPreferences",{"%event%":"updateCommunicationPreferences","%marketingEmails%":e.find((e=>"marketing-emails"===e))?"true":"false","%editorAndCustomerFavourites%":e.find((e=>"editor-pick"===e))?"true":"false","%newsAndAnnouncements%":e.find((e=>"kfc-news"===e))?"true":"false","%doNotSellInformation%":e.find((e=>"do-not-sell"===e))?"true":"false","%receiveSMS%":e.find((e=>"receive-sms"===e))?"true":"false"},o.xb)},s=async e=>{await i.a.registerEvent("deleteAccount",{"%event%":"deleteAccount","%userID%":e||"NA"},o.xb)},u=async e=>{await i.a.registerEvent("signOutSuccess",{"%event%":"signOutSuccess","%userID%":e||"NA"},o.xb)}},918:function(e,t,a){"use strict";var i=a(92),n=a(84),o=a(4),d=a(54),c=a(6),l=a(3),r=a(76),s=a(39),u=a(110),m=a(2);t.a=e=>{const{isAddedPromosCoupon:t=!1,cartItem:a={},setConfirmationModel:v=null,itemRemoveHandler:p=null,isRemoveItemLoading:b=!1,setCouponModal:j=null,setRemoveItem:O=null,flag:f="",quantityAction:I="",updateItemQuantity:h=null,addtoCartClinckHandler:g=null,setAddToClickParms:C=null,addToClickParms:y={},selectedStoreData:N=null,clickHandler:x=null,title:E="",confirmButtonText:T="",removeCouponHandler:D=null,couponCode:S="",couponTitle:A="",itemRemoveWrapper:P=null,giftCardOrVoucherErrMsg:_="",giftCardErrFirstMsg:M=""}=e,{userOrderStateDispatch:L}=Object(l.useContext)(r.a),R=Object(u.a)(),{REMOVE_COUPON:k}=d.a,{CONTINUE:w,CANCEL_BTN_TXT:F,REMOVE_GIFT_CARD_VOUCHER:U,CART_UPDATE_CLEAR_WICODE_FIRST_TEXT:H,CART_UPDATE_CLEAR_WICODE_SECOND_TEXT:B}=o.a;return Object(m.jsx)(i.a,{handleClose:()=>j(!1),classNames:"promos-rewards-warning-msg coupon-modal gift-card-voucher-remove-modal",CartAlertForm:Object(m.jsx)(n.a,{title:f===k?E:Object(c.translateWithI18Next)(U),giftCardOrVoucherErrMsg:f===k?_:Object(c.translateWithI18Next)(B),giftCardErrFirstMsg:f===k?M:Object(c.translateWithI18Next)(H),altText:"",confirmButtonText:f===k?T:Object(c.translateWithI18Next)(w),confirmHandler:e=>(e=>{let{isAddedPromosCoupon:t,cartItem:a,setConfirmationModel:i,itemRemoveHandler:n,isRemoveItemLoading:o,setCouponModal:c,setRemoveItem:l,flag:r,quantityAction:u,updateItemQuantity:m,addtoCartClinckHandler:v,setAddToClickParms:p,addToClickParms:b,selectedStoreData:j,clickHandler:O,events:f,removeCouponHandler:I,couponCode:h,couponTitle:g,itemRemoveWrapper:C,userOrderStateDispatch:y,sliceDispatch:N}=e;const{EDIT_ITEM:x,REMOVE_ITEM:E,QUANTITY_INCREASE_DECREASE:T,STORE_DISPOSITION_UPDATE:D,REMOVE_COUPON:S}=d.a;if(c(!1),r===E&&C({isAddedPromosCoupon:t,item:a,setConfirmationModel:i,itemRemoveHandler:n,isRemoveItemLoading:o,setRemoveItem:l,sliceDispatch:N}),r===T&&(y({type:s.p,value:{couponErrorMessage:"REMOVE"}}),m(a,u,f)),r===x){const{event:e,data:t,miniPDPData:a,totalAmount:i,cartId:n,pdpDataForUpdateFoodLine:o,cartData:d}=b;v(e,t,a,n,i,o,d),p({}),c(!1)}r===D&&O(f,j),r===S&&I(h,g)})({isAddedPromosCoupon:t,cartItem:a,setConfirmationModel:v,itemRemoveHandler:p,isRemoveItemLoading:b,itemRemoveWrapper:P,setCouponModal:j,setRemoveItem:O,flag:f,quantityAction:I,updateItemQuantity:h,addtoCartClinckHandler:g,setAddToClickParms:C,addToClickParms:y,selectedStoreData:N,clickHandler:x,events:e,removeCouponHandler:D,couponCode:S,couponTitle:A,userOrderStateDispatch:L,sliceDispatch:R}),cancelHandler:()=>j(!1),cancelButtonText:Object(c.translateWithI18Next)(F)})})}},919:function(e,t,a){"use strict";var i=a(3),n=a.n(i),o=a(73),d=a.n(o),c=a(25),l=a(121),r=a(2);var s=e=>{const{handleClose:t,ProductListingModalForm:a,headerText:i,modalTitleId:o=""}=e;return Object(r.jsx)(n.a.Fragment,{children:Object(r.jsx)(l.a,{id:"ProductListingModalPopup",role:"dialog",modalTitleId:o,show:!0,classNames:"product-listing-module-modal",showCloseBtn:!0,closeButtonHandler:t,modalTitle:i,autoFocus:!0,children:a})})},u=a(36),m=a(949),v=a.n(m),p=a(43),b=a(5),j=a(76),O=a(322),f=a(14);var I={MODALHEADERTEXT:"selectOption",UPLIFTPLACEHOLDER:"upSize",CONFIRMBUTTONTXT:"confirmSelection",REGULAR:"Regular",ADDTOCART:"addToCart",UPDATECART:"updateCart",SETFLAGCASE:{DEFAULT:"default",FROMEDIT:"fromEdit",ITEMINCLUDES:"itemIncludes"},SINGLE:"single"},h=a(78),g=a(61),C=a(15);const y=(e,t)=>e?t:null,N=(e,t,a,i,n)=>{const{SETFLAGCASE:o}=I,{FROMFLAGEDIT:d}=f.a;if(0===e.length){if(i&&t.minipdpData.fromFlag!==d)return o.DEFAULT;if(t.minipdpData.fromFlag===d&&((e,t)=>{if(Object(b.Kd)(t))return t.filter((t=>{let{id:a}=t;return a===e})).length>0;return!1})(a,n))return o.FROMEDIT}else if(null!==e&&void 0!==e&&e.includes(a))return o.ITEMINCLUDES},x=(e,t)=>"".concat("carousal"===e?"carousal-modifier-item-card":"modifier-item-card"," ").concat(t?"selected":""),E=e=>"carousal"===e?"carousal-modifier-product-save":"modifier-product-save",T=e=>"carousal"===e?"carousal-modifier-card-image":"modifier-card-image",D=(e,t)=>{let{analyticsObject:a,currLocation:i}=e;t||Object(h.g)(a,i)};var S=e=>{const{cardData:t,min:a,max:n,savedModifierHandler:o,savedModifiers:d,cardType:c,tenantReducer:l,modgrpId:s,modGrpName:u,updatedItems:m,getCartModifiers:v}=e,{Check_Icon:h}=C.a,{id:S,name:A,size:P,dname:_,isDefault:M,imageName:L,isHidden:R,calorificInfo:k}=t;let w=(F=_)&&F.length&&F[0].value;var F;const[U,H]=Object(i.useState)(!1),{userOrderState:B,userOrderStateDispatch:Q}=Object(i.useContext)(j.a),{pdpScreenCommons:{modGroupIdsUpdated:q}}=B,{MODGROUP_IDS_UPDATE:G,UPDATE_DEFAULT_MODGROUP:z}=O.a,{CONFIRM_UPSIZE_ANALYTICS:W}=f.a,{SETFLAGCASE:J}=I,V=Object(g.h)();Object(i.useEffect)((()=>{switch(N(m,B,S,M,v)){case J.DEFAULT:case J.FROMEDIT:H(!0),o(t,!0,d);break;case J.ITEMINCLUDES:H(!0);break;default:H(!1)}}),[S,m,M,v]);return!R&&Object(r.jsxs)("div",{className:x(c,U),"data-testid":"click-save-product",onClick:()=>{if(M||q.includes(s)){if(M){let e=q.filter((e=>e!==s));Q({type:z,value:e})}}else Q({type:G,value:s});let e={analyticsObject:{name:A,size:P},currLocation:Object(b.wb)(V.pathname)};1===a&&1===n?(D(e,U),!U&&H(!0),o(t,"single",d)):U&&d.length>a&&d.length<=n?(H(!1),o(t,!1,d)):!U&&d.length>=a&&d.length<n&&(D(e,U),H(!0),o(t,!0,d)),Q({type:W,value:{confirmUpsizeName:u}})},children:[Object(r.jsx)(p.a,{defaultPath:Object(b.Xb)(null,l,!0),srcFile:Object(b.Xb)(L,l),className:T(c)}),Object(r.jsxs)("picture",{children:[Object(r.jsx)("source",{media:"(max-width: 1023px)",srcSet:(K=U,X=h,K?X:null),alt:"",className:E(c)}),Object(r.jsx)("img",{src:y(U,h),alt:"",className:E(c)})]}),Object(r.jsxs)("div",{className:"modifier-card-content",children:[Object(r.jsx)("div",{className:"title",children:w}),(Y=k,Y&&Object(r.jsx)("div",{className:"caloricInfo",children:Y}))]})]});var Y,K,X},A=a(213),P=a(900),_=a(19);const M=(e,t,a)=>e.map((e=>e.size&&{name:e.size,rate:Object(b.Cc)(e.availability[0],e.additionalProperties,t,a)})).filter((e=>e)).sort(((e,t)=>e.rate-t.rate)),L=(e,t,a,i)=>{let n=-1,o=M(t,a,i),d=M(e,a,i);return Array.from(new Set(o.map((e=>e.name)))).map((e=>o.find((t=>t.name===e)))).forEach((e=>{n="regular"!==e.name?d.findIndex((t=>t.name===e.name&&t.rate!==e.rate)):-1})),n>=0&&d.splice(n,1),Array.from(new Set(d.map((e=>e.name)))).map((e=>d.find((t=>t.name===e))))},R=async e=>{const t=[];t.push({event:"upsizeOrder",addOnType:e,location:"Customization Modal"}),await _.a.registerEvent(void 0,{data:t[0]},b.xb)};var k=a(6);const{HamburgerDownArrow:w,filter_options_stoke:F}=C.a,U=(e,t)=>{if(e!==t)return Object(r.jsx)("span",{children:":"})},H=(e,t,a)=>e.rate&&e.name!==t?"+".concat(a).concat(e.rate):"",B=(e,t,a,i)=>e&&e.length&&L(e,t,a,i).length>0;var Q=e=>{const{data:t,min:a,max:o,showSelectedModifier:d,modgrpId:l,modGrpName:s}=e,{REGULAR:u="",UPLIFTPLACEHOLDER:m="",SINGLE:v}=I,{userOrderState:p,userOrderStateDispatch:h}=Object(i.useContext)(j.a),[g,C]=Object(i.useState)([]),[y,N]=Object(i.useState)({}),[x,E]=Object(i.useState)(!1),[T,D]=Object(i.useState)([]),[_,M]=Object(i.useState)(!0),[Q,q]=Object(i.useState)(Object(b.Ud)(window.innerWidth)),[G,z]=Object(i.useState)(t),W=Object(c.c)((e=>e.cartReducer)),J=Object(c.c)((e=>e.tenantReducer)),{currencySymbol:V,currencyConversionFactor:Y,componentOptions:K}=J,{web:{global:{showPriceWithTax:X=!1}={}}={}}=null!==K&&void 0!==K?K:{},[Z,$]=Object(i.useState)({}),[ee,te]=Object(i.useState)({}),ae=Object(i.useRef)(null),ie=Object(i.useRef)(null),ne=Object(i.useRef)(null),oe={dots:!1,infinite:!0,speed:200,slidesToShow:2,slidesToScroll:1,adaptiveHeight:!0,autoplay:!1,arrows:!1,focusOnSelect:!0};Object(i.useEffect)((()=>{const e=Object(b.Tc)(t.length,JSON.parse(JSON.stringify(t)),[]);let a=((e,t)=>Object(b.Kd)(e)?t.filter((t=>t.size===e.name)):t)(y,e);z([...a])}),[t]);const de=(e,a,i)=>{let{id:n}=e;if(a===v)t.forEach((e=>{e.id===n&&D([e.id])})),C([{...e,itemId:n,modgrpId:l}]);else if(a){!i.some((t=>{let{id:a}=t;return a===e.id}))&&C([...i,{...e,itemId:n,modgrpId:l}])}else if(i.length){let e=i.filter((e=>{let{itemId:t}=e;return t!==n}));C(e)}},ce=()=>{const e=Object(b.Ud)(window.innerWidth);q(e)};Object(i.useEffect)((()=>{let e=((e,t,a,i)=>{var n;const{FROMFLAGEDIT:o}=f.a,{MODGROUP_IDS_UPDATE:d}=O.a;if((null===t||void 0===t||null===(n=t.minipdpData)||void 0===n?void 0:n.fromFlag)===o){var c,l;let n=i.foodLines.find((e=>{let{id:a}=e;return a===t.minipdpData.foodLineId})),o=null===n||void 0===n||null===(c=n.item)||void 0===c||null===(l=c.modGrps)||void 0===l?void 0:l.find((t=>{let{id:a}=t;return a===e}));var r;return o?(!o.modifiers.filter((e=>{let{isDefault:t}=e;return!t})).length||null!==t&&void 0!==t&&null!==(r=t.pdpScreenCommons)&&void 0!==r&&r.modGroupIdsUpdated.includes(o.id)||a({type:d,value:o.id}),o.modifiers):{}}return{}})(l,p,h,null===W||void 0===W?void 0:W.cartData);te(e)}),[]),Object(i.useEffect)((()=>{d(g)}),[JSON.stringify(g)]),Object(i.useEffect)((()=>{window.addEventListener("resize",ce)}),[Q]),Object(i.useEffect)((()=>{x?document.addEventListener("click",le):document.removeEventListener("click",le)}),[x]);const le=e=>{(Object(b.db)(ae.current,ae.current===e.target)||ie.current&&ne.current&&ie.current!==e.target&&!ne.current.contains(e.target))&&E(!1)},re=()=>{E(!0)},se=()=>{E(!x)},ue=(e,a)=>{N(e);let i=t.filter((t=>t.size===e.name));z(i),R(a),E(!x)},me=(e,a,i)=>{let n=((e,t,a)=>Object(b.Kd)(t)?(e(t),a.filter((e=>e.size===t.name))):a)(N,e,t);z(n),R(a),M(!i),E(!1)},ve=()=>{N({}),$({}),M(!0)},pe=()=>{let e="",t=H(y,u,V);return e=Object(b.Tc)(t.length>0,":",""),e};return Object(b.Tc)(Q,Object(r.jsxs)(n.a.Fragment,{children:[B(t,g,Y,X)&&Object(r.jsx)("div",{className:"uplift-dropdown","data-testid":"mob-uplift-dropdown",children:Object(r.jsxs)("div",{className:"language-select-uplift","data-testid":"mobile-dropdown-filter",onClick:re,children:[Object(r.jsx)("span",{"data-testid":"uplift-order-text",children:Object(b.Tc)(y.name,y.name+pe(),Object(k.translateWithI18Next)(m))}),Object(r.jsx)("span",{className:"selected-rate",children:H(y,u,V)}),Object(r.jsx)("img",{className:"dropdown-img-ham",src:w,alt:"DropDown"})]})}),x&&Object(r.jsx)("div",{className:"mobile-modal-filter-background",ref:ae,children:Object(r.jsxs)("div",{className:"mobile-modal-filter",children:[Object(r.jsx)("div",{className:"mobile-modal-filter-container",children:Object(r.jsxs)("ul",{className:"mobile-filter-list",children:[Object(r.jsx)("li",{className:_&&0===Object.keys(y).length?"mobile-filter-list-items-selected":"mobile-filter-list-items-default","data-testid":"mobile-click-default",onClick:ve,children:Object(r.jsx)("div",{className:"mobile-rate-container",children:Object(k.translateWithI18Next)(m)})}),L(t,g,Y,X).map((e=>Object(r.jsx)("li",{className:e.name===Z.name?"mobile-filter-list-items-selected":"mobile-filter-list-items","data-testid":"item-".concat(e.name,"-click"),onClick:()=>(e=>{E(!0),$(e),M(!1)})(e),children:Object(r.jsxs)("div",{className:"mobile-rate-container",children:[Object(r.jsx)("span",{className:"mobile-filter-item-name",children:e.name}),U(e.name,u),Object(r.jsx)("span",{className:"mobile-filter-item-rate",children:e.name!==u?"+".concat(V).concat(e.rate.toFixed(2)):""})]})},e.name)))]})}),Object(r.jsx)("div",{className:"mobile-modal-filter-button","data-testid":"mobile-filter-done",onClick:()=>me(Z,s,Z.name===y.name),children:Object(k.translateWithI18Next)("done")})]})}),Object(r.jsx)("div",{className:"modifier-list-items modifier-list-items-in",children:G&&G.length>2&&ee?Object(r.jsx)(P.b,{settings:oe,children:G&&G.length&&ee?G.map(((e,t)=>Object(r.jsx)(S,{cardType:"carousal",min:a,max:o,cardData:e,savedModifierHandler:de,savedModifiers:g,tenantReducer:J,modgrpId:l,modGrpName:s,updatedItems:T,getCartModifiers:ee},t))):null}):G&&G.length&&ee&&G.map(((e,t)=>Object(r.jsx)(S,{cardType:"regular",min:a,max:o,cardData:e,savedModifierHandler:de,savedModifiers:g,tenantReducer:J,modgrpId:l,modGrpName:s,updatedItems:T,getCartModifiers:ee},t)))||null})]}),Object(r.jsxs)(n.a.Fragment,{children:[B(t,g,Y,X)&&Object(r.jsxs)("div",{className:"uplift-dropdown","data-testid":"desktop-uplift-dropdown",children:[Object(r.jsxs)("div",{className:"language-select-uplift",ref:ie,"data-testid":"desktop-dropdown-filter",onClick:se,children:[Object(r.jsx)("span",{"data-testid":"uplift-order-text",children:Object(b.Tc)(y.name,y.name+pe(),Object(k.translateWithI18Next)(m))}),Object(r.jsx)("span",{className:"selected-rate",children:H(y,u,V)}),Object(r.jsx)("img",{className:"dropdown-img-ham",src:w,alt:"DropDowm"})]}),x&&Object(r.jsx)("div",{ref:ne,children:Object(r.jsx)("ul",{className:"filter-list",children:L(t,g,Y,X).map((e=>function(e,t,a,i,n,o){return Object(r.jsxs)("li",{className:"filter-list-items","data-testid":"item-".concat(e.name,"-click"),onClick:()=>t(e,a),children:[Object(r.jsx)("span",{children:e.name}),Object(r.jsxs)("div",{className:"rate-container",children:[Object(r.jsx)("span",{className:"filter-item-rate",children:e.name!==i?"+".concat(n).concat(e.rate):""}),e.name===o.name&&Object(r.jsx)(A.a,{src:F,className:"selected-stroke"})]})]},e.name)}(e,ue,s,u,V,y)))})})]}),Object(r.jsx)("div",{className:"modifier-list-items",children:G&&G.length&&ee?G.map(((e,t)=>Object(r.jsx)(S,{min:a,max:o,cardData:e,savedModifierHandler:de,savedModifiers:g,tenantReducer:J,modGrpName:s,modgrpId:l,updatedItems:T,getCartModifiers:ee},t))):null})]}))};var q=e=>{const{grouplist:t=[],getSelectedModifiers:a,selectedModifiers:o,source:d=""}=e,{PDP:c}=O.a,[l,s]=Object(i.useState)(t),[u,m]=Object(i.useState)([]),{userOrderState:v}=Object(i.useContext)(j.a),{pdpScreenCommons:{currentAccordian:p,modGroupIdsUpdated:f}}=v,I=e=>{null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||e.preventDefault()};Object(i.useEffect)((()=>{(()=>{let e=(e=>{let t=e.length?e:[];return t.map(((e,t)=>(e.expanded=0===t,e))),t})(t);s([...e])})()}),[JSON.stringify(t)]),Object(i.useEffect)((()=>{if(Object(b.db)(p,d===c)){let e=(null!==t&&void 0!==t&&t.length?JSON.parse(JSON.stringify(t)):[]).map(((e,t)=>{if(e.id===p){var a;const t=(null===(a=e.modifiers)||void 0===a?void 0:a.length)>1?300:0;let i=document.getElementById("accordion-"+p).offsetTop;window.scrollTo({top:i-t,behavior:"smooth"}),e.expanded=!0}else e.expanded=!1;return e}));s([...e])}}),[p,JSON.stringify(t)]);const h=e=>{let t,a,i;if(e.length){t=e.map(JSON.stringify),a=new Set(t),i=Array.from(a).map(JSON.parse);let n=[];if(u.length){n=u;let e=u.findIndex((e=>e[0].modgrpId===i[0].modgrpId));e>=0?(n.splice(e,1,i),m([...n])):m([...n,i])}else m((e=>[...e,i]))}};Object(i.useEffect)((()=>{u.length&&a(u),o(u)}),[u]);const g=e=>{let t=[];for(let a of u)for(let i of a)i.modgrpId===e&&i.dname&&i.dname.length&&t.push(i.dname[0].value);return t.join(", ")};return l.map(((e,t)=>{let{id:a,name:i,modifiers:o,expanded:d,min:c,max:m}=e;const v=(e=>{let t=!1;f&&f.length&&[...new Set(f)].includes(e)&&(t=!0);return t})(a);return Object(r.jsx)(n.a.Fragment,{children:Object(r.jsxs)("div",{className:"accordian-container",id:"accordion-"+a,"data-testid":"product-listing-accordion-".concat(t),children:[Object(r.jsxs)("div",{className:"accordian-header",children:[Object(r.jsxs)("div",{className:"".concat(d?"accordion active":"accordion"),"data-testid":"toggle-accordion-".concat(a),onClick:e=>((e,t)=>{e&&I();let a=l.length?JSON.parse(JSON.stringify(l)):[];a.map(((e,a)=>(e.id===t&&(e.expanded=!e.expanded),e))),s([...a])})(e,a),children:[Object(r.jsx)("span",{className:"accordion-test",tabIndex:"0",children:i}),v?Object(r.jsx)("span",{className:"updatedBadge",children:Object(k.translateWithI18Next)("updated")}):null]}),Object(r.jsx)("span",{className:"selected-mod",children:u.length&&g(a)})]}),Object(r.jsx)("div",{className:"".concat(d?"panel panel-active":"panel"),children:Object(r.jsx)(Q,{modgrpId:a,modGrpName:i,data:o,min:c,max:m,showSelectedModifier:h})})]})},t)}))},G=a(30),z=a(54),W=a(899),J=a(903),V=a(913),Y=a(0),K=a(140),X=a(190),Z=a(321),$=a(69),ee=a(110);const te=e=>{let t=document.querySelector(".product-listing-component form .accordion-test");"ArrowDown"===e.key&&void 0!=typeof t&&null!=t&&t.focus()},ae=(e,t)=>{var a,i,n,o;const d=null===t||void 0===t?void 0:t[Y.gd.VIEW_PRODUCT],c=null===d||void 0===d?void 0:d.couponCode;return{productPromosInStorage:c,isPromoApplied:!!c,minPromoQuantity:null===d||void 0===d||null===(a=d.promoParams)||void 0===a||null===(i=a.find((t=>(null===t||void 0===t?void 0:t.itemId)===e)))||void 0===i?void 0:i.quantity,maxPromoQuantity:null===d||void 0===d||null===(n=d.promoParams)||void 0===n||null===(o=n.find((t=>(null===t||void 0===t?void 0:t.itemId)===e)))||void 0===o?void 0:o.maxQuantity}},ie=(e,t,a,i)=>{var n,o,d,c,l,r;const{setClickEvent:s,setConfirmed:u,productMapById:m,modifiersList:p,data:j,currencyConversionFactor:O,itemCount:f,minipdpData:I,FROMFLAGEDIT:g,dispatch:C,cartReducer:y,tenantId:N,id:x,modifierGrp:E,userOrderStateDispatch:T,confirmUpsizeName:D,userType:S,categoryMapById:A,addToOrderClickHandler:P,closeParentModal:M,getPwaStorageData:L,sliceDispatch:R}=t,{foodLines:k}=(null===y||void 0===y?void 0:y.cartData)||{},{couponCode:w,discountTotal:F}=Object(b.vb)(null===y||void 0===y?void 0:y.cartData),U=Object(b.Kd)(null===y||void 0===y?void 0:y.cartData)?Object(b.ic)(null===I||void 0===I?void 0:I.foodLineId,null===y||void 0===y?void 0:y.cartData):{},H=Math.abs(f-(null===U||void 0===U?void 0:U.count));let B="";e.stopPropagation(),e.preventDefault(),s(e),u(!0);const Q=(null===x||void 0===x?void 0:x.split("_")[0])||"",{categoryId:q=""}=null!==(n=null===m||void 0===m?void 0:m[Q])&&void 0!==n?n:{},{id:W="",name:J="",url:ee=""}=null!==(o=null===A||void 0===A?void 0:A[q])&&void 0!==o?o:{},te=null===t||void 0===t||null===(d=t.categoryMapById)||void 0===d||null===(c=d[null===t||void 0===t?void 0:t.categoryId])||void 0===c?void 0:c.url,ie=Object(Z.d)(Q,a);if(Object(Z.c)({categoryUrl:te,itemInCart:ie,alertType:Object(Z.j)(null===a||void 0===a?void 0:a.timebasedItemInCart,null===Y.Sb||void 0===Y.Sb?void 0:Y.Sb.ITEM)},a,T))return;v()(p,(e=>{B+="".concat(e[0].name,", ")}));const oe=Object(b.Cc)(null===j||void 0===j?void 0:j.availability[0],null===j||void 0===j?void 0:j.additionalProperties,O);let de={item_name:Object(b.jc)(null===j||void 0===j?void 0:j.name),item_id:Object(b.jc)(null===j||void 0===j?void 0:j.id),item_category:J,coupon:w,discount:+(F/O).toFixed(2),price:Object(b.jc)(oe),item_list_name:J,item_list_id:W,index:Object(K.b)(k,null===j||void 0===j?void 0:j.id,0),quantity:H,currency:Y.p.INR,item_variant:null!==j&&void 0!==j&&null!==(l=j.modgrps)&&void 0!==l&&l.length?null===j||void 0===j||null===(r=j.modgrps)||void 0===r?void 0:r.reduce(((e,t)=>e+"".concat(null===t||void 0===t?void 0:t.name,", ")),""):"NA"};const ce=ae(x,L);if(I.fromFlag!==g){var le,re,se,ue,me,ve;C(Object(G.a)({params:{basketId:null===y||void 0===y||null===(le=y.cartData)||void 0===le?void 0:le.id},tenantId:N},[{Id:x,categoryId:W,quantity:f,modGrps:ne(E),categoryName:J,categoryUrl:ee,isProductPromo:null===ce||void 0===ce?void 0:ce.isPromoApplied}],(()=>{null!==ce&&void 0!==ce&&ce.productPromosInStorage&&(P({couponCode:ce.productPromosInStorage}),R(Object($.c)({key:Y.gd.VIEW_PRODUCT})),T({type:X.a.SET_PDP_PROMO_MODE,value:{pdpPromoPage:!1}}),M())}))),Object(V.a)({item_name:Object(b.jc)(null===j||void 0===j?void 0:j.name),item_id:Object(b.jc)(null===j||void 0===j?void 0:j.id),item_category:J,price:Object(b.jc)((null===j||void 0===j||null===(re=j.availability)||void 0===re||null===(se=re[0])||void 0===se?void 0:se.price)/O),item_variant:Object(b.jc)(null===(ue=B)||void 0===ue?void 0:ue.trim()),item_list_name:J,item_list_id:W,index:1,quantity:f,coupon:w||"",discount:+(F/O).toFixed(2),currency:i},S,f*Object(b.jc)((null===j||void 0===j||null===(me=j.availability)||void 0===me||null===(ve=me[0])||void 0===ve?void 0:ve.price)/O),w,i)}else{var pe;C(Object(G.y)({params:{basketId:null===y||void 0===y||null===(pe=y.cartData)||void 0===pe?void 0:pe.id,basketLineItemId:I.foodLineId},tenantId:N},{Id:x,quantity:f,modGrps:ne(E)}));const e=(null===de||void 0===de?void 0:de.price)*(null===de||void 0===de?void 0:de.quantity);f!==(null===U||void 0===U?void 0:U.count)&&(f>(null===U||void 0===U?void 0:U.count)?Object(h.j)(S,de,+e,w,i):Object(h.l)(z.a.ANALYTICS_EVENTS.REMOVE,de,S,i,e))}C(Object(G.u)(new Date)),T({type:z.a.SET_ADDED_LOCATION,value:{itemLocation:{itemid:x,addedFrom:"PLP-Model"}}}),(async e=>{const t=[];t.push({event:"confirmUpsize",changesMade:e}),await _.a.registerEvent(void 0,{data:t[0]},b.xb)})(D)};function ne(e){return null===e||void 0===e||e.forEach((e=>{e.modifiers.map((e=>{var t;return e.categoryId=null===e||void 0===e||null===(t=e.categoryId)||void 0===t?void 0:t.catId,e}))})),e}var oe=e=>{var t;const{data:a,categoryId:o,handleClose:d,showPriceContent:l=!0,source:s="",addToOrderClickHandler:m,closeParentModal:v}=e,{id:p,modgrps:O,availability:h=[],additionalProperties:g=[]}=a,{userOrderState:C,userOrderStateDispatch:y}=Object(i.useContext)(j.a),{confirmUpsizeName:N,minipdpData:x,timeBasedCetegory:E}=C,[T,D]=Object(i.useState)(O),[S,A]=Object(i.useState)([]),P=Object(c.b)(),_=Object(c.c)((e=>e.tenantReducer)),M=Object(c.c)((e=>e.cartReducer)),{cartData:L={},isAddItemLoading:R=!1}=M||{},{currencySymbol:w,tenantId:F,currencyConversionFactor:U,maxItemCountPerLineItem:H,componentOptions:{web:{global:{showPriceWithTax:B=!1}={}}={}}={}}=_,{flatResponse:{productMapById:Q={},categoryMapById:G={}}={}}=null!==(t=Object(c.c)((e=>{let{menuReducer:t}=e;return t})))&&void 0!==t?t:{},[V,Y]=Object(i.useState)(0),K=Object(b.Cc)(h[0],g,U,B),{ADDTOCART:X,UPDATECART:Z}=I,{FROMFLAGEDIT:ne,EDIT_CLICKED:oe}=f.a,[de,ce]=Object(i.useState)(1),[le,re]=Object(i.useState)(0),{ITEM_QUANTITY:se}=W.a,[ue,me]=Object(i.useState)(!1),[ve,pe]=Object(i.useState)(null),be=Object(c.c)((e=>e.appStateReducer.userStatus)),je=Object(b.gd)(null===be||void 0===be?void 0:be.localized,null===be||void 0===be?void 0:be.loggedIn),Oe=Object(ee.a)(),fe=Object(ee.b)($.b),Ie=ae(p,fe),he={setClickEvent:pe,setConfirmed:me,categoryId:o,modifiersList:S,data:a,itemCount:de,minipdpData:x,FROMFLAGEDIT:ne,dispatch:P,cartReducer:M,tenantId:F,id:p,modifierGrp:T,userOrderStateDispatch:y,confirmUpsizeName:N,productMapById:Q,currencyConversionFactor:U,userType:je,categoryMapById:G,addToOrderClickHandler:m,closeParentModal:v,getPwaStorageData:fe,sliceDispatch:Oe};Object(i.useEffect)((()=>{var t;null===(t=e.callBackToPDP)||void 0===t||t.call(e,{modifierGrp:T,modifiedItemPrice:V})}),[T]),Object(i.useEffect)((()=>{const e=Object(b.Kd)(L)?Object(b.hc)(p,L):{},t=Object(b.Kd)(e)?e.count:0;if(re(t),x.fromFlag===ne){const e=Object(b.Kd)(L)?Object(b.ic)(x.foodLineId,L):{},t=Object(b.Kd)(e)?e.count:1;ce(t)}}),[L]),Object(i.useEffect)((()=>()=>{y({type:oe,value:{cartEditClicked:!1}})}),[y,oe]);Object(i.useEffect)((()=>{ue&&!R&&d(ve)}),[ue,R]),Object(i.useEffect)((()=>(window.addEventListener("keydown",te),()=>{window.removeEventListener("keydown",te)}))),Object(i.useEffect)((()=>{x.fromFlag!==ne&&p&&(null===Ie||void 0===Ie?void 0:Ie.minPromoQuantity)&&ce(null===Ie||void 0===Ie?void 0:Ie.minPromoQuantity)}),[p]);const ge=x.fromFlag===ne?Object(k.translateWithI18Next)(Z):Object(k.translateWithI18Next)(X);return Object(r.jsxs)(n.a.Fragment,{children:[Object(r.jsx)("div",{className:"modal-body-row product-listing-component","data-testid":"product-listing-component",children:Object(r.jsx)("form",{className:"form",children:Object(b.Kd)(O)?Object(r.jsx)(q,{grouplist:O,getSelectedModifiers:e=>{let t=0,a=[];e.forEach((e=>{let i={};i.id=e[0].modgrpId,i.modifiers=[],e.forEach((e=>{let a={},n=JSON.parse(JSON.stringify(e));a.id=n.id,a.quantity=n.defaultQuantity,a.modGrps=n.modgrps,a.categoryId=o,i.modifiers.push(a);let d=Object(b.Cc)(e.availability[0],e.additionalProperties,U,B);t+=d})),a.push(i)})),Y(K+t),D(a)},selectedModifiers:A,source:s}):null})}),l&&Object(r.jsx)("div",{className:"price-content",children:Object(r.jsxs)("div",{className:"price-content-parent","data-testid":"product-listing-button-comp",children:[de?Object(r.jsx)(J.a,{itemCount:de,itemQuantity:se,updateItemQuantity:(e,t)=>{t===z.a.QUANTITY_ACTION.Increase?ce((e=>+e+1)):ce((e=>+e-1))},quantityAction:z.a.QUANTITY_ACTION,item:void 0,maxItemCountPerLineItem:null!==Ie&&void 0!==Ie&&Ie.isPromoApplied?null===Ie||void 0===Ie?void 0:Ie.maxPromoQuantity:H,cartItemCount:le+1}):null,Object(r.jsxs)(u.a,{className:"button start-order-btn ".concat(R?"blackButton":"redButton"," customizeCartButton"),id:"startOrderItemButton","data-testid":"product-listing-button",type:"submit",name:"product-listing-button",onClickHandler:e=>ie(e,he,E,null===_||void 0===_?void 0:_.currencyShortName),children:[Object(r.jsx)("span",{className:"title-for-button",children:"".concat(ge)}),Object(r.jsx)("span",{className:"currency-symbol",children:"".concat(w," ").concat((Ce=V,(de*Ce).toFixed(2)))})]})]})})]});var Ce},de=a(46);const ce=e=>{if(e){var t;let a=JSON.parse(JSON.stringify(e));return a.modgrps=null===(t=e.modgrps)||void 0===t?void 0:t.filter((e=>{let{isHidden:t}=e;return!t})),a}return{}};t.a=e=>{const{isModal:t=!0,showPriceContent:a=!0,callBackToPDP:n,data:o={},source:l=""}=e,{MODALHEADERTEXT:u=""}=I,{COUPON_MULTI_PRODUCT:m}=de.a,{userOrderStateDispatch:v}=Object(i.useContext)(j.a),p=Object(c.c)((e=>{let{menuReducer:t}=e;return t.currentItemDetails})),O=Object(b.Kd)(o)?ce(o):ce(p),f=Object(c.b)(),h=Object(c.c)((e=>e.cartReducer)),g=e=>{e.stopPropagation(),e.preventDefault(),v({type:m,value:{fromCouponSection:!1}}),f(Object(G.v)({showProductListingModal:!1,categorySelected:""}))},C=Object(r.jsx)(oe,{data:O,categoryId:h.categorySelected,handleClose:g,showPriceContent:a,callBackToPDP:n,"data-testid":"product-listing-modal-enabled",source:l,addToOrderClickHandler:null===e||void 0===e?void 0:e.addToOrderClickHandler,closeParentModal:null===e||void 0===e?void 0:e.closeParentModal}),y=Object(r.jsx)(s,{handleClose:g,ProductListingModalForm:C,headerText:Object(k.translateWithI18Next)(u),"data-testid":"product-listing-inside-modal"}),N=Object(r.jsx)("div",{className:"pdp-custm",children:C});return t?d.a.createPortal(y,document.getElementById("modal-popups")):N}},926:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var i=a(3),n=a(73),o=a.n(n),d=a(121),c=a(5),l=(a(0),a(903)),r=a(54),s=a(76),u=a(14),m=a(25),v=a(122),p=a(190),b=a(30),j=a(15),O=a(2);const f=e=>{const{basketLineItemId:t,customizableFoodItemsList:a,SetCustomizableFoodItemsList:n,calculateTotalAmountHandler:o,isEditSelection:d}=e,f=Object(m.b)(),{RESET_MODGROUP_IDS_UPDATE:I}=p.a,{userOrderState:h,userOrderStateDispatch:g}=Object(i.useContext)(s.a),{MINI_PDP_DATA:C,FROMFLAGEDIT:y,EDIT_CLICKED:N}=u.a,{QUANTITY_ACTION:x}=r.a,E=a[t],T=Object(m.c)((e=>{let{menuReducer:t}=e;return null===t||void 0===t?void 0:t.currentItemDetails})),[D,S]=Object(i.useState)(!1),{Single_Arrow_Edit:A}=j.a,P=(e,i)=>{E.quantity=i===x.Increase?(null===E||void 0===E?void 0:E.quantity)+1:(null===E||void 0===E?void 0:E.quantity)-1;const d=a;d[t]=E,n(d),o()};Object(i.useEffect)((()=>{var e;let t=!0;null===E||void 0===E||null===(e=E.modGrps)||void 0===e||e.forEach((e=>{t*=e.modifiers[0].isDefault}))}),[E.modGrps]),Object(i.useEffect)((()=>{Object(c.oc)(T,E,h,D,f,b.v),S(!1)}),[T,D]);return Object(O.jsxs)(O.Fragment,{children:[d?Object(O.jsx)("div",{className:"EditItemsCard",onClick:()=>(()=>{var e,a;g({type:C,value:{id:null===E||void 0===E||null===(e=E.foodItems)||void 0===e?void 0:e.id,flag:y,foodLineId:t}}),g({type:I}),g({type:N,value:{cartEditClicked:!1}}),f(Object(v.c)({tenantId:null===E||void 0===E?void 0:E.tenantId,catalogName:null===E||void 0===E?void 0:E.catalog,itemId:null===E||void 0===E||null===(a=E.foodItems)||void 0===a?void 0:a.id})),S(!0)})(),children:Object(O.jsxs)("div",{className:"CustomizeOptionModal",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"DisplayNameFont",children:null===E||void 0===E?void 0:E.displayName}),Object(O.jsx)("div",{className:"customizableProducts-Default",children:Object(c.pc)(E.modGrps)})]}),Object(O.jsx)("img",{className:"arrow-icon","data-testid":"arrow-click-edit",src:A,alt:"Arrow Icon"})]})}):Object(O.jsxs)("div",{className:"CustomizeOptionModal",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"DisplayNameFont",children:null===E||void 0===E?void 0:E.displayName}),Object(O.jsx)("div",{className:"customizableProducts-Default",children:Object(c.pc)(E.modGrps)})]}),Object(O.jsx)("div",{className:"PlusAndMinus",children:Object(O.jsx)(l.a,{itemCount:null===E||void 0===E?void 0:E.quantity,itemQuantity:1,"data-testid":"QuantityModifier_OnClick",updateItemQuantity:P,quantityAction:x,maxItemCountPerLineItem:null===E||void 0===E?void 0:E.maxItemCountPerLineItem,cartItemCount:1,hideChild:!0})})]}),Object(O.jsx)("div",{className:"LineSeparator"})]})},I={ADD_NEW_PRODUCT:"addNewProduct",UPDATE_CART:"updateCart",CUSTOMIZATION_MODAL_DATA:"CUSTOMIZATION_MODAL_DATA"};var h=a(6);const g=e=>{const{addNewProductHandler:t,currencySymbol:a,updateCartHandler:i,customizableFoodItemsList:n,SetCustomizableFoodItemsList:o,totalAmount:d,calculateTotalAmountHandler:c,isEditSelection:l,handleClose:r,checkItemExpiry:s}=e,{ADD_NEW_PRODUCT:u,UPDATE_CART:m}=I,v=Object.keys(n).length;return Object(O.jsxs)("div",{children:[Object.keys(n).map((e=>Object(O.jsx)(f,{"data-testid":"ModalTemplate_QuantityModifier",addNewProductHandler:t,basketLineItemId:e,customizableFoodItemsList:n,SetCustomizableFoodItemsList:o,calculateTotalAmountHandler:c,isEditSelection:l,handleClose:r}))),l?Object(O.jsx)("div",{className:"editSelectionsItem",children:Object(O.jsx)("button",{className:"button whiteButton blackBorder add-new-product","data-testid":"add-new-product-for-edit","aria-label":"Add new product",tabindex:"0",onClick:()=>t(),children:Object(h.translateWithI18Next)(u)})}):Object(O.jsxs)("div",{className:v<2?"FinalButton":"FinalDivButtons",children:[Object(O.jsx)("div",{className:"AddNew",children:Object(O.jsx)("span",{className:"addNewItem",onClick:t,children:Object(h.translateWithI18Next)(u)})}),Object(O.jsx)("div",{className:"ButtonAndPopupLink",children:Object(O.jsxs)("button",{disabled:!1,className:"button activeBtn redButton Update-cart-button ","aria-label":"Update Cart",tabindex:"0",onClick:t=>{s({event:t,cardId:null===e||void 0===e?void 0:e.cardId,productInfo:null===e||void 0===e?void 0:e.productInfo,orderClickHandler:i,props:e})},children:[Object(O.jsx)("span",{className:"TextInButton",children:Object(h.translateWithI18Next)(m)+" "}),Object(O.jsx)("span",{children:a+d})]})})]})]})};var C=a(913),y=a(319);const N=e=>{var t;const{filteredPreviousData:a,tenantData:n,dname:l,cardId:r,categoryId:s,categoryName:u,categoryUrl:v,itemCount:p,availability:j,imageName:f,itemFoodlineId:I,customizable:h,isFavouriteMenu:N=!1,cartData:x,clickHandler:E,handleClose:T,foodId:D,isEditSelection:S,headerText:A,pricewithouttax:P}=e,_=Object(m.b)(),{discountTotal:M="",couponCode:L=""}=Object(c.vb)(x)||{},R=Object(m.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),k=Object(c.gd)(null===R||void 0===R?void 0:R.localized,null===R||void 0===R?void 0:R.loggedIn),{flatResponse:{productMapById:w={}}={}}=null!==(t=Object(c.Lb)(Object(m.c)((e=>{let{menuReducer:t}=e;return t}))))&&void 0!==t?t:{},{tenantId:F}=n,[U,H]=Object(i.useState)({}),[B,Q]=Object(i.useState)(0),{currencyConversionFactor:q,currencySymbol:G,componentOptions:z}=n,{web:{global:{showPriceWithTax:W=!1}={}}={}}=null!==z&&void 0!==z?z:{},J={id:"CustomizedModal",role:"dialog",modalTitleId:"SELECT QUANTITY",show:!0,classNames:"CustomizedModal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:T,modalTitle:A},[V,Y]=Object(i.useState)(-1),[K,X]=Object(i.useState)([]),Z=()=>{Y(-1),T&&T()},$=()=>{0===K.length&&0===V?Z():K&&null!==K&&void 0!==K&&K.length&&V<=K.length&&((()=>{var e,t,a,i;_(Object(b.x)({params:{basketId:null===x||void 0===x?void 0:x.id,basketLineItemId:null===(e=K[V])||void 0===e?void 0:e.basketLineItemId},tenantId:F},{quantity:null===(t=K[V])||void 0===t?void 0:t.quantity,isBundle:Object(y.e)((null===(a=K[V])||void 0===a?void 0:a.foodItemId)||(null===(i=K[V])||void 0===i?void 0:i.mdmId))}))})(),Y(V+1))};Object(i.useEffect)((()=>{$()}),[K]),Object(i.useEffect)((()=>{if(-1===V){var e;const t={...U};null===x||void 0===x||null===(e=x.foodLines)||void 0===e||e.forEach((e=>{var a,i;if(null!==e&&void 0!==e&&null!==(a=e.item)&&void 0!==a&&a.customizable&&(null===e||void 0===e||null===(i=e.item)||void 0===i?void 0:i.id)===D){var o,d;const a=Object(c.Yc)(null===e||void 0===e?void 0:e.amount,null===e||void 0===e?void 0:e.taxAmount,null===e||void 0===e?void 0:e.quantity);t[null===e||void 0===e?void 0:e.id]={tenantId:F,basketLineItemId:null===e||void 0===e?void 0:e.id,quantity:null===e||void 0===e?void 0:e.quantity,unitPrice:null===e||void 0===e?void 0:e.unitPrice,unitPriceWithoutTax:a,displayName:null===e||void 0===e||null===(o=e.item)||void 0===o?void 0:o.displayName,modGrps:null===e||void 0===e||null===(d=e.item)||void 0===d?void 0:d.modGrps,maxItemCountPerLineItem:null===n||void 0===n?void 0:n.maxItemCountPerLineItem,previousQty:null===e||void 0===e?void 0:e.quantity,foodItems:null===e||void 0===e?void 0:e.item,catalog:null===x||void 0===x?void 0:x.catalog,categorySelected:s}}})),H(t),Y(0)}else V===K.length?(Z(),_(Object(b.u)(new Date))):$()}),[null===x||void 0===x?void 0:x.foodLines]),Object(i.useEffect)((()=>{ee()}),[U]);const ee=()=>{let e=0;Object.values(U).forEach((t=>{const a=W?t.unitPrice:t.unitPriceWithoutTax;e+=t.quantity*a})),Q((e/q).toFixed(2))},te=Object(O.jsx)(d.a,{...J,children:Object(O.jsx)(g,{...e,"data-testid":"ModalTemplate",filteredPreviousData:a,addNewProductHandler:e=>{const t={id:r,itemCount:p,product:{productName:l,productImage:f,productPrice:Object(c.zc)(j[0],P,q,W)},itemFoodlineId:I},a={catId:s,catName:u,catUrl:v};N?E(e,t,h,a):(E(e,t,h,a),T&&T())},currencySymbol:G,currencyConversionFactor:q,updateCartHandler:()=>{if(null!==x&&void 0!==x&&x.id&&F){var e,t;const a=Object.values(U),i=a.filter((e=>(null===e||void 0===e?void 0:e.previousQty)!==(null===e||void 0===e?void 0:e.quantity)&&e));X(i);const o=null===a||void 0===a?void 0:a[0],{foodItems:d,unitPrice:l,quantity:r,previousQty:s}=null!==o&&void 0!==o?o:{},u=r-s;let m="".concat(Object(c.pc)(null===d||void 0===d?void 0:d.modGrps));const{categoryId:v="NA",categoryName:p="NA"}=null!==(e=null===w||void 0===w?void 0:w[null===d||void 0===d?void 0:d.id])&&void 0!==e?e:{};Object(C.a)({item_name:Object(c.jc)(null===d||void 0===d?void 0:d.name),item_id:Object(c.jc)(null===d||void 0===d?void 0:d.id),item_category:p,price:Object(c.jc)(l/q),item_variant:Object(c.jc)(null===m||void 0===m?void 0:m.trim()),item_list_name:p,item_list_id:v,index:1,quantity:u,coupon:L,discount:M/q,currency:null===n||void 0===n?void 0:n.currencyShortName},k,u*(null===c.jc||void 0===c.jc||null===(t=Object(c.jc)(l/q))||void 0===t?void 0:t.toFixed(2)),L,null===n||void 0===n?void 0:n.currencyShortName)}},customizableFoodItemsList:U,SetCustomizableFoodItemsList:H,totalAmount:B,calculateTotalAmountHandler:ee,isEditSelection:S,handleClose:T})});return o.a.createPortal(te,document.getElementById("modal-popups"))}},949:function(e,t,a){var i=a(967),n=a(510),o=a(512),d=a(98);e.exports=function(e,t){return(d(e)?i:n)(e,o(t))}},967:function(e,t){e.exports=function(e,t){for(var a=-1,i=null==e?0:e.length;++a<i&&!1!==t(e[a],a,e););return e}}}]);