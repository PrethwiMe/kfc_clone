(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[2,30],{1033:function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return l}));const i="outOfService",l="CLOSED";t.c={TAKEAWAY:"PICKUP",ORDER_TYPE_STORE_INFO_FROM:"from",ORDER_TYPE_STORE_INFO_TO:"to",ORDER_TYPE_STORE_INFO_AT:"at",HOMEPATH:"",HOMEPATHSELECT:"/"}},1046:function(e,t,o){"use strict";o.d(t,"c",(function(){return c})),o.d(t,"a",(function(){return u})),o.d(t,"b",(function(){return v}));var i=o(11),l=o(1033),n=o(6),a=o(5),d=o(101),s=o(19),r=o(0);const c=e=>{var t,o,i,l,n,a,d,s;const{url:r=""}=e.headline&&(null===e||void 0===e||null===(t=e.headline[0])||void 0===t||null===(o=t.fields)||void 0===o||null===(i=o.desktopImage)||void 0===i||null===(l=i.fields)||void 0===l?void 0:l.file)||{},{title:c=""}=e.headline&&(null===e||void 0===e||null===(n=e.headline[0])||void 0===n||null===(a=n.fields)||void 0===a||null===(d=a.desktopImage)||void 0===d?void 0:d.fields)||{},{headline:u="",subHeadline:v=""}=e.headline&&(null===(s=e.headline[1])||void 0===s?void 0:s.fields)||{},{supportedDispositions:O=[]}=e;return{headline:u,subHeadline:v,supportedDispositionsData:O.map((e=>e.fields)),src:r,alt:c}},u=(e,t,o)=>{var s,r,c,u,v;const O=(null===t||void 0===t||null===(s=t.summary)||void 0===s||null===(r=s.status)||void 0===r?void 0:r.currentStatus)||l.a,{futureDates:E,scheduled:S,asap:T}=Object(a.kd)(null===t||void 0===t||null===(c=t.summary)||void 0===c?void 0:c.timings),{unavailibilities:p}=Object(a.kd)(S),{interval:_=0,startEndTime:I={}}=Object(a.kd)((null===S||void 0===S||null===(u=S.periods)||void 0===u?void 0:u.length)&&(null===S||void 0===S?void 0:S.periods[0])),{from:D,to:b}=Object(a.kd)(I);let m=Object(d.j)(D,b,_,null===T||void 0===T?void 0:T.isAvailable,1===(null===E||void 0===E?void 0:E.length)&&"INDIA"===(null===o||void 0===o||null===(v=o.country)||void 0===v?void 0:v.toUpperCase()),p);if(O===l.a&&!m.length||null===e||void 0===e||!e.time)return Object(n.translateWithI18Next)(l.b);const h=e.time,A=e.interval,R="object"==typeof e.date?e.date:new Date(e.date),N=Object(i.Q)(Object(i.h)(R,"YYYY-MM-DD")+" "+h,"YYYY-MM-DD hh:mm A"),j=Object(i.a)(N,A,"minutes"),C=Object(i.k)(j,"LT");return"ASAP"===h?"".concat(h):"".concat(h," - ").concat(C)},v=async e=>{const t=[];t.push({event:"orderType",dispositionSelected:e}),await s.a.registerEvent(void 0,{data:t[0]},a.xb)},{ORDER_TYPE_STORE_INFO_FROM:O,ORDER_TYPE_STORE_INFO_TO:E,ORDER_TYPE_STORE_INFO_AT:S}=l.c,{DELIVERY:T,DINE_IN:p,PICKUP:_}=r.Jb||{}},905:function(e,t,o){"use strict";(function(e){o.d(t,"a",(function(){return i}));let i;(async()=>{i=await(async()=>{var t,i,l,n,a;const d=null===(t=e)||void 0===t||null===(i=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TENANT_CODE:"in",REACT_APP_API_BASE_URL:"https://online.kfc.co.in",REACT_APP_PWA_VERSION_STRING:"pwa-2502-0-3_39e1541f"}))||void 0===i?void 0:i.REACT_APP_TENANT_CODE,s=await Promise.resolve().then(o.bind(null,176));return null===s||void 0===s||null===(l=s.default)||void 0===l||null===(n=l[null===d||void 0===d||null===(a=d.toUpperCase)||void 0===a?void 0:a.call(d)])||void 0===n?void 0:n.MENU_PLP_CONSTANTS})()})()}).call(this,o(112))},920:function(e,t,o){"use strict";o.d(t,"a",(function(){return n}));var i=o(171),l=o(2);const n=e=>Object(l.jsx)(i.a,{testId:"account-container-test",importPath:"FOOTER_PAGE",...e})},932:function(e,t,o){"use strict";o.d(t,"a",(function(){return m}));var i=o(3),l=o.n(i),n=o(944),a=o(335),d=o(14),s=o(171),r=o(2);var c=e=>Object(r.jsx)(s.a,{importPath:"CONTENT_DISPOSITION_ITEMS",...e}),u=o(1046),v=o(5),O=o(76),E=o(0),S=o(61),T=o(25),p=o(111),_=o(63),I=o(935),D=o(49),b=o(331);const m=e=>{var t,o,m,h,A,R,N,j;const{userParams:C,contentData:y,showHeader:g=!0,hideTimeslot:f,showCateringDisposition:L}=e,{DISPOSITION_DATA:P,SCHEDULE_ORDER_DATA:x,DISPOSITION_METHOD:M,SHOW_CLEAR_CART_ALERT:w,SEARCH_ORDER_DATA:H,CLEAR_CART_CONFIRM_CANCEL_MODAL:F,clearCartExposedFlag:W,searchStoreAlertTitle:U,CURRENT_STORE_INFO:k,SET_FIND_A_KFC_VIEW:Y,ORDER_SUMMARY_MODAL_CLOSE:K,SCHEDULE_ORDER_CLICKED:J,SHOW_SCHEDULE_DISPOSITION:V}=d.a,{segmentedHomePageData:G=[]}=y,{headline:B=[],supportedDispositions:z=[]}=G,X=e.contentData&&Object(a.b)(B,z)||{},Q=(null===(t=e.contentData)||void 0===t?void 0:t.contentDispositionData)&&Object(v.Kd)(e.contentData.contentDispositionData)&&Object(u.c)(e.contentData.contentDispositionData)||{},{userOrderState:Z,userOrderStateDispatch:q}=Object(i.useContext)(O.a)||{},$=localStorage.getItem(E.gd.SERVICE_TYPE),ee=null===$||void 0===$?void 0:$.toUpperCase();let{enableAddressLocalisation:te=!1}=Object(T.c)((e=>Object(v.kd)(e.tenantReducer)));te=void 0!==Z.enableAddressLocalisation?Z.enableAddressLocalisation:te;const oe=null===Z||void 0===Z||null===(o=Z.dispositionStateData)||void 0===o||null===(m=o.dispositionType)||void 0===m?void 0:m.toUpperCase(),ie=(null===Z||void 0===Z||null===(h=Z.scheduleOrderData)||void 0===h?void 0:h.changeFlow)||!1,le=oe&&!ie?oe===E.Lb.DELIVERY:ee===E.Lb.DELIVERY,ne=te&&le,{cartData:ae={}}=Object(T.c)((e=>e.cartReducer)),[de,se]=Object(i.useState)(g),re=Object(b.c)(),ce=ie?JSON.parse(localStorage.getItem(E.gd.SELECTED_ADDRESS)):{},ue=(null===Z||void 0===Z||null===(A=Z.scheduleOrderData)||void 0===A?void 0:A.selectedAddress)||ce,ve=null===ue||void 0===ue?void 0:ue.deliverySearchType,Oe=ve?re.find((e=>e.id===ve)):re[0],[Ee,Se]=Object(i.useState)(Oe),Te=Object(S.h)(),pe=Object(T.b)(),_e=Object(i.useCallback)((()=>C.loggedIn&&((null===Te||void 0===Te?void 0:Te.pathname)===E.Ae.HOME||(null===Te||void 0===Te?void 0:Te.pathname)===E.Ae.HOME_PAGE||(null===Te||void 0===Te?void 0:Te.pathname)===E.Ae.ACCOUNT||(null===Te||void 0===Te?void 0:Te.pathname)===E.Ae.ACTIVE_ORDERS)||sessionStorage.getItem(E.Ke.PICKUP_ORDER_CANCELLED)&&((null===Te||void 0===Te?void 0:Te.pathname)===E.Ae.HOME||(null===Te||void 0===Te?void 0:Te.pathname)===E.Ae.HOME_PAGE)),[null===Te||void 0===Te?void 0:Te.pathname,C.loggedIn]);Object(i.useEffect)((()=>{_e()||(se(!0),sessionStorage.removeItem(E.Ke.PICKUP_ORDER_CANCELLED))}),[C.localized,_e()]),Object(i.useEffect)((()=>{var e;null!==Z&&void 0!==Z&&null!==(e=Z.dispositionStateData)&&void 0!==e&&e.showDisposition&&Se(re[0])}),[null===Z||void 0===Z||null===(R=Z.dispositionStateData)||void 0===R?void 0:R.showDisposition]);const Ie=Object(r.jsx)(s.a,{importPath:"START_ORDER_ITEMS",contentData:X,clickHandler:()=>{Object(a.c)(),q({type:Y,value:{findAKFC:!1}}),q({type:H,value:{showSearchStore:!1}}),q({type:K,orderSummaryModalClose:!0}),localStorage.setItem(E.gd.RETAIN_ADDRESS,""),L?(Object(D.o)(),q({type:H,value:{showSearchStore:!0,configSearchScreen:p.c}}),localStorage.setItem(E.gd.CONFIG_SEARCH_SCREEN,p.a),q({type:M,value:{dispositionType:E.Jb.CATERING}}),pe(Object(_.u)())):Object(v.Nd)(null===Te||void 0===Te?void 0:Te.pathname)?(q({type:P,value:{showDisposition:!1,dispositionType:"christmas_ordering"}}),q({type:H,value:{configSearchScreen:"FORM",contentData:{},searchedPlaceNonLocalized:void 0,showSearchStore:!0,userAddress:""}})):q({type:P,value:{showDisposition:!0}})}}),De=()=>{if(_e())return Object(r.jsx)(s.a,{...e,testId:"HeaderTrackOrderComponent",importPath:"APP_HEADER_ORDER_TRACKER_COMP",setShowBlackStripeContent:se,isHeaderTrackOrderEnabled:_e})},be=Object(r.jsx)(c,{contentData:Q,clickHandler:(e,t)=>{e.preventDefault(),e.stopPropagation(),q({type:Y,value:{findAKFC:!1}}),q({type:H,value:{showSearchStore:!1}}),q({type:x,value:{showScheduleOrderCatering:!0,selectedStoreInfo:t,changeFlow:!0}}),q({type:k,value:t}),q({type:V,value:{showSheduleDisposition:!1}}),q({type:J,value:{scheduleModeClicked:!1}}),q({type:d.a.SET_ORDER_NOW,value:{showOrderNow:!1}}),q({type:d.a.SET_SCHEDULE_ORDER_REORDER,value:{showScheduleOrderReorder:!1}})},selectedInfo:Z,hideTimeslot:f,showBlackStripeContent:de,headerTrackOrder:De,activeDisposition:ee,dispositionChange:(e,t)=>{let o="";var i;if(e.stopPropagation(),e.preventDefault(),Object(u.b)(t),o=t.trim(),null!==E.Kb&&void 0!==E.Kb&&E.Kb.includes(o.toUpperCase()))if(q({type:M,value:{dispositionType:o}}),(null===ae||void 0===ae||null===(i=ae.foodLines)||void 0===i?void 0:i.length)>0){let e={flag:W,onConfirm:U};Object(v.ue)(q,e,w,F)}else q({type:H,value:{showSearchStore:!0}})}});return Object(r.jsx)(l.a.Fragment,{children:Object(r.jsxs)("div",{id:"startorder-container","data-testid":"StartOrder-component",tabIndex:"-1",children:[g&&(()=>{let e=Ie;if(_e()&&(e=de?Object(r.jsxs)("div",{children:[Ie," ",De()]}):De()),!Object(v.ce)()&&Object(v.Kd)(Q)&&C.localized)e=be;else if(C.localized){const t=Object(v.Jd)(Z.dispositionNew)?JSON.parse(localStorage.getItem(E.gd.DISPOSITION_NEW)):Z.dispositionNew;t&&Object(v.Kd)(t.store||{})?e=be:Object(v.v)()}return e})(),Z.showLocationBlockBanner&&Object(I.e)(),(null===Z||void 0===Z||null===(N=Z.dispositionStateData)||void 0===N?void 0:N.showDisposition)&&Object(r.jsx)(n.a,{}),!(null!==Z&&void 0!==Z&&Z.findAKFC)&&(null===Z||void 0===Z||null===(j=Z.searchStoreData)||void 0===j?void 0:j.showSearchStore)&&Object(r.jsx)(s.a,{importPath:ne?"DELIVERY_ADDRESS_SEARCH_FORM":"SEARCH_STORE_TEMPLATE",deliverySearchType:Ee,setDeliverySearchType:Se,onStoreSelectFinish:D.y}),(null===Z||void 0===Z?void 0:Z.scheduleOrderData.showScheduleOrderCatering)&&Object(r.jsx)(s.a,{importPath:"SCHEDULE_ORDER_TEMPLATE",onStoreSelectFinish:D.y})]})})}},935:function(e,t,o){"use strict";o.d(t,"b",(function(){return k})),o.d(t,"f",(function(){return Y})),o.d(t,"i",(function(){return K})),o.d(t,"c",(function(){return J})),o.d(t,"j",(function(){return V})),o.d(t,"h",(function(){return z})),o.d(t,"d",(function(){return Q})),o.d(t,"e",(function(){return Z})),o.d(t,"g",(function(){return q})),o.d(t,"a",(function(){return $}));var i=o(14),l=o(92),n=o(84),a=o(217),d=o(6),s=o(43),r=o(22),c=o(0),u=o(5),v=o(15),O=o(2);const{Location_Error:E,errorIcon:S}=v.a,{TAKEAWAY_TITLE:T,TAKEAWAY_CONTENT:p,TAKEAWAY_TOAST_MSG:_,DINEIN_TITLE:I,DINEIN_CONTENT:D,DINEIN_TOAST_MSG:b,NOSTORE_TITLE:m,NOSTORE_CONTENT:h,NOSTORE_TOAST_MSG:A,CLOSED_STORE_TITLE:R,CLOSED_STORE_CONTENT:N,LOCATION_ALERT_MSG:j,CLOSED_STORE_TOAST_MSG:C}=a.b,{DINE_IN:y,DISTANCE_20000MR:g,START_ORDER_BUTTON:f,BROWSE_MENU_BUTTON:L}=a.a,{SEARCH_ORDER_DATA:P="",SELECTED_TILE_DATA:x="",SCHEDULE_ORDER_TIME_DATA:M="",SET_DISPOSITION:w,USER_LOCALIZED:H,CURRENT_STORE_INFO:F,SCHEDULE_ORDER_TIME_PRESERVE_TIME:W,SET_FORCERELOAD:U}=i.a,k=(e,t,o,i,l,n)=>{null!==e&&void 0!==e&&e.length?"DELIVERY"===t.toUpperCase()?n(e):l(e,t):null!==e&&void 0!==e&&e.length||i(t,o)},Y=(e,t,o,i,l,n,a,d,s,r,u,v)=>{const O=e.filter((e=>{var t,o,i,l,n,a,d,s,r,c,u,v,O,E;return(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&(null===e||void 0===e||null===(o=e.location)||void 0===o?void 0:o.longitude)&&(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(l=i.status)||void 0===l?void 0:l.currentStatus)&&"OPEN"===(null===e||void 0===e||null===(n=e.summary)||void 0===n||null===(a=n.status)||void 0===a?void 0:a.currentStatus)&&(null===e||void 0===e||null===(d=e.summary)||void 0===d||null===(s=d.menu)||void 0===s||null===(r=s.catalogs)||void 0===r?void 0:r.length)&&(null===e||void 0===e||null===(c=e.summary)||void 0===c||null===(u=c.timings)||void 0===u||null===(v=u.operatingHours)||void 0===v?void 0:v.length)>0&&(null===e||void 0===e||null===(O=e.summary)||void 0===O||null===(E=O.timings)||void 0===E?void 0:E.asap)}));if((null===O||void 0===O?void 0:O.length)>0)if(d){var E=JSON.parse(localStorage.getItem(c.Hb));E&&(O[0].id!==E.store.id||O[0].service!==E.type?(s(!0),o(!1),u(O[0])):o(!1))}else t(O[0]);else v(!0),r(n,l)},K=(e,t,o,i,l,n)=>{var a,d;t({type:w,value:{oldvalue:e,newValue:{type:i,store:l,date:n.date,time:n.time,interval:n.interval,selectedTime:n.selectedTime,deliveryAddress:null===o||void 0===o||null===(a=o.scheduleOrderData)||void 0===a?void 0:a.deliveryAddress}}}),localStorage.setItem(c.Ib,JSON.stringify(e)),localStorage.setItem(c.Hb,JSON.stringify({type:i,store:l,date:n.date,time:n.time,selectedTime:n.selectedTime,interval:n.interval,deliveryAddress:null===o||void 0===o||null===(d=o.scheduleOrderData)||void 0===d?void 0:d.deliveryAddress})),t({type:P,value:{showSearchStore:!1}}),t({type:H,value:{isLocalized:!0}})},J=(e,t,o,l)=>{const{SCHEDULE_ORDER_DATA:n,DISPOSITION_METHOD:a}=i.a,{DISPOSITION_TYPE:d,DISPOSITION_NEW:s,CURRENT_STORE_INFO_STORAGE:r,STORE_INFO:u,DISPOSITION_OLD:v,DATE_TIME_ORDER:O,SAVED_TIME_ORDER:E}=c.gd;let S={type:"",store:"",date:"",time:"",interval:"",deliveryAddress:"",deliveryAddressLine:"",selectedTime:""};e({type:w,value:{oldvalue:S,newValue:S}}),localStorage.removeItem(v),localStorage.removeItem(s),e({type:M,value:{selectedDateTime:{}}}),e({type:W,value:{}}),localStorage.removeItem(O),localStorage.removeItem(E),o(t({...l,localized:!1})),e({type:H,value:{isLocalized:!1}}),e({type:n,value:{showScheduleOrderCatering:!1,selectedStoreInfo:{},changeFlow:"",isAddressFlow:!1,deliveryAddress:{},deliveryAddressLine:""}}),e({type:a,value:{dispositionType:""}}),localStorage.removeItem(d),localStorage.removeItem(u),localStorage.removeItem(r),e({type:F,value:{}})},V=(e,t,o,i,l)=>{e({type:x,value:{selectedData:{}}}),localStorage.setItem("currentStoreInfo",JSON.stringify(i)),e({type:F,value:i}),e({type:M,value:{selectedDateTime:o}}),e({type:W,value:{selectContentTime:"ASAP"}}),e({type:U,value:{forceReload:!0}}),localStorage.setItem("tenantReducer",JSON.stringify(l)),localStorage.setItem("selectedTile",JSON.stringify({})),localStorage.setItem("dispositionType",t),localStorage.setItem("storeInfo",JSON.stringify(i)),localStorage.setItem("dateTimeOrder",JSON.stringify(o)),localStorage.setItem("savedTimeOrder","ASAP")},G=(e,t,o,i)=>{let l="";return e?l=i===y?Object(d.translateWithI18Next)(I):Object(d.translateWithI18Next)(T):o?l=Object(d.translateWithI18Next)(m):t&&(l=Object(d.translateWithI18Next)(R)),l},B=(e,t,o,i)=>{let l="";return e?l=i===y?Object(d.translateWithI18Next)(D):Object(d.translateWithI18Next)(p):o?l=Object(d.translateWithI18Next)(h):t&&(l=Object(d.translateWithI18Next)(N)),l},z=(e,t,o,i,l,n,a,s)=>{let r="";return e?(n(!1),r=i===y?Object(d.translateWithI18Next)(b):Object(d.translateWithI18Next)(_)):o?(a(!1),r=Object(d.translateWithI18Next)(A)):t&&(s(!1),r="".concat(Object(d.translateWithI18Next)(C)," ").concat(X(null===l||void 0===l?void 0:l.from)," to ").concat(X(null===l||void 0===l?void 0:l.to))),r},X=e=>((e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?"AM":"PM",e[0]=+e[0]%12||12),e.join(""));function Q(e,t,o,i,a,d,s,r,c,u,v){const S={HEADER_MSG:{MSGTXT1:G(o,i,a,d)},CONTENT_MSG:B(o,i,a,d)};return(o||i||a)&&Object(O.jsx)(l.a,{handleClose:t,classNames:"clear-cart-modal",CartAlertForm:Object(O.jsx)(n.a,{splitTitle:S.HEADER_MSG,contentMsg:S.CONTENT_MSG,imageSrc:E,altText:"location-error",confirmButtonText:L,cancelButtonText:o?f:null,cancelHandler:o?t:null,confirmHandler:()=>{e(i,a)}})})}const Z=()=>Object(O.jsx)("div",{className:"location-notification col-6",children:Object(O.jsxs)("div",{className:"notify-alert",children:[Object(O.jsx)(s.a,{srcFile:S,className:"location-alert-icon"}),Object(O.jsx)("span",{children:Object(d.translateWithI18Next)(j)})]})}),q=async()=>(await r.b.BindLocation(),r.b.address&&r.b.coordinates),$=e=>e.filter((e=>{var t,o;return Object(u.he)(e.id)&&Object(u.he)(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&Object(u.he)(null===e||void 0===e||null===(o=e.location)||void 0===o?void 0:o.longitude)}))},944:function(e,t,o){"use strict";o.d(t,"a",(function(){return x}));var i=o(3),l=o.n(i),n=o(61),a=o(25),d=o(63),s=o(5),r=o(30),c=o(6),u=o(36),v=o(2);var O=e=>{const{modalContent:t,onDispositionMethodSubmit:o,setRef:i=null}=e,{contentText:n="",infoObject:a=null,orderTypes:d=[]}=t,s=d.map((e=>Object(v.jsx)(u.c,{variant:e.selectDefault?u.b.secondary:u.b.tertiary,className:"christmas_ordering"!==e.dispositionType?"disposition-button":"disposition-button-christmas",onClickHandler:t=>{o(t,e.type,!1,e.dispositionType)},id:"DispositionModuleFormSubmit",type:"submit","data-testid":"disposition-order-click-handler-".concat(e.type),"aria-label":"order type ".concat(e.buttonText),children:e.buttonText},e.type)));return Object(v.jsx)(l.a.Fragment,{children:Object(v.jsxs)("div",{ref:i,className:"disposition-module-form","data-testid":"disposition-component",children:[Object(v.jsx)("h3",{className:"content-text","data-testid":"contenttext-component",children:n}),a&&Object(v.jsx)("div",{role:"alert",className:"info-text","data-testid":"info-component",children:Object(v.jsx)("span",{children:a.infoText})}),Object(v.jsx)("form",{className:"form",onSubmit:o,"data-testid":"form-component",children:s})]})})},E=o(121),S=o(49);var T=e=>{Object(i.useEffect)((()=>{Object(S.o)()}),[]);const{handleClose:t,DispositionModuleForm:o,headerText:n,modalTitleId:a=""}=e;return Object(v.jsx)(l.a.Fragment,{children:Object(v.jsx)(E.a,{id:"DispositionModulePopup",role:"dialog",modalTitleId:a,show:!0,classNames:"disposition-module-modal extra-small-modal",showCloseBtn:!0,closeDataTestId:"disposition-close-handler",closeButtonHandler:t,modalTitle:n,autoFocus:!0,children:o})})},p=o(19),_=o(9),I=o(0),D=o(334),b=o(14);const m=(e,t)=>{const o=[];for(const n of e){var i,l;const e=null===n||void 0===n||null===(i=n.fields)||void 0===i||null===(l=i.name)||void 0===l?void 0:l.split("-"),a=e[e.length-1].trim().toUpperCase();if(t&&null!==a&&void 0!==a&&a.includes(D.a.DISPOSITION_TYPE.TYPE_DELIVERY))continue;const{buttonText:d="",selectDefault:s=!1,name:r,showOption:c=!0,id:u="",dispositionType:v}=n.fields;o.push({buttonText:d,selectDefault:s,type:r,showOption:c,id:u,dispositionType:v})}return o},h=e=>{const{headline:t="",subHeadline:o="",subHeadlineType:i="",title:l=""}=e[0].fields||{};return{modalHeaderText:l,contentText:t,infoObject:{type:i,infoText:o}}},A=(e,t,o,i)=>{var l;const{CLEAR_CART_CONFIRM_CANCEL_MODAL:n,SHOW_CLEAR_CART_ALERT:a}=b.a;null!==e&&void 0!==e&&null!==(l=e.foodLines)&&void 0!==l&&l.length&&!i?Object(s.ue)(t,{},a,n,o):o()};var R=o(76),N=o(22),j=o(97),C=o(84),y=o(192),g=o(905),f=o(128),L=o(111),P=o(46);var x=e=>{const{CURRENTLY_CLOSED:t,SORRY:o}=g.a,{userOrderState:l,userOrderStateDispatch:u}=Object(i.useContext)(R.a),{contentData:E={}}=l.dispositionStateData,x=Object(a.c)((e=>e.tenantReducer)),{tenantId:M,disableOrderTypeAnalytic:w,isSpecialEventEnabled:H,enableDeliveryMenuOption:F}=x,{deeplinkSelectedStoreId:W,deepLinkStoreMode:U,isDeepLinkURL:k}=l,Y=Object(s.Kd)(E)&&function(){let{dispositionData:e,deepLinkStoreMode:t=!1,isSpecialEventEnabled:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=e.disposition&&e.disposition.fields||{},{headline:l=[],supportedDispositions:n=[]}=i,a={modalHeaderText:"",modalContent:{}},d=o?n:n.filter((e=>{var t,o;return(null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(o=t.dispositionType)||void 0===o?void 0:o.toUpperCase())!==I.zf}));a.modalContent.orderTypes=m(d,t);const{modalHeaderText:s,contentText:r,infoObject:c}=h(l);return a.modalHeaderText=s,a.modalContent.contentText=r,a.modalContent.infoObject=c,a}({dispositionData:E,deepLinkStoreMode:U,isSpecialEventEnabled:H,enableDeliveryMenuOption:F});let{modalContent:K={},modalHeaderText:J=""}=Y;const{SEARCH_ORDER_DATA:V,MENU_URL:G,DISPOSITION_DATA:B,CURRENT_STORE_INFO:z,SCHEDULE_ORDER_TIME_DATA:X,SELECTED_TILE_DATA:Q,DISPOSITION_METHOD:Z,ADD_TO_CART_CLICK:q,SET_DISPOSITION:$,USER_LOCALIZED:ee,SCHEDULE_ORDER_TIME_PRESERVE_TIME:te,SET_FIND_A_KFC_VIEW:oe,SET_REDIRECTION_PATH:ie}=b.a,{DISPOSITION_TYPE:{TYPE_DINE_IN:le,TYPE_TAKE_WAY:ne,TYPE_DELIVERY:ae,TYPE_CHRISTMAS_ORDERING:de},FIND_OPEN_KFC_TEXT:se,INVALID_QR_TEXT:re,CLOSED_STORE_MODAL_SUBTITLE:ce,TAKEAWAY_STORE_CLOSED_TEXT:ue,DINE_IN_STORE_CLOSED_TEXT:ve,SWITCH_TO_TAKEAWAY_TEXT:Oe,SWITCH_TO_DINEIN_TEXT:Ee}=D.a,{ENABLE_ADDRESS_LOCALISATION:Se,SHOW_MAP_VIEW_BUTTON:Te}=P.a,pe=l&&l.dispositionStateData&&l.dispositionStateData.dispositionType?l.dispositionStateData.dispositionType:null;let _e="";const Ie=Object(s.Jd)(l.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):l.dispositionNew,De=Object(a.b)(),be=Object(n.g)(),[me,he]=Object(i.useState)(""),[Ae,Re]=Object(i.useState)({showError:!1,errMsg:"",errDesc:null,buttonText:"",buttonCTA:null}),{cartData:Ne={},qrCodeScanTime:je}=Object(a.c)((e=>e.cartReducer)),{customerId:Ce=""}=Object(a.c)((e=>e.profileReducer));let ye=Object(a.c)((e=>e.appStateReducer.userStatus));const{storesWithStatus:ge=[],isStoreStatusLoading:fe,selectedStoreDetailsDL:Le={}}=Object(a.c)((e=>Object(s.kd)(e.storesReducer))),{DISPOSITION_ACTION:{SET_QR_DEEPLINK_MODE:Pe}}=D.a;Object(i.useEffect)((()=>{De(Object(d.u)()),De(Object(d.t)()),De(Object(d.r)()),((e,t)=>{e&&(null===t||void 0===t||t.push({pathname:I.Ae.HOME_PAGE}))})(U,be)}),[De]);const xe=Object(i.useCallback)(((e,t)=>{e.stopPropagation();A(Ne,u,(()=>{Re({showError:!1,errMsg:"",errDesc:null,buttonText:"",buttonCTA:null}),u({type:Pe,value:{deepLinkStoreMode:!1,deeplinkSelectedStoreId:""}})}),t)}),[Pe,u,Ne]);Object(i.useEffect)((()=>{U&&De(Object(d.l)({storeId:W,tenantId:M},null,(()=>{Re({showError:!0,errMsg:Object(c.translateWithI18Next)(re),errDesc:null,buttonText:Object(c.translateWithI18Next)(se),buttonCTA:e=>xe(e,!1)})})))}),[se,re,U,W,De,M]);const Me=(e,t,o,i)=>{e.stopPropagation(),e.preventDefault();const l=t.split("-");if(_e=l[l.length-1].trim(),-1!==_e.toLowerCase().indexOf("dine")&&(_e=le),i&&(_e=i),(async e=>{const t=[];t.push({event:"orderType",dispositionSelected:Object(s.h)(e.selectedDispositionType)}),await p.a.registerEvent(void 0,{data:t[0]},s.xb)})({selectedDispositionType:_e}),U){const e={data:[{storeId:W,channel:N.b.channel,service:I.ee},{storeId:W,channel:N.b.channel,service:I.Eb}],store:[{...Le,service:I.ee},{...Le,service:I.Eb}],tenantId:M,setStatusFlag:!1,isFavoritePage:!1},t=()=>{he(_e),De(Object(d.d)(e)),u({type:Z,value:{dispositionType:_e}})};A(Ne,u,t,o)}else[le,ne,ae,de].includes(_e.toUpperCase())&&(u({type:oe,value:{findAKFC:!1}}),u({type:V,value:{showSearchStore:!0,configSearchScreen:L.a}}),localStorage.setItem(I.gd.CONFIG_SEARCH_SCREEN,L.a),u({type:B,value:{showDisposition:!1}}),u({type:Z,value:{dispositionType:_e}}),u({type:Se,value:void 0}),u({type:Te,value:void 0}),localStorage.removeItem(null===I.gd||void 0===I.gd?void 0:I.gd.FROM_SCHEDULE_ORDER_CONTAINER));const{localized:n=!1,loggedIn:a=!1}=ye,r=Object(s.gd)(n,a);((e,t)=>{var o;t||Object(S.p)(null===_.a||void 0===_.a||null===(o=_.a.selectOrderType)||void 0===o?void 0:o.name,{...e})})({"%event%":"selectOrderType","%disposition%":Object(s.h)(_e),"%userType%":r},w)},we=async(e,t)=>{const o=e.filter((e=>(null===e||void 0===e?void 0:e.service)===Object(s.Ib)(t)));if(null!==o&&void 0!==o&&o.length){var i,n,a,d,v,O,E,T,p,_,D,b,m;const e={time:"ASAP",interval:null===o||void 0===o||null===(i=o[0].summary.timings.scheduled.periods[0])||void 0===i?void 0:i.interval,date:new Date,selectedTime:"ASAP"},c=await Object(s.jb)(De,!0,je,null===o||void 0===o?void 0:o[0],Object(s.Ib)(t),Ce,e);De(Object(r.f)({data:c,tenantId:M})),u({type:$,value:{oldvalue:Ie,newValue:{store:null===o||void 0===o?void 0:o[0],time:e.time,date:e.date,type:t,interval:e.interval,deliveryAddress:null===l||void 0===l||null===(n=l.scheduleOrderData)||void 0===n?void 0:n.deliveryAddress,selectedTime:e.selectedTime}}}),localStorage.setItem("dispositionOld",JSON.stringify(Ie)),localStorage.setItem("dispositionNew",JSON.stringify({type:t,store:null===o||void 0===o?void 0:o[0],date:e.date,time:e.time,selectedTime:e.selectedTime,interval:e.interval,deliveryAddress:null===l||void 0===l||null===(a=l.scheduleOrderData)||void 0===a?void 0:a.deliveryAddress})),Object(s.pe)(null===o||void 0===o||null===(d=o[0])||void 0===d||null===(v=d.addresses)||void 0===v||null===(O=v[0])||void 0===O||null===(E=O.address)||void 0===E||null===(T=E.addressLines)||void 0===T?void 0:T[0],f.a.ALREADY_SERACHED_LOCATIONS),Object(s.if)();const I={storeID:null===o||void 0===o||null===(p=o[0])||void 0===p?void 0:p.id,disposition:t,postCode:null===o||void 0===o||null===(_=o[0])||void 0===_||null===(D=_.addresses)||void 0===D||null===(b=D[0])||void 0===b||null===(m=b.address)||void 0===m?void 0:m.pinCode};Object(S.y)(I),u({type:B,value:{showSearchStore:!1}}),u({type:ee,value:{isLocalized:!0}}),((e,t)=>{let o=e||null;u({value:{selectedData:{}},type:Q}),localStorage.setItem("currentStoreInfo",JSON.stringify(o)),u({value:o,type:z}),De(Object(j.a)({...ye,localized:!0})),u({value:{selectedDateTime:t},type:X}),u({type:te,value:{selectContentTime:"ASAP"}}),u({type:Pe,value:{deepLinkStoreMode:!1,deeplinkSelectedStoreId:""}}),localStorage.setItem("selectedTile",JSON.stringify({})),localStorage.setItem("dispositionType",pe),localStorage.setItem("tenantReducer",JSON.stringify(x)),localStorage.setItem("dateTimeOrder",JSON.stringify(t)),localStorage.setItem("storeInfo",JSON.stringify(o)),localStorage.setItem("savedTimeOrder","ASAP"),be.push({pathname:"".concat(G)})})(null===o||void 0===o?void 0:o[0],e)}else(e=>{(null===e||void 0===e?void 0:e.toUpperCase())===le?Re({showError:!0,errMsg:Object(c.translateWithI18Next)(ve),errDesc:null,buttonText:Object(c.translateWithI18Next)(Oe),buttonCTA:e=>Me(e,I.kf,!0)}):(null===e||void 0===e?void 0:e.toUpperCase())===ne&&Re({showError:!0,errMsg:Object(c.translateWithI18Next)(ue),errDesc:null,buttonText:Object(c.translateWithI18Next)(Ee),buttonCTA:e=>Me(e,I.Fb,!0)})})(t)};Object(i.useEffect)((()=>{if(ge.length>0&&!fe&&me&&U){var e,i,l;((e,i)=>{null!==e&&void 0!==e&&e.length?we(e,pe):Re({showError:!0,errMsg:"".concat(Object(c.translateWithI18Next)(o)," ").concat(i," ").concat(Object(c.translateWithI18Next)(t)),errDesc:Object(c.translateWithI18Next)(ce),buttonText:Object(c.translateWithI18Next)(se),buttonCTA:e=>xe(e,!0)})})(null===ge||void 0===ge?void 0:ge.filter((e=>{var t,o,i,l,n,a,d,s,r,c,u,v,O;return(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&(null===e||void 0===e||null===(o=e.location)||void 0===o?void 0:o.longitude)&&"OPEN"===(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(l=i.status)||void 0===l?void 0:l.currentStatus)&&(null===e||void 0===e||null===(n=e.summary)||void 0===n||null===(a=n.menu)||void 0===a||null===(d=a.catalogs)||void 0===d?void 0:d.length)&&(null===e||void 0===e||null===(s=e.summary)||void 0===s||null===(r=s.timings)||void 0===r||null===(c=r.operatingHours)||void 0===c?void 0:c.length)>0&&(null===e||void 0===e||null===(u=e.summary)||void 0===u||null===(v=u.timings)||void 0===v||null===(O=v.asap)||void 0===O?void 0:O.isAvailable)})),null===ge||void 0===ge||null===(e=ge[0])||void 0===e||null===(i=e.name)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.value)}}),[ge,fe,U]);const He=e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem("renderComp",!0),u({type:B,value:{showDisposition:!1}}),u({type:q,value:{addToCart:!1}}),u({type:Pe,value:{deepLinkStoreMode:!1,deeplinkSelectedStoreId:""}}),u({type:ie,value:{redirectionOrder:""}}),u({type:oe,value:{findAKFC:window.location.pathname===I.Ae.FIND_STORE}}),k&&Object(s.td)(be)};Object(i.useEffect)((()=>{const e=e=>{27===e.keyCode&&He(e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const Fe=Object(v.jsx)(O,{modalContent:K,onDispositionMethodSubmit:Me}),We=Object(v.jsx)(T,{handleClose:He,DispositionModuleForm:Fe,headerText:J,modalTitleId:"dispostion_selector"});return Object(v.jsxs)(v.Fragment,{children:[(null===Ae||void 0===Ae?void 0:Ae.showError)&&Object(v.jsx)(y.a,{handleClose:null,CartAlertForm:Object(v.jsx)(C.a,{title:null===Ae||void 0===Ae?void 0:Ae.errMsg,contentMsg:null===Ae||void 0===Ae?void 0:Ae.errDesc,confirmButtonText:null===Ae||void 0===Ae?void 0:Ae.buttonText,confirmHandler:null===Ae||void 0===Ae?void 0:Ae.buttonCTA,buttonContainerClass:"deeplink-alert-btn-container"})}),We]})}}}]);