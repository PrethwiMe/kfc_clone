(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[25],{814:function(e,t,a){"use strict";a.r(t),a.d(t,"SearchStoreModule",(function(){return vt}));var s=a(12),i=a(13),o=a(6),n=a(269),l=a(63),r=a(155),c=a(22),d=a(5),u=a(76),v=a(3),j=a.n(v),b=a(25),O=a(807),m=a(14),h=a(128),g=a(330),p=a(212),S=a(43),x=a(266),N=a.n(x),I=a(36),T=a(928),C=a(323),f=a(49),E=a(15),y=a(2);const A=e=>!0===e.includes(",")?e.replace(",",", "):e;var D=e=>{var t,a;const{onMapClickHandler:s,startOrderFormSavedAddress:i}=e,{MapImage:n}=E.a,{SAVED_ADDRESS:l,SAVED_ADDRESSES:r,START_ORDER_TEXT:c}=h.a,{savedAddresses:d}=Object(b.c)((e=>e.profileReducer)),u=null===(t=d.filter((e=>{let{isPrimary:t}=e;return t}))[0])||void 0===t||null===(a=t.addressLines)||void 0===a?void 0:a.join(" ");return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"savedAddress-store-count",children:[Object(y.jsxs)("span",{className:"saved-address-count-title",children:[d.length>1?"".concat(Object(o.translateWithI18Next)(r)," "):"".concat(Object(o.translateWithI18Next)(l))," ","(",d.length,")"," "]}),Object(y.jsx)("div",{"data-testid":"saved-map-link",onClick:e=>s(e,"",u),children:Object(y.jsxs)(p.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:n,alt:"map",className:"map-img"})}),"Map"]})})]}),d.map((e=>Object(y.jsx)("div",{className:"savedAddress-module-card",children:Object(y.jsxs)("div",{className:"inside-card",children:[Object(y.jsxs)("div",{className:"address-section",children:[Object(y.jsxs)("div",{className:"address-type",children:[e.name," : "]}),Object(y.jsxs)("div",{className:"address",children:[(null===e||void 0===e?void 0:e.addressLines[1])&&Object(y.jsxs)("span",{children:[" ",A(null===e||void 0===e?void 0:e.addressLines[1]),", "]}),(null===e||void 0===e?void 0:e.addressLines[0])&&Object(y.jsxs)("span",{children:[" ",A(null===e||void 0===e?void 0:e.addressLines[0]),", "]}),(null===e||void 0===e?void 0:e.city)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.city,", "]}),(null===e||void 0===e?void 0:e.state)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.state," - "]}),(null===e||void 0===e?void 0:e.pinCode)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.pinCode,", "]}),(null===e||void 0===e?void 0:e.country)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.country," "]})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)(I.a,{className:"button redButton search-store-card-btn",onClickHandler:t=>((e,t)=>{var a;const{latitude:s,longitude:o}=t.location,n={userLat:s,userLong:o},l=(null===t||void 0===t||null===(a=t.addressLines)||void 0===a?void 0:a.reduce(((e,t)=>e+" "+t)))+", "+(null===t||void 0===t?void 0:t.city)+", "+(null===t||void 0===t?void 0:t.state)+", "+(null===t||void 0===t?void 0:t.country);i(l,n)})(0,e),"data-testid":"savedaddress-click-test",children:Object(o.translateWithI18Next)(c)})})]})})))]})})},_=a(124);var k=e=>{const{errorMsgToShow:t,onClearTextHandler:a,dispositionType:s,onRetryClickHandler:i,onMapClickHandler:n,showMap:l}=e,{userOrderStateDispatch:r}=Object(v.useContext)(u.a),{DISPOSITION_METHOD:c}=m.a,{DELIVERY_UNAVAILABLE_WITH_CTA:d,TAKE_AWAY:b,TYPE_TAKE_WAY:O,RETRY_TEXT:g,CTA1_SEARCH_DIFF_ADDRESS:p,CTA2_ORDER_TAKEAWAY:x,CTA2_VIEW_MAP_BUTTON_TEXT:N}=h.a,{Error:T}=E.a,C=Object(_.a)({"error-alert-location-popup":!0,"error-alert-location-popup-with-map-view":l});return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsxs)("div",{"data-testid":"alert-locationid",className:"Delivery"===s?C:"error-alert-location-popup error-adjust",children:[Object(y.jsx)(S.a,{srcFile:T,className:"location-alert-icon"}),t!==d&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"location-error-address",children:Object(o.translateWithI18Next)(t)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(I.a,{"data-testid":"btn-searchDifferentAddressClick",className:"button whiteButton blackBorder location-warning-button mr",onClickHandler:e=>(e=>{e.preventDefault(),a()})(e),children:Object(o.translateWithI18Next)(p)}),s.toLowerCase()!==b.toLowerCase()&&Object(y.jsx)(I.a,{"data-testid":"btn-orderTakeawayClick",className:"button whiteButton blackBorder location-warning-button ml",onClickHandler:e=>(e=>{e.preventDefault(),r({type:c,value:{dispositionType:O}})})(e),children:Object(o.translateWithI18Next)(x)})]})]}),t===d&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"location-error-address",children:Object(o.translateWithI18Next)(t)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(I.a,{"data-testid":"btn-onRetryClick",className:"button whiteButton blackBorder location-warning-button mr retrybtn",onClickHandler:e=>i(e),children:Object(o.translateWithI18Next)(g)}),s!==b&&Object(y.jsx)(I.a,{"data-testid":"btn-onMapClick",className:"button whiteButton blackBorder location-warning-button ml retrybtn",onClickHandler:e=>n(e),children:Object(o.translateWithI18Next)(N)})]})]})]})})},w=a(0),L=a(110),R=a(69),F=a(318);const{LocationImage:H,GoogleMapLocationImage:M,SuggestionItemSearchPin:W,clearTextIcon:U,Time_Clock:P,Error:B,MapImage:Y}=E.a,{MIN_SEARCH_CHARACTER_LIMIT:G,SUUGESTED_ITEMS_TEXT:V,ALLOWED_SUGGESTION_LIST:K,ALREADY_SERACHED_LOCATIONS:J,COUNTRY_CODE:z,SUGGESTION_ACTIVE_COLOR:X,SUGGESTION_ACTIVE_OPACITY:Z,BRAND_BLACK:q,COLOR_BLACK:Q,CONFIRM_BUTTON_TEXT:$,LOCATION_WARNING_MESSAGE:ee,RETRY_TEXT:te,USE_THIS_ADDRESS_TEXT:ae,DELIVERY_UNAVAILABLE:se,DELIVERY_UNAVAILABLE_WITH_CTA:ie,NOTAVAILABLE:oe,CTA1_SEARCH_DIFF_ADDRESS:ne,TAKE_AWAY:le,CTA2_ORDER_TAKEAWAY:re}=h.a,ce=(e,t)=>{t()},de=e=>{var t;let{eligibleStoreData:a,suggestedAddress:s,setNegativeScenarioAlert:i,getNegativeView:n}=e,l=null===a||void 0===a?void 0:a.filter((e=>{var t,a,s;return(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.menu)||void 0===a||null===(s=a.catalogs)||void 0===s?void 0:s.length)>0})),r=l.filter((e=>{var t,a,s,i,o,n;const l="CLOSED"===e.summary.status.currentStatus,r=-1!==(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a||null===(s=a.message)||void 0===s?void 0:s.indexOf("EMERGENCY_SHUTDOWN")),c=-1!==(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(o=i.status)||void 0===o||null===(n=o.message)||void 0===n?void 0:n.indexOf("TECHNICAL_SHUTDOWN"));return l&&(r||c)})),c=Object(C.a)("delivery",l);var u;return Object(d.id)(c,Object(d.id)(!(null!==(t=s[0])&&void 0!==t&&t.description),(null===r||void 0===r?void 0:r.length)===l.length))?(Object(d.db)((null===r||void 0===r?void 0:r.length)===(null===l||void 0===l?void 0:l.length),null===l||void 0===l?void 0:l.length)?c=se:null!==(u=s[0])&&void 0!==u&&u.description||(c=ie),i(c),Object(d.Kb)(Object(o.translateWithI18Next)(g.a.contentData.deliveryHeaderText),Object(o.translateWithI18Next)(c)),n(c)):void 0},ue=(e,t,a)=>Object(y.jsx)(I.a,{className:"button blackButton blackBorder delivery-confirm-button delivery-confirm-button-in","data-testid":"btn-confirm",disabled:!e||t,onClick:a,"data-loading":t,children:Object(o.translateWithI18Next)($)}),ve=(e,t,a)=>{var s,i,o,n,l;return null===e||void 0===e||null===(s=e.toString())||void 0===s||null===(i=s.replace)||void 0===i||null===(o=i.call(s,t,""))||void 0===o||null===(n=o.trim())||void 0===n||null===(l=n.replace)||void 0===l?void 0:l.call(n,a,"")};var je=e=>{var t;const{formContent:a={},userPositionHandler:s,singInClickhandler:i,eligibleStoreData:n}=e,{memberText:l="",singInLink:r={},currentLocationText:O="",addressBoxPlaceHolderForDelivery:h=""}=a,{RETAIN_ADDRESS:T}=w.gd,{SCHEDULE_ORDER_DATA:E,DISPOSITION_METHOD:A}=m.a,_=Object(b.c)((e=>e.appStateReducer.userStatus)),{loggedIn:Y}=Object(d.kd)(_),{userOrderState:Q,userOrderStateDispatch:$}=Object(v.useContext)(u.a),{searchStoreData:ie={},dispositionStateData:je={}}=Q,[he,ge]=Object(v.useState)(""),[pe,Se]=Object(v.useState)(!1),[xe,Ne]=Object(v.useState)(!1),[Ie,Te]=Object(v.useState)(!1),[Ce,fe]=Object(v.useState)({lat:28.7,lng:77.1}),[Ee,ye]=Object(v.useState)(!1),[Ae,De]=Object(v.useState)(!1),[_e,ke]=Object(v.useState)([]),[we,Le]=Object(v.useState)(""),Re=Object(v.useRef)(null),[Fe,He]=Object(v.useState)(""),[Me,We]=Object(v.useState)(""),[Ue,Pe]=Object(v.useState)(!1),[Be,Ye]=Object(v.useState)(!1),[Ge,Ve]=Object(v.useState)(!1),[Ke,Je]=Object(v.useState)(""),[ze,Xe]=Object(v.useState)(!1),{dispositionType:Ze=localStorage.getItem("dispositionType")}=je,[qe,Qe]=Object(v.useState)({}),$e=Object(b.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t||null===(a=t.savedAddressPage)||void 0===a?void 0:a.showStateCityAddAddress})),et=Object(L.a)(),{componentOptions:{web:{storeSearch:{postalCodeRemoval:tt=!1,addPickupAndDropoffLatLngInStatusApi:at}}},postalcodeRemoveRegex:st=null,specialCharRemoveRegex:it=null}=Object(b.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),ot=Object(b.c)((e=>{var t,a,s,i;return(null===(t=e.storesReducer)||void 0===t?void 0:t.isGoogleDistanceLoading)||(null===(a=e.storesReducer)||void 0===a?void 0:a.isStoreStatusLoading)||(null===(s=e.storesReducer)||void 0===s?void 0:s.isNearByStoresLoading)||(null===(i=e.storesReducer)||void 0===i?void 0:i.isStoreTimeSlotsLoading)}));Object(v.useEffect)((()=>{Object(C.e)(Ae,Me,g.a)}),[Ae,Me]);const nt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(k,{errorMsgToShow:Object(d.id)(Me,e),onClearTextHandler:jt,onRetryClickHandler:ct,onMapClickHandler:lt,dispositionType:Ze,showMap:Ie})})},lt=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.preventDefault(),Object(C.i)(Ie,Ze),Te(!0),We(!1),t&&!he&&dt(t)},rt=e=>{var t;const a=null===(t=e.toString())||void 0===t?void 0:t.split(" "),s=null===a||void 0===a?void 0:a.filter((e=>!(null!==e&&void 0!==e&&e.includes("+"))));return null===s||void 0===s?void 0:s.join(" ")},ct=e=>{Re.current.select(),Se(!1),ye(!1),We(!1),De(!1)},dt=async function(e,t,a){var i;let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Xe(!1),Je(""),Object(d.db)(null===t,null===a)&&(null===(i=_e[0])||void 0===i?void 0:i.description)&&De(!0),Pe(!0),ye(!0);const n=await Object(x.geocodeByAddress)(e),l=await Object(x.getLatLng)(n[0]);at&&et(Object(R.d)({key:w.qe.LAT_LONG,value:l})),fe(l),ut(e);const r=tt?ve(e,st,it):rt(e);ge(r),o||Se(!0),s({userLat:l.lat,userLong:l.lng}),Ne(!1)};Object(v.useEffect)((()=>{var e;let t=null===(e=localStorage)||void 0===e?void 0:e.getItem(T);Object(C.b)(t,ke,dt)}),[]),Object(v.useEffect)((()=>{let e=null===n||void 0===n?void 0:n.filter((e=>{var t,a;return(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.menu)||void 0===a?void 0:a.catalogs[0])!==oe})),t=null===e||void 0===e?void 0:e.filter((e=>{var t,a;return"CLOSED"!==(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)}));ze&&Ke&&t&&(null===t||void 0===t?void 0:t.length)>=1?(Ve(!1),$({type:E,value:{deliveryAddress:Ke,showScheduleOrderCatering:!0,selectedStoreInfo:t[0]}})):Ke&&Ve(!0)}),[n,Ke,ze]),Object(v.useEffect)((()=>{}),[Ce]);Object(v.useEffect)((()=>{(null===he||void 0===he?void 0:he.length)>2?Se(!Ae):(Se(!1),De(!1),We(""));let e=Object(d.d)(he,G);Ye(e)}),[he]),Object(v.useEffect)((()=>{if(xe){const e=rt(Fe);ge(e),ut(Fe),Ne(!1)}}),[ie]);const ut=e=>{Object(d.pe)(e,J)},vt=e=>{return t=e,Object(d.jd)(JSON.parse(localStorage.getItem(J))).includes(t);var t},jt=()=>{ge(""),Se(!1),We(""),ke(""),Ve(!1)},bt=async(e,t)=>{fe({lat:t.userLat,lng:t.userLong}),Xe(!0);const a=rt(e);ge(a),Qe(t),ut(e),Je(e),s(t)};return Object(y.jsxs)(j.a.Fragment,{children:[Object(y.jsxs)("div",{className:"delivery-module-form","data-testid":"delivery-component",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"login-section",children:[Object(y.jsx)("span",{className:"delivery-member-signin",children:!Y&&me(l,i,r)}),Object(y.jsx)("span",{children:Object(y.jsxs)(p.a,{onClickHandler:async()=>{if(Object(f.o)(),await c.b.BindLocation($e),Object(C.m)(),ke([]),c.b.coordinates){const{latitude:e,longitude:t}=c.b.coordinates;c.b.addFeedback("Check coordinates ".concat(JSON.stringify(c.b.coordinates))),c.b.addFeedback("Check assignment ".concat(JSON.stringify({userLat:e,userLong:t}))),c.b.addFeedback("Check address ".concat(c.b.address)),s({userLat:e,userLong:t}),He(c.b.address);const a=rt(c.b.address);ge(a),dt(c.b.address),Ne(!0),ke([{description:c.b.address}])}Object(F.s)($,!c.b.coordinates)},className:"delivery-location-link","data-testid":"use-my-location",children:[Object(y.jsx)(S.a,{"data-testid":"",srcFile:H,alt:" ",className:"location-img"}),Object(o.translateWithI18Next)(O)]})})]}),Object(y.jsxs)("div",{className:"delivery-address-section",children:[Object(y.jsx)("div",{className:"search-delivery-address",children:Object(y.jsx)("div",{className:"input-delivery-address",children:Object(y.jsx)(N.a,{value:he,onChange:e=>{Pe(!1),ye(!1);const t=rt(e);ge(t),((e,t,a)=>{(null===e||void 0===e?void 0:e.length)<3&&(t(""),a(!1))})(e,ke,Ye),Xe(!1),Je(""),Ve(!1)},onSelect:dt,searchOptions:{componentRestrictions:{country:z}},shouldFetchSuggestions:!0,onError:ce,children:e=>{let{getInputProps:t,suggestions:a,getSuggestionItemProps:s,loading:i}=e;return Object(y.jsxs)("div",{children:[Object(y.jsx)(S.a,{"data-testid":"",srcFile:M,alt:" ",className:"google-location-img"}),Object(y.jsx)("input",{"data-testid":"store-search-input","aria-label":"Enter your delivery address",className:"".concat(Object(d.Tc)(Object(d.id)(Ae,Me),"store-search-input error-border mt-2","store-search-input mt-2")),...t({placeholder:Object(o.translateWithI18Next)(h),ref:Re})}),he&&Object(y.jsx)("img",{src:U,className:"clearTextIcon",onClick:jt,alt:"Clear Text Icon"}),Object(d.db)(Object(d.kc)(a),Be)?Object(y.jsx)("div",{className:"suggestion-list",children:a.map(((e,t)=>{var i;if(null!==e&&void 0!==e&&null!==(i=e.types)&&void 0!==i&&i.some((e=>K.includes(e)))){ke(a);const i=Object(d.Tc)(e.active,{backgroundColor:X,opacity:Z},{backgroundColor:q});return Object(y.jsxs)(j.a.Fragment,{children:[0===t&&Object(y.jsx)("div",{className:"suggestion-items suggest-text",children:Object(o.translateWithI18Next)(V)}),Object(y.jsx)("div",{style:i,children:Object(y.jsx)("div",{...s(e,{className:"suggestion-items"}),children:Object(y.jsxs)("div",{className:"suggested-address-alignment-delivery",children:[Object(y.jsx)("div",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Object(d.Tc)(vt(e.description),P,W),alt:"googleMapLocation",className:"suggetion-pin"})}),Object(y.jsx)("div",{className:"suggestion-description",children:e.description})]})},t)})]})}return""}))}):null]})}})})}),Object(y.jsx)("form",{children:ue(pe,ot,(e=>{var t;if(e.preventDefault(),ze)return Ge&&Se(!1),void bt(he,qe);if(!(Ue&&de({eligibleStoreData:n,suggestedAddress:_e,setNegativeScenarioAlert:We,getNegativeView:nt})||(null===(t=_e[0])||void 0===t||!t.description)&&de({eligibleStoreData:n,suggestedAddress:_e,setNegativeScenarioAlert:We,getNegativeView:nt}))){if(We(""),!Ee){var a,s;const e=null===(a=_e[0])||void 0===a?void 0:a.description;return Le(e),(null===(s=_e[0])||void 0===s?void 0:s.description)&&De(!0),Se(!1),void dt(e,null===_e||void 0===_e?void 0:_e.placeId,_e,!0)}n[0]&&(ye(!1),$({type:E,value:{deliveryAddress:he,showScheduleOrderCatering:!0,selectedStoreInfo:n[0]}}))}}))})]})]}),Ge&&!ot&&Object(y.jsxs)("div",{className:"error-popup-saved-address error-popup-saved-address-map-view1",children:[Object(y.jsx)(S.a,{srcFile:B,className:"location-alert-icon"}),Object(y.jsx)("div",{className:"location-error-address",children:Object(o.translateWithI18Next)(se)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(I.a,{"data-testid":"btn-searchDifferentAddressClick",className:"button whiteButton blackBorder location-warning-button mr",onClickHandler:e=>Ve(!1),children:Object(o.translateWithI18Next)(ne)}),Object(y.jsx)(I.a,{"data-testid":"btn-orderTakeawayClick",className:"button whiteButton blackBorder location-warning-button ml",onClickHandler:e=>{e.preventDefault(),$({type:A,value:{dispositionType:le}})},children:Object(o.translateWithI18Next)(re)})]})]}),!Ie&&Object(y.jsx)("div",{className:"my-3 store-form-separation"}),Ie||Y||Ae||Me?null:Oe(lt),!Ae&&Y&&!Me&&!Ie&&!Ge&&Object(y.jsx)(D,{userPositionHandler:s,startOrderFormSavedAddress:bt,allowOrderNow:Ge,onMapClickHandler:lt})]}),he.length>0&&Object(d.db)(Ae,!Me)?Object(y.jsxs)("div",{"data-testid":"alert-locationid",className:"alert-location-popup",children:[Object(y.jsx)(S.a,{srcFile:B,className:"location-alert-icon"}),Object(y.jsx)("div",{className:"location-error-message",children:Object(o.translateWithI18Next)(ee)}),Object(y.jsx)("div",{className:"location-error-address",children:Object(d.id)(null===(t=_e[0])||void 0===t?void 0:t.description,he)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(I.a,{className:"button whiteButton blackBorder location-warning-button mr",onClick:ct,children:Object(o.translateWithI18Next)(te)}),Object(y.jsx)(I.a,{className:"button whiteButton blackBorder location-warning-button ml","data-testid":"use-this-address",onClick:async e=>{var t;const a=de({eligibleStoreData:n,suggestedAddress:_e,setNegativeScenarioAlert:We,getNegativeView:nt});he.length>0&&Ae&&a||!n[0]&&a||(null!==(t=_e[0])&&void 0!==t&&t.description&&$({type:E,value:{deliveryAddress:we,showScheduleOrderCatering:!0,selectedStoreInfo:Object(d.kd)(n[0])}}),ye(!1))},children:Object(o.translateWithI18Next)(ae)})]})]}):Me&&nt(),Ie?be(Ae,Ce,(e=>{const t=rt(e);dt(t),ge(t)}),Me):null]})};function be(e,t,a,s){return Object(y.jsx)("div",{className:"delivery-map deliver-map-zoom ".concat(Object(d.Tc)(e,"pointer-disabled","")),children:Object(y.jsx)("div",{"data-testid":"view-map-div",className:"view-map",children:Object(y.jsx)(T.a,{"data-testid":"map-comp",latLongValue:t,passAddress:a,locationAlertProp:e,negativeScenarioAlertProp:s,locationAlert:e})})})}function Oe(e){return Object(y.jsx)("div",{className:"map-button-form",children:Object(y.jsxs)("div",{className:"show-map-div","data-testid":"show-map-div",onClick:e,children:[Object(y.jsx)("span",{className:"delivery-map-text",children:Object(o.translateWithI18Next)("pleaseEnterLocation")}),Object(y.jsxs)(p.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Y,alt:" ",className:"map-img"})}),Object(o.translateWithI18Next)("map")]})]})})}function me(e,t,a){return Object(y.jsxs)("div",{"data-id":w.qb.HEADER_SIGN_IN_ATTR_DATA_ID,children:[Object(o.translateWithI18Next)(e),Object(y.jsx)("span",{onClick:t,children:Object(y.jsx)(p.a,{targetType:a.targetType,href:a.linkUrl,className:"delivery-signin-link",children:Object(o.translateWithI18Next)(a.linkText)})})]})}var he=a(121);var ge=e=>{const{handleClose:t,handleGoBack:a,orderModeTypeItem:s,headerText:i,modalTitleId:o="",showLocationError:n}=e;return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(he.a,{"data-testid":"searchStoreCardModal",id:"searchStoreCard",role:"dialog",modalTitleId:o,show:!0,classNames:"search-store-modal extra-small-modal",isNoGrid:n,showCloseBtn:!0,showBackBtn:!0,closeButtonHandler:t,backButtonHandler:a,modalTitle:i,autoFocus:!0,children:s})})},pe=a(61),Se=a(52),xe=a(30),Ne=a(97),Ie=a(921),Te=a(101);const{FavoriteUnfillImage:Ce,FavoriteFillImage:fe,GreenTickImage:Ee}=E.a,ye=(e,t)=>{var a,s;return"INDIA"===(null===t||void 0===t||null===(a=t.country)||void 0===a?void 0:a.toUpperCase())?"".concat((parseFloat(e)/1e3).toFixed(1)," ").concat(null===t||void 0===t||null===(s=t.storeSearch)||void 0===s?void 0:s.distanceMetrics):(parseFloat(e)/1600).toFixed(1)+" mi"};var Ae=Object(pe.j)((e=>{var t,a,s,i,n;const{storeDistance:l="",addresses:r={},isOpen:c=!1,buttonData:j={},map:O={},storeName:g="",currentMarket:x,storeInfo:N={},channels:T=[],storeStatus:f={},onStoreSelectFinish:E,onClickMapHandler:A,isMapView:D,isMobile:_,isFavoriteStore:k,addToFavoriteHandler:L,removeFromFavoriteHandler:R,loggedIn:F,centerIndex:H,storeLength:M}=e,W=null===N||void 0===N||null===(t=N.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.message,{unavailibilities:U}=(null===N||void 0===N||null===(s=N.summary)||void 0===s||null===(i=s.timings)||void 0===i?void 0:i.scheduled)||{},{buttonText:P=""}=Object(d.kd)(null===j||void 0===j?void 0:j.scheduleOrderButtonData),{buttonText:B="",display:Y=!1}=Object(d.kd)(null===j||void 0===j?void 0:j.orderNowButtonData),{userOrderState:G,userOrderStateDispatch:V}=Object(v.useContext)(u.a),{SCHEDULE_ORDER_DATA:K="",SEARCH_ORDER_DATA:J="",SELECTED_TILE_DATA:z="",SCHEDULE_ORDER_TIME_DATA:X="",MENU_URL:Z,SET_DISPOSITION:q,USER_LOCALIZED:Q,CURRENT_STORE_INFO:$,SCHEDULE_ORDER_TIME_PRESERVE_TIME:ee,SET_FORCERELOAD:te}=m.a,{STORE_STATUS_CLOSED:ae}=h.a,{mapText:se=""}=O,ie=T&&Object(C.g)(T),{services:oe=[]}=Object(d.jd)(ie[0]),{operatingHours:ne=[]}=null!==f&&void 0!==f&&null!==(n=f.timings)&&void 0!==n&&n.operatingHours?f.timings:[],le=Object(C.c)(c,ne,W,U),re=Object(b.b)(),ce=Object(b.c)((e=>e.profileReducer)),de=Object(b.c)((e=>e.tenantReducer)),{dispositionType:ue=localStorage.getItem("dispositionType")}=G.dispositionStateData,{allowScheduleOrder:ve}=de.componentOptions.ScheduledDeliveryComponent;let je=Object(b.c)((e=>e.appStateReducer.userStatus));const be=Object(d.Jd)(G.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):G.dispositionNew,Oe=async(t,a)=>{var s,i,o,n,l,r,c,u;t.preventDefault(),t.stopPropagation(),Object(C.l)();const{futureDates:v,scheduled:j={},asap:b}=(null===a||void 0===a||null===(s=a.summary)||void 0===s?void 0:s.timings)||{},{interval:O=0,startEndTime:m={}}=Object(d.db)(null===j||void 0===j||null===(i=j.periods)||void 0===i?void 0:i.length,j.periods[0]),{from:h,to:g}=m,{unavailibilities:p,unavailibilityType:S}=j;Object(Te.j)(h,g,O,null===b||void 0===b?void 0:b.isAvailable,1===v.length&&"INDIA"===(null===de||void 0===de?void 0:de.country),p,S);let x={time:"ASAP",interval:null===(o=a.summary.timings.scheduled.periods[0])||void 0===o?void 0:o.interval,date:new Date,selectedTime:"ASAP"};if(null===be||be.type!==ue||be.store.id!==a.id||be.deliveryAddress!==(null===G||void 0===G||null===(n=G.scheduleOrderData)||void 0===n?void 0:n.deliveryAddress)){let e=await Object(d.z)(a,Object(d.Ib)(ue),ce.customerId,x);re(Object(xe.m)("")),re(Object(xe.f)({data:e,tenantId:de.tenantId}))}localStorage.setItem("renderComp",!0),V({type:q,value:{oldvalue:be,newValue:{type:ue,store:a,date:x.date,time:x.time,interval:x.interval,selectedTime:x.selectedTime,deliveryAddress:null===G||void 0===G||null===(l=G.scheduleOrderData)||void 0===l?void 0:l.deliveryAddress}}}),localStorage.setItem("dispositionOld",JSON.stringify(be)),localStorage.setItem("dispositionNew",JSON.stringify({type:ue,store:a,date:x.date,time:x.time,selectedTime:x.selectedTime,interval:x.interval,deliveryAddress:null===G||void 0===G||null===(r=G.scheduleOrderData)||void 0===r?void 0:r.deliveryAddress})),Object(d.if)();const N={storeID:null===a||void 0===a?void 0:a.id,disposition:ue,postCode:null===a||void 0===a||null===(c=a.addresses[0])||void 0===c||null===(u=c.address)||void 0===u?void 0:u.pinCode};E(N),V({type:J,value:{showSearchStore:!1}}),V({type:Q,value:{isLocalized:!0}}),((t,a)=>{let s=Object(d.Tc)(t,t,null);V({type:z,value:{selectedData:{}}}),localStorage.setItem("currentStoreInfo",JSON.stringify(s)),V({type:$,value:s}),re(Object(Ne.a)({...je,localized:!0})),V({type:X,value:{selectedDateTime:a}}),V({type:ee,value:{selectContentTime:"ASAP"}}),V({type:te,value:{forceReload:!0}}),localStorage.setItem("tenantReducer",JSON.stringify(de)),localStorage.setItem("selectedTile",JSON.stringify({})),localStorage.setItem("dispositionType",ue),localStorage.setItem("storeInfo",JSON.stringify(s)),localStorage.setItem("dateTimeOrder",JSON.stringify(a)),localStorage.setItem("savedTimeOrder","ASAP");const i=localStorage.getItem(w.gd.SET_LOCATION);setTimeout((()=>{!G.fromPdpPage&&!i&&e.history.push({pathname:"".concat(Z)})}),500)})(a,x)},me=(e,t)=>{var a,s,i;console.log("{{ }} schedule order button click",{event:e,store:t,module:null===t||void 0===t?void 0:t.module}),e.preventDefault(),e.stopPropagation(),V({type:Q,value:{isLocalized:!0}}),V({type:K,value:{showScheduleOrderCatering:!0,selectedStoreInfo:t}}),V({type:J,value:{showSearchStore:!1}});const{futureDates:o,scheduled:n={},asap:l}=(null===t||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.timings)||{},{interval:r=0,startEndTime:c={}}=Object(d.db)(null===n||void 0===n||null===(s=n.periods)||void 0===s?void 0:s.length,null===n||void 0===n||null===(i=n.periods)||void 0===i?void 0:i[0])||{},{from:u,to:v}=c,{unavailibilities:j,unavailibilityType:b}=n;Object(Te.j)(u,v,r,null===l||void 0===l?void 0:l.isAvailable,1===(null===o||void 0===o?void 0:o.length)&&"INDIA"===(null===de||void 0===de?void 0:de.country),j,b),Object(C.k)(),(e=>{let t=Object(d.Tc)(e,e,null);V({type:z,value:{selectedData:{}}}),localStorage.setItem("currentStoreInfo",JSON.stringify(t)),V({type:$,value:t})})(t)},he=Object(Ie.a)(N),ge=Object(y.jsxs)("div",{className:"store-card ".concat(Object(d.db)(D,!_)?"store-card-map-view":"store-card-mobile-view"),style:(()=>{if(D&&_)return{margin:"0",position:"absolute","max-height":"325px",bottom:"0"}})(),"data-testid":"store-card",id:"map-store-card",children:[Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"store-dist-container ".concat(D&&"map-view"),children:[Object(y.jsx)("div",{className:"store-name-container",children:Object(y.jsx)("span",{className:"card-store-name",children:g})}),Object(y.jsx)("span",{className:"store-distance",children:ye(l,de)})]}),D&&Object(y.jsx)("span",{className:"store-index",children:"".concat(H+1," of ").concat(M)})]}),Object(y.jsxs)("div",{className:"card-content",children:[Object(y.jsx)("div",{className:"order-items",children:(pe=oe,!!Object(d.Kd)(pe)&&pe.map(((e,t)=>{const{PICK_UP:a,TAKE_AWAY:s}=h.a;return Object(y.jsxs)("div",{className:"store-order-options",children:[Object(y.jsx)("span",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Ee,alt:"tick",className:"tick-image"})}),Object(y.jsx)("span",{children:e===a?Object(o.translateWithI18Next)(s):e})]},t)})))}),Object(y.jsxs)("div",{className:"w-100",children:[Object(y.jsx)("span",{className:"store-address",children:Object(d.Wb)(r)}),!D&&Object(y.jsx)("span",{className:"map-link","data-testid":"map-handler",onClick:()=>A(),children:Object(y.jsx)(p.a,{className:"card-map-link",children:se})})]}),Object(y.jsxs)("div",{className:"info-timing ".concat(!c&&"info-timingClosed"),children:[c?"":Object(y.jsx)("span",{children:Object(o.translateWithI18Next)(ae)}),Object(y.jsx)("span",{className:"".concat(!c&&"list-circle"),children:le})]}),Object(y.jsx)("div",{className:"facilities",children:he&&he.map((e=>Object(y.jsx)(S.a,{"data-testid":"",srcFile:e.image,alt:e.label||"",className:"facility-img",title:e.label},e.key)))})]}),Object(y.jsxs)("div",{className:"w-100 d-flex mt-2 searchstoreBtn",children:[F?k&&Object(y.jsx)(S.a,{"data-testid":"favorite-img",srcFile:fe,alt:"favorite",className:"favorite-img",onClick:()=>R()})||Object(y.jsx)(S.a,{"data-testid":"unfavorite-img",srcFile:Ce,alt:"favorite",className:"favorite-img",onClick:()=>L()}):"",Y&&c&&Object(y.jsx)(I.a,{"data-testid":"order-now",className:"button redButton search-store-card-btn ".concat(D&&!_?"cardMapView":null),onClickHandler:e=>Oe(e,N),children:B}),ve&&Object(y.jsx)(I.a,{"data-testid":"schedule-order",className:"button whiteButton blackBorder search-store-card-btn schedule-order-btn ".concat(Object(d.db)(D,!_)?"cardMapView":null),onClickHandler:e=>me(e,N),children:P})]})]});var pe;return x!==h.a.COUNTRY_CODE_INDIA||c?ge:null})),De=a(11),_e=a(4);const{FavoriteUnfillImage:ke,FavoriteFillImage:we,GreenTickImage:Le}=E.a,{BROWSE_MENU:Re,PICK_UP:Fe,TAKE_AWAY:He,STORE_STATUS_CLOSED_CAPS:Me,STORE_STATUS_CLOSED:We,INDIA:Ue}=h.a,Pe=e=>e===Fe?He:e,Be=(e,t)=>{if(e&&t)return{"max-height":"325px",margin:"0",position:"absolute",bottom:"0"}};var Ye=Object(pe.j)((e=>{var t,a,s,i,n,l,r,c,j,O,h,g;const{key:x="",storeName:N="",storeDistance:T="",orderTypes:E=[],addresses:A={},storeStatus:D={},onClickMapHandler:_,isMapView:k,isMobile:L,isFavoriteStore:R,addToFavoriteHandler:F,removeFromFavoriteHandler:H,map:M,loggedIn:W,storeInfo:U={},centerIndex:P,storeLength:B,onStoreSelectFinish:Y}=e,G=((e,t)=>{var a,s,i,o,n;if((null===e||void 0===e||null===(a=e.timings)||void 0===a||null===(s=a.operatingHours[0])||void 0===s?void 0:s.day)===w.cc)return null===(i=e.timings)||void 0===i||null===(o=i.operatingHours[0])||void 0===o||null===(n=o.availableHours)||void 0===n?void 0:n.from;{var l;const a=null===e||void 0===e||null===(l=e.timings)||void 0===l?void 0:l.operatingHours,s=Object(De.E)(null===e||void 0===e?void 0:e.timeZone,t).toLowerCase();let i=0,o=[],n=[];var r,c,u,v;return null===a||void 0===a||a.forEach(((e,t)=>{var a;(null===e||void 0===e||null===(a=e.day)||void 0===a?void 0:a.toLowerCase())===s&&(i=t,n.push(e))})),null!==n&&void 0!==n&&n.length&&(null===n||void 0===n||n.forEach((t=>{var a;const s=Object(d.D)(null===e||void 0===e?void 0:e.timeZone,w.sb.HHmm);Object(d.Ze)(null===t||void 0===t||null===(a=t.availableHours)||void 0===a?void 0:a.from)>s&&o.push(t)}))),null!==o&&void 0!==o&&o.length?null===(r=o[0])||void 0===r||null===(c=r.availableHours)||void 0===c?void 0:c.from:null===(u=a[i<(null===a||void 0===a?void 0:a.length)-1?i+1:i])||void 0===u||null===(v=u.availableHours)||void 0===v?void 0:v.from}})(D,w.Of),V=G,K=null===D||void 0===D||null===(t=D.timings)||void 0===t||null===(a=t.scheduled)||void 0===a?void 0:a.unavailibilities,J=null===D||void 0===D||null===(s=D.status)||void 0===s?void 0:s.message,{mapText:z=""}=Object(d.kd)(M),{MENU_URL:X,SEARCH_ORDER_DATA:Z,CURRENT_STORE_INFO:q,DISPOSITION_DATA:Q,USER_LOCALIZED:$,SCHEDULE_ORDER_DATA:ee="",SELECTED_TILE_DATA:te=""}=m.a,{userOrderState:ae,userOrderStateDispatch:se}=Object(v.useContext)(u.a);let ie=Object(b.c)((e=>e.appStateReducer.userStatus));const oe=Object(b.c)((e=>e.tenantReducer)),ne=Object(b.b)(),{futureDates:le,scheduled:re,asap:ce}=Object(d.kd)(null===U||void 0===U||null===(i=U.summary)||void 0===i?void 0:i.timings),{unavailibilities:de,unavailibilityType:ue}=Object(d.kd)(re),{interval:ve=0,startEndTime:je={}}=Object(d.kd)((null===re||void 0===re||null===(n=re.periods)||void 0===n?void 0:n.length)&&(null===re||void 0===re?void 0:re.periods[0])),{from:be,to:Oe}=Object(d.kd)(je),{dispositionType:me=localStorage.getItem("dispositionType")}=ae.dispositionStateData,he=Object(d.Jd)(ae.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):ae.dispositionNew,ge=()=>{var e;return Object(Te.j)(be,Oe,ve,null===ce||void 0===ce?void 0:ce.isAvailable,1===le.length&&(null===oe||void 0===oe||null===(e=oe.country)||void 0===e?void 0:e.toUpperCase())===Ue,de,ue)},pe=(e,t)=>{var a,s,i,o;e.preventDefault(),e.stopPropagation(),console.log("{{ }} schedule order button click",{event:e,store:t,module:null===t||void 0===t?void 0:t.module}),se({type:$,value:{isLocalized:!0}}),se({type:Z,value:{showSearchStore:!1}}),se({type:ee,value:{showScheduleOrderCatering:!0,selectedStoreInfo:t}});const{futureDates:n,scheduled:l,asap:r}=null===t||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.timings,{interval:c=0,startEndTime:d={}}=(null===l||void 0===l||null===(s=l.periods)||void 0===s?void 0:s.length)&&(null===l||void 0===l?void 0:l.periods[0]),{from:u,to:v}=d;Object(Te.j)(u,v,c,null===r||void 0===r?void 0:r.isAvailable,1===n.length&&"INDIA"===(null===oe||void 0===oe?void 0:oe.country),de,ue),Object(C.k)(),(e=>{let t=e||null;se({type:te,value:{selectedData:{}}}),localStorage.setItem("currentStoreInfo",JSON.stringify(t)),se({type:q,value:t})})(t);const j={storeID:null===t||void 0===t?void 0:t.id,disposition:me,postCode:null===t||void 0===t||null===(i=t.addresses[0])||void 0===i||null===(o=i.address)||void 0===o?void 0:o.pinCode};Y(j)},Se=e=>ge().length?"Today":"Tomorrow",xe=Object(Ie.a)(U);return Object(y.jsxs)("div",{className:"store-card ".concat(k&&!L?"store-card-map-view":"store-card-mobile-view"),style:Be(k,L),"data-testid":"closed-card",id:"map-store-card",children:[Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"store-dist-container ".concat(k&&"map-view"),children:[Object(y.jsx)("div",{className:"store-name-container",children:Object(y.jsx)("span",{className:"card-store-name",children:N})}),Object(y.jsx)("span",{className:"store-distance",children:ye(T,oe)})]}),k&&Object(y.jsx)("span",{className:"store-index",children:"".concat(P+1," of ").concat(B)})]}),Object(y.jsxs)("div",{className:"card-content",children:[Object(y.jsx)("div",{className:"order-items",children:(Ce=E,Ce.map(((e,t)=>Object(y.jsxs)("div",{className:"store-order-options",children:[Object(y.jsx)("span",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Le,alt:"tick",className:"tick-image"})}),Object(y.jsx)("span",{children:Pe(e)})]},t))))}),Object(y.jsxs)("div",{className:"w-100",children:[Object(y.jsx)("span",{className:"store-address",children:Object(d.Wb)(A)}),!k&&Object(y.jsx)("span",{className:"map-link","data-testid":"map-handler",onClick:()=>_(),children:Object(y.jsx)(p.a,{className:"card-map-link",children:z})})]}),Object(y.jsx)("div",{className:"info-timingClosed",children:Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:Object(d.fb)((null===(l=D.status)||void 0===l?void 0:l.currentStatus)===Me,0===(null===D||void 0===D||null===(r=D.timings)||void 0===r||null===(c=r.scheduled)||void 0===c||null===(j=c.periods)||void 0===j?void 0:j.length))?Object(y.jsx)("span",{className:"closed-text",children:We}):""}),Object(y.jsx)("li",{children:(null===K||void 0===K?void 0:K.length)>0&&Object(De.R)(null===(O=K[0])||void 0===O?void 0:O.to,"HH MM","HH:MM")<=Object(De.R)(Oe,"HH MM","HH:MM")?(()=>{var e,t,a,s,i,o;return J===w.Hc?"Open Today ".concat((null===(e=K[0])||void 0===e?void 0:e.from)&&Object(De.R)(null===(t=K[0])||void 0===t?void 0:t.from,"hh mm","hh:mm a")):J===w.Ic?"Open ".concat(Se(null===(a=D.timings)||void 0===a||null===(s=a.scheduled)||void 0===s||s.date)," ").concat(V&&Object(De.R)(V,"hh mm","hh:mm a")):"Open Today ".concat((null===(i=K[0])||void 0===i?void 0:i.to)&&Object(De.R)(null===(o=K[0])||void 0===o?void 0:o.to,"hh mm","hh:mm a"))})():"Open ".concat(Se(null===(h=D.timings)||void 0===h||null===(g=h.scheduled)||void 0===g||g.date)," ").concat(V&&Object(De.R)(V,"hh mm","hh:mm a"))})]})}),Object(y.jsx)("div",{className:"facilities",children:xe&&xe.map((e=>Object(y.jsx)(S.a,{"data-testid":"",srcFile:e.image,alt:e.label||"",className:"facility-img",title:e.label},e.key)))}),Object(y.jsxs)("div",{className:"w-100 d-flex mt-2",children:[W&&(R?Object(y.jsx)(S.a,{"data-testid":"favorite-img",srcFile:we,alt:"favorite",className:"favorite-img",onClick:()=>H()}):Object(y.jsx)(S.a,{"data-testid":"unfavorite-img",srcFile:ke,alt:"favorite",className:"favorite-img",onClick:()=>F()})),0===ge().length?Object(y.jsx)(I.a,{className:"button whiteButton blackBorder store-card-btn browse-menu-btn","data-testid":"browser-menu-closed-store",onClickHandler:()=>{var t,a;const s={storeID:null===U||void 0===U?void 0:U.id,disposition:null===U||void 0===U?void 0:U.service,postCode:null===U||void 0===U||null===(t=U.addresses[0])||void 0===t||null===(a=t.address)||void 0===a?void 0:a.pinCode};Object(f.y)(s),Object(d.jf)(U,se,he,me),ne(Object(Ne.a)({...ie,localized:!0})),Object(d.if)(),se({type:Q,value:{showDisposition:!1}}),se({type:Z,value:{showSearchStore:!1}}),e.history.push({pathname:"".concat(X)})},children:Object(o.translateWithI18Next)(Re)}):Object(y.jsx)(I.a,{className:"button whiteButton blackBorder store-card-btn schedule-btn","data-testid":"schedule-order-closed-store",onClickHandler:e=>pe(e,U),children:Object(o.translateWithI18Next)(_e.a.SCHEDULE_ORDER_BTN)})]})]})]},x);var Ce})),Ge=a(342),Ve=a(55);const{Error:Ke,LocationImage:Je,MapImage:ze,Union:Xe,GoogleMapLocationImage:Ze,SuggestionItemSearchPin:qe,Time_Clock:Qe,SuccessImg:$e}=E.a,et=e=>!0===e?"store-count-title fav-store savedKFC":"store-count-title active-tab fav-store savedKFC",tt=(e,t)=>e&&t?"store-count-title active-tab savedKFC":e&&!t?"store-count-title savedKFC":e?void 0:"store-count-title  guest-color",at=e=>{var t,a,s;return(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.menu)||void 0===a||null===(s=a.catalogs)||void 0===s?void 0:s.length)>0},st=e=>e?Xe:ze,it=e=>{let t=document.querySelector(".searchStore-module-form .store-count a.store-location-link");"ArrowDown"===e.key&&void 0!=typeof t&&null!=t&&t.focus()};var ot=Object(pe.j)((e=>{var t;const{formContent:a={},storeData:s=[],eligibleStoreData:i=[],favoriteStoreData:n=[],userPositionHandler:r,singInClickhandler:O,currentMarket:E,storeCardLimit:A=1/0,onStoreSelectFinish:D,handleGoBack:_,noStoresList:L,favoriteStoreHandler:R}=e,{memberText:H="",singInLink:M={},currentLocationText:W="",addressBoxPlaceHolderForSearchStore:U="",mapText:P=""}=a,{MIN_SEARCH_CHARACTER_LIMIT:B,SUUGESTED_ITEMS_TEXT:Y,ALLOWED_SUGGESTION_LIST:G,ALREADY_SERACHED_LOCATIONS:V,COUNTRY_CODE:K,SUGGESTION_ACTIVE_COLOR:J,SUGGESTION_ACTIVE_OPACITY:z,BRAND_BLACK:X,STORE_STATUS_OPEN:Z,LIST_TEXT:q,TYPE_TAKE_WAY:Q,STORE_STATUS_CLOSED_CAPS:$,BROWSE_MENU:ee,CTA1_SEARCH_DIFF_ADDRESS:te,DINEIN_UNAVAILABLE:ae,CTA2_ORDER_TAKEAWAY:se,TAKEAWAY_UNAVAILABLE_WITH_CTA:ie,DINE_IN_SERVICE:oe,DINE_IN:ne,TYPE_DELIVERY:le,TAKE_AWAY:re}=h.a,{DISPOSITION_METHOD:ce}=m.a,{MENU_URL:de,SEARCH_ORDER_DATA:ue,CURRENT_STORE_INFO:je,DISPOSITION_DATA:be,INDIA:Oe}=m.a,{userOrderState:me}=j.a.useContext(u.a),{searchStoreData:he={},dispositionStateData:ge={},scheduleOrderData:pe={}}=me,{dispositionType:xe=localStorage.getItem("dispositionType")}=ge,[Ne,Ie]=j.a.useState(""),[Ce,fe]=Object(v.useState)({}),[Ee,ye]=Object(v.useState)({}),[De,_e]=Object(v.useState)(!1),[ke,we]=Object(v.useState)(!1),[Le,Re]=j.a.useState([]),[Fe,He]=j.a.useState(!1),[Me,We]=Object(v.useState)(null),[Ue,Pe]=Object(v.useState)(Object(d.Ud)(window.innerWidth));let Be=0;const[ze,Xe]=Object(v.useState)(0),[et,ot]=Object(v.useState)(""),[rt,ct]=j.a.useState(!1),[dt,ut]=j.a.useState([]),[vt,jt]=j.a.useState([]),{userOrderStateDispatch:bt}=Object(v.useContext)(u.a);let Ot,mt=0;const ht=Object(b.b)(),gt=Object(b.c)((e=>e.tenantReducer)),{tenantId:pt={},componentOptions:{web:{storeSearch:{postalCodeRemoval:St=!1}}},postalcodeRemoveRegex:xt=null,specialCharRemoveRegex:Nt=null}=gt||{};let It=0;const[Tt,Ct]=j.a.useState(!1),ft=Object(b.c)((e=>e.appStateReducer)),{isLoading:Et}=Object(b.c)((e=>Object(d.kd)(e.LoaderReducer))),{userStatus:yt={}}=ft,{loggedIn:At=!1}=yt,[Dt,_t]=j.a.useState([]),[kt,wt]=j.a.useState(!0),{customerId:Lt}=Ve.a.getInstance(),[Rt,Ft]=Object(v.useState)(325),[Ht,Mt]=Object(v.useState)(!1),Wt=()=>{const e=Object(d.Ud)(window.innerWidth);Pe(e)};Object(v.useEffect)((()=>(window.addEventListener("resize",Wt),()=>{window.removeEventListener("resize",Wt)})),[Ue]),Object(v.useEffect)((()=>(window.addEventListener("keydown",it),()=>{window.removeEventListener("keydown",it)})));const Ut=null===(t=document.getElementById("map-store-card"))||void 0===t?void 0:t.clientHeight;Object(v.useEffect)((()=>{Ut&&Rt!==Ut&&Ft(Ut)}),[Ut]);const Pt=async e=>{const t=await Object(x.geocodeByAddress)(e),a=await Object(x.getLatLng)(t[0]);fe(a),ye(a),Be=0,Gt(e),Ie(e),r({userLat:a.lat,userLong:a.lng}),He(!1);const s=Boolean(Object(d.db)(Object(d.id)(Ne,e),Object(d.db)(0===Be,0===mt)));ct(s)},Bt=()=>{localStorage.setItem("currentStoreInfo",JSON.stringify(null)),bt({type:je,value:null}),bt({type:be,value:{showDisposition:!1}}),bt({type:ue,value:{showSearchStore:!1}}),e.history.push({pathname:"".concat(de)})},Yt=(e,t,a)=>Object(y.jsx)("div",{className:"store-card",children:xe.toUpperCase()===Q?Object(y.jsxs)("div",{className:"no-store",children:[Object(y.jsx)("div",{className:"no-store-icon",children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Ke,alt:"no store"})}),Object(y.jsx)("div",{className:"no-store-text",children:e()}),Object(y.jsx)(I.a,{"data-testid":"menupageBtn-id",className:"button whiteButton blackBorder store-card-btn",onClickHandler:Kt,children:Object(o.translateWithI18Next)(a)})]}):Object(y.jsxs)("div",{className:"no-store",children:[Object(y.jsx)("div",{className:"no-store-icon",children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Ke,alt:"no store"})}),Object(y.jsx)("div",{className:"no-store-text",children:e()}),Object(y.jsx)(I.a,{"data-testid":"menupageBtn-id",className:"button whiteButton blackBorder store-card-btn dine-in-error-btn",onClickHandler:Kt,children:Object(o.translateWithI18Next)(a)}),Object(y.jsx)(I.a,{"data-testid":"orderTakeaway-click-btn",className:"button whiteButton blackBorder location-warning-button ml dine-in-error-btn",onClick:e=>(e=>{e.preventDefault(),bt({type:ce,value:{dispositionType:re}}),Pt(Ne)})(e),children:Object(o.translateWithI18Next)(se)})]})});Object(v.useEffect)((()=>{if(null!==pe&&void 0!==pe&&pe.changeFlow||null===he||void 0===he||!he.searchedPlaceNonLocalized){if(localStorage.getItem("searchStoreByAttribute")){let e=localStorage.getItem("searchStoreByAttribute");Ie(e),Pt(e)}}else Pt(he.searchedPlaceNonLocalized)}),[]);Object(v.useEffect)((()=>{if(Ne){let e=i.filter(at);if(e.length>0){let t=e.filter((e=>{var t,a,s,i,o,n;return(null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)===Z&&(null===(s=e.summary)||void 0===s||null===(i=s.timings)||void 0===i||null===(o=i.scheduled)||void 0===o||null===(n=o.periods)||void 0===n?void 0:n.length)>0}));if(t.length>=A){let e=t.slice(0,A);Re(e)}else if(t.length<A){let a=A-t.length,s=e.filter((e=>{var t,a,s,i,o,n;return(null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)===$||0===(null===(s=e.summary)||void 0===s||null===(i=s.timings)||void 0===i||null===(o=i.scheduled)||void 0===o||null===(n=o.periods)||void 0===n?void 0:n.length)})).slice(0,a),i=t.concat(s);Re(i)}}else Be=0,Re([])}else Re([]),_t([]),ut([]),ct(!1)}),[i,Ne]),Object(v.useEffect)((()=>{if(i.length>0){R({userLat:Ee.lat,userLong:Ee.lng});const e=n.sort(((e,t)=>Object(C.d)(e,t))),t=null===e||void 0===e?void 0:e.filter((e=>{var t,a;return null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus}));_t(t)}}),[i,n.length]),Object(v.useEffect)((()=>{if(Fe){const e=St?ve(et,xt,Nt):et;Ie(e),Gt(et),He(!1)}localStorage.getItem("ALREADY_SERACHED_LOCATIONS")!==Ne&&(Re([]),ut([]),We(""),_t([]));let e=Object(d.d)(Ne,B);Mt(e)}),[he,Ne,Fe,et]);const Gt=e=>{Object(d.pe)(e,V)},Vt=e=>{return t=e,Object(d.jd)(JSON.parse(localStorage.getItem(V))).includes(t);var t},Kt=()=>{Ie(""),_t([]),Re([]),ut([]),ct(!1),We(""),_e(!1)},Jt=Object(v.useCallback)((async()=>{const e=await Promise.all(Le.map((async e=>({lat:e.location.latitude,lng:e.location.longitude}))));fe(e)}),[Le]),zt=Object(v.useCallback)((async()=>{const e=await Promise.all(Dt.map((async e=>({lat:e.location.latitude,lng:e.location.longitude}))));fe(e)}),[Dt]),Xt=()=>{Object(C.i)(De,xe),_e(!De),we(!De)},Zt=(e,t)=>{We(e),Xe(t)},qt=()=>{Jt(),we(!0),We(Object(d.kd)(Le[ze]))},Qt=async()=>{await zt(),we(!0),We(Object(d.kd)(Dt[ze]))};Object(v.useEffect)((()=>{((e,t,a,s)=>{let{TYPE_TAKE_WAY:i,DINE_IN:o,dispositionType:n,callSelectedStore:l,callSelectedFavStore:r}=s;e?t.length&&[i,o].indexOf(n.toUpperCase())>-1&&l():a.length&&[i,o].indexOf(n.toUpperCase())>-1&&r()})(kt,Le,Dt,{TYPE_TAKE_WAY:Q,DINE_IN:ne,dispositionType:xe,callSelectedStore:qt,callSelectedFavStore:Qt});let e=Le.filter((e=>{var t,a,s,i,o,n;return(null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)===$||0===(null===(s=e.summary)||void 0===s||null===(i=s.timings)||void 0===i||null===(o=i.scheduled)||void 0===o||null===(n=o.periods)||void 0===n?void 0:n.length)})),t=Le.filter((e=>{var t,a,s,i,o,n,l,r,c;const d="CLOSED"===e.summary.status.currentStatus,u=-1!==(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a||null===(s=a.message)||void 0===s?void 0:s.indexOf("EMERGENCY_SHUTDOWN")),v=-1!==(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(o=i.status)||void 0===o||null===(n=o.message)||void 0===n?void 0:n.indexOf("TECHNICAL_SHUTDOWN")),{futureDates:j,scheduled:b,asap:O}=null===e||void 0===e||null===(l=e.summary)||void 0===l?void 0:l.timings,{unavailibilities:m,unavailibilityType:h}=b,{interval:g=0,startEndTime:p={}}=b&&(null===b||void 0===b||null===(r=b.periods)||void 0===r?void 0:r.length)&&(null===b||void 0===b?void 0:b.periods[0]),{from:S,to:x}=p,N=Object(Te.j)(S,x,g,null===O||void 0===O?void 0:O.isAvailable,1===j.length&&(null===gt||void 0===gt||null===(c=gt.country)||void 0===c?void 0:c.toUpperCase())===Oe,m,h);return(!N||0===N.length)&&d&&(u||v)}));ut(e),jt(t)}),[Le,ze,Me,L,ne,$,Q,xe,Jt,kt,Dt]);const $t=e=>{We("");let t=e?ze+1:ze-1;Xe(t),((e,t,a,s,i)=>{t(!0===e?Object(d.kd)(a[i]):null===s||void 0===s?void 0:s[i])})(kt,We,Le,Dt,t)},ea=e=>{wt(e)},ta=()=>{localStorage.setItem("setFav",!0),localStorage.removeItem("renderComp")},aa=e=>{ta(),ht(Object(l.w)({data:{storeId:e.id},tenantId:pt,customerId:Lt,dispatch:"dispatch"})),Ct(!0)},sa=e=>{ta(),ht(Object(l.x)({tenantId:pt,customerId:Lt,storeId:Object(d.kd)(e.id),dispatch:"dispatch"})),Ct(!1)};Object(v.useEffect)((()=>{Tt&&Se.b.dark(Object(y.jsxs)("div",{className:"img-text-div",children:[Object(y.jsx)(S.a,{"data-testid":"",srcFile:$e,alt:"success",className:"success-img"}),"Saved to your favorite store"]}),{className:"favorites",bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:Se.b.POSITION.BOTTOM_CENTER,autoClose:1e3})}),[n.length]),Object(v.useEffect)((()=>{0!==Be||0!==mt||!rt||L||Et||(xe.toUpperCase()===Q?Object(d.Kb)(Object(o.translateWithI18Next)(g.a.contentData.searchStoreHeaderText),Object(o.translateWithI18Next)(ie)):Object(d.Kb)(Object(o.translateWithI18Next)(g.a.contentData.searchStoreHeaderText),Object(o.translateWithI18Next)(ae)))}),[Be,mt,rt,L,Et]);const ia=(e,t)=>{var a,i,o,n;const l=(null===e||void 0===e||null===(a=e.summary)||void 0===a||null===(i=a.status)||void 0===i?void 0:i.currentStatus)===Z,r=e.availableServicesPerChannel&&Object(C.g)(e.availableServicesPerChannel),{services:c=[]}=r[0],u="".concat(e.name[0].value,"_").concat(t);return Object(y.jsx)(j.a.Fragment,{children:l?Object(y.jsx)(Ae,{"data-testid":t,storeName:Object(d.md)(e.name[0].value),storeDistance:Object(d.id)(null===e||void 0===e||null===(o=e.distance)||void 0===o?void 0:o.value,null===e||void 0===e?void 0:e.distance),channels:e.availableServicesPerChannel,storeStatus:e.summary,addresses:e.addresses,...s[0],storeInfo:e,currentMarket:E,isOpen:l,isMapView:!0,onStoreSelectFinish:D,isMobile:Ue,centerIndex:ze,storeLength:Object(d.Tc)(kt,null===Le||void 0===Le?void 0:Le.length,null===Dt||void 0===Dt?void 0:Dt.length)},t):Object(y.jsx)(Ye,{orderTypes:c,storeName:Object(d.md)(e.name[0].value),storeDistance:Object(d.id)(null===e||void 0===e||null===(n=e.distance)||void 0===n?void 0:n.value,null===e||void 0===e?void 0:e.distance),addresses:e.addresses,storeStatus:e.summary,onStoreSelectFinish:D,isMobile:Ue,isMapView:!0,storeInfo:e,mapText:P,onClick:()=>{Xt(),Jt()},...s[0],onPositionChangeHandler:$t,centerIndex:ze,storeLength:Object(d.Tc)(kt,null===Le||void 0===Le?void 0:Le.length,null===Dt||void 0===Dt?void 0:Dt.length)},u)})},oa=Dt.map(((e,t)=>{var a,i,o,n;if((null===(a=e.summary)||void 0===a||null===(i=a.status)||void 0===i?void 0:i.currentStatus)===Z){var l,r;const a=(null===(l=e.summary)||void 0===l||null===(r=l.status)||void 0===r?void 0:r.currentStatus)===Z;return a&&It++,Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(Ae,{"data-testid":t,storeName:Object(d.md)(e.name[0].value),storeDistance:Object(d.md)(e.distance.value),channels:e.availableServicesPerChannel,storeStatus:e.summary,addresses:e.addresses,...s[0],storeInfo:e,currentMarket:E,isOpen:a,onStoreSelectFinish:D,isMobile:Ue,loggedIn:At,onClickMapHandler:()=>{Zt(e,t),Xt()},isFavoriteStore:!0,addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{sa(e)}},t)})}if((null===(o=e.summary)||void 0===o||null===(n=o.status)||void 0===n?void 0:n.currentStatus)===$){It++;const a=e.availableServicesPerChannel&&Object(C.g)(e.availableServicesPerChannel),{services:i=[]}=a[0],o="".concat(e.name[0].value,"_").concat(t);return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(Ye,{storeName:Object(d.md)(e.name[0].value),storeDistance:Object(d.md)(e.distance.value),orderTypes:i,addresses:e.addresses,storeStatus:e.summary,mapText:P,isMobile:Ue,loggedIn:At,onClickMapHandler:()=>{Zt(e,t),Xt()},isFavoriteStore:!0,addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{sa(e)},onStoreSelectFinish:D,storeInfo:e,...s[0]},o)})}})),na=Le.map(((e,t)=>{var a,i,o,l;if(Ne||Re([]),Be>=A||0===(null===(a=e.summary)||void 0===a||null===(i=a.timings)||void 0===i||null===(o=i.scheduled)||void 0===o||null===(l=o.periods)||void 0===l?void 0:l.length))return null;{var r,c;const a=(null===(r=e.summary)||void 0===r||null===(c=r.status)||void 0===c?void 0:c.currentStatus)===Z;return a&&Be++,Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(Ae,{"data-testid":t,storeName:Object(d.md)(e.name[0].value),storeDistance:Object(d.md)(e.distance),channels:e.availableServicesPerChannel,storeStatus:e.summary,addresses:e.addresses,...s[0],storeInfo:e,currentMarket:E,isOpen:a,onStoreSelectFinish:D,isMobile:Ue,loggedIn:At,onClickMapHandler:()=>{Zt(e,t),Xt()},isFavoriteStore:n.some((t=>t.id===e.id)),addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{sa(e)}},t)})}})),la=()=>{let e=-1!==xe.toLowerCase().indexOf("dine")?oe:xe;if(Ot=Object(C.a)(e,i),Ot)return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(k,{errorMsgToShow:Ot,onClearTextHandler:Kt,dispositionType:xe,handleGoBack:_})})},ra=()=>{if(Le.length===vt.length&&vt.length>0){let e=-1!==xe.toLowerCase().indexOf("dine")?oe:xe,t=Object(C.a)(e,i);return Object(d.Kb)(Object(o.translateWithI18Next)(g.a.contentData.searchStoreHeaderText),Object(o.translateWithI18Next)(t)),la()}if(Le.length===dt.length&&dt.length)return ca;{let e=-1!==xe.toLowerCase().indexOf("dine")?oe:xe;return Le.length&&(Ot=Object(C.a)(e,Le),Ot)?la():(Be<5&&na.push(ca),na)}},ca=dt.map(((e,t)=>{const a=e.availableServicesPerChannel&&Object(C.g)(e.availableServicesPerChannel),{services:i=[]}=Object(d.jd)(a[0]);if(Ne||Re([]),mt>=A-Be)return null;{mt++;const a="".concat(e.name[0].value,"_").concat(t),o=Le.findIndex((t=>t.id===e.id));return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(Ye,{storeName:Object(d.md)(e.name[0].value),storeDistance:Object(d.md)(e.distance),orderTypes:i,addresses:e.addresses,storeStatus:e.summary,mapText:P,isMobile:Ue,loggedIn:At,onClickMapHandler:()=>{Zt(e,o),Xt()},isFavoriteStore:n.some((t=>t.id===e.id)),addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{sa(e)},onStoreSelectFinish:D,storeInfo:e,...s[0]},a)})}})),da=()=>{switch(xe.split("-").join(" ").toUpperCase()){case Q:return Object(o.translateWithI18Next)(ie);case ne:return Object(o.translateWithI18Next)(ae);default:return null}},ua=()=>{Xe(0),Xt(),((e,t,a)=>{!0===e?t():a()})(kt,Jt,zt)};return Object(y.jsxs)(j.a.Fragment,{children:[Object(y.jsxs)("div",{className:"searchStore-module-form","data-testid":"searchstore-component",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"store-count",children:[Object(y.jsx)("span",{className:"member-signin",children:!At&&Object(y.jsxs)("div",{"data-id":w.qb.HEADER_SIGN_IN_ATTR_DATA_ID,"data-testid":"memberText",children:[Object(o.translateWithI18Next)(H),Object(y.jsx)("span",{onClick:O,children:Object(y.jsx)(p.a,{className:"store-signin-link",targettype:M.targetType,href:M.linkUrl,"data-testid":"store-signin-link",children:Object(o.translateWithI18Next)(M.linkText)})})]})}),Object(y.jsx)("span",{children:Object(y.jsxs)(p.a,{onClickHandler:async()=>{if(Object(f.o)(),await c.b.BindLocation(),Object(C.m)(),c.b.coordinates){const{latitude:e,longitude:t}=c.b.coordinates;c.b.addFeedback("Check coordinates ".concat(JSON.stringify(c.b.coordinates))),c.b.addFeedback("Check assignment ".concat(JSON.stringify({userLat:e,userLong:t}))),c.b.addFeedback("Check address ".concat(c.b.address)),Be=0,fe({lat:e,lng:t}),_e(!1),r({userLat:e,userLong:t}),ct(!0),Ie(c.b.address),ot(c.b.address),He(!0)}Object(F.s)(bt,!c.b.coordinates)},className:"store-location-link","data-testid":"useCurrentLocation",children:[Object(y.jsx)(S.a,{"data-testid":"",srcFile:Je,alt:"location",className:"location-img"}),Object(o.translateWithI18Next)(W)]})})]}),Object(y.jsx)("div",{className:"search-address",children:Object(y.jsx)("div",{className:"input-address",children:Object(y.jsx)(N.a,{"data-testid":"handle-select",value:Ne,onChange:e=>{e||Kt(),Ie(e),Object(d.kc)(e)<3&&Mt(!1)},onSelect:Pt,searchOptions:{componentRestrictions:{country:K}},shouldFetchSuggestions:!0,onError:(e,t)=>{t()},children:e=>{let{getInputProps:t,suggestions:a,getSuggestionItemProps:s,loading:i}=e;return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"".concat(Ot||0===Be&&0===mt&&rt&&L&&!Le.length?"search-container-data error-border":"search-container-data"),children:[Object(y.jsx)(S.a,{"data-testid":"",srcFile:Ze,alt:"googleMapLocation",className:"google-location-img"}),Object(y.jsx)("input",{"data-testid":"store-search-input",className:"store-search-input t-2",...t({placeholder:Object(o.translateWithI18Next)(U)})}),Ne&&Object(y.jsx)("img",{"data-testid":"clear-text-icon",src:Ge.a,className:"clearTextIcon",onClick:()=>Kt(),alt:"Clear Text Icon"})]}),!!Object(d.db)(Object(d.kc)(a),Ht)&&Object(y.jsx)("div",{className:"suggestion-list","data-testid":"suggestionlist-id",children:a.map(((e,t)=>{var a;if(null!==e&&void 0!==e&&null!==(a=e.types)&&void 0!==a&&a.some((e=>G.includes(e)))){const a=e.active?{backgroundColor:J,opacity:z}:{backgroundColor:X};return Object(y.jsxs)(j.a.Fragment,{children:[0===t&&Object(y.jsx)("div",{className:"suggestion-items suggest-text",id:"suggestion-text","data-testid":"suggestion-item-".concat(t),children:Object(o.translateWithI18Next)(Y)}),Object(y.jsx)("div",{style:a,children:Object(y.jsx)("div",{"data-testid":"suggestion-item-".concat(t),...s(e,{className:"suggestion-items",id:"suggestion-items"}),children:Object(y.jsxs)("div",{className:"suggested-address-alignment",children:[Object(y.jsx)("div",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Vt(e.description)?Qe:qe,alt:"googleMapLocation",className:"suggetion-pin",id:"suggetion-pin"})}),Object(y.jsx)("div",{className:"suggestion-description",children:e.description})]})},t)})]})}return""}))})]})}})})})]}),Object(y.jsx)("div",{className:"my-3 store-form-separation margin-bottom"}),nt(Ne,De,q,Xt,Jt),Object(y.jsxs)("form",{className:"form",children:[Object(y.jsxs)("div",{className:"store-count",children:[!!Be&&Object(y.jsx)("span",{"data-testid":"tab-open-store",className:tt(At,kt),onClick:()=>{Xe(0),ea(!0)},children:At?Object(y.jsxs)("span",{children:[" ","".concat(Object(o.translateWithI18Next)("nearYou"))," (",Be+mt,")"]}):Object(y.jsxs)("span",{children:[Be+mt," ","".concat(Object(o.translateWithI18Next)("nearYou"))]})}),!!mt&&Le.length===dt.length&&Le.length!==vt.length&&Object(y.jsx)("span",{"data-testid":"tab-closed-store",className:tt(At,kt),onClick:()=>{Xe(0),ea(!0)},children:"".concat(Object(o.translateWithI18Next)("nearYou")," (").concat(mt,")")}),0===Be&&0===mt&&rt&&L&&Object(y.jsx)("span",{className:"store-count-title",children:"".concat(Object(o.translateWithI18Next)("nearYou")," (").concat(Be,")")}),lt(Be,mt,At,It,{firstTab:kt,setCenterIndex:Xe,handleTabChange:ea}),(!!Be||!!mt)&&Le.length!==vt.length&&Object(y.jsx)("div",{"data-testid":"togglemap-id",onClick:()=>{ua()},children:Object(y.jsxs)(p.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:st(De),alt:"map",className:"map-img"})}),De?Object(o.translateWithI18Next)(q):P]})}),0===Be&&0===mt&&rt&&L&&Object(y.jsx)("div",{"data-testid":"show-map-div",onClick:()=>{ua()},children:Object(y.jsxs)(p.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:st(De),alt:"map",className:"map-img"})}),De?Object(o.translateWithI18Next)(q):Object(o.translateWithI18Next)(P)]})})]}),De?Object(y.jsx)("div",{className:"order-button-section",children:0===Be&&0===mt&&rt&&L&&Object(y.jsx)("div",{className:"store-card store-card-map-view-error",children:Object(y.jsxs)("div",{className:"no-store",children:[Object(y.jsx)("div",{className:"no-store-icon",children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:Ke,alt:"no store"})}),Object(y.jsx)("div",{className:"no-store-text",children:da()}),Object(y.jsx)(I.a,{className:"button whiteButton blackBorder store-card-btn browse-menu-btn",onClickHandler:Bt,children:Object(o.translateWithI18Next)(ee)})]})})}):Object(y.jsxs)(y.Fragment,{children:[Object(d.db)(!Et,Object(d.db)(kt,0!==Be||0!==mt||!rt||L||Le.length?ra():Yt(da,Bt,te))),At&&!kt&&Object(y.jsx)("div",{className:"order-button-section",children:oa})]}),Object(y.jsx)("div",{className:"clearfix"})]})]}),De&&Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"".concat((null===xe||void 0===xe?void 0:xe.toUpperCase())!==le&&"takeawayDineInMap"," delivery-map"),children:[Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(T.a,{latLongValue:Ce,loadingElement:Object(y.jsx)("div",{style:{height:"100%"}}),containerElement:Object(y.jsx)("div",{style:{height:"400px"}}),mapElement:Object(y.jsx)("div",{style:{height:"100%"}}),passAddress:e=>{Ie(e)},isVisible:xe.toUpperCase()===Q||xe.toUpperCase()===ne,isMobile:Ue,centerIndex:ze,onPositionChangeHandler:$t,setShowCard:we,setStoreMarker:Object(d.Tc)(kt,(e=>{const t=Le.findIndex((t=>t.location.latitude===e.lat()&&t.location.longitude===e.lng()));t>-1&&(ze===t&&qt(),Xe(t))}),(e=>{((e,t,a,s,i)=>{const o=e.findIndex((e=>e.location.latitude===s.lat()&&e.location.longitude===s.lng()));o>-1&&(i===o&&t(),a(o))})(Dt,Qt,Xe,e,ze)})),storeCardHeight:Rt}),ke&&Me&&Ue?!Ot&&ia(Me,"Selected-Card"):null]}),ke&&Me&&!Ue?Object(d.db)(Le.length===dt.length,kt)&&!Ot&&((e,t)=>{const a=e.availableServicesPerChannel&&Object(C.g)(e.availableServicesPerChannel),{services:i=[]}=Object(d.jd)(a[0]),o="".concat(e.name[0].value,"_").concat(t);return Object(y.jsx)(j.a.Fragment,{children:Object(y.jsx)(Ye,{storeName:Object(d.md)(e.name[0].value),storeDistance:Object(d.md)(e.distance),orderTypes:i,addresses:e.addresses,storeStatus:e.summary,mapText:P,isMobile:Ue,isMapView:!0,onStoreSelectFinish:D,onClick:()=>{Xt(),Jt()},storeInfo:e,...s[0],centerIndex:ze,storeLength:Object(d.Tc)(kt,null===Le||void 0===Le?void 0:Le.length,null===Dt||void 0===Dt?void 0:Dt.length)},o)})})(Me,"Selected-Card")||ia(Me,"Selected-Card"):""]})})]})}));function nt(e,t,a,s,i){return Object(y.jsx)(y.Fragment,{children:(null===e||void 0===e?void 0:e.length)<=3&&Object(y.jsxs)("div",{className:"enter-your-address-section",children:[Object(y.jsx)("span",{className:"search-store-text",children:Object(o.translateWithI18Next)("pleaseEnterLocation")}),Object(y.jsx)("div",{"data-testid":"show-list-map",className:Object(d.Tc)(t,"store-count","show-map-div"),onClick:()=>{t&&s(),i()},children:Object(y.jsxs)(p.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(S.a,{"data-testid":"",srcFile:st(t),alt:"map",className:"map-img"})}),Object(d.Tc)(t,Object(o.translateWithI18Next)(a),Object(o.translateWithI18Next)("map"))]})})]})})}function lt(e,t,a,s,i){let{firstTab:n,setCenterIndex:l,handleTabChange:r}=i;return Object(y.jsx)(y.Fragment,{children:(!!e||!!t)&&a&&Object(y.jsx)("span",{"data-testid":"tab-favorite-store",className:et(n),onClick:()=>{l(0),r(!1)},children:"".concat(Object(o.translateWithI18Next)("savedkfc")," (").concat(s,")")})})}var rt=a(956),ct=a(77),dt=a(915),ut=a(111);const vt=e=>{var t;const{contentData:a={},onStoreSelectFinish:g}=e,{SEARCH_ORDER_DATA:p,DISPOSITION_DATA:S,ANALYTICS_LOCALISATION_SIGNIN:x}=m.a,N=Object(b.b)(),{COUNTRY_CODE:I,STORE_CARD_LIMIT:T,TYPE_TAKE_WAY:f,PICK_UP:A,TENANT_ID:D,TENATNT_SESSION_ID:_,TYPE_DELIVERY:k}=h.a,{userOrderState:L,userOrderStateDispatch:R}=Object(v.useContext)(u.a),{dispositionStateData:H,searchStoreData:M,showLocationConfirmModal:W}=L,{dispositionType:U=localStorage.getItem("dispositionType")}=Object(d.md)(H),{currentMarket:P=I,storeCardLimit:B=T,storeStatusUrl:Y="".concat(Object(i.a)(s.Mb),"v1/stores/{storeid}/{channel}/{service}/status"),tenantID:G=D,tenantSessionID:V=_}=M,{searchStoreHeaderText:K="",deliveryHeaderText:J="",searchStoreModalContent:z={}}=a,{formContent:X={},locationsContent:{storeData:Z=[]}}=z,[q,Q]=j.a.useState([]),[$,ee]=j.a.useState({}),[te,ae]=j.a.useState([]),[se,ie]=j.a.useState([]),{storeSearch:oe={},tenantId:ne,componentOptions:le}=Object(b.c)((e=>Object(d.kd)(e.tenantReducer))),{storesWithStatus:re=[],isStoreStatusLoading:ce=!1}=Object(b.c)((e=>Object(d.kd)(e.storesReducer))),{allStores:de=[]}=Object(b.c)((e=>e.allStoresReducer))||{},{maxDriveTimeMins:ue,distanceMetrics:ve,maxDeliveryDistanceMtrs:be,maxPickupDistanceMtrs:Oe,geohashprecision:me,boundingBoxSizeMeters:he}=oe,pe=e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem("renderComp",!0),R({type:S,value:{showDisposition:!1}}),R({type:p,value:{showSearchStore:!1}})};Object(v.useEffect)((()=>{const e=e=>{27===e.keyCode&&pe(e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const Se=e=>{e.stopPropagation(),e.preventDefault(),R({type:S,value:{showDisposition:!0}}),R({type:p,value:{showSearchStore:!1}})},xe=e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem(x,JSON.stringify(!0)),Object(C.j)(),setTimeout((()=>{Object(ct.b)()}),500)},Ne=Object(b.c)((e=>{let{profileReducer:{favouriteStores:t}}=e;return t}));Object(v.useEffect)((()=>{Object(F.f)(R,W)}),[]),Object(v.useEffect)((()=>{Ie({userLat:$.userLat,userLong:$.userLong})}),[Ne.length]),Object(v.useEffect)((()=>{de.length>0&&ye(de)}),[de]),Object(v.useEffect)((()=>{re.length>0&&Le(re)}),[re]),Object(v.useEffect)((()=>{(null===U||void 0===U?void 0:U.toUpperCase())===k&&Ae(se)}),[se]);const Ie=e=>{Object(rt.a)(e.userLat,e.userLong,Ne,Te)},Te=(e,t)=>{const a=Object(d.Tc)((null===U||void 0===U?void 0:U.toUpperCase())===f,A,U),s=Y.replace("{channel}",c.b.channel).replace("{service}",a).replace(" ","-"),i=Object(O.a)();Object(C.h)(e,s.toLowerCase(),G,V||Object(O.a)(),i,Ce)},Ce=e=>{let t=e.map((e=>{const{additionalProperties:t=[],address:a,amenities:s,dname:i,id:o,location:n}=e.storeBasic;return{...e,id:o,location:n,name:i,amenities:s,addresses:a,additionalAttributes:t,storeBasic:{}}}));ae(t)},fe=e=>{N(Object(n.b)()),ee({userLat:e.userLat,userLong:e.userLong}),q&&Q([]),Ee(e.userLat,e.userLong),setTimeout((()=>{N(Object(n.a)())}),2e3)},Ee=(e,t)=>{const a={lat:e,lon:t,distanceFromCurrentLoc:he/1e3,geohashprecision:me},s=r.a.calculateGH(a);N(Object(l.v)(null===s||void 0===s?void 0:s.length))},ye=e=>{const t=Object(d.Ib)(U.toUpperCase()),a=e.filter((e=>{var t,a;return Object(d.he)(e.id)&&Object(d.he)(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&Object(d.he)(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude)})),s={stores:a,disposition:t,distanceMetrics:ve,driveTime:ue,distanceInMtrs:Object(d.Tc)(U.toUpperCase()===k,be,Oe),noOfStores:Object(d.Tc)(U.toUpperCase()===k,2,a.length),channel:c.b.channel},i=r.a.checkAndProceed(s);ie(i),U.toUpperCase()===k?Ae(i):we(i,t)},Ae=e=>{let t=[];null===e||void 0===e||e.forEach((e=>{var a,s;t.push({lat:null===(a=e.location)||void 0===a?void 0:a.latitude,lng:null===(s=e.location)||void 0===s?void 0:s.longitude})})),Object(rt.b)(t,[{lat:$.userLat,lng:$.userLong}],De)},De=e=>{let{allStoreDistance:t,originAddressText:a}=e;const s=Object(d.Ib)(U.toUpperCase()),i={stores:ke(t,se),numberOfStores:2,disposition:s,distanceMetrics:ve,driveTime:ue,channel:c.b.channel},o=r.a.getSortedNearbyStores(i);(null===o||void 0===o?void 0:o.length)>0&&we(o,s)},ke=(e,t)=>null===t||void 0===t?void 0:t.map(((t,a)=>({...t,distance:e[a]}))),we=(e,t)=>{const a={data:null===e||void 0===e?void 0:e.map((e=>({storeId:e.id,channel:c.b.channel,service:t}))),store:e,tenantId:ne,setStatusFlag:!1,isFavoritePage:!1};N(Object(l.d)(a,null))},Le=e=>{const t=e.filter((e=>{var t,a,s,i,o,n,l,r,c,d,u,v;return(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude)&&(null===e||void 0===e||null===(s=e.summary)||void 0===s||null===(i=s.status)||void 0===i?void 0:i.currentStatus)&&(null===e||void 0===e||null===(o=e.summary)||void 0===o||null===(n=o.menu)||void 0===n||null===(l=n.catalogs)||void 0===l?void 0:l.length)&&(null===e||void 0===e||null===(r=e.summary)||void 0===r||null===(c=r.timings)||void 0===c||null===(d=c.operatingHours)||void 0===d?void 0:d.length)>0&&(null===e||void 0===e||null===(u=e.summary)||void 0===u||null===(v=u.timings)||void 0===v?void 0:v.asap)}));Q(t)},Re=null===le||void 0===le||null===(t=le.web)||void 0===t?void 0:t.dispositionConfig,{CONFIG_SEARCH_SCREEN:Fe}=w.gd,{configSearchScreen:He=localStorage.getItem(Fe)}=M,Me="".concat(null===U||void 0===U?void 0:U.toUpperCase(),"_").concat(He),{shouldShowLocationLink:We}={...null===ut.d||void 0===ut.d?void 0:ut.d[Me],...null===Re||void 0===Re?void 0:Re[Me]},{Error_Yellow:Ue}=E.a||{},{LOCATION_BLOCKED_ERROR:Pe,KFC_URL:Be}=_e.a,Ye=Object(d.xe)(W,We),Ge=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(dt.a,{show:Ye,errorMsg:Object(F.G)(Pe,Be),errImage:Ue,cssClass:"location-blocked"}),(null===U||void 0===U?void 0:U.toUpperCase())===k?Object(y.jsx)(je,{singInClickhandler:xe,formContent:X,storeData:Z,onStoreSelectFinish:g,eligibleStoreData:q,storeCardLimit:B,userPositionHandler:fe,currentMarket:P}):Object(y.jsx)(ot,{singInClickhandler:xe,formContent:X,storeData:Z,eligibleStoreData:q,noStoresList:ce,storeCardLimit:B,userPositionHandler:fe,currentMarket:P,onStoreSelectFinish:g,handleGoBack:Se,favoriteStoreData:te,favoriteStoreHandler:Ie})]});return Object(y.jsx)(ge,{handleClose:pe,orderModeTypeItem:Ge,showLocationError:Ye,headerText:Object(d.Tc)((null===U||void 0===U?void 0:U.toUpperCase())===k,Object(o.translateWithI18Next)(J),Object(o.translateWithI18Next)(K)),handleGoBack:Se,modalTitleId:"search-store"})};vt.defaultProps=g.a;t.default=vt},928:function(e,t,a){"use strict";var s=a(3),i=a.n(s),o=a(128),n=a(325),l=a(6),r=a(5),c=a(76),d=a(0),u=a(15),v=a(2);t.a=e=>{const{locationAlertProp:t,negativeScenarioAlertProp:a,isMobile:j,onPositionChangeHandler:b,centerIndex:O,isVisible:m,setShowCard:h,locationAlert:g,setStoreMarker:p=r.L,passAddress:S,storeCardHeight:x,latLongValue:N}=e,{PLACE_PIN:I}=o.a,{userOrderState:T}=i.a.useContext(c.a),{dispositionStateData:C={}}=T,{dispositionType:f=localStorage.getItem("dispositionType")}=C;let E,y,A=i.a.createRef();const[D,_]=Object(s.useState)(N),[k,w]=Object(s.useState)(!1),{RedMarker:L,RedMarkerNoText:R,BlackMarker:F,ArrowIcon:H}=u.a;Object(s.useEffect)((()=>{E=M(D),y=W(D)}),[]),Object(s.useEffect)((()=>{_(N),w(!1)}),[N]),Object(s.useEffect)((()=>{M(D),y=W(D)}),[D,O,k]);const M=e=>new window.google.maps.Map(A.current,{zoom:10,center:Array.isArray(e)&&e.length>0?e[O]:e,disableDefaultUI:!0,fullscreenControl:!1,zoomControl:!j,gestureHandling:"greedy"}),W=e=>{const t=new window.google.maps.Geocoder;let a=e;E=M(a),m?k||(E.addListener("zoom_changed",(()=>{h(!1),w(!0)})),E.addListener("drag",(()=>{h(!1),w(!0)}))):(E.addListener("drag",(()=>{a={lat:E.getCenter().lat(),lng:E.getCenter().lng()},y.setPosition(a)})),window.google.maps.event.addListener(E,"dragend",(function(){!function(e,t,a){e.geocode({location:a},((e,t)=>{"OK"===t&&e[0]&&S(e[0].formatted_address)}))}(t,0,a)})));let s=Object(r.Tc)(Array.isArray(a)&&a.length>0,a,[a]).map(((e,t)=>{let a=new window.google.maps.Marker({position:e,map:E,visible:!0,icon:Object(r.id)(!m,!k&&m&&t===O)?(null===f||void 0===f?void 0:f.toUpperCase())===d.Af?R:L:F});return a.addListener("click",(function(e){p(e.latLng)})),a}));return Object(r.Tc)(Array.isArray(a),s,s[0])};return Object(v.jsxs)(i.a.Fragment,{children:[!t&&((null===f||void 0===f?void 0:f.toUpperCase())!==d.Af||""!==a&&a?null:Object(v.jsx)("div",{className:"map-top-note ".concat(Object(r.Tc)(g,"place-pin-off","")),children:Object(v.jsx)("div",{className:"map-top-note-text","data-testid":"map-top-text-test",children:Object(l.translateWithI18Next)(I)})})),j&&!k&&Object(v.jsxs)("div",{className:"arrows",style:{bottom:"".concat(x+15,"px")},children:[Object(v.jsx)("span",{className:"map-arrow-left ".concat(Object(r.db)(0===O,"disableArrow")),"data-testid":"map-arrow-left",onClick:e=>Object(r.Tc)(0===O,e.preventDefault(),b(0)),children:Object(v.jsx)(n.a,{srcFile:H,alt:"map-arrow-left"})}),Object(v.jsx)("span",{className:"map-arrow-right ".concat(O===D.length-1&&"disableArrow"),"data-testid":"map-arrow-right",onClick:e=>O===D.length-1?e.preventDefault():b(1),children:Object(v.jsx)(n.a,{srcFile:H,alt:"map-arrow-right"})})]}),Object(v.jsx)("div",{id:"google-map",ref:A})]})}},956:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return v}));var s=a(128);let i,o,n,l,r=[],c="";const d=(e,t,a,s)=>{if(i=e,o=t,r=a,l=s,r.length>0){let a=r.map((e=>{const{latitude:t,longitude:a}=e&&e.storeBasic.location;return{lat:t,lng:a}})),s=[{lat:e,lng:t}];(new window.google.maps.DistanceMatrixService).getDistanceMatrix({origins:[...s].slice(0,24),destinations:[...a].slice(0,24),travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},u)}else l([],"")},u=(e,t)=>{let a=[],s=[];s=e&&e.rows&&e.rows[0].elements.map((e=>e));let i=e&&e.originAddresses&&e.originAddresses[0]||"";a=r.map(((e,t)=>({...e,...s[t]}))),l(a,i)},v=(e,t,a)=>{(new window.google.maps.DistanceMatrixService).getDistanceMatrix({origins:[...e].slice(0,24),destinations:[...t].slice(0,24),travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},j),n=a},j=(e,t)=>{if(t===s.a.OK_STATUS){let t=[],a=e&&e.rows&&e.rows.map((e=>e));t=null===a||void 0===a?void 0:a.map((e=>e.elements[0])),c=e&&e.originAddresses||[],n({allStoreDistance:t,originAddressText:c})}}}}]);