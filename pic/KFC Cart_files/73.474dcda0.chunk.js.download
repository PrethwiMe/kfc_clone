(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[73,132],{1286:function(e,t,l){"use strict";l.r(t);var i=l(3),a=l.n(i),o=l(1);function n(){return{type:o.Mk}}var d=l(25),r=l(932),s=l(920),c=l(811),u=l(912),v=l(6),m=l(72),b=l(5),O=l(121),j=l(36),f=l(92),g=l(84),C=l(103),h=l(357),p=l(93),N=l(2);const{KFC_Gift_Card:x}=c.default;var D=e=>{const{CHECKBALANCE_MODAL:t,EMAIL_REGEX:l,SHOWBALANCE_MODAL:a,ACTIVE:o,INACTIVE:n,MANDATORY_NOTE:r}=m.a,{isOpen:s,handleClose:c,tenantId:u}=e,[D,E]=Object(i.useState)(Object(b.Ud)(window.innerWidth)),[I,A]=Object(i.useState)(""),[T,R]=Object(i.useState)(""),[S,_]=Object(i.useState)(!0),[M,y]=Object(i.useState)(!1),[F,G]=Object(i.useState)(!1),L=Object(d.b)(),{tenantReducer:w,profileReducer:P,createBalanceReducer:B}=Object(d.c)((e=>e)),{currencySymbol:k}=w,{response:H}=B,U=()=>{const e=Object(b.Ud)(window.innerWidth);E(e)};Object(i.useEffect)((()=>{window.addEventListener("resize",U)}),[D]),Object(i.useEffect)((()=>{switch(H.cardStatus){case o:R(H.cardBalance),y(!0),G(!1);break;case n:y(!1),G(!0)}}),[H]);const[W,V]=Object(i.useState)({value:"",errorMessage:"",error:!1}),[q,K]=Object(i.useState)({value:"",errorMessage:"",error:!1}),[X,Y]=Object(i.useState)({value:"",errorMessage:"",error:!1});Object(i.useEffect)((()=>{const e=""!==(q.value&&X.value),t=!1===(q.error||X.error);_(!e||!t)}),[q,X]),Object(i.useEffect)((()=>{Object(p.a)(x,q.error,q.errorMessage)}),[q.errorMessage,q.error]),Object(i.useEffect)((()=>{Object(p.a)(x,X.error,X.errorMessage)}),[X.errorMessage,X.error]),Object(i.useEffect)((()=>{Object(p.a)(x,W.error,W.errorMessage)}),[W.errorMessage,W.error]);const z=e=>{A(e.target.value);let t={...W};var i;t.value=I,I&&(i=I,!l.test(i))?(t.error=!0,t.errorMessage=Object(v.translateWithI18Next)("invalidEmailErrMsg")):(t.error=!1,t.errorMessage=""),V({...t})},J=(e,t)=>{let l={...e};return l.value=t,t?t.length<16||isNaN(t)?(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("invalidcardNumber")):(l.error=!1,l.errorMessage=""):(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)(m.a.GIFTCARD_ERROR)),l},Q=(e,t)=>{let l={...e};return l.value=t,t?6!==t.length||isNaN(t)?(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("invalidPin")):(l.error=!1,l.errorMessage=""):(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)(m.a.PINNUMBER_ERROR)),l},Z=(e,t)=>{e&&t()},$=e=>{const t=e.target.value,l=e.target.name;Z("cardNumber"===l,(()=>K({...J(q,t)}))),Z("pinNumber"===l,(()=>Y({...Q(X,t)})))},ee=()=>{K({value:""}),Y({value:""}),R(""),y(!1),V({value:""}),A(""),y(!1)},te=Object(N.jsx)("div",{children:Object(N.jsxs)("div",{className:"GiftbalanceInputArea",children:[Object(N.jsxs)("div",{className:"balanceHeader",children:[Object(N.jsx)("h3",{className:"InputboxHeading",children:Object(v.translateWithI18Next)(t.GIFTCARD_HEADER)}),!D&&Object(N.jsx)("p",{className:"mandatory-note",children:Object(v.translateWithI18Next)(r)})]}),Object(N.jsx)("div",{className:"inputcardNumbox",children:Object(N.jsx)(C.a,{"data-testid":"card-no",className:q.error?"error-text":"details",name:"cardNumber",placeholder:Object(v.translateWithI18Next)(t.GIFTCARDNUM_INPUT),value:q.value,onChange:$,onKeyPress:e=>(e=>{/[0-9]/.test(e.key)||e.preventDefault()})(e),maxLength:16,helperTextClassName:"error-text",helperText:q.errorMessage,error:q.error,required:!0})}),Object(N.jsx)("div",{className:"inputpinNumbox",children:Object(N.jsx)(C.a,{"data-testid":"pin-no",className:X.error?"error-text":"details",name:"pinNumber",placeholder:Object(v.translateWithI18Next)(t.GIFTCARDPN_INPUT),value:X.value,onChange:$,maxLength:6,helperTextClassName:"error-text",helperText:X.errorMessage,error:X.error,required:!0})}),Object(N.jsx)("div",{className:"inputmailbox",children:Object(N.jsx)(C.a,{"data-testid":"email-id",className:W.error?"error-text":"details",type:"email",name:"mailId",placeholder:Object(v.translateWithI18Next)(t.EMAIL_ADDR),value:I,onChange:e=>z(e),helperTextClassName:"error-text",helperText:W.errorMessage,error:W.error,required:!0})})]})}),le=D?{role:"dialog",modalTitleId:"CheckBalancepopup",show:s,classNames:"giftcard-checkbalance-modal",showCloseBtn:!0,closeButtonHandler:c,autoFocus:!0,modalTitle:Object(v.translateWithI18Next)("giftcardCheckbalnaceTitle"),closeDataTestId:"giftcheck-balance"}:{role:"dialog",modalTitleId:"CheckBalancepopup",show:s,classNames:M?"giftcard-resbal-modal":"giftcard-checkbal-modal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:c,modalTitle:Object(v.translateWithI18Next)("giftcardCheckbalnaceTitle"),autoFocus:!0,closeDataTestId:"giftcheck-balance",ariaLabel:Object(v.translateWithI18Next)("closeGiftClose")};return Object(N.jsxs)("div",{className:"giftcardContainer".concat(D?" mobile":""),"data-testid":"giftcard-checkBal",children:[s&&Object(N.jsxs)(O.a,{...le,children:[Object(N.jsx)("div",{className:"checkBalModalContent",children:te}),Object(N.jsxs)("div",{className:"buttonGiftModal",children:[Object(N.jsx)(j.a,{"data-testid":"canc-button",className:"button whiteButton blackBorder closebtn-cls",onClick:e=>(K({value:""}),Y({value:""}),A(""),void V({value:""})),children:Object(v.translateWithI18Next)(t.CANCEL_BUTTONT)}),Object(N.jsx)(j.a,{"data-testid":"subm-button",className:"button blackButton blackBorder save-button",onClick:e=>(e=>{if(""!==(q.value&&X.value)){const e={customerId:P.customerId,tenantId:u,body:{cardNumber:q.value,cardPin:X.value}};console.log("cardNumber",q.value),Object(b.od)(u)&&L(Object(h.a)(e))}})(),disabled:S,children:Object(v.translateWithI18Next)(t.SUBMIT_BUTTON)})]})]}),";",M&&Object(N.jsxs)(O.a,{...le,children:[Object(N.jsxs)("div",{className:"resultBalModalContent",children:[Object(N.jsxs)("div",{className:"GiftbalanceInputArea",children:[Object(N.jsx)("div",{className:"InputboxHeading",children:Object(v.translateWithI18Next)(t.GIFTCARD_HEADER)}),Object(N.jsx)("div",{className:"inputcardNumboxup",children:Object(N.jsx)(C.a,{"data-testid":"result-cardnum",className:"details",type:"tel",placeholder:Object(v.translateWithI18Next)(a.GIFTCARDNUM_SHOW),value:q.value})}),Object(N.jsx)("div",{className:"inputpinNumbox",children:Object(N.jsx)(C.a,{"data-testid":"result-pinnum",className:"details",type:"tel",placeholder:Object(v.translateWithI18Next)(a.GIFTCARDNUM_SHOWSHOW),value:X.value})}),Object(N.jsx)("div",{className:"inputmailbox",children:Object(N.jsx)(C.a,{"data-testid":"result-mailid",className:"details",type:"email",placeholder:Object(v.translateWithI18Next)(a.EMAIL_SHOW),value:I})})]}),Object(N.jsxs)("div",{className:"BalanceText",children:[Object(v.translateWithI18Next)("balanceText")," ",k," ",T]})]}),Object(N.jsxs)("div",{className:"addPayButton",children:[Object(N.jsx)("div",{className:"payButton",children:Object(N.jsx)(j.a,{className:"button whiteButton blackBorder ",children:Object(v.translateWithI18Next)(t.CHECKBALANCE_BUTTON)})}),Object(N.jsx)("div",{className:"resetButton",children:Object(N.jsx)(j.a,{"data-testid":"reset-button",className:"button whiteButton ",onClick:ee,children:Object(N.jsx)("u",{children:Object(v.translateWithI18Next)(t.RESET_BUTTON)})})})]})]}),";",F&&Object(N.jsx)("div",{className:"checkBal-errorModal",children:Object(N.jsx)(f.a,{CartAlertForm:Object(N.jsx)(g.a,{title:Object(v.translateWithI18Next)(t.INVALID_MODALTITLE),contentMsg:Object(v.translateWithI18Next)(t.INVALID_MODALCONTENT),cancelHandler:()=>{ee(),G(!1)},cancelButtonText:Object(v.translateWithI18Next)(t.INVALID_OKBUTTON)})})}),";"]})},E=l(246);var I=function(e){var t;const{orderId:l,tenderType:a,transactionId:o,transactionAmount:n,postUrl:d,requestMessage:r}=e.giftCardPurchaseData;return Object(i.useEffect)((()=>{var e,t,l;d&&(null===(e=document)||void 0===e||null===(t=e.giftcard)||void 0===t||t.submit()),null!==(l=document)&&void 0!==l&&l.giftcard&&localStorage.setItem("postPaymentType","giftCardPurchase")}),[document,null===(t=document)||void 0===t?void 0:t.giftcard,d]),Object(N.jsx)("div",{children:d&&Object(N.jsxs)("form",{method:"POST",action:d,name:"giftcard",children:[Object(N.jsx)("input",{type:"hidden",name:"orderId",value:l}),Object(N.jsx)("input",{type:"hidden",name:"tenderType",value:a}),Object(N.jsx)("input",{type:"hidden",name:"transactionId",value:o}),Object(N.jsx)("input",{type:"hidden",name:"transactionAmount",value:n}),Object(N.jsx)("input",{type:"hidden",name:"msg",value:r})]})})},A=l(43),T=l(18),R=l.n(T),S=l(15);var _=e=>{const{PURCHASESUCCESS_MODAL:t,PURCHASEFAILURE_MODAL:l,PAYMENT_FAILED_MESSAGE:a}=m.a,{isOpen:o,handleClose:n,purchaseStatus:d,paymentStatus:r}=e,[s,c]=Object(i.useState)(Object(b.Ud)(window.innerWidth)),{GiftcardSuccessImg:u,GiftCardFailureImg:j}=S.a,f=()=>{const e=Object(b.Ud)(window.innerWidth);c(e)};Object(i.useEffect)((()=>{window.addEventListener("resize",f)}),[s]);const g=()=>{n()},C=s?{role:"dialog",modalTitleId:"PurchaseSuccesspopup",show:o,classNames:"giftcard-purchase-success",showCloseBtn:!0,closeButtonHandler:n,autoFocus:!0,modalTitle:" ",closeDataTestId:"purchase-success"}:{role:"dialog",modalTitleId:"PurchaseSuccesspopup",show:o,classNames:"giftcard-purchase-success",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:n,modalTitle:" ",autoFocus:!0,closeDataTestId:"purchase-success"};return Object(N.jsx)("div",{className:"giftcardContainer".concat(s?" mobile":""),"data-testid":"giftcard-success",children:o&&Object(N.jsx)(N.Fragment,{children:!R()(d)&&Object(N.jsx)(O.a,{...C,children:"success"===d?Object(N.jsxs)("div",{className:"giftCardSuccessContent",children:[Object(N.jsx)("div",{className:"imageComp",children:Object(N.jsx)(A.a,{srcFile:u,alt:"giftcard",className:"giftcard-confirm"})}),Object(N.jsx)("div",{className:"congratsMsg",children:Object(v.translateWithI18Next)(t.CONGRATS_TEXT)}),Object(N.jsx)("div",{className:"feedbackMsg",children:Object(v.translateWithI18Next)(t.FEEDBACK_MESSAGE)}),Object(N.jsx)("div",{className:"buttonTobuy",children:Object(N.jsx)("button",{"data-testid":"buy-card",className:"button whiteButton blackBorder",onClick:g,children:Object(v.translateWithI18Next)(t.BUY_NEWGIFTCARD)})})]}):Object(N.jsxs)("div",{className:"giftCardSuccessContent",children:[Object(N.jsx)("div",{className:"imageComp",children:Object(N.jsx)(A.a,{srcFile:j,alt:"giftcardfailure",className:"giftcard-confirm"})}),Object(N.jsx)("div",{className:"congratsMsg",children:Object(v.translateWithI18Next)(l.FAILURE_TEXT)}),"Failed"===r&&Object(N.jsx)("div",{className:"feedbackMsg",children:Object(v.translateWithI18Next)(a)})||Object(N.jsx)("div",{className:"feedbackMsg",children:Object(v.translateWithI18Next)(l.FAILURE_MESSAGE)}),Object(N.jsx)("div",{className:"buttonTobuy",children:Object(N.jsx)("button",{"data-testid":"reset",className:"button whiteButton blackBorder",onClick:g,children:Object(v.translateWithI18Next)(l.RETRY)})})]})})})})},M=l(61);const{PAYMENT_FAILED_MESSAGE:y,KFC_Gift_Card:F}=c.default,G=e=>m.a.EMAIL_REGEX.test(e),L=(e,t)=>{let l=m.a.NAME_REGX,i={...e};return i.value=t,l.test(t)?(i.error=!0,i.errorMessage=Object(v.translateWithI18Next)("namevalidationmsg")):!t||t.length<2||t.length>26?(i.error=!0,i.errorMessage=Object(v.translateWithI18Next)("emptyYourNameErrMsg")):(i.error=!1,i.errorMessage=""),i},w=(e,t)=>{let l={...e};return l.value=t,t?10!==t.length||isNaN(t)?(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("invalidPhoneNumberErrText")):(l.error=!1,l.errorMessage=""):(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("phonenumberEmptyHelpText")),l},P=(e,t)=>{let l={...e};return l.value=t,t?G(t)?(l.error=!1,l.errorMessage=""):(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("invalidYourEmailErrText")):(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("yourEmailHelpText")),l},B=(e,t)=>{let l={...e};return l.value=t,t?G(t)?(l.error=!1,l.errorMessage=""):(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("invalidRecipientEmailErrText")):(l.error=!0,l.errorMessage=Object(v.translateWithI18Next)("recipientEmptyEmailHelpText")),l};var k=e=>{const[t,l]=Object(i.useState)(!1),[r,s]=Object(i.useState)(!0),{headerData:c={},desktopImage:u={},giftAmount:O={},termsncondition:f={}}=e.contentData,g=e.isMobile,{BALANCEBUTTON_TEXT:x,RECP_EMAIL_PLACEHOLDER:A,NAME_PLACEHOLDER:T,YOUR_EMAIL_PLACEHOLDER:R,PHONE_PLACEHOLDER:S,MESSAGE_PLACEHOLDER:G,CANCELBUTTON_TEXT:k,PAYMENTBUTTON_TEXT:H,FORM_VALUES:U,MESSAGE_HEADING:W,INFOMATION_HEADING:V,CUSTOM:q,MANDATORY_NOTE:K}=m.a,X=Object(d.b)(),Y=Object(M.h)(),z=Object(d.c)((e=>e.tenantReducer)),{tenantId:J,currencySymbol:Q}=z||{},Z=Object(d.c)((e=>{let{profileReducer:{customerId:t}}=e;return t})),$=Object(d.c)((e=>e.giftCardPurchaseReducer)),{giftCardPurchaseData:ee={},isPurchaseSuccess:te=!1,isPurchaseLoading:le}=$||{},ie=Object(d.c)((e=>e.paymentsGiftCardReducer)),{giftCardPurchaseStatResp:ae={}}=ie||{},oe=e=>{e.preventDefault(),l(!1)};Object(i.useEffect)((()=>{const e=e=>{27===e.keyCode&&oe(e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const[ne,de]=Object(i.useState)({value:"",errorMessage:"",error:!1}),[re,se]=Object(i.useState)({value:"",errorMessage:"",error:!1}),[ce,ue]=Object(i.useState)({value:"",errorMessage:"",error:!1}),[ve,me]=Object(i.useState)({value:"",errorMessage:"",error:!1}),[be,Oe]=Object(i.useState)(""),[je,fe]=Object(i.useState)(""),[ge,Ce]=Object(i.useState)(!1),[he,pe]=Object(i.useState)(!0),[Ne,xe]=Object(i.useState)(!1),De=()=>{var e;je>0&&""!==(ce.value&&ve.value&&re.value&&ne.value)&&X((e={body:{RecipientEmail:ne.value,BuyerName:re.value,BuyerEmail:ce.value,BuyerMobileNumber:ve.value,Message:be,GiftCardAmount:je},tenantId:J,customerId:Z},{type:o.fg,payload:e}))};Object(i.useEffect)((()=>{je>0&&""!==(ce.value&&ve.value&&re.value&&ne.value)&&!1===(ce.error||ve.error||re.error||ne.error)?pe(!1):pe(!0)}),[ne,re,ce,ve,je]),Object(i.useEffect)((()=>{Object(p.a)(F,re.error,re.errorMessage)}),[re.errorMessage,re.error]),Object(i.useEffect)((()=>{Object(p.a)(F,ve.error,ve.errorMessage)}),[ve.errorMessage,ve.error]),Object(i.useEffect)((()=>{Object(p.a)(F,ce.error,ce.errorMessage)}),[ce.errorMessage,ce.error]),Object(i.useEffect)((()=>{Object(p.a)(F,ne.error,ne.errorMessage)}),[ne.errorMessage,ne.error]),Object(i.useEffect)((()=>{te&&Ce(!0)}),[te]),Object(i.useEffect)((()=>{null!==Y&&void 0!==Y&&Y.ShowFailureError&&(xe(!0),Object(b.Kb)("KFC Gift Card",y))}),[null===Y||void 0===Y?void 0:Y.ShowFailureError]),Object(i.useEffect)((()=>{"giftCardPurchase"===localStorage.getItem("postPaymentType")&&"Success"===localStorage.getItem("paymentStatus")&&J&&X(Object(E.b)({tenantId:J,orderId:null===ee||void 0===ee?void 0:ee.orderId}))}),[localStorage.getItem("paymentStatus")]);const Ee=(e,t)=>{let l=e.target.value;t===U.USER_FULL_NAME&&se({...L(re,l)}),t===U.USER_PHONE&&me({...w(ve,l)}),t===U.USER_EMAIL&&ue({...P(ce,l)}),t===U.RECP_EMAIL&&de({...B(ne,l)}),t===U.MESSAGE&&Oe(l)};return Object(N.jsxs)("div",{className:"giftcard-container",children:[Object(N.jsxs)("div",{className:"giftcard-headline-container",children:[Object(N.jsx)("h1",{className:"giftcard-headline",children:c.headline}),Object(N.jsx)("button",{"data-testid":"toggle-modal",className:"button whiteButton blackBorder check-balance",onClick:()=>(l(!0),void X(Object(h.c)())),children:Object(v.translateWithI18Next)(x)}),t&&Object(N.jsx)(D,{tenantId:z.tenantId,isOpen:t,handleClose:oe})]}),Object(N.jsxs)("div",{className:"main-container",children:[Object(N.jsx)("h2",{className:"buy-card-text",children:c.subHeadline}),Object(N.jsx)("img",{src:u.url,alt:"KFC Gift Card",className:"card-image"}),Object(N.jsxs)("div",{className:"card-amount-container",children:[Object(N.jsx)("h3",{className:"card-amount-heading container-heading",children:O.title}),Object(N.jsxs)("div",{className:"amount-list",children:[O&&O.list&&O.list.map(((e,t)=>Object(N.jsx)(a.a.Fragment,{children:Object(N.jsxs)(j.a,{"data-testid":"selected-amt",id:"gift-amount",className:e===je?"amount-block amount-block-select":"amount-block",onClick:t=>{fe(e),((e,t,l)=>{document.getElementById("gift-amount").setAttribute("aria-label",t+l+"selected")})(0,e,Q)},ariaLable:e+Q,children:[Q,e]})}))),"INDIA"!==(null===z||void 0===z?void 0:z.country)&&Object(N.jsx)("div",{className:"amount-block",children:q})]})]}),Object(N.jsxs)("div",{className:"infomation-container",children:[Object(N.jsx)("h3",{className:"information-heading container-heading",children:V}),Object(N.jsxs)("div",{className:"infomation-input-container",children:[!g&&Object(N.jsx)("p",{className:"mandatory-note",children:Object(v.translateWithI18Next)(K)}),Object(N.jsx)(C.a,{"data-testid":"recept-email",autoComplete:"on",value:ne.value,labelClassName:"info-label",inputClassName:"info-input",helperTextClassName:"error-text",placeholder:Object(v.translateWithI18Next)(A),"aria-required":"true",onChange:e=>Ee(e,U.RECP_EMAIL),helperText:ne.errorMessage,error:ne.error}),Object(N.jsx)(C.a,{"data-testid":"user-name",autoComplete:"on",value:re.value,labelClassName:"info-label",inputClassName:"info-input",helperTextClassName:"error-text",maxlength:"26","aria-required":"true",placeholder:Object(v.translateWithI18Next)(T),onChange:e=>Ee(e,U.USER_FULL_NAME),helperText:re.errorMessage,error:re.error}),Object(N.jsx)(C.a,{"data-testid":"user-email",autoComplete:"on",value:ce.value,labelClassName:"info-label",inputClassName:"info-input",helperTextClassName:"error-text","aria-required":"true",placeholder:Object(v.translateWithI18Next)(R),onChange:e=>Ee(e,U.USER_EMAIL),helperText:ce.errorMessage,error:ce.error}),Object(N.jsx)(C.a,{"data-testid":"user-phone",autoComplete:"on",value:ve.value,labelClassName:"info-label",inputClassName:"info-input",helperTextClassName:"error-text",maxlength:"10","aria-required":"true",placeholder:Object(v.translateWithI18Next)(S),onChange:e=>Ee(e,U.USER_PHONE),helperText:ve.errorMessage,error:ve.error})]})]}),Object(N.jsxs)("div",{className:"msg-container",children:[Object(N.jsx)("h3",{className:"msg-heading container-heading",children:W}),Object(N.jsx)("textarea",{"data-testid":"msg-input",value:be,className:"msg-inputbox",placeholder:Object(v.translateWithI18Next)(G),"aria-label":Object(v.translateWithI18Next)(G),onChange:e=>Ee(e,U.MESSAGE)})]})]}),Object(N.jsxs)("div",{id:"terms-condition-button-container",children:[Object(N.jsxs)("div",{className:"terms-condition-container",children:[Object(N.jsx)("div",{className:"terms-condition-title","aria-label":f.title,children:f.title}),Object(N.jsx)("div",{className:"terms-condition-data","aria-label":f.data,children:f.data})]}),Object(N.jsxs)("div",{className:"button-container",children:[Object(N.jsx)("button",{"data-testid":"clear-input",className:"button whiteButton blackBorder cancel-button",onClick:()=>(de({value:""}),se({value:""}),ue({value:""}),me({value:""}),Oe(""),void fe("")),children:Object(v.translateWithI18Next)(k)}),Object(N.jsx)("button",{"data-testid":"payment-button",className:"button redButton payment-button payment-button-in",disabled:he||le,onClick:()=>De(),children:Object(v.translateWithI18Next)(H)})]})]}),ge&&Object(N.jsx)(I,{giftCardPurchaseData:ee}),r&&(Ne||"Success"===localStorage.getItem("paymentStatus"))&&Object(N.jsx)(_,{isOpen:r,handleClose:()=>(localStorage.setItem("paymentStatus",""),localStorage.setItem("postPaymentType",""),X(Object(E.c)()),X(n()),s(!1),void window.location.reload()),purchaseStatus:null===ae||void 0===ae?void 0:ae.purchaseStatus,paymentStatus:localStorage.getItem("paymentStatus")})]})},H=l(110),U=l(69),W=l(0),V=l(136),q=l(212),K=l(227),X=l(4),Y=l(162),z=l(332),J=l(42);const{GIFT_CARD_ITEMS:Q}=W.Oc,Z=e=>{var t;const l=null===(t=e.body)||void 0===t?void 0:t.map((e=>e.fields));var i,a,o,n,d,r,s,c,u,v,m,O,j,f,g,C,h,p,N,x,D,E,I,A,T,S,_,M,y,F,G,L,w,P,B,k,H,U,V,q,K,X;if(!R()(l)&&W.yc===e.title)return{headLine:null===(i=l[0])||void 0===i?void 0:i.headline,desktopImage:Object(b.fd)(null===(a=l[0])||void 0===a||null===(o=a.image1)||void 0===o||null===(n=o.fields)||void 0===n||null===(d=n.file)||void 0===d?void 0:d.url,Q.BANNER_WIDTH_DESKTOP,Q.BANNER_HEIGHT_DESKTOP),mobileImage:Object(b.fd)(null===(r=l[0])||void 0===r||null===(s=r.image)||void 0===s||null===(c=s.fields)||void 0===c||null===(u=c.file)||void 0===u?void 0:u.url,Q.BANNER_WIDTH_MOBILE,Q.BANNER_HEIGHT_MOBILE),phoneNumberRegex:l[1].formField[0].fields.pattern,subHeadline:null===(v=l[0])||void 0===v?void 0:v.subHeadline,description:null===(m=l[0])||void 0===m?void 0:m.description,resendCardDetailsButtonText:null===(O=l[0])||void 0===O||null===(j=O.button)||void 0===j||null===(f=j.fields)||void 0===f?void 0:f.buttonText,giftCardAmountOptions:null===(g=l[3])||void 0===g||null===(C=g.formField)||void 0===C||null===(h=C[0])||void 0===h?void 0:h.fields.values,yourInfoFormHeadline:null===(p=l[2])||void 0===p?void 0:p.headline,giftCardDetailsFormHeadline:null===(N=l[3])||void 0===N?void 0:N.headline,additionalInfoHeadline:null===(x=l[6])||void 0===x?void 0:x.headline,termsCondtionsLink:null===(D=l[6])||void 0===D?void 0:D.formField[0].fields.linkText,addAnotherGiftCard:null===(E=l[3])||void 0===E?void 0:E.formField[4].fields.buttonText,goToPaymentButton:null===(I=l[4])||void 0===I?void 0:I.buttonText,faqText:null===(A=l[6])||void 0===A||null===(T=A.formField[1])||void 0===T?void 0:T.fields.headline,faqLink:null===(S=l[6])||void 0===S||null===(_=S.formField[2])||void 0===_?void 0:_.fields.linkText,faqUrl:null===(M=l[6])||void 0===M||null===(y=M.formField[2])||void 0===y?void 0:y.fields.internalurl,termsCondtionsUrl:null===(F=l[6])||void 0===F||null===(G=F.formField[0])||void 0===G?void 0:G.fields.internalurl,checkCardDetailsModalTitle:null===(L=l[1])||void 0===L?void 0:L.headline,checkCardDetailsModalContent:null===(w=l[1])||void 0===w?void 0:w.subHeadline,checkCardDetailsModalInput:null===(P=l[1])||void 0===P||null===(B=P.formField[0])||void 0===B?void 0:B.fields.label,linkImageBlack:null===(k=l[5])||void 0===k?void 0:k.image.fields.file.url,linkImageWhite:null===(H=l[4])||void 0===H?void 0:H.image.fields.file.url,checkCardDetailsModalButtonText:null===(U=l[1])||void 0===U||null===(V=U.formField[1])||void 0===V?void 0:V.fields.buttonText,confirmAmountButtonText:null===(q=l[3])||void 0===q||null===(K=q.formField[1])||void 0===K||null===(X=K.fields)||void 0===X?void 0:X.buttonText,minAmount:l[3].formField[0].fields.maximumAmount,maxAmount:l[3].formField[0].fields.minimumAmount}},$=e=>{var t;const l=null===e||void 0===e||null===(t=e.getValueFromElements)||void 0===t?void 0:t.call(e),i={...null===e||void 0===e?void 0:e.customerDetails};void 0!==l&&(i.customerName=null===l||void 0===l?void 0:l.customerName,i.customerEmail=null===l||void 0===l?void 0:l.customerEmail),i.isFormValid=null===e||void 0===e?void 0:e.isFormValid,null===e||void 0===e||e.updateGiftCardDetails({customerDetails:{...i}})},ee=e=>{var t,l,i,a,o;const n=[];return null===e||void 0===e||null===(t=e.items)||void 0===t||null===(l=t[0])||void 0===l||null===(i=l.fields.body)||void 0===i||null===(a=i[2])||void 0===a||null===(o=a.fields)||void 0===o||o.formField.forEach((e=>{var t,l,i,a,o,d,r,s;const{fields:c,sys:{id:u}}=e,m={...c,className:"formElement",key:u,rules:{required:{value:!(null===e||void 0===e||null===(t=e.fields)||void 0===t||!t.required)&&(null===e||void 0===e||null===(l=e.fields)||void 0===l?void 0:l.required),message:"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(e.fields.description.content[0].content[0].value.toLowerCase())},pattern:{value:null!==e&&void 0!==e&&null!==(i=e.fields)&&void 0!==i&&i.pattern?RegExp(null===e||void 0===e||null===(a=e.fields)||void 0===a?void 0:a.pattern):null,message:"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(e.fields.description.content[0].content[0].value.toLowerCase())},validate:t=>{var l;return(null===e||void 0===e||null===(l=e.fields)||void 0===l?void 0:l.type)!==W.Pc||(!Object(z.b)(Y.a,t)||"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(e.fields.description.content[0].content[0].value.toLowerCase()))}},onChangeHandler:$,onBlurHandler:$,isMandatory:!(null===e||void 0===e||null===(o=e.fields)||void 0===o||!o.required)&&(null===e||void 0===e||null===(d=e.fields)||void 0===d?void 0:d.required),maxLength:null!==e&&void 0!==e&&null!==(r=e.fields)&&void 0!==r&&r.maxLength?null===e||void 0===e||null===(s=e.fields)||void 0===s?void 0:s.maxLength:"",value:""};n.push(m)})),n},te=e=>{var t;const l=null===e||void 0===e||null===(t=e.giftCardDetails)||void 0===t?void 0:t.recipientDetails;l[null===e||void 0===e?void 0:e.name].giftCardAmountOtherDirty=!1,null===e||void 0===e||e.updateGiftCardDetails({recipientDetails:l})},le=e=>{var t;const l=null===e||void 0===e||null===(t=e.giftCardDetails)||void 0===t?void 0:t.recipientDetails;l[null===e||void 0===e?void 0:e.name].giftCardAmountOtherDirty=!0,null===e||void 0===e||e.updateGiftCardDetails({recipientDetails:l})},ie=(e,t)=>{var l,i;return null!==e&&void 0!==e&&null!==(l=e.giftCardDetails)&&void 0!==l&&null!==(i=l.recipientDetails[null===e||void 0===e?void 0:e.name])&&void 0!==i&&i.customTipSelected?parseInt(null===t||void 0===t?void 0:t.value)+W.jb:null===t||void 0===t?void 0:t.value},ae=e=>{var t,l;return!(null===e||void 0===e||null===(t=e.giftCardDetails)||void 0===t||null===(l=t.recipientDetails[null===e||void 0===e?void 0:e.name])||void 0===l||!l.customTipSelected)},oe=(e,t)=>{var l,i;const a=null===e||void 0===e?void 0:e.name,o=[...null===e||void 0===e||null===(l=e.giftCardDetails)||void 0===l?void 0:l.recipientDetails];t&&(o[a].isFormValid=!1,o[a].customTipSelected=!1),null===e||void 0===e||null===(i=e.updateGiftCardDetails)||void 0===i||i.call(e,{recipientDetails:o})},ne=e=>{var t,l,i,a;let{formValues:o,formElement:n,giftCardDetails:d}=e;const r=(null===o||void 0===o?void 0:o.giftCardAmount)===W.Rd?parseInt(null===o||void 0===o?void 0:o.giftCardAmountOther):parseInt(null===o||void 0===o?void 0:o.giftCardAmount);var s,c,u,m;if(null!==d&&void 0!==d&&null!==(t=d.recipientDetails)&&void 0!==t&&null!==(l=t[null===o||void 0===o?void 0:o.hiddenField])&&void 0!==l&&l.giftCardAmountOtherDirty&&(isNaN(r)||R()(null===o||void 0===o?void 0:o.giftCardAmount)||(null===o||void 0===o?void 0:o.giftCardAmount)===W.Rd&&(R()(null===o||void 0===o?void 0:o.giftCardAmountOther)||!/^\d+$/.test(null===o||void 0===o?void 0:o.giftCardAmountOther))))return"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(null===n||void 0===n||null===(s=n.fields)||void 0===s||null===(c=s.label)||void 0===c?void 0:c.toLowerCase());return 0===r?"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(null===n||void 0===n||null===(u=n.fields)||void 0===u||null===(m=u.label)||void 0===m?void 0:m.toLowerCase()):r>(null===n||void 0===n||null===(i=n.fields)||void 0===i?void 0:i.maximumAmount)?"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.MAX_AMOUNT_INAVLAID_MSG)):!(r<(null===n||void 0===n||null===(a=n.fields)||void 0===a?void 0:a.minimumAmount))||"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.MIN_AMOUNT_INVALID_MSG))},de=e=>{var t,l,i,a,o;const{giftCardDetails:n,giftCardContent:d}=e,r=[];return null===d||void 0===d||null===(t=d.items)||void 0===t||null===(l=t[0])||void 0===l||null===(i=l.fields.body)||void 0===i||null===(a=i[3])||void 0===a||null===(o=a.fields)||void 0===o||o.formField.forEach((e=>{var t,l,i,a;const{fields:o,sys:{id:d}}=e,s={...o,key:d,name:null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.name};if((null===e||void 0===e||null===(l=e.fields)||void 0===l?void 0:l.name)===m.a.GIFT_CARD_AMOUNT)(e=>{var t,l,i;let{dataUpdated:a,returnData:o,giftCardDetails:n,formElement:d}=e;a.push({...o,type:null===W.pc||void 0===W.pc?void 0:W.pc.TILES_BUTTON_GROUP,source:null===n||void 0===n||null===(t=n.recipientAmountPanelConfig)||void 0===t?void 0:t.tileButtonGroupSource,onClickHandler:re}),a.push({...o,name:"".concat(null===d||void 0===d||null===(l=d.fields)||void 0===l?void 0:l.name).concat(W.Rd),type:null===W.pc||void 0===W.pc?void 0:W.pc.INPUT,onChangeHandler:re,onBlurHandler:te,onFocusHandler:le,isMandatory:null===d||void 0===d||null===(i=d.fields)||void 0===i?void 0:i.required,showClearTextInputBtn:(e,t)=>{var l,i,a,o;return(null===t||void 0===t?void 0:t.name)===m.a.GIFT_CARD_AMOUNT_OTHER&&!R()(null===e||void 0===e||null===(l=e.getValueFromElements)||void 0===l||null===(i=l.call(e))||void 0===i?void 0:i[m.a.GIFT_CARD_AMOUNT_OTHER])&&!(null!==e&&void 0!==e&&null!==(a=e.giftCardDetails)&&void 0!==a&&null!==(o=a.recipientDetails[null===e||void 0===e?void 0:e.name])&&void 0!==o&&o.customTipSelected)},showEditTextInputBtn:e=>{var t,l;return null===e||void 0===e||null===(t=e.giftCardDetails)||void 0===t||null===(l=t.recipientDetails[null===e||void 0===e?void 0:e.name])||void 0===l?void 0:l.customTipSelected},conditionalRender:(e,t)=>{var l,i,a,o,n;return(null===t||void 0===t?void 0:t.name)===m.a.GIFT_CARD_AMOUNT_OTHER&&(null===e||void 0===e||null===(l=e.getValueFromElements)||void 0===l||null===(i=l.call(e))||void 0===i||null===(a=i[m.a.GIFT_CARD_AMOUNT])||void 0===a||null===(o=a.toLowerCase)||void 0===o?void 0:o.call(a))===(null===W.Rd||void 0===W.Rd||null===(n=W.Rd.toLowerCase)||void 0===n?void 0:n.call(W.Rd))},onClearButtonClickHandler:(e,t)=>(null===t||void 0===t?void 0:t.name)===m.a.GIFT_CARD_AMOUNT_OTHER&&(null===e||void 0===e?void 0:e.setValueToFormElements(m.a.GIFT_CARD_AMOUNT_OTHER,"")),onEditButtonClickHandler:(e,t)=>oe(e,t),prefix:(e,t)=>{var l,i,a,o;return(null===t||void 0===t?void 0:t.name)===m.a.GIFT_CARD_AMOUNT_OTHER&&(!R()(null===e||void 0===e||null===(l=e.getValueFromElements)||void 0===l||null===(i=l.call(e))||void 0===i?void 0:i[m.a.GIFT_CARD_AMOUNT_OTHER])||null!==e&&void 0!==e&&null!==(a=e.giftCardDetails)&&void 0!==a&&null!==(o=a.recipientDetails[null===e||void 0===e?void 0:e.name])&&void 0!==o&&o.giftCardAmountOtherDirty)?null===n||void 0===n?void 0:n.currencySymbol:""},readonly:e=>ae(e),updatedValue:(e,t)=>ie(e,t),rules:{validate:(e,t)=>ne({textValue:e,formValues:t,formElement:d,giftCardDetails:n})}})})({dataUpdated:r,returnData:s,giftCardDetails:n,formElement:e});else if((null===e||void 0===e||null===(i=e.fields)||void 0===i?void 0:i.name)===m.a.CONFIRM_AMOUNT_BUTTON){var c;r.push({...s,type:null===W.pc||void 0===W.pc?void 0:W.pc.BUTTON,label:null===e||void 0===e||null===(c=e.fields)||void 0===c?void 0:c.buttonText,onClickHandler:re,conditionalRender:(e,t)=>{var l,i,a,o,n,d,r;return(null===e||void 0===e||null===(l=e.getValueFromElements)||void 0===l||null===(i=l.call(e))||void 0===i||null===(a=i[m.a.GIFT_CARD_AMOUNT])||void 0===a||null===(o=a.toLowerCase)||void 0===o?void 0:o.call(a))===(null===W.Rd||void 0===W.Rd||null===(n=W.Rd.toLowerCase)||void 0===n?void 0:n.call(W.Rd))&&!(null!==e&&void 0!==e&&null!==(d=e.giftCardDetails)&&void 0!==d&&null!==(r=d.recipientDetails[null===e||void 0===e?void 0:e.name])&&void 0!==r&&r.customTipSelected)},disabled:(e,t)=>{var l,i,a;return R()(null===e||void 0===e||null===(l=e.getValueFromElements)||void 0===l||null===(i=l.call(e))||void 0===i?void 0:i[m.a.GIFT_CARD_AMOUNT_OTHER])||!R()(null===e||void 0===e||null===(a=e.errors)||void 0===a?void 0:a.giftCardAmountOther)},rules:{validate:(t,l)=>(e=>{var t,l,i,a;let{formValues:o,giftCardDetails:n}=e;return(null===n||void 0===n||null===(t=n.recipientDetails)||void 0===t||null===(l=t[null===o||void 0===o?void 0:o.hiddenField])||void 0===l?void 0:l.giftCardAmount)!==W.Rd||(null===n||void 0===n||null===(i=n.recipientDetails)||void 0===i||null===(a=i[null===o||void 0===o?void 0:o.hiddenField])||void 0===a?void 0:a.customTipSelected)})({textValue:t,formValues:l,formElement:e,giftCardDetails:n})}})}else(null===e||void 0===e||null===(a=e.fields)||void 0===a?void 0:a.name)!==m.a.ADD_ANOTHER_GIFT_CARD&&(e=>{var t,l,i,a,o,n,d,r;let{dataUpdated:s,returnData:c,formElement:u}=e;s.push({...c,rules:{required:{value:null===u||void 0===u||null===(t=u.fields)||void 0===t?void 0:t.required,message:"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(null===u||void 0===u||null===(l=u.fields)||void 0===l||null===(i=l.label)||void 0===i?void 0:i.toLowerCase())},pattern:{value:RegExp(null===u||void 0===u||null===(a=u.fields)||void 0===a?void 0:a.pattern),message:"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(null===u||void 0===u||null===(o=u.fields)||void 0===o||null===(n=o.label)||void 0===n?void 0:n.toLowerCase())},validate:e=>{var t,l,i;return(null===u||void 0===u||null===(t=u.fields)||void 0===t?void 0:t.type)!==W.Pc||!Object(z.b)(Y.a,e)||"".concat(Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.INVALID_TEXT)," ").concat(null===u||void 0===u||null===(l=u.fields)||void 0===l||null===(i=l.label)||void 0===i?void 0:i.toLowerCase())}},onChangeHandler:re,onBlurHandler:re,isMandatory:null===u||void 0===u||null===(d=u.fields)||void 0===d?void 0:d.required,maxLength:null===u||void 0===u||null===(r=u.fields)||void 0===r?void 0:r.maxLength})})({dataUpdated:r,returnData:s,formElement:e})})),r},re=(e,t)=>{var l,i,a,o,n,d,r;const s=null===e||void 0===e||null===(l=e.getValueFromElements)||void 0===l?void 0:l.call(e),c=null===e||void 0===e?void 0:e.name,u=[...null===e||void 0===e||null===(i=e.giftCardDetails)||void 0===i?void 0:i.recipientDetails];if(t){var v,b,O;const l=(null===t||void 0===t?void 0:t.name)===m.a.GIFT_CARD_AMOUNT?null===s||void 0===s||null===(v=s[null===t||void 0===t?void 0:t.name])||void 0===v||null===(b=v.detail)||void 0===b?void 0:b.value:null===s||void 0===s?void 0:s[null===t||void 0===t?void 0:t.name];var j,f,g,C,h,p;if(u[c][null===t||void 0===t?void 0:t.name]=l,(null===t||void 0===t?void 0:t.name)===m.a.CONFIRM_AMOUNT_BUTTON)u[c].customTipSelected=(null===u||void 0===u||null===(j=u[c])||void 0===j||null===(f=j.giftCardAmount)||void 0===f||null===(g=f.toLowerCase)||void 0===g?void 0:g.call(f))===(null===W.Rd||void 0===W.Rd||null===(C=W.Rd.toLowerCase)||void 0===C?void 0:C.call(W.Rd))&&!isNaN(parseInt(null===u||void 0===u||null===(h=u[c])||void 0===h||null===(p=h.giftCardAmountOther)||void 0===p?void 0:p.trim()));(null===t||void 0===t?void 0:t.name)===m.a.GIFT_CARD_AMOUNT&&(null===e||void 0===e||null===(O=e.setValueToFormElements)||void 0===O||O.call(e,m.a.GIFT_CARD_AMOUNT,l))}var N;(null===u||void 0===u||null===(a=u[c])||void 0===a||null===(o=a.giftCardAmount)||void 0===o||null===(n=o.toLowerCase)||void 0===n?void 0:n.call(o))!==(null===W.Rd||void 0===W.Rd||null===(d=W.Rd.toLowerCase)||void 0===d?void 0:d.call(W.Rd))&&(u[c].giftCardAmountOther="",u[c].customTipSelected=!1,u[c].giftCardAmountOtherDirty=!1,null===e||void 0===e||e.resetFormFieldValues(m.a.GIFT_CARD_AMOUNT_OTHER,{keepDirty:!1}),null===e||void 0===e||null===(N=e.setValueToFormElements)||void 0===N||N.call(e,m.a.GIFT_CARD_AMOUNT_OTHER,""));u[c].isFormValid=null===e||void 0===e?void 0:e.isFormValid,null===e||void 0===e||null===(r=e.updateGiftCardDetails)||void 0===r||r.call(e,{recipientDetails:u})},se=e=>{var t;return null===e||void 0===e||null===(t=e.recipientDetails)||void 0===t?void 0:t.every((e=>(null===e||void 0===e?void 0:e.isFormValid)&&((null===e||void 0===e?void 0:e.giftCardAmount)===W.Rd?null===e||void 0===e?void 0:e.giftCardAmountOther:null===e||void 0===e?void 0:e.giftCardAmount)))},ce=e=>(e=>{var t;return(null===e||void 0===e||null===(t=e.customerDetails)||void 0===t?void 0:t.isFormValid)&&se(e)})(e)?"mt-4 goToPaymentButton":"mt-4 goToPaymentButton-disabled",ue=e=>{var t,l,i;return null!==e&&void 0!==e&&null!==(t=e.customerDetails)&&void 0!==t&&t.isFormValid&&se(e)?null===e||void 0===e||null===(l=e.segmentedGiftCardData)||void 0===l?void 0:l.linkImageBlack:null===e||void 0===e||null===(i=e.segmentedGiftCardData)||void 0===i?void 0:i.linkImageWhite},ve=(e,t)=>{var l,i,a,o,n,d,r,s,c,u;const v=!(null===e||void 0===e||!e.removeRecipientButtonClicked)&&(null===e||void 0===e?void 0:e.removeRecipientButtonClicked);null===t||void 0===t||t({removeRecipientButtonClicked:v});const m=[...null===e||void 0===e?void 0:e.recipientDetails],b=null===e||void 0===e||null===(l=e.recipientDetails)||void 0===l||null===(i=l[(null===m||void 0===m?void 0:m.length)-1])||void 0===i?void 0:i.giftCardAmount,O=null!==e&&void 0!==e&&null!==(a=e.recipientDetails)&&void 0!==a&&null!==(o=a[(null===m||void 0===m?void 0:m.length)-1])&&void 0!==o&&o.customTipSelected&&null!==e&&void 0!==e&&null!==(n=e.recipientDetails)&&void 0!==n&&null!==(d=n[(null===m||void 0===m?void 0:m.length)-1])&&void 0!==d&&d.giftCardAmountOther?null===e||void 0===e||null===(r=e.recipientDetails)||void 0===r||null===(s=r[(null===m||void 0===m?void 0:m.length)-1])||void 0===s?void 0:s.giftCardAmountOther:"";null===m||void 0===m||m.push({name:null===m||void 0===m?void 0:m.length,recipientName:"",recipientPhoneNumber:"",giftCardAmount:b,giftCardAmountOther:O,customTipSelected:(null===b||void 0===b||null===(c=b.toLowerCase)||void 0===c?void 0:c.call(b))===(null===W.Rd||void 0===W.Rd||null===(u=W.Rd.toLowerCase)||void 0===u?void 0:u.call(W.Rd))&&!isNaN(parseInt(O.trim())),giftCardAmountOtherDirty:!1,isFormValid:!1,isDirty:!1}),null===t||void 0===t||t({recipientDetails:[...m]})},me=e=>"giftcardContainer".concat(e?" mobile":""),be=e=>e?"text-danger-phoneNumber":" ",Oe=(e,t,l,i)=>{const a=e.target.value;e.target.name===W.Wd&&l({...je(t,a,i)})},je=(e,t,l)=>{let i={...e};return i.value=t,!t||t.length<10||isNaN(t)||!((e,t)=>RegExp(t).test(e))(t,l)?(i.error=!0,i.errorMessage=Object(v.translateWithI18Next)(X.a.MOBILE_ERROR_MESSAGE)):(i.error=!1,i.errorMessage=""),i};var fe=e=>{const{isOpen:t,handleClose:l,tenantId:a,checkCardDetailsModalContent:o,checkCardDetailsModalTitle:n,checkCardDetailsModalButton:r,customerId:s,isMobile:c,phoneNumberRegex:u,giftCardDetails:m}=e,[f,g]=Object(i.useState)(!0),p=Object(d.b)(),x=Object(d.c)((e=>{var t;return null===e||void 0===e||null===(t=e.createBalanceReducer)||void 0===t?void 0:t.response})),D=Object(M.g)(),[E,I]=Object(i.useState)(!1),[A,T]=Object(i.useState)({value:"",errorMessage:"",error:!1}),{Ellipse:_}=S.a;Object(i.useEffect)((()=>{p(Object(h.c)())}),[E,p]),Object(i.useEffect)((()=>{if(!R()(x)){(null===x||void 0===x?void 0:x.isSuccess)?l():(sessionStorage.setItem(W.Ke.POST_PAYMENT_TYPE,W.oe.GET_GIFT_CARD_DETAILS),Object(b.Se)({history:D}))}}),[x,E,D,l]),Object(i.useEffect)((()=>{const e=""!==A.value,t=!1===A.error;g(!e||!t)}),[A]);const y={role:"dialog",modalTitleId:"CheckBalancepopup",show:t,classNames:(F=c,F?"giftcard-checkbalance-modal":"giftcard-getCardDetails-modal"),showCloseBtn:!0,closeButtonHandler:l,autoFocus:!0,modalTitle:n,closeDataTestId:"giftcheck-balance"};var F,G,L,w;return Object(N.jsx)("div",{className:me(c),"data-testid":"giftcard-checkBal",children:t&&Object(N.jsxs)(O.a,{...y,children:[Object(N.jsx)("div",{className:"getDetailsModalHeader",children:n}),Object(N.jsx)("div",{className:"getDetailsModalContent",children:o}),Object(N.jsxs)("div",{className:"getPhoneNumber",children:[Object(N.jsx)(C.a,{type:"number","data-testid":"phone-number-testid",className:(w=A.error,w?"formElement-error":"formElement"),name:"phoneNumber",placeholder:Object(v.translateWithI18Next)(X.a.PHONE_NUMBER_PLACEHOLDER_NOT_REQUIRED),value:A.value,onChange:e=>Oe(e,A,T,u),onKeyPress:e=>(e=>{/[0-9]/.test(e.key)||e.preventDefault()})(e),maxLength:10,readOnly:E,onBlur:e=>Oe(e,A,T,u)}),Object(N.jsxs)("div",{id:"phoneNumber",className:be(A.error),children:[(G=A,L=_,G.error&&Object(N.jsx)("img",{src:L,alt:"error",className:"mr-2"})),Object(N.jsx)("span",{role:"alert",children:A.errorMessage})]})]}),Object(N.jsx)("div",{className:"buttonGiftModal",children:Object(N.jsx)(j.a,{"data-testid":"subm-button",className:"button blackButton blackBorder save-button",onClick:e=>(e=>{if(p(Object(U.d)({key:"giftCardDataCustomerDetails",value:null===m||void 0===m?void 0:m.customerDetails})),g(!0),I(!0),""!==A.value){const e={customerId:s,tenantId:a,body:{phoneNumber:A.value}};p(Object(h.b)(e))}})(),disabled:f,children:r})})]})})},ge=l(376);const Ce=e=>{var t,l,i;return(null===e||void 0===e?void 0:e.segmentedGiftCardData)&&Object(N.jsxs)("div",{className:"giftcard-banner-container",children:[Object(N.jsx)("div",{className:"banner-headline",children:null===e||void 0===e||null===(t=e.segmentedGiftCardData)||void 0===t?void 0:t.headLine}),Object(N.jsx)(A.a,{className:"banner-image","data-testid":"product-image",srcFile:null!==e&&void 0!==e&&e.isMobile?null===e||void 0===e||null===(l=e.segmentedGiftCardData)||void 0===l?void 0:l.mobileImage:null===e||void 0===e||null===(i=e.segmentedGiftCardData)||void 0===i?void 0:i.desktopImage,alt:"text"})]})},he=(e,t,l)=>{var i,a,o;return(null===e||void 0===e?void 0:e.segmentedGiftCardData)&&Object(N.jsxs)("div",{className:"giftcard-already-have-card-container",children:[Object(N.jsx)("h1",{className:"giftcard-headline",children:null===e||void 0===e||null===(i=e.segmentedGiftCardData)||void 0===i?void 0:i.subHeadline}),Object(N.jsx)("div",{className:"giftcard-description",children:null===e||void 0===e||null===(a=e.segmentedGiftCardData)||void 0===a?void 0:a.description}),Object(N.jsx)("div",{className:"resend-card-button-container",children:Object(N.jsx)("button",{"data-testid":"toggle-modal",className:"button whiteButton blackBorder resendcard-details",onClick:()=>((e,t)=>{null===e||void 0===e||e({openExistingCardBalanceModal:!0}),null===t||void 0===t||t(null===h.c||void 0===h.c?void 0:Object(h.c)())})(t,l),children:null===e||void 0===e||null===(o=e.segmentedGiftCardData)||void 0===o?void 0:o.resendCardDetailsButtonText})})]})},pe=(e,t)=>{var l,i,a;return(null===e||void 0===e?void 0:e.segmentedGiftCardData)&&Object(N.jsx)("div",{className:"yourInfoFormContainer",children:Object(N.jsxs)("div",{className:"row row-cols-12 mt-10px",children:[Object(N.jsx)("div",{className:"labelContent-addHope info-label pl-25px col-sm-2 col-12",children:Object(N.jsx)("span",{children:null===e||void 0===e||null===(l=e.segmentedGiftCardData)||void 0===l?void 0:l.yourInfoFormHeadline})}),Object(N.jsx)("div",{className:"donate-form-details px-25px col-sm-8 col-12",children:(null===e||void 0===e||null===(i=e.customerFormConfig)||void 0===i||null===(a=i.fieldsConfig)||void 0===a?void 0:a.length)&&Object(N.jsx)("div",{className:"mt-4 contactInfoContent col-12  d-flex",children:Object(N.jsx)("div",{className:"col-12",children:Object(N.jsx)(K.a,{formConfig:{...null===e||void 0===e?void 0:e.customerFormConfig,giftCardDetails:e,updateGiftCardDetails:t,name:"customer",defaultValues:R()(e.customerDetails)?{}:e.customerDetails,onFormLoadedCompleted:e=>t({customerFormRef:e})}})})})})]})})},Ne=(e,t)=>{var l;return(null===e||void 0===e?void 0:e.segmentedGiftCardData)&&(null===e||void 0===e||null===(l=e.recipientDetails)||void 0===l?void 0:l.map(((l,i)=>{var a,o;return Object(N.jsx)("div",{className:"recipientForm",children:Object(N.jsxs)("div",{className:"row row-cols-12 mt-10px",children:[Object(N.jsx)("div",{className:"labelContent-addHope info-label-recipientForm pl-25px col-sm-2 col-12",children:Object(N.jsx)("span",{children:null===e||void 0===e||null===(a=e.segmentedGiftCardData)||void 0===a?void 0:a.giftCardDetailsFormHeadline})}),Object(N.jsx)("div",{className:"donate-form-details px-25px col-sm-8 col-12",children:Object(N.jsx)("div",{className:"contactInfoContent col-12  d-flex",children:Object(N.jsxs)("div",{className:"col-12",children:[Object(N.jsx)("div",{children:(null===e||void 0===e||null===(o=e.recipientDetails)||void 0===o?void 0:o.length)>1&&0!==i&&Object(N.jsx)("div",{className:"removeSection d-flex",children:Object(N.jsx)("div",{onClick:()=>{!function(e,t){var l,i,a,o;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;-1!==n&&n<(null===e||void 0===e||null===(l=e.recipientDetails)||void 0===l?void 0:l.length)&&(null===e||void 0===e||null===(i=e.recipientDetails)||void 0===i||null===(a=i.splice)||void 0===a||a.call(i,n,1)),-1!==n&&(null===t||void 0===t||t({recipientDetails:[],tempRecipientDetails:[...null===e||void 0===e||null===(o=e.recipientDetails)||void 0===o?void 0:o.map(((e,t)=>(e.name=t,e)))]})),null===t||void 0===t||t({removeRecipientButtonClicked:!0})}(e,t,i)},children:Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.REMOVE)})})}),Object(N.jsx)(K.a,{formConfig:{...null===e||void 0===e?void 0:e.recipientFormConfig,giftCardDetails:e,updateGiftCardDetails:t,name:i,defaultValues:{...l,hiddenField:i},enableHiddenFields:!0,enableDefaultDirtyFields:null===e||void 0===e?void 0:e.removeRecipientButtonClicked}})]})})})]})})})))},xe=(e,t,l)=>{var i,a;return(null===e||void 0===e?void 0:e.segmentedGiftCardData)&&Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"add-card-buton",children:Object(N.jsx)("button",{"data-testid":"toggle-modal",className:"".concat(Object(b.Rd)()||Object(b.ae)()?"button whiteButton blackBorder resendcard-details resendcard-details-safari":"button whiteButton blackBorder resendcard-details"),disabled:!se(e),onClick:()=>ve(e,t),children:null===e||void 0===e||null===(i=e.segmentedGiftCardData)||void 0===i?void 0:i.addAnotherGiftCard})}),(null===e||void 0===e||null===(a=e.recipientDetails)||void 0===a?void 0:a.some((e=>"undefined"!==typeof(null===e||void 0===e?void 0:e.giftCardAmount)&&(null===e||void 0===e?void 0:e.giftCardAmount)===W.Rd&&(null===e||void 0===e?void 0:e.customTipSelected)||"undefined"!==typeof(null===e||void 0===e?void 0:e.giftCardAmount)&&(null===e||void 0===e?void 0:e.giftCardAmount)!==W.Rd)))&&Object(N.jsx)("div",{className:Object(b.ae)()||Object(b.Rd)()?"gift-card-summary gift-card-summary-safari":"gift-card-summary",children:_e(e)}),De(e,t,l),Ee(e)]})},De=(e,t,l)=>{var i,a,o;return Object(N.jsxs)("div",{className:"go-to-payment-button-container",children:[Object(N.jsxs)(j.c,{"data-testid":"toggle-modal",variant:null===j.b||void 0===j.b?void 0:j.b.primary,className:ce(e),onClick:()=>((e,t,l)=>{var i,a,o,n,d,r,s,c,u,v,m,b,O;sessionStorage.setItem(W.Ke.POST_PAYMENT_TYPE,W.oe.GIFT_CARD_PURCHASE);const j=(new Date).toISOString().slice(0,-5);t({isGoToPaymentButtonClicked:!0});const f=window.location.origin+W.Ae.ORDER_PROCESSING,g=null===e||void 0===e||null===(i=e.recipientDetails)||void 0===i?void 0:i.map((t=>({name:t.recipientName,phoneNumber:t.recipientPhoneNumber,amount:t.giftCardAmount!==W.Rd?parseInt(t.giftCardAmount)*(null===e||void 0===e?void 0:e.currencyConversionFactor):parseInt(t.giftCardAmountOther)*(null===e||void 0===e?void 0:e.currencyConversionFactor)})));l(Object(U.d)({key:"giftCardDataRecipientDetails",value:null===e||void 0===e?void 0:e.recipientDetails})),l(Object(U.d)({key:"giftCardDataCustomerDetails",value:null===e||void 0===e?void 0:e.customerDetails})),l(Object(U.d)({key:"loggedIn",value:null===e||void 0===e||null===(a=e.userParams)||void 0===a?void 0:a.loggedIn}));const C={customer:{id:null!==e&&void 0!==e&&null!==(o=e.userParams)&&void 0!==o&&o.loggedIn?null===e||void 0===e||null===(n=e.customerDetails)||void 0===n?void 0:n.customerId:"",firstName:null===e||void 0===e||null===(d=e.customerDetails)||void 0===d?void 0:d.customerName,lastName:null!==e&&void 0!==e&&null!==(r=e.userParams)&&void 0!==r&&r.loggedIn?null===e||void 0===e||null===(s=e.customerDetails)||void 0===s?void 0:s.lastName:"",email:null===e||void 0===e||null===(c=e.customerDetails)||void 0===c?void 0:c.customerEmail,phoneNumber:null!==e&&void 0!==e&&null!==(u=e.userParams)&&void 0!==u&&u.loggedIn?null===e||void 0===e||null===(v=e.customerDetails)||void 0===v?void 0:v.phone:"",isRegistered:null===e||void 0===e||null===(m=e.userParams)||void 0===m?void 0:m.loggedIn},purchaser:{name:null===e||void 0===e||null===(b=e.customerDetails)||void 0===b?void 0:b.customerName,email:null===e||void 0===e||null===(O=e.customerDetails)||void 0===O?void 0:O.customerEmail},recipients:g,transactionDate:j,lang:"en-ZA"};l(Object(J.x)({tenantId:null===e||void 0===e?void 0:e.tenantId,siteOrigin:f,data:C}))})(e,t,l),children:[null===e||void 0===e||null===(i=e.segmentedGiftCardData)||void 0===i?void 0:i.goToPaymentButton,(null===e||void 0===e||null===(a=e.segmentedGiftCardData)||void 0===a?void 0:a.goToPaymentButton)&&Object(N.jsx)("img",{src:ue(e),className:"footerIcon",alt:"img"})]}),(null===e||void 0===e?void 0:e.isGoToPaymentButtonClicked)&&(null===e||void 0===e||null===(o=e.giftCardPayResponse)||void 0===o?void 0:o.redirectUri)&&Object(N.jsx)(ge.a,{formData:null===e||void 0===e?void 0:e.giftCardPayResponse})]})},Ee=e=>{var t,l,i,a,o,n;return(null===e||void 0===e?void 0:e.segmentedGiftCardData)&&Object(N.jsxs)("div",{className:"additionalInfo",children:[Object(N.jsx)("div",{className:"additionalInfoHeadline",children:null===e||void 0===e||null===(t=e.segmentedGiftCardData)||void 0===t?void 0:t.additionalInfoHeadline}),Object(N.jsx)("div",{children:Object(N.jsx)(q.a,{className:"link-terms",href:null===e||void 0===e||null===(l=e.segmentedGiftCardData)||void 0===l?void 0:l.termsCondtionsUrl,children:null===e||void 0===e||null===(i=e.segmentedGiftCardData)||void 0===i?void 0:i.termsCondtionsLink})}),Object(N.jsxs)("span",{className:"additonalText",children:[" ",null===e||void 0===e||null===(a=e.segmentedGiftCardData)||void 0===a?void 0:a.faqText,Object(N.jsx)(q.a,{link:!0,className:"link-faq",href:null===e||void 0===e||null===(o=e.segmentedGiftCardData)||void 0===o?void 0:o.faqUrl,children:null===e||void 0===e||null===(n=e.segmentedGiftCardData)||void 0===n?void 0:n.faqLink})]})]})},Ie=(e,t)=>{const l=null===e||void 0===e?void 0:e.reduce(((e,t)=>(e[t]=e[t]+1||1,e)),{});return null===l||void 0===l?void 0:l[t]},Ae=e=>isNaN(parseInt(null===e||void 0===e?void 0:e.giftCardAmount))?0:null===e||void 0===e?void 0:e.giftCardAmount,Te=e=>null!==e&&void 0!==e&&e.customTipSelected?null===e||void 0===e?void 0:e.giftCardAmountOther:0,Re=e=>(null===e||void 0===e?void 0:e.giftCardAmount)===W.Rd&&null!==e&&void 0!==e&&e.customTipSelected?parseInt(null===e||void 0===e?void 0:e.giftCardAmountOther):parseInt(null===e||void 0===e?void 0:e.giftCardAmount),Se=e=>(null===e||void 0===e?void 0:e.giftCardAmount)===W.Rd?null===e||void 0===e?void 0:e.giftCardAmountOther:null===e||void 0===e?void 0:e.giftCardAmount,_e=e=>{var t,l;const i=(e=>{var t;return null===e||void 0===e||null===(t=e.recipientDetails)||void 0===t?void 0:t.map((e=>({amount:(null===e||void 0===e?void 0:e.giftCardAmount)===W.Rd?Te(e):Ae(e)})))})(e),a=null===i||void 0===i?void 0:i.reduce(((e,t)=>e+parseInt(null===t||void 0===t?void 0:t.amount)),0),o=(e=>null===e||void 0===e?void 0:e.recipientDetails.map((e=>{let{giftCardAmount:t,customTipSelected:l,giftCardAmountOther:i}=e;return t!==W.Rd?t:t===W.Rd&&l?i:""})))(e),n=null===e||void 0===e||null===(t=e.recipientDetails)||void 0===t?void 0:t.filter(((t,l)=>{var i;return l===(null===e||void 0===e||null===(i=e.recipientDetails)||void 0===i?void 0:i.findIndex(((e,t)=>{const l=null===t||void 0===t?void 0:t.recipientDetails.map((e=>{let{giftCardAmount:t}=e;return t}));return t=>(null===e||void 0===e?void 0:e.giftCardAmount)!==W.Rd?(null===e||void 0===e?void 0:e.giftCardAmount)===(null===t||void 0===t?void 0:t.giftCardAmount):(null===e||void 0===e?void 0:e.customTipSelected)&&!(null!==l&&void 0!==l&&l.includes(null===e||void 0===e?void 0:e.giftCardAmountOther))&&(null===e||void 0===e?void 0:e.giftCardAmountOther)===(null===t||void 0===t?void 0:t.giftCardAmountOther)})(t,e)))})),d=o.filter(Boolean);return Object(N.jsxs)(V.a,{header:"".concat(d.length," ITEM")+(d.length>1?"S":""),className:"global-accordian-header",open:!0,children:[(null===n||void 0===n?void 0:n.length)&&n.map((t=>(!isNaN(parseInt(null===t||void 0===t?void 0:t.giftCardAmount))||!isNaN(parseInt(null===t||void 0===t?void 0:t.giftCardAmountOther)))&&Object(N.jsx)("section",{className:"",children:Object(N.jsxs)("div",{className:"giftCardDescription",children:[Object(N.jsxs)("div",{id:"foodItemContainer",children:[Object(N.jsx)("span",{className:"number",children:"".concat(Ie(o,Se(t))>1?Ie(o,Se(t))+" ":1)}),Object(N.jsx)("span",{id:"foodNameChild",className:"giftCardName",children:Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.GIFT_CARD)+"- "+(null===e||void 0===e?void 0:e.currencySymbol)+Re(t)+W.jb})]}),Object(N.jsx)("div",{className:"ItemPrice foodName",children:(null===e||void 0===e?void 0:e.currencySymbol)+Ie(o,Se(t))*parseInt((null===t||void 0===t?void 0:t.giftCardAmount)===W.Rd?null===t||void 0===t?void 0:t.giftCardAmountOther:null===t||void 0===t?void 0:t.giftCardAmount)+W.jb})]})}))),Object(N.jsxs)("div",{className:"billDescription",children:[Object(N.jsx)("div",{id:"global-accordian-header",children:Object(N.jsx)("span",{className:"total-header",children:(null===(l=Object(v.translateWithI18Next)(null===X.a||void 0===X.a?void 0:X.a.TOTAL))||void 0===l?void 0:l.toUpperCase())+":"})}),Object(N.jsx)("div",{className:"total-amount",children:(null===e||void 0===e?void 0:e.currencySymbol)+a+W.jb})]})]})},Me=(e,t)=>{var l;return(null===e||void 0===e?void 0:e.openExistingCardBalanceModal)&&Object(N.jsx)(fe,{giftCardDetails:e,tenantId:null===e||void 0===e?void 0:e.tenantId,isOpen:null===e||void 0===e?void 0:e.openExistingCardBalanceModal,handleClose:e=>((e,t)=>{var l;null===e||void 0===e||null===(l=e.preventDefault)||void 0===l||l.call(e),null===t||void 0===t||t({openExistingCardBalanceModal:!1})})(e,t),checkCardDetailsModalContent:e.segmentedGiftCardData.checkCardDetailsModalContent,checkCardDetailsModalTitle:e.segmentedGiftCardData.checkCardDetailsModalTitle,checkCardDetailsModalInput:e.segmentedGiftCardData.checkCardDetailsModalInput,checkCardDetailsModalButton:e.segmentedGiftCardData.checkCardDetailsModalButtonText,phoneNumberRegex:e.segmentedGiftCardData.phoneNumberRegex,customerId:null===e||void 0===e||null===(l=e.customerDetails)||void 0===l?void 0:l.customerId,isMobile:null===e||void 0===e?void 0:e.isMobile})};var ye=l(267),Fe=l(64),Ge=l(138);var Le=e=>{var t,l,a,o;const{location:n}=e,r=Object(H.a)(),s=Object(H.b)(Fe.c),{tenantReducer:c,appStateReducer:u,profileReducer:v,paymentsReducer:m}=Object(d.c)((e=>e)),O=Object(H.b)(U.b),[j,f]=Object(i.useState)({dispatch:null,tenantId:null,currencySymbol:null,currencyConversionFactor:null,segmentedGiftCardData:null,customerFormRef:null,customerDetails:{},customerFormConfig:{},recipientFormConfig:{},recipientDetails:[],tempRecipientDetails:[],isMobile:Object(b.Ud)(window.innerWidth),openExistingCardBalanceModal:!1,isGoToPaymentButtonClicked:!1,removeRecipientButtonClicked:!1,recipientAmountPanelConfig:{tileButtonGroupSource:null,buttonText:null,minimumAmount:null,maximumAmount:null,inputFiledValidErrormsg:"",customAmount:"",addDonationBtnHandler:!0,showDonationsCustomFields:!1,showNonDonationPercentage:!0,editButtonShow:!1,showCurrencyField:!1,isGiftCardFlow:!0,isAddHopeFlow:!1},giftCardPayResponse:null}),g=Object(i.useCallback)((e=>{f&&f((t=>({...t,...e})))}),[]);return Object(i.useEffect)((()=>{window.scrollTo(0,0),window.addEventListener(W.we,(()=>{g({isMobile:Object(b.Ud)(window.innerWidth)})}),!0)}),[]),Object(i.useEffect)((()=>(r(Object(ye.j)()),r(Object(J.z)()),r(Object(Ge.h)()),()=>{r(Fe.a.resetReducer())})),[r]),Object(i.useEffect)((()=>{(null===c||void 0===c?void 0:c.tenantId)&&g({tenantId:null===c||void 0===c?void 0:c.tenantId,currencySymbol:null===c||void 0===c?void 0:c.currencySymbol,currencyConversionFactor:null===c||void 0===c?void 0:c.currencyConversionFactor})}),[null===c||void 0===c?void 0:c.tenantId]),Object(i.useEffect)((()=>{g({userParams:null===u||void 0===u?void 0:u.userStatus})}),[null===u||void 0===u?void 0:u.userStatus]),Object(i.useEffect)((()=>{(null===m||void 0===m?void 0:m.giftCardPayResponse)&&g({giftCardPayResponse:null===m||void 0===m?void 0:m.giftCardPayResponse})}),[null===m||void 0===m?void 0:m.giftCardPayResponse,null===j||void 0===j?void 0:j.isGoToPaymentButtonClicked]),Object(i.useEffect)((()=>{var e,t,l,i,a,o,d,r,s,c,u;const m={customerId:null!==(e=null===v||void 0===v?void 0:v.customerId)&&void 0!==e?e:null,customerName:null!==(t=null===v||void 0===v||null===(l=v.basic)||void 0===l?void 0:l.firstName)&&void 0!==t?t:"",customerLast:null!==(i=null===v||void 0===v||null===(a=v.basic)||void 0===a?void 0:a.lastName)&&void 0!==i?i:"",customerEmail:null!==(o=null===v||void 0===v||null===(d=v.basic)||void 0===d?void 0:d.email)&&void 0!==o?o:"",customerPhone:null!==(r=null===v||void 0===v||null===(s=v.basic)||void 0===s?void 0:s.phone)&&void 0!==r?r:""};if(Object(b.zd)(window.location)){const[e,t,l]=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=null,i=null,a=null;if(Object(b.zd)(null===(e=window)||void 0===e?void 0:e.location,t)){var o,n;const e=new Proxy(new URLSearchParams(null===(o=window)||void 0===o||null===(n=o.location)||void 0===n?void 0:n.search),{get:(e,t)=>{var l;return null===e||void 0===e||null===(l=e.get)||void 0===l?void 0:l.call(e,t)}});l=null!==e&&void 0!==e&&e.isLoggedInUser?e.isLoggedInUser:l,i=null!==e&&void 0!==e&&e.customerName?e.customerName:i,a=null!==e&&void 0!==e&&e.customerEmail?e.customerEmail:a}return[l,i,a]}();e&&(m.customerName=t,m.customerEmail=l)}null===j||void 0===j||null===(c=j.customerFormRef)||void 0===c||c.setValueToFormElements("customerName",m.customerName),null===j||void 0===j||null===(u=j.customerFormRef)||void 0===u||u.setValueToFormElements("customerEmail",m.customerEmail),(null===n||void 0===n||!n.ShowFailureError)&&(null===n||void 0===n||!n.ShowPaymentSuccess)&&g({customerDetails:{...m}})}),[window.location,null===v||void 0===v?void 0:v.customerId,null===j||void 0===j||null===(t=j.userParams)||void 0===t?void 0:t.loggedIn,v,null===n||void 0===n?void 0:n.ShowFailureError,null===n||void 0===n?void 0:n.ShowPaymentSuccess]),Object(i.useEffect)((()=>{var e,t,l;R()(null===s||void 0===s?void 0:s.giftCardContent)||g({segmentedGiftCardData:Z(null===s||void 0===s||null===(e=s.giftCardContent)||void 0===e||null===(t=e.items)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.fields)})}),[null===s||void 0===s?void 0:s.giftCardContent]),Object(i.useEffect)((()=>{var e,t,l;R()(null===j||void 0===j||null===(e=j.segmentedGiftCardData)||void 0===e?void 0:e.giftCardAmountOptions)||g({recipientAmountPanelConfig:{...null===j||void 0===j?void 0:j.recipientAmountPanelConfig,tileButtonGroupSource:j.segmentedGiftCardData.giftCardAmountOptions.map((e=>({value:e===W.Rd?W.Rd:null===e||void 0===e?void 0:e.split(null===c||void 0===c?void 0:c.currencySymbol).join("").slice(0,-3),label:e}))),buttonText:j.segmentedGiftCardData.confirmAmountButtonText,minimumAmount:null===(t=j.segmentedGiftCardData)||void 0===t?void 0:t.minAmount,maximumAmount:null===(l=j.segmentedGiftCardData)||void 0===l?void 0:l.maxAmount}})}),[null===j||void 0===j||null===(l=j.segmentedGiftCardData)||void 0===l?void 0:l.giftCardAmountOptions]),Object(i.useEffect)((()=>{var e;R()(null===j||void 0===j||null===(e=j.recipientAmountPanelConfig)||void 0===e?void 0:e.tileButtonGroupSource)||g({customerFormConfig:{fieldsConfig:ee(null===s||void 0===s?void 0:s.giftCardContent),isFormValid:!1,onFormChangeHandler:$},recipientFormConfig:{fieldsConfig:de({giftCardDetails:j,updateGiftCardDetails:g,giftCardContent:null===s||void 0===s?void 0:s.giftCardContent,dispatch:r}),isFormValid:!1,onFormChangeHandler:re,name:null}})}),[null===j||void 0===j||null===(a=j.recipientAmountPanelConfig)||void 0===a?void 0:a.tileButtonGroupSource,null===j||void 0===j?void 0:j.recipientDetails,window.location,null===j||void 0===j||null===(o=j.userParams)||void 0===o?void 0:o.loggedIn]),Object(i.useEffect)((()=>{var e;(null===j||void 0===j||null===(e=j.recipientDetails)||void 0===e||!e.length)&&(null===s||void 0===s?void 0:s.giftCardContent)&&ve(j,g)}),[null===s||void 0===s?void 0:s.giftCardContent,null===j||void 0===j?void 0:j.recipientDetails]),Object(i.useEffect)((()=>{var e,t;if(null!==n&&void 0!==n&&n.ShowPaymentSuccess&&null!==O&&void 0!==O&&O.loggedIn&&(null===O||void 0===O||null===(e=O.giftCardDataRecipientDetails)||void 0===e?void 0:e.length)>0&&null!==O&&void 0!==O&&O.giftCardDataCustomerDetails){var l,i,a,o;const e={customerName:null!==(l=null===O||void 0===O||null===(i=O.giftCardDataCustomerDetails)||void 0===i?void 0:i.customerName)&&void 0!==l?l:"",customerEmail:null!==(a=null===O||void 0===O||null===(o=O.giftCardDataCustomerDetails)||void 0===o?void 0:o.customerEmail)&&void 0!==a?a:""};g({customerDetails:{...e}})}if(null!==n&&void 0!==n&&n.ShowFailureError&&(null===O||void 0===O||null===(t=O.giftCardDataRecipientDetails)||void 0===t?void 0:t.length)>0&&null!==O&&void 0!==O&&O.giftCardDataCustomerDetails){var d,r,s,c,u,v,m,b,j,f,C,h;const e={customerId:null!==(d=null===O||void 0===O||null===(r=O.giftCardDataCustomerDetails)||void 0===r?void 0:r.customerId)&&void 0!==d?d:null,customerName:null!==(s=null===O||void 0===O||null===(c=O.giftCardDataCustomerDetails)||void 0===c?void 0:c.customerName)&&void 0!==s?s:"",customerLast:null!==(u=null===O||void 0===O||null===(v=O.giftCardDataCustomerDetails)||void 0===v?void 0:v.customerLast)&&void 0!==u?u:"",customerEmail:null!==(m=null===O||void 0===O||null===(b=O.giftCardDataCustomerDetails)||void 0===b?void 0:b.customerEmail)&&void 0!==m?m:"",customerPhone:null!==(j=null===O||void 0===O||null===(f=O.giftCardDataCustomerDetails)||void 0===f?void 0:f.customerPhone)&&void 0!==j?j:"",isFormValid:null!==(C=null===O||void 0===O||null===(h=O.giftCardDataCustomerDetails)||void 0===h?void 0:h.isFormValid)&&void 0!==C?C:""};g({customerDetails:{...e},recipientDetails:null===O||void 0===O?void 0:O.giftCardDataRecipientDetails})}}),[null===n||void 0===n?void 0:n.ShowFailureError,null===n||void 0===n?void 0:n.ShowPaymentSuccess]),Object(i.useEffect)((()=>{var e;(null===j||void 0===j||null===(e=j.tempRecipientDetails)||void 0===e?void 0:e.length)&&(null===g||void 0===g||g({recipientDetails:null===j||void 0===j?void 0:j.tempRecipientDetails,tempRecipientDetails:[]}))}),[null===j||void 0===j?void 0:j.tempRecipientDetails]),Object(N.jsxs)("div",{className:"giftCard-global-container",children:[Ce(j),he(j,g,r),pe(j,g),Ne(j,g),xe(j,g,r,U.d),Me(j,g)]})},we=l(76),Pe=l(902);const Be=()=>Object(b.Ud)(window.innerWidth);var ke=e=>{const{contentData:t={},giftCardPageGlobal:l,location:a}=e,[o,n]=Object(i.useState)(Object(b.Ud)(window.innerWidth)),{userOrderState:d}=Object(i.useContext)(we.a);Object(i.useEffect)((()=>{window.addEventListener("resize",n(Be))}),[o]);return l?Object(N.jsx)("div",{className:"giftCard-global-container",children:t&&Object(N.jsx)(Le,{giftCardPageGlobal:l,location:a})}):Object(N.jsxs)("div",{className:o?"giftCard-mobile-container":"giftCard-desktop-container",children:[t&&Object(N.jsx)(k,{contentData:t,isMobile:o}),d.showCartClearAlert?Object(N.jsx)(Pe.a,{}):null]})},He=l(62),Ue=l(908);const We=e=>{let{segmentedMarketingData:t,giftCardPageGlobal:l,allReducerData:i,userParams:a}=e;return Object(b.Kd)(t)&&!l&&Object(N.jsx)(u.a,{contentData:t,tenantReducerData:i.tenantReducerContent,userParams:a})||null};t.default=e=>{var t,l,u,v,m,O,j;const[f,g]=Object(i.useState)(Object(b.Ud)(window.innerWidth)),C=Object(d.c)((e=>e.tenantReducer)),h=null===C||void 0===C||null===(t=C.componentOptions)||void 0===t||null===(l=t.web)||void 0===l?void 0:l.giftCardPageGlobal,p=Object(d.b)(),x=()=>{const e=Object(b.Ud)(window.innerWidth);g(e)};Object(i.useEffect)((()=>{window.addEventListener("resize",x)}),[f]);let D=Object(d.c)((e=>e.appStateReducer.userStatus));Object(i.useEffect)((()=>{!h&&p(Object(ye.l)(C))}),[p,null===C||void 0===C?void 0:C.country]),Object(i.useEffect)((()=>{!h&&p(Object(ye.c)(D))}),[p,D]),Object(i.useEffect)((()=>{var e;!h&&p((e={object:Object(He.a)(),contentFull:{content_type:"staticLandingPage","fields.page":"Gift Card",include:"5"}},{type:o.Ud,payload:e})),p(n())}),[]);let E=null,I=null,A=null,T=null;const{DISPOSITION:R}=c.default,S=Object(d.c)((e=>({homePageContent:e.contentReducer.response||null,marketPageContent:e.marketConfigReducer.response||null,tenantReducerContent:e.tenantReducer||null,giftCardContent:e.giftCardReducer||null})));if(null!==S&&void 0!==S&&null!==(u=S.marketPageContent)&&void 0!==u&&u.headerData&&null!==S&&void 0!==S&&S.tenantReducerContent&&null!==S&&void 0!==S&&S.homePageContent&&Object(b.Kd)(S.giftCardContent)){E=Object(b.bc)(S.homePageContent);const{header:e={},footer:t={}}=S.marketPageContent.headerData;I=Object(b.cc)(e),A=Object(b.Sb)(t),T=Object(b.Yb)(S.giftCardContent)}return Object(N.jsxs)(a.a.Fragment,{children:[We({segmentedMarketingData:I,giftCardPageGlobal:h,allReducerData:S,userParams:D}),Object(N.jsx)(Ue.a,{page:W.xc}),!h&&Object(N.jsx)(r.a,{contentData:{segmentedHomePageData:null!==(v=null===(m=E)||void 0===m?void 0:m[R])&&void 0!==v?v:{},contentDispositionData:null!==(O=null===(j=E)||void 0===j?void 0:j[R])&&void 0!==O?O:{}},userParams:D}),Object(b.Kd)(T)&&Object(N.jsx)(ke,{contentData:T,giftCardPageGlobal:h,location:null===e||void 0===e?void 0:e.location}),Object(b.Kd)(A)&&!h&&Object(N.jsx)(s.a,{history:e.history,contentData:A,tenantReducerData:S.tenantReducerContent})||null]})}},811:function(e,t,l){"use strict";l.r(t);t.default={GENERAL_ROUTING:"General Routing/Communication",HOME_PAGE_OFFERS:"Home Page Offers",MARKETING_HERO_3:"Marketing Hero 3",CRM_SIGNUP:"CRM SignUP",BROWSER_CATEGORIES:"Browser Categories",OFFERS_DEALS:"Offers and Deals",DISPOSITION:"disposition",CAROUSAL:"carousalComponent",ORDERSERV:"orderServComponent",ROUTING:"routingComponent",CRM:"crmSignUp",ORDER_IT_AGAIN:"Order it again",WELCOME_MESSAGE:"Welcome Message",RECOMMENDATION:"Recommendation",INDIA:"INDIA",PAYMENT_FAILED_MESSAGE:"paymentdeclined",PAYMENT_PRE_VALIDATION_FAILED_MESSAGE:"paymentPreValidationFailed",SERVICE_CHANNEL:"web",OFFERS_DEALS_MODE:"Web",KFC_Gift_Card:"KFC Gift Card",LOGIN_ACTION:"login-actions/registration?client_id=",REDIRECT_PATH_NAME:"redirect_path_name",SIGNOUT:"/signout",OPEN_ID_CONNECT:"/openid-connect/",CODE_CHALLENGE:"code_challenge",CODE_VERIFIER:"code_verifier",REGISTRATIONS:"registrations?"}},902:function(e,t,l){"use strict";l.d(t,"a",(function(){return f}));var i=l(3),a=l(25),o=l(84),n=l(92),d=l(76);const r={CLEAR_ALL_MSG:{MSGTXT1:"clearCartAwareText",MSGTXT2:"clearCartActionText",MSGTXT3:"clearCartCompleteText"},CLEAR_ALL:"continue",CANCEL:"cancel",TO_CHANGE_LANGUAGE:"toChangeLanguage"};var s=l(14),c=l(6),u=l(5),v=l(30),m=l(15),b=l(0),O=l(69),j=l(2);const f=e=>{const t=Object(a.c)((e=>e.cartReducer)),{cartData:l={}}=t||{},f=Object(a.c)((e=>e.tenantReducer)),{tenantId:g=""}=f||{},{userOrderState:C,userOrderStateDispatch:h}=Object(i.useContext)(d.a),{modalToOpenOnConfirm:p,modalOpenFrom:N,confirmCallBack:x}=C,{CartError:D}=m.a,E=Object(a.b)(),{CLEAR_ALL_MSG:I,CLEAR_ALL:A,CANCEL:T,TO_CHANGE_LANGUAGE:R}=r;((e,t,l)=>{e.langSelector?t.MSGTXT3=l:t.MSGTXT3})(e,I,R);const{SHOW_CLEAR_CART_ALERT:S,DISPOSITION_DATA:_,SEARCH_ORDER_DATA:M,SCHEDULE_ORDER_DATA:y,clearCartChangeFlag:F,orderTypeAlertTitle:G,searchStoreAlertTitle:L,RESET_DELIVERY_ADDRESS_LINE:w,CLEAR_CART_CONFIRM_CANCEL_MODAL:P,ORDER_CAPACITY_DATA_UPDATED:B}=s.a,k=Object(u.Jd)(C.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):C.dispositionNew,H=()=>{h({type:P,value:{}}),h({type:b.Le,value:{selectedLanguage:""}}),h({type:S,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!1,languageToChange:""}}),N===F&&h({type:y,value:{showScheduleOrderCatering:!0,selectedStoreInfo:k.store,changeFlow:!0}})};return Object(j.jsx)(n.a,{handleClose:H,classNames:"clear-cart-modal",CartAlertForm:Object(j.jsx)(o.a,{splitTitle:I,imageSrc:D,altText:"cart-error",confirmButtonText:Object(c.translateWithI18Next)(A),cancelButtonText:Object(c.translateWithI18Next)(T),cancelHandler:H,confirmHandler:()=>{if(l.discountLines.length>0){let e=l.discountLines.map((e=>e.id));E(Object(v.n)({params:{basketId:l.id},tenantId:g,shouldClearCart:!0},e))}else E(Object(v.o)({basketId:l.id,tenantId:g}));E(Object(O.c)({key:b.gd.VIEW_PRODUCT})),localStorage.removeItem(b.gd.ADD_TO_ORDER),E(Object(v.u)(new Date)),h({type:S,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!0}}),x&&x(),p===G?(h({type:w}),h({type:_,value:{showDisposition:!0}}),h({type:y,value:{showScheduleOrderCatering:!1}}),h({type:M,value:{showSearchStore:!1}}),h({type:B,value:{orderCapacityDataUpdated:!1}}),h({type:P,value:{}})):p===L&&h({type:M,value:{showSearchStore:!0}})}})})}},908:function(e,t,l){"use strict";l.d(t,"a",(function(){return m}));var i=l(3),a=l(25),o=l(139),n=l(175),d=l(18),r=l.n(d),s=l(214),c=l(0),u=l(2);const v=(e,t)=>{if(e&&t){const l={};e.replace(/%(.*?)%/g,((e,t)=>{l[e]=t})),Object.entries(l).forEach((l=>{const[i,a]=l,o=((e,t)=>{var l;return null!==(l=e[t])&&void 0!==l?l:"N/A"})(t,a);if("string"==typeof o){const t=new RegExp(i,"ig");e=e.replace(t,o)}else{let t=JSON.parse(e);for(let e in t)t[e]===i&&(t[e]=o);e=JSON.stringify(t)}}))}return e},m=e=>{let{page:t,seoObj:l,seoTemplate:d}=e;const[m,b]=Object(i.useState)(null),[O,j]=Object(i.useState)(""),{seoContent:f}=Object(a.c)((e=>{var t,l,i;return{seoContent:null!==(t=null===e||void 0===e||null===(l=e.contentReducer)||void 0===l||null===(i=l.response)||void 0===i?void 0:i.seoStructureData)&&void 0!==t?t:null}}));return Object(i.useEffect)((()=>{var e,i,a,o,u,m;const O={...l,PageURL:null!==(e=null===(i=window)||void 0===i||null===(a=i.location)||void 0===a?void 0:a.href)&&void 0!==e?e:"",HomeURL:null!==(o=null===(u=window)||void 0===u||null===(m=u.location)||void 0===m?void 0:m.origin)&&void 0!==o?o:"/"};if(!r()(f)){var g,C;const e=null!==(g=null!==d&&void 0!==d?d:null===f||void 0===f||null===(C=f.seo)||void 0===C?void 0:C.find((e=>{var l;return(null===(l=e.fields)||void 0===l?void 0:l.title)===t})))&&void 0!==g?g:{},{fields:{templateData:l={},data:i={}}={}}=e,{template:a={}}=null!==f&&void 0!==f?f:{},o=Object(s.documentToHtmlString)(a);if(!r()(o)){let e=Object(n.a)(o.replace(/<p>|<\/p>/gi,""));e=v(e,l),e=v(e,O);const t=Object(n.a)(e);j(null===t||void 0===t?void 0:t.filter((e=>{var t;return!((null===e||void 0===e?void 0:e.type)===c.qf&&"N/A"===(null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.children))})))}if(!r()(i)){let e=JSON.stringify(i);e=v(e,O),b(e)}}}),[t,f,l,d]),Object(u.jsxs)(o.a,{children:[O,Object(u.jsx)("script",{type:"application/ld+json",children:m})]})};m.defaultProps={page:"",seoTemplate:null,seoObj:null}},912:function(e,t,l){"use strict";l.d(t,"a",(function(){return o})),l.d(t,"b",(function(){return n}));var i=l(171),a=l(2);const o=e=>Object(a.jsx)(i.a,{testId:"header-container-test",importPath:"HEADER_CONTAINER",...e}),n=e=>Object(a.jsx)(i.a,{testId:"header-container-test",importPath:"SECONDARY_HEADER_CONTAINER",...e})}}]);