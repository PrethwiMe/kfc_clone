(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[19],{1012:function(e,t,i){"use strict";var s=i(3),n=i(5),l=i(121),d=i(0),a=i(15),o=i(2);const r=e=>{const{isOpen:t,handleClose:i,OrderReducerData:r}=e,[c,v]=Object(s.useState)(Object(n.Ud)(window.innerWidth)),u=window.google,{RedMarker:j,BlackMarker:O}=a.a;Object(s.useEffect)((()=>(window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)})));const b=()=>{v(Object(n.Ud)(window.innerWidth))},m=c?{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"LookUpmap-modal",showCloseBtn:!0,closeButtonHandler:i,autoFocus:!0}:{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"LookUpmap-modal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:i,autoFocus:!0};function h(){var e,t,i,s;const n=new u.maps.DirectionsService,l=new u.maps.DirectionsRenderer,d=new u.maps.Map(document.getElementById("maps"),{zoom:16,center:{lat:Number(null===r||void 0===r||null===(e=r.store)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude),lng:Number(null===r||void 0===r||null===(i=r.store)||void 0===i||null===(s=i.location)||void 0===s?void 0:s.longitude)}});l.setMap(d),function(e,t){var i,s,n,l,d,a,o,c,v,j,b,m;const h={lat:Number(null===r||void 0===r||null===(i=r.store)||void 0===i||null===(s=i.location)||void 0===s?void 0:s.latitude),lng:Number(null===r||void 0===r||null===(n=r.store)||void 0===n||null===(l=n.location)||void 0===l?void 0:l.longitude)},p=new u.maps.Map(document.getElementById("maps"),{zoom:16,center:h});e.route({origin:{lat:Number(null===r||void 0===r||null===(d=r.store)||void 0===d||null===(a=d.location)||void 0===a?void 0:a.latitude),lng:Number(null===r||void 0===r||null===(o=r.store)||void 0===o||null===(c=o.location)||void 0===c?void 0:c.longitude)},destination:{lat:Number(null===r||void 0===r||null===(v=r.store)||void 0===v||null===(j=v.location)||void 0===j?void 0:j.latitude),lng:Number(null===r||void 0===r||null===(b=r.store)||void 0===b||null===(m=b.location)||void 0===m?void 0:m.longitude)},travelMode:u.maps.TravelMode.DRIVING},((e,i)=>{if("OK"===i){t.setDirections(e);var s=e.routes[0].legs[0];new u.maps.Marker({position:s.end_location,map:p,visible:!0,icon:O,title:"Delivery-Location"})}else new u.maps.Map(document.getElementById("maps"),{zoom:6,center:{lat:20.5937,lng:78.9629}})}))}(n,l)}return Object(s.useEffect)((()=>{null!==(null===r||void 0===r?void 0:r.deliveryAddress)&&null!==(null===r||void 0===r?void 0:r.store)&&Object(n.ef)(null===r||void 0===r?void 0:r.service)===Object(n.ef)(d.yb)?h():Object(n.ef)(null===r||void 0===r?void 0:r.service)!==Object(n.ef)(d.ee)&&Object(n.ef)(null===r||void 0===r?void 0:r.service)!==Object(n.ef)(d.Eb)||null===(null===r||void 0===r?void 0:r.store)||function(){var e,t,i,s;const n={lat:Number(null===r||void 0===r||null===(e=r.store)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude),lng:Number(null===r||void 0===r||null===(i=r.store)||void 0===i||null===(s=i.location)||void 0===s?void 0:s.longitude)},l=new u.maps.Map(document.getElementById("maps"),{zoom:16,center:n});new u.maps.Marker({position:n,map:l,visible:!0,icon:j,title:"KFC Store"})}()})),Object(o.jsx)("div",{children:t&&Object(o.jsx)(l.a,{...m,children:Object(o.jsx)("div",{children:Object(o.jsx)("div",{id:"maps"})})})})};r.defaultProps={isOpen:!1,closeModal:null},t.a=r},1050:function(e,t,i){"use strict";var s=i(6),n=i(951),l=i(3),d=i(5),a=i(222),o=i(2);t.a=e=>{const{CURRENT_ORDER:t="",PROCESSING:i="",PROCESSING_YOUR:r="",ORDER_READY_IN_JUST:c="",SECOND:v="",CONFIRMING_YOUR_ORDER:u="",READY_IN_JUST_A_SECOND:j=""}=a.a,[O,b]=Object(l.useState)(Object(d.Ud)(window.innerWidth)),m=()=>{const e=Object(d.Ud)(window.innerWidth);b(e)};return Object(l.useEffect)((()=>{window.addEventListener("resize",m)}),[O]),Object(l.useEffect)((()=>{if(e.retryCount>=0&&e.retryCount<=n.a){const t=document.getElementById("progressBarContainer"),i=document.getElementById("progressBar");console.log(t.offsetWidth);const s=t.offsetWidth/n.a*(e.retryCount+1);console.log(s),i.style.width=s+"px"}}),[e.retryCount]),Object(o.jsx)("div",{children:O?Object(o.jsx)("div",{className:"orderConfirmScreenMob","data-testid":"orderConfirmItems-component",children:Object(o.jsxs)("div",{className:"statusBar",children:[Object(o.jsx)("div",{className:"currentStatusMob",children:Object(s.translateWithI18Next)(t)}),Object(o.jsx)("div",{id:"progressBarContainer",className:"ProgressMob",children:Object(o.jsx)("div",{id:"progressBar",className:"barMob","data-testid":"load-component"})}),Object(o.jsx)("div",{className:"progressBarMob",children:Object(s.translateWithI18Next)(i)}),Object(o.jsx)("div",{className:"confirmOrderMobile",children:Object(s.translateWithI18Next)(r)}),Object(o.jsxs)("div",{className:"confirmOrderMobile",children:[" ",Object(s.translateWithI18Next)(c)]}),Object(o.jsxs)("div",{className:"confirmOrderMobile",children:[" ",Object(s.translateWithI18Next)(v)]})]})}):Object(o.jsx)("div",{className:"orderConfirmScreen","data-testid":"orderConfirmItems-component",children:Object(o.jsxs)("div",{className:"statusBar",children:[Object(o.jsx)("div",{className:"currentStatus",children:Object(s.translateWithI18Next)(t)}),Object(o.jsx)("div",{id:"progressBarContainer",className:"Progress",children:Object(o.jsx)("div",{id:"progressBar",className:"bar"})}),Object(o.jsx)("div",{className:"progressBar",children:Object(s.translateWithI18Next)(i)}),Object(o.jsx)("div",{className:"confirmOrder",children:Object(s.translateWithI18Next)(u)}),Object(o.jsxs)("div",{className:"confirmOrder",children:[" ",Object(s.translateWithI18Next)(j)," "]})]})})})}},1051:function(e,t,i){var s=i(517),n=i(512),l=i(519),d=4294967295,a=Math.min;e.exports=function(e,t){if((e=l(e))<1||e>9007199254740991)return[];var i=d,o=a(e,d);t=n(t),e-=d;for(var r=s(o,t);++i<e;)t(i);return r}},834:function(e,t,i){"use strict";i.r(t),i.d(t,"PaymentProcess",(function(){return Pe}));var s=i(3),n=i.n(s),l=i(25),d=i(76),a=i(920),o=i(113),r=i(344),c=i(1050),v=i(5),u=i(36),j=i(268),O=i(121),b=i(326),m=i(222),h=i(6),p=i(4),N=i(15),x=i(43),E=i(2);const g=e=>{const{isOpen:t=!1,handleClose:i,onSave:n,tenantReducer:d={},OrderReducerData:a={}}=e,{SPECIAL_CHAR_ERROR:o,OCCASION_NAME_LENGTH_ERROR:r,EMPTY_NAME_ERROR:c,CANCEL:g,SAVE:I}=p.a,{tenantId:f=""}=d,{id:D="",customer:{id:R="",phoneNumber:T=""}={}}=a,[S,C]=Object(s.useState)(Object(v.Ud)(window.innerWidth)),[_,y]=Object(s.useState)(!0),[A,P]=Object(s.useState)({value:"",errorMessage:"",error:!1}),{THANKYOU:L="",WE_SAVED:w="",GIVE_A_NAME:W="",FAVORITES_ORDERS_REGEX:M}=m.a,B=(e,t)=>{let i={...e};i.value=t;const s=null===M||void 0===M?void 0:M.test(t);return t?s?t.length<3?(i.error=!0,i.errorMessage=Object(h.translateWithI18Next)(r),y(!0)):(i.error=!1,i.errorMessage="",y(!1)):(i.error=!0,i.errorMessage=Object(h.translateWithI18Next)(o)):(i.error=!0,i.errorMessage=Object(h.translateWithI18Next)(c),y(!0)),i},F=e=>{const t=e.target.value;(()=>{P({...B(A,t)})})()},k=Object(l.b)();Object(s.useEffect)((()=>(window.addEventListener("resize",U),()=>{window.removeEventListener("resize",U)})));const U=()=>{C(Object(v.Ud)(window.innerWidth))},V=S?{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"save-order-modal",showCloseBtn:!0,closeButtonHandler:i,autoFocus:!0}:{id:"OrderSaveModalPopup",role:"dialog",modalTitleId:"OrderSaveModalPopup",show:t,classNames:"save-order-modal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:i,autoFocus:!0};return Object(E.jsx)("div",{children:t&&Object(E.jsx)(O.a,{...V,children:Object(E.jsxs)("div",{className:"modalContants",children:[Object(E.jsx)("div",{className:"fontstyle",children:Object(h.translateWithI18Next)(L)}),Object(E.jsx)("div",{className:"fontstyle",children:Object(h.translateWithI18Next)(w)}),Object(E.jsx)("div",{className:"fontstyle",children:Object(h.translateWithI18Next)(W)}),S?Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"inputbox",children:Object(E.jsx)(b.a,{value:A.value,className:"inputfield",placeholder:"Name This Order","data-testid":"modal-coupon-input-field",onChange:F})}),A.error&&Object(E.jsxs)("div",{id:"saveTrackOrderScreen",className:"error-text",children:[Object(E.jsx)(x.a,{srcFile:N.a.Error,className:"location-alert-icon mr-1"}),Object(E.jsx)("span",{role:"alert",children:A.errorMessage})]})]}):Object(E.jsxs)("div",{className:"inputbox trackOrderScreen",children:[Object(E.jsx)(b.a,{value:A.value,className:"inputfield",placeholder:"Name This Order","data-testid":"modal-coupon-input-field",onChange:F}),A.error&&Object(E.jsxs)("div",{id:"saveTrackOrderScreen",className:"error-text",children:[Object(E.jsx)(x.a,{srcFile:N.a.Error,className:"location-alert-icon mr-1"}),Object(E.jsx)("span",{className:"error-msg",role:"alert",children:A.errorMessage})]})]}),Object(E.jsxs)("div",{className:"buttonItems",children:[Object(E.jsx)(u.a,{"data-testid":"coupon-button-one",className:"button whiteButton blackBorder closebtn-cls",onClick:e=>(console.log("close"),void i()),children:Object(h.translateWithI18Next)(g)}),Object(E.jsx)(u.a,{"data-testid":"coupon-button-two",className:"button blackButton blackBorder save-button",onClick:e=>(e=>{let t={...A};e.stopPropagation(),console.log("saved"),""!==A.value?(k(Object(j.a)({customerId:R,tenantId:f,phoneNumber:T},{orderId:D,name:A.value})),n(!0),i()):(t.error=!0,t.errorMessage=Object(h.translateWithI18Next)(m.a.SAVE_ORDER_NAME_ERROR),y(!0),P(t))})(e),disabled:_,children:Object(h.translateWithI18Next)(I)})]})]})})})};g.defaultProps={isOpen:!1,closeModal:null};var I=g,f=i(367),D=i(1012),R=i(22),T=i(11),S=i(336),C=i(220),_=i(62),y=i(136);const{phoneImg:A,Direction:P}=N.a,{GST:L,YOUR_ORDER:w,ORDER:W,ORDER_FROM_CAPS:M,GET_DIRECTION:B,SUB_TOTAL:F,TOTAL:k,largeCarryBagText:U,addHopeText:V,SEARCH_IN_CART:H,DELIVERY:Y,PICKUP:G,ONLY_IMAGE:K,DELIVERY_FEE:Q,DISCOUNT_TEXT:z,HH_MM:q,HH_MM_A:J,TOTAL_GST_INCLUDED:X}=m.a,Z=(e,t,i)=>null===e||void 0===e?void 0:e.filter((e=>{var s,n;return(null===e||void 0===e||null===(s=e.item)||void 0===s?void 0:s.name)!==t&&(null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name)!==i})),$=e=>{null===e||void 0===e||e.substr(0,null===e||void 0===e?void 0:e.indexOf(" "));const t=null===e||void 0===e?void 0:e.substr((null===e||void 0===e?void 0:e.indexOf(" "))+1);return(null===t||void 0===t?void 0:t.slice(0,3))+"-"+(null===t||void 0===t?void 0:t.slice(3,6))+"-"+(null===t||void 0===t?void 0:t.slice(6))},ee=(e,t,i)=>Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:Object(h.translateWithI18Next)(L)}),Object(E.jsxs)("span",{className:"amount",children:[e,Object(S.e)(null===t||void 0===t?void 0:t.inclusiveTaxTotal,i)," "]})]}),te=e=>(null===e||void 0===e?void 0:e.toUpperCase())===Y?Object(h.translateWithI18Next)(Q):Object(h.translateWithI18Next)(m.a.RESTAURANT_HANDLING_CHARGE),ie=function(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l={};const d=null===e||void 0===e?void 0:e.filter((e=>"in-delivery-charge"!==(null===e||void 0===e?void 0:e.chargeType)));var a,o;return n?(l=null===e||void 0===e?void 0:e.find((e=>"in-delivery-charge"===(null===e||void 0===e?void 0:e.chargeType))),Object(E.jsxs)(E.Fragment,{children:[d&&d.map((function(e,n){return Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:te(s)}),Object(E.jsxs)("span",{className:"amount",children:[t,Object(S.e)(null===e||void 0===e?void 0:e.amount,i)," "]})]},n)})),(null===(a=l)||void 0===a?void 0:a.amount)>0&&Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:Object(h.translateWithI18Next)(null===p.a||void 0===p.a?void 0:p.a.IN_DELIVERY_FEE)}),Object(E.jsxs)("span",{className:"amount",children:[t,Object(S.e)(null===(o=l)||void 0===o?void 0:o.amount,i)," "]})]})]})):d&&d.map((function(e,n){return Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:te(s)}),Object(E.jsxs)("span",{className:"amount",children:[t,Object(S.e)(null===e||void 0===e?void 0:e.amount,i)," "]})]},n)}))},se=e=>{var t,i,s,n,l,d;return"".concat(null===e||void 0===e||null===(t=e.deliveryAddress)||void 0===t||null===(i=t.addressLines)||void 0===i?void 0:i.join(" ")," ").concat(null===e||void 0===e||null===(s=e.deliveryAddress)||void 0===s?void 0:s.city," ").concat(null===e||void 0===e||null===(n=e.deliveryAddress)||void 0===n?void 0:n.state," ").concat(null===e||void 0===e||null===(l=e.deliveryAddress)||void 0===l?void 0:l.country," ").concat(null===e||void 0===e||null===(d=e.deliveryAddress)||void 0===d?void 0:d.pinCode)},ne=e=>null!==e&&void 0!==e&&e.id?(null===(null===e||void 0===e?void 0:e.posOrderId)||""===(null===e||void 0===e?void 0:e.posOrderId))&&(null===e||void 0===e?void 0:e.id)||(null===e||void 0===e?void 0:e.posOrderId):"",le=function(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"line",children:Object(S.d)(null===e||void 0===e?void 0:e.item,t,i)}),Object(E.jsxs)("div",{className:"price",children:[Object(E.jsx)("span",{className:"fonts",children:Object(h.translateWithI18Next)(F)}),Object(E.jsxs)("span",{className:"amount",children:[t,null===e||void 0===e?void 0:e.subTotal]})]}),(null===e||void 0===e?void 0:e.taxValue)&&Object(E.jsx)("div",{children:ee(t,e,i)}),Object(E.jsx)("div",{children:ie(null===e||void 0===e?void 0:e.additionalCharges,t,i,null===e||void 0===e?void 0:e.service,s)}),(null===e||void 0===e?void 0:e.discountTotal)>0&&Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:Object(h.translateWithI18Next)(z)}),Object(E.jsxs)("span",{className:"amount",children:[" ","- ",t,null===e||void 0===e?void 0:e.discountTotal]})]})]})},de=function(e,t,i,s,n){let l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(null===e||void 0===e?void 0:e.service)===Y?function(e,t,i,s){var n,l,d,a,o,r,c,u;let j=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const O=Object(v.gb)(null===e||void 0===e?void 0:e.operatingHours),b=Object(T.R)(Object(v.qc)(O),q,J),m=Object(T.R)(Object(v.qb)(O),q,J);return Object(E.jsxs)("div",{className:"Bill",children:[Object(E.jsx)("h2",{className:"orderFrom",children:Object(h.translateWithI18Next)("deliveryAddress")}),Object(E.jsx)("div",{className:"place",children:null===e||void 0===e?void 0:e.fullAddressDetails}),(null===e||void 0===e?void 0:e.instruction)&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h2",{className:"orderFrom",children:Object(h.translateWithI18Next)("instructions")}),Object(E.jsx)("div",{className:"place",children:null===e||void 0===e?void 0:e.instruction})]}),Object(E.jsx)("h2",{className:"orderFrom",children:Object(h.translateWithI18Next)("preparedBy")}),Object(E.jsxs)("div",{className:"place",children:[Object(E.jsxs)("span",{className:"fnt-bld mob-display",children:[null===e||void 0===e?void 0:e.storeName," "]}),(null===O||void 0===O?void 0:O.length)&&Object(E.jsxs)("span",{className:"hrs-view mob-display",children:["Hours: ","".concat(b,"-").concat(m)]})]}),le(e,t,i,j),Boolean(null===e||void 0===e?void 0:e.addHopeDataExistsId)&&Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:Object(h.translateWithI18Next)(V)}),Object(E.jsx)("span",{className:"amount",children:null===e||void 0===e?void 0:e.addHopeDataPrice})]}),(null===e||void 0===e?void 0:e.total)&&Object(E.jsxs)("div",{className:"totalAmount",children:[Object(E.jsxs)("span",{className:"total",children:[Object(h.translateWithI18Next)(X),":"]}),Object(E.jsxs)("span",{className:"total",children:[t,null===e||void 0===e?void 0:e.total]})]}),Object(E.jsx)("div",{class:"hr-payment-type"}),Object(E.jsxs)("div",{className:"totalAmount mt-5",children:[Object(E.jsx)("span",{className:"total",children:Object(h.translateWithI18Next)("Payment")}),Object(E.jsx)("span",{className:"total payment-type",children:(null===s||void 0===s||null===(n=s.fields)||void 0===n?void 0:n.displayFormat)===K?Object(E.jsx)("img",{src:null===s||void 0===s||null===(l=s.fields)||void 0===l||null===(d=l.icon)||void 0===d||null===(a=d.fields)||void 0===a||null===(o=a.desktopImage)||void 0===o||null===(r=o.fields)||void 0===r||null===(c=r.file)||void 0===c?void 0:c.url,alt:"paymentMethod"}):Object(E.jsx)("span",{children:null===s||void 0===s||null===(u=s.fields)||void 0===u?void 0:u.displayName})})]})]})}(e,i,s,t,l):((e,t,i,s,n)=>{var l,d,a,o,r,c,v,u;return Object(E.jsxs)("div",{className:"Bill",children:[Object(E.jsxs)("div",{className:"orderTitle",children:[Object(E.jsx)("h2",{className:"yourOrder",children:Object(h.translateWithI18Next)(w)}),Object(E.jsxs)("span",{className:"orderId",children:[Object(E.jsx)("span",{className:"OrderClass",children:Object(h.translateWithI18Next)(W)}),null===e||void 0===e?void 0:e.orderId]})]}),Object(E.jsx)("div",{className:"orderingDateTime",children:"".concat(null===e||void 0===e?void 0:e.orderingDate," ").concat(Object(h.translateWithI18Next)("At")," ").concat(null===e||void 0===e?void 0:e.orderingTime)}),Object(E.jsxs)("div",{className:"postorder-payment-details",children:[Object(E.jsx)("h2",{className:"payment-header",children:Object(h.translateWithI18Next)("paymentHeader")}),Object(E.jsx)("div",{className:"payment-details",children:(null===t||void 0===t||null===(l=t.fields)||void 0===l?void 0:l.displayFormat)===K?Object(E.jsx)("img",{src:null===t||void 0===t||null===(d=t.fields)||void 0===d||null===(a=d.icon)||void 0===a||null===(o=a.fields)||void 0===o||null===(r=o.desktopImage)||void 0===r||null===(c=r.fields)||void 0===c||null===(v=c.file)||void 0===v?void 0:v.url,alt:"paymentMethod"}):Object(E.jsx)("span",{className:"payment-completed",children:null===t||void 0===t||null===(u=t.fields)||void 0===u?void 0:u.displayName})})]}),Object(E.jsx)("h2",{className:"orderFrom",children:Object(h.translateWithI18Next)(M)}),Object(E.jsx)("div",{className:"place",children:null===e||void 0===e?void 0:e.storeName}),Object(E.jsx)("div",{className:"Address",children:null===e||void 0===e?void 0:e.addressLines}),Object(E.jsxs)("div",{className:"ContactDetail",children:[Object(E.jsxs)("span",{children:[Object(E.jsx)("img",{src:A,alt:"",className:"phoneIcon"}),Object(E.jsx)("span",{className:"phoneNum",children:Object(E.jsx)("a",{href:"tel:{orderDetails?.phoneNumber}",className:"anchorTag",children:null===e||void 0===e?void 0:e.phoneNumberFormat})})]}),Object(E.jsxs)("span",{children:[Object(E.jsx)("img",{src:P,alt:"",className:"phoneIcon"}),Object(E.jsx)("span",{"data-testid":"get-direction",tabIndex:"0",className:"phoneNum",onClick:()=>n(),children:Object(h.translateWithI18Next)(B)})]})]}),le(e,i,s),(null===e||void 0===e?void 0:e.service)===G&&(null===e||void 0===e?void 0:e.carryBagDataExistsId)&&Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:Object(h.translateWithI18Next)(U)}),Object(E.jsx)("span",{className:"amount",children:null===e||void 0===e?void 0:e.carryBagDataPrice})]}),Boolean(null===e||void 0===e?void 0:e.addHopeDataExistsId)&&Object(E.jsxs)("div",{className:"priceList",children:[Object(E.jsx)("span",{className:"fonts",children:Object(h.translateWithI18Next)(V)}),Object(E.jsx)("span",{className:"amount",children:null===e||void 0===e?void 0:e.addHopeDataPrice})]}),(null===e||void 0===e?void 0:e.total)&&Object(E.jsxs)("div",{className:"totalAmount",children:[Object(E.jsx)("span",{className:"total",children:Object(h.translateWithI18Next)(k)}),Object(E.jsxs)("span",{className:"total",children:[i,null===e||void 0===e?void 0:e.total]})]})]})})(e,t,i,s,n)};var ae=e=>{var t;let{orderReducerData:i={},tenantReducer:n={},getDirectionClickForMaps:d,enableAccordion:a,isOpenAccordion:o,orderDetailsObj:r={}}=e;const{tenders:c}=i,{currencySymbol:u,currencyConversionFactor:j,addHope:O,carryBag:b,showCustomDeliveryFee:m}=n,{tendersContent:p}=Object(l.c)((e=>null===e||void 0===e?void 0:e.paymentsContentReducer)),{items:N}=p,x=Object(l.b)();Object(s.useEffect)((()=>{x(Object(C.a)({object:Object(_.a)(),contentFull:{content_type:"tenders",include:5,select:"sys.id,fields"}}))}),[]);const[g,I]=Object(s.useState)({fields:{displayFormat:""}}),[f,D]=Object(s.useState)({service:"",orderId:"",storeName:"",phoneNumber:"",subTotal:0,taxValue:[],additionalCharges:[],discountTotal:0,total:"",item:[],addHopeDataExistsId:"",carryBagDataExistsId:"",addHopeDataPrice:"",carryBagDataPrice:"",orderingDate:"",orderingTime:"",fullAddressDetails:"",instruction:"",addressLines:"",inclusiveTaxTotal:"",operatingHours:null===r||void 0===r||null===(t=r.operatingTime)||void 0===t?void 0:t.operatingHours});return Object(s.useEffect)((()=>{if(null!==i&&void 0!==i&&i.id){var e,t,s,l,d,a,o;const c=Object(v.db)(O,b)?Object(S.i)(i,O,b,H,void 0,void 0,n):{};D({service:null===i||void 0===i||null===(e=i.service)||void 0===e?void 0:e.toUpperCase(),orderId:ne(i),storeName:null===i||void 0===i||null===(t=i.store)||void 0===t?void 0:t.name,phoneNumber:null===i||void 0===i||null===(s=i.store)||void 0===s?void 0:s.phoneNumber,phoneNumberFormat:$(null===i||void 0===i||null===(l=i.store)||void 0===l?void 0:l.phoneNumber),subTotal:Object(S.e)(null===i||void 0===i?void 0:i.subTotal,j),taxValue:null===i||void 0===i?void 0:i.taxLines,additionalCharges:null===i||void 0===i?void 0:i.additionalChargeLines,discountTotal:Object(S.e)(null===i||void 0===i?void 0:i.discountTotal,j),total:Object(S.e)(null===i||void 0===i?void 0:i.total,j),item:Z(null===i||void 0===i?void 0:i.foodLines,O,b),addHopeDataExistsId:(null===c||void 0===c?void 0:c.addHopeDataExistsId)||"",carryBagDataExistsId:(null===c||void 0===c?void 0:c.carryBagDataExistsId)||"",addHopeDataPrice:(null===c||void 0===c?void 0:c.addHopeDataPrice)||"",carryBagDataPrice:(null===c||void 0===c?void 0:c.carryBagDataPrice)||"",orderingDate:Object(v.yb)(null===i||void 0===i?void 0:i.orderingDateTime),orderingTime:Object(v.Uc)(null===i||void 0===i?void 0:i.orderingDateTime),fullAddressDetails:se(i),instruction:null===i||void 0===i?void 0:i.instruction,addressLines:null===i||void 0===i||null===(d=i.store)||void 0===d||null===(a=d.address)||void 0===a?void 0:a.addressLines,inclusiveTaxTotal:null===i||void 0===i?void 0:i.inclusiveTaxTotal,operatingHours:null===r||void 0===r||null===(o=r.operatingTime)||void 0===o?void 0:o.operatingHours}),(async()=>{await R.b.BindOrder()})()}}),[null===i||void 0===i?void 0:i.id,O,b]),Object(s.useEffect)((()=>{Object(v.db)(null===N||void 0===N?void 0:N.length,null===c||void 0===c?void 0:c.length)&&N.forEach((e=>{var t,i,s;i=c,s=I,(t=e).fields.title===i[0].type&&s(t)}))}),[c,N]),a?function(e,t,i,s,n,l){let d=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return Object(E.jsx)("div",{className:"accordion-bill",children:Object(E.jsxs)("div",{className:"accordion-bill-info",children:[Object(E.jsx)("div",{class:"circle-topp"}),Object(E.jsx)("div",{className:"accordion-Title",children:Object(E.jsx)("div",{className:"bill-accordian",id:null===e||void 0===e?void 0:e.orderId,children:Object(E.jsx)(y.a,{cssClass:"bill-container",header:"".concat(Object(h.translateWithI18Next)(W)," ").concat(null===e||void 0===e?void 0:e.orderId),open:!l,onClickHandler:e=>{var t,i,s,n,l,d;const a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(i=t.parentElement)||void 0===i||null===(s=i.parentElement)||void 0===s?void 0:s.parentElement;null!==a&&void 0!==a&&null!==(n=a.classList)&&void 0!==n&&n.contains("terms-accordian-open")?null===a||void 0===a||null===(l=a.classList)||void 0===l||l.remove("terms-accordian-open"):null===a||void 0===a||null===(d=a.classList)||void 0===d||d.add("terms-accordian-open")},children:Object(E.jsx)("div",{className:"bill-accordian-description",children:de(e,t,i,s,n,d)})})})}),Object(E.jsx)("div",{class:"circle-bottomm"})]})})}(f,g,u,j,d,o,m):de(f,g,u,j,d,m)},oe=i(52);const re=(e,t)=>!e&&t.loggedIn&&Object(E.jsx)("div",{className:"linebreak"});var ce=e=>{let{orderReducerData:t={},userParams:i={},tenantReducer:n={}}=e;const[l,d]=Object(s.useState)(!1),[a,o]=Object(s.useState)(!1),[r,c]=Object(s.useState)(Object(v.Ud)(window.innerWidth)),[j,O]=Object(s.useState)(!1),[b,p]=Object(s.useState)(""),[N,x]=Object(s.useState)(""),{SAVE_YOUR_ORDERS_AND_CHECKOUT_FASTER:g="",SAVED_TO_FAVORITE_MENU:R="",SAVE_THIS_Order:T=""}=m.a,C=()=>{const e=Object(v.Ud)(window.innerWidth);c(e)};Object(s.useEffect)((()=>{window.addEventListener("resize",C)}),[r]),Object(s.useEffect)((()=>{a&&(oe.b.dark(Object(E.jsx)("div",{className:"img-text-div",children:Object(E.jsxs)("span",{className:"notifyText notifyText-in",children:[Object(E.jsx)("img",{src:f.a,alt:"tick",className:"TickImg"}),Object(h.translateWithI18Next)(R)]})}),{bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:oe.b.POSITION.BOTTOM_CENTER}),setTimeout((()=>{oe.b.dismiss()}),4e3))}),[a]);const _=()=>{Object(S.f)(O)};return Object(s.useEffect)((()=>{if(t.id){p(t.service);const e=t.fulfillmentDateTime,i=Object(v.Uc)(e);x(i)}}),[t]),Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"OrderReceivedContainer",children:Object(E.jsxs)("div",{className:"content",children:[Object(E.jsx)("div",{className:"NotifyOrderPlaced",children:Object(E.jsxs)("div",{className:"tickimage",children:["DELIVERY"===b.toUpperCase()?Object(E.jsx)("div",{children:Object(S.a)(t,N)}):Object(E.jsx)("div",{children:Object(S.b)(t,N,b)}),re(a,i),i.loggedIn&&Object(E.jsx)("div",{children:!a&&Object(E.jsxs)("div",{className:"savingdiv",children:[Object(E.jsx)("span",{className:"saving",children:Object(h.translateWithI18Next)(g)}),Object(E.jsx)("span",{className:"saveButton",children:Object(E.jsx)(u.a,{"data-testid":"save-logged-order",className:"button transparent-btn black-border",onClick:()=>Object(S.h)(d),ariaLable:Object(h.translateWithI18Next)(T),children:Object(h.translateWithI18Next)(T)})})]})})]})}),Object(E.jsx)(ae,{orderReducerData:t,tenantReducer:n,getDirectionClickForMaps:_})]})}),l&&Object(E.jsx)("div",{children:Object(E.jsx)(I,{"data-testid":"confirm-modal",isOpen:l,handleClose:()=>d(!1),onSave:()=>Object(S.c)(o,!0),tenantReducer:n,OrderReducerData:t})}),j&&Object(E.jsx)("div",{children:Object(E.jsx)(D.a,{"data-testid":"map-modal",isOpen:j,handleClose:()=>O(!1),OrderReducerData:t})})]})},ve=i(0);const{CallIcon:ue}=N.a;var je=e=>{var t,i,s,n,l,d;let{orderReducerData:a={},orderDetails:o={},isMobile:r=!1}=e;const{deliveryPartner:c,store:v={}}=a,{CREATED:u,ASSIGNED:j,PICKED_UP:O,OUT_FOR_DELIVERY:b,ARRIVED:m}=ve.Qd,p=(null===o||void 0===o||null===(t=o.status)||void 0===t?void 0:t.toUpperCase())===u,N=(null===o||void 0===o||null===(i=o.status)||void 0===i?void 0:i.toUpperCase())===j||(null===o||void 0===o||null===(s=o.status)||void 0===s?void 0:s.toUpperCase())===O||(null===o||void 0===o||null===(n=o.status)||void 0===n?void 0:n.toUpperCase())===b,x=(null===o||void 0===o||null===(l=o.status)||void 0===l?void 0:l.toUpperCase())===m,g=(null===o||void 0===o||null===(d=o.status)||void 0===d?void 0:d.toUpperCase())!==u;return Object(E.jsx)("div",{className:"delivery-info-daas",children:Object(E.jsxs)("div",{className:"info-content",children:[Object(E.jsxs)("div",{className:"dis-flex-first",children:[Object(E.jsx)("div",{className:"left-sec head-text mr-set",children:Object(E.jsx)("span",{children:Object(h.translateWithI18Next)("contactKFC")})}),(null===c||void 0===c?void 0:c.rider_phone)&&g&&!r&&Object(E.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(E.jsx)("span",{className:"set-opacity",children:Object(h.translateWithI18Next)("contact")})," ",Object(E.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})]}),r&&N&&Object(E.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(E.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})," ",Object(E.jsx)("span",{className:"set-opacity",children:Object(h.translateWithI18Next)("isOnTheWay")})]}),r&&x&&Object(E.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(E.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name}),Object(E.jsx)("span",{className:"set-opacity",children:Object(h.translateWithI18Next)("arrvingSoon")})]})]}),Object(E.jsxs)("div",{className:"dis-flex-sec",children:[p&&Object(E.jsx)("div",{className:"left-sec mr-set created-driverstatus",children:Object(E.jsxs)("span",{className:"set-opacity",children:[Object(h.translateWithI18Next)("findingDriver"),"..."]})}),!r&&N&&Object(E.jsxs)("div",{className:"left-sec mr-set",children:[Object(E.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})," ",Object(E.jsx)("span",{className:"set-opacity",children:Object(h.translateWithI18Next)("isOnTheWay")})]}),!r&&x&&Object(E.jsxs)("div",{className:"left-sec mr-set",children:[Object(E.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name}),Object(E.jsx)("span",{className:"set-opacity",children:Object(h.translateWithI18Next)("arrvingSoon")})]}),r&&g&&(null===c||void 0===c?void 0:c.rider_phone)&&Object(E.jsxs)("div",{className:"rgt-sec algn-left mr-set mob-wid",children:[Object(E.jsx)("span",{className:"set-opacity",children:Object(h.translateWithI18Next)("contact")})," ",Object(E.jsx)("strong",{children:null===c||void 0===c?void 0:c.rider_name})]}),g&&Object(E.jsxs)("div",{className:"rgt-sec algn-rgt mr-set",children:[r&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("img",{src:ue,alt:" "}),Object(E.jsx)("a",{href:"tel:"+(null===c||void 0===c?void 0:c.rider_phone),className:"anchorTags",children:Object(E.jsx)("span",{className:"contact-text",children:Object(h.translateWithI18Next)("call")})})]}),!r&&Object(E.jsx)("span",{className:"contact-text-mob",children:null===c||void 0===c?void 0:c.rider_phone})]})]}),Object(E.jsx)("div",{className:"hr-line"}),Object(E.jsx)("div",{className:"dis-flex-sec",children:Object(E.jsx)("div",{className:"left-sec mr-set",children:Object(E.jsx)("span",{className:"set-opacity",children:Object(h.translateWithI18Next)("kfcRestaraunt")})})}),Object(E.jsxs)("div",{className:"dis-flex-sec",children:[Object(E.jsx)("div",{className:"left-sec mr-set",children:Object(E.jsx)("strong",{children:null===v||void 0===v?void 0:v.name})}),Object(E.jsxs)("div",{className:"rgt-sec algn-rgt mr-set",children:[r&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("img",{src:ue,alt:" "}),Object(E.jsx)("a",{href:"tel:"+(null===v||void 0===v?void 0:v.phoneNumber),className:"anchorTags",children:Object(E.jsx)("span",{className:"contact-text",children:Object(h.translateWithI18Next)("call")})})]}),!r&&Object(E.jsx)("span",{className:"contact-text-mob",children:null===v||void 0===v?void 0:v.phoneNumber})]})]})]})})},Oe=i(327);const be=e=>{let{orderDetails:t={}}=e;const{TRACK_ORDER:i}=Oe.d;return Object(E.jsx)("iframe",{sandbox:"allow-same-origin allow-scripts",title:Object(h.translateWithI18Next)(i),src:(()=>{var e;const i=null===t||void 0===t||null===(e=t.deliveryPartner)||void 0===e?void 0:e.tracking_url;return(i&&-1===i.indexOf(Oe.c)?Oe.c:"")+i})()})};var me=i(972),he=i(1051),pe=i.n(he);const Ne=e=>{var t;let{orderDetails:i,status:s,imageSrc:n,statusMessage:l,getTime:d,cardToFill:a,showProgressBar:o}=e;const{ESTIMATED_ARRIVAL:r,ASK_FOR_OTP:c}=p.a,{SENT_TO_POS_COMPLETED:v}=ve.Qd;return Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{className:"estimated-arrival estimated-arrival-refund ".concat(s,"-delivery"),children:Object(h.translateWithI18Next)(r)}),Object(E.jsx)("div",{className:"idAndTime time-delivery",children:Object(E.jsx)("div",{className:"red",children:d((e=>{var t,i;return null!==e&&void 0!==e&&null!==(t=e.orderTime)&&void 0!==t&&null!==(i=t.toString())&&void 0!==i&&i.includes("-")?null===e||void 0===e?void 0:e.fulfillmentDateTime:null===e||void 0===e?void 0:e.orderTime})(i))})}),n&&Object(E.jsx)("img",{src:n,alt:s}),o&&Object(E.jsx)("div",{className:"progress-bar-list",children:(()=>{let e=[];return 0!==a&&pe()(5,(t=>{e.push(Object(E.jsx)("div",{id:"progressBarContainer",className:"ProgressDelivery ".concat(t+1<=a?"selectedBar":"Bar")},t))})),e})()}),Object(E.jsx)("div",{className:"allSet allset-delivery ".concat(s,"-delivery-allSet"),children:Object(h.translateWithI18Next)(l)}),s!==v&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"estimated-arrival estimated-arrival-refund driver-msg",children:Object(h.translateWithI18Next)(c)}),Object(E.jsx)("div",{className:"idAndTime time-delivery",children:Object(E.jsx)("div",{className:"red otp",children:null===i||void 0===i||null===(t=i.deliveryPartner)||void 0===t?void 0:t.otp})})]})]})};var xe=n.a.memo(Ne),Ee=i(951);const{ConfirmedImg:ge,TakeAwayImg:Ie,TakeawayCompleted:fe}=N.a,De=e=>Object(v.fb)(Object(me.g)(e),Object(me.i)(e))?Object(me.i)(e)?"distaIframeContainer-delivered":Object(me.g)(e)?"distaIframeContainer-cancelled":"":"";var Re=e=>{let{orderDetails:t={},orderReducerData:i={},tenantReducer:n={}}=e;const{DELIVERED:l,SENT_TO_POS_COMPLETED:d,CREATED:a,ASSIGNED:o,CANCEL:r}=ve.Qd,{ORDER_RECEIVED:c,ORDER_READY:u,FOUND_DRIVER:j}=p.a,[O,b]=Object(s.useState)({imageSrc:"",statusMessage:"",showProgressBar:!1}),[m,h]=Object(s.useState)(0),[N,x]=Object(s.useState)(!1),[g,I]=Object(s.useState)(Object(v.Ud)(window.innerWidth)),f=()=>{const e=Object(v.Ud)(window.innerWidth);I(e)};Object(s.useEffect)((()=>{window.addEventListener("resize",f)}),[g]);const D=Object(me.j)(t)&&!Object(me.i)(t),R=()=>Object(E.jsx)(ae,{orderReducerData:i,tenantReducer:n,enableAccordion:"true",isOpenAccordion:D,orderDetailsObj:t});Object(s.useEffect)((()=>{b((e=>{switch(Object(v.ef)(null===e||void 0===e?void 0:e.status)){case d:if(h(1),!N){const e=setTimeout((()=>{x(!0),e&&clearTimeout(e)}),Ee.d)}return{imageSrc:ge,statusMessage:c,showProgressBar:!N};case a:return h(2),{imageSrc:Ie,statusMessage:u,showProgressBar:!0};case o:return h(3),{imageSrc:fe,statusMessage:j,showProgressBar:!0};case l:case r:return h(0),{imageSrc:"",statusMessage:"",showProgressBar:!1}}})(t))}),[null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag,null===i||void 0===i?void 0:i.id]);const T=D?"adjust-delivery-info bill-accordion-section":"bill-accordion-section";return Object(E.jsx)("div",{children:Object(E.jsxs)("div",{className:"OrderReceivedContainer",children:[Object(E.jsxs)("div",{className:"content",children:[Object(E.jsx)("div",{className:"NotifyOrderPlaced ".concat(De(t)," ").concat(Object(me.k)(t)?" distaIframeContainer":""),children:Object(me.k)(t)?Object(E.jsx)(be,{orderDetails:t}):Object(E.jsx)("div",{className:"tickimage",children:Object(E.jsx)("div",{children:Object(E.jsx)(xe,{orderDetails:t,status:Object(v.ef)(null===t||void 0===t?void 0:t.status),imageSrc:null===O||void 0===O?void 0:O.imageSrc,statusMessage:null===O||void 0===O?void 0:O.statusMessage,getTime:v.Uc,cardToFill:m,showProgressBar:null===O||void 0===O?void 0:O.showProgressBar})})})}),!g&&!Object(me.j)(t)&&!Object(me.i)(t)&&R()]}),Object(E.jsxs)("div",{className:T,children:[(Object(me.h)(t)||Object(me.j)(t))&&Object(E.jsx)(je,{isMobile:g,orderReducerData:i,orderDetails:t}),Object(me.j)(t)&&R(),g&&!Object(me.j)(t)&&!Object(me.i)(t)&&R()]})]})})},Te=i(912),Se=i(63),Ce=i(78);const _e=(e,t,i,s,n)=>{var l,d;const{additionalChargeLines:a,foodLines:o,paymentReferences:r,total:c,inclusiveTaxTotal:u}=e,{couponCode:j="",discountTotal:O=""}=Object(v.vb)(e),{localized:b=!1,loggedIn:m=!1}=Object(v.kd)(i),h=Object(v.gd)(b,m),p=[];let N;var x,E;(null===o||void 0===o||o.forEach(((e,i)=>{var s,n,l,d,a,o,r;const c=[];null===e||void 0===e||null===(s=e.item)||void 0===s||null===(n=s.modGrps)||void 0===n||n.forEach((e=>{var t,i;c.push(null===e||void 0===e||null===(t=e.modifiers)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.name)}));const{categoryId:v="",categoryName:u="",content:j=""}=null===e||void 0===e?void 0:e.item;null===p||void 0===p||p.push({currency:ve.p.INR,discount:O/t,item_name:(null===e||void 0===e||null===(l=e.item)||void 0===l||null===(d=l.dname)||void 0===d||null===(a=d[0])||void 0===a?void 0:a.value)||ve.Ed,item_id:(null===e||void 0===e||null===(o=e.item)||void 0===o?void 0:o.id)||ve.Ed,price:(null===e||void 0===e||null===(r=e.item)||void 0===r?void 0:r.unitPrice)/t||ve.Ed,item_variant:c.join(", ")||ve.Ed,quantity:(null===e||void 0===e?void 0:e.quantity)||ve.Ed,item_category:u,item_list_name:u,item_list_id:v,product_tags:(null===j||void 0===j?void 0:j.allergenList)||ve.Ed,index:i})})),n)?N=n:N=null!==R.b&&void 0!==R.b&&R.b.shouldGoogleSpotIgnoreOloFailure&&null!==R.b&&void 0!==R.b&&R.b.transactionId?null===R.b||void 0===R.b?void 0:R.b.transactionId:null!==(x=null===r||void 0===r||null===(E=r[0])||void 0===E?void 0:E.transactionId)&&void 0!==x?x:ve.Ed;Object(Ce.e)(h,{affiliation:ve.p.ONLINE_STORE,transaction_id:N,value:c?c/t:ve.Ed,tax:u?u/t:ve.Ed,shipping:"delivery-charge"===(null===a||void 0===a||null===(l=a[0])||void 0===l?void 0:l.chargeType)?(null===a||void 0===a||null===(d=a[0])||void 0===d?void 0:d.amount)/t:ve.Ed,currency:ve.p.INR,coupon:j,items:p||ve.Ed})};var ye=e=>{let{orderReducerData:t={},userParams:i={},tenantReducer:n={}}=e;const[l,d]=Object(s.useState)(!1),[a,o]=Object(s.useState)(!1),[r,c]=Object(s.useState)(Object(v.Ud)(window.innerWidth)),{SAVE_YOUR_ORDERS_AND_CHECKOUT_FASTER:j,SAVED_TO_FAVORITE_MENU:O,SAVE_THIS_Order:b,REORDER_FAVOURITES:p,CREATE_KFC_ACCOUNT:N}=m.a,x=()=>{const e=Object(v.Ud)(window.innerWidth);c(e)};return Object(s.useEffect)((()=>{window.addEventListener("resize",x)}),[r]),Object(s.useEffect)((()=>{a&&(oe.b.dark(Object(E.jsx)("div",{className:"img-text-div",children:Object(E.jsxs)("span",{className:"notifyText notifyText-in",children:[Object(E.jsx)("img",{src:f.a,alt:"tick",className:"TickImg"}),Object(h.translateWithI18Next)(O)]})}),{bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:oe.b.POSITION.BOTTOM_CENTER}),setTimeout((()=>{oe.b.dismiss()}),4e3))}),[a]),Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{children:i.loggedIn?Object(E.jsx)("div",{children:!a&&Object(E.jsxs)("div",{className:"savingdivDelivery",children:[Object(E.jsx)("span",{className:"savingText",children:Object(h.translateWithI18Next)(j)}),Object(E.jsx)("span",{className:"saveButton",children:Object(E.jsx)(u.a,{"data-testid":"save-logged-order",className:"button transparent-btn black-border",onClick:()=>Object(S.h)(d),ariaLable:Object(h.translateWithI18Next)(b),children:Object(h.translateWithI18Next)(b)})})]})}):Object(E.jsx)("div",{children:!a&&Object(E.jsxs)("div",{className:"savingdivDelivery",children:[Object(E.jsx)("span",{className:"savingText",children:Object(h.translateWithI18Next)(p)}),Object(E.jsx)("span",{className:"saveButton",children:Object(E.jsx)(u.a,{"data-testid":"save-guest-order",className:"button transparent-btn black-border",onClick:()=>Object(S.j)(t,100),ariaLable:Object(h.translateWithI18Next)(N),children:Object(h.translateWithI18Next)(N)})})]})})}),l&&Object(E.jsx)("div",{children:Object(E.jsx)(I,{"data-testid":"confirm-modal",isOpen:l,handleClose:()=>d(!1),onSave:()=>Object(S.c)(o,!0),tenantReducer:n,OrderReducerData:t})})]})},Ae=i(49);const Pe=e=>{var t,i,u;let j=null,O=null;const{userOrderState:b}=Object(s.useContext)(d.a),{tenantReducer:m,appStateReducer:h,orderReducer:p,postOrderReducer:N,cartReducer:x,storesReducer:g}=Object(l.c)((e=>e)),I=Object(l.c)((e=>{var t,i;return null===e||void 0===e||null===(t=e.postOrderReducer)||void 0===t||null===(i=t.cashTranscationResponse)||void 0===i?void 0:i.transactionId})),f=(Object(l.c)((e=>{let{menuReducer:{flatResponse:t}}=e;return t})),Object(l.b)()),{userStatus:D}=h,{cartData:T,isBasketLoading:S,qrCodeScanTime:C}=x,y=Object(v.Jd)(b.dispositionNew)?JSON.parse(localStorage.getItem(ve.gd.DISPOSITION_NEW)):b.dispositionNew,[A,P]=Object(s.useState)(Object(me.u)(null===m||void 0===m?void 0:m.tenantId,Object(me.e)(N,p,{},!1),null===p||void 0===p||null===(t=p.response)||void 0===t?void 0:t.order,y)),{checkout:{showPaymentProcessing:L}={}}=null!==(i=null===m||void 0===m||null===(u=m.componentOptions)||void 0===u?void 0:u.web)&&void 0!==i?i:{},[w,W]=Object(s.useState)(!0),[M,B]=Object(s.useState)(0),[F,k]=Object(s.useState)(!1),[U,V]=Object(s.useState)(!1),[H,Y]=Object(s.useState)(!1),G=Object(l.c)((e=>e.appStateReducer.userStatus));Object(s.useEffect)((()=>{window.scrollTo(0,0)})),Object(s.useEffect)((()=>(window.removeEventListener("beforeunload",(()=>Object(me.t)(f,!0)),!0),window.addEventListener("beforeunload",(()=>Object(me.t)(f,!0))),localStorage.removeItem(ve.gd.ADD_TO_ORDER),()=>{window.removeEventListener("beforeunload",(()=>Object(me.t)(f)),!0),P({}),Object(me.t)(f)})),[]),Object(s.useEffect)((()=>{const t=Object(me.e)(N,p,{},!1);if(t&&Object.keys(t).length){if(!Object(me.p)(t)&&!H){var i,s,n;(e=>{var t;const i=[{storeId:null===e||void 0===e||null===(t=e.store)||void 0===t?void 0:t.storeId,channel:R.b.channel,service:null===e||void 0===e?void 0:e.service}],s=null===m||void 0===m?void 0:m.tenantId;f(Object(Se.d)({data:i,tenantId:s,isFavoritePage:!1}))})(t);const{currencyConversionFactor:e}=m;(null===p||void 0===p||null===(i=p.response)||void 0===i||null===(s=i.order)||void 0===s||null===(n=s.tenders[0])||void 0===n?void 0:n.type)!==ve.Ud.PAY_BY_CASH&&_e(t,e,D),Y(!0)}Object(me.q)(t,U,V),Object(me.v)(t,A,P,U,e)}}),[null===N||void 0===N?void 0:N.orderAccepted,null===p||void 0===p?void 0:p.pastOrderResponse]),Object(s.useEffect)((()=>{const t=I,i=Object(me.e)(N,p,{},!1),{currencyConversionFactor:s}=m;var n,l,d;i&&Object.keys(i).length&&(Object(me.q)(i,U,V),Object(me.v)(i,A,P,U,e),(null===p||void 0===p||null===(n=p.response)||void 0===n||null===(l=n.order)||void 0===l||null===(d=l.tenders[0])||void 0===d?void 0:d.type)===ve.Ud.PAY_BY_CASH&&_e(i,s,D,0,t))}),[I]);const K=()=>{const t=Object(me.e)(N,p,{},!1);var i;(Object(me.s)(f,A,M,t,B,e),Object(v.ce)())||Object(Ae.B)({orderDetails:null===p||void 0===p||null===(i=p.response)||void 0===i?void 0:i.order,userOrderState:b})};Object(s.useEffect)((()=>{w&&M>0&&K()}),[M]),Object(s.useEffect)((()=>{if(null!==m&&void 0!==m&&m.tenantId&&(L||sessionStorage.getItem(ve.gd.ORDER_TRACKING))){let s=JSON.parse(sessionStorage.getItem(ve.gd.ORDER_TRACKING));var e,t,i;if(s&&Object.keys(s).length)null!==s&&void 0!==s&&s.postOrderDetails&&0===Object.keys(null===s||void 0===s?void 0:s.postOrderDetails).length&&Object(me.c)(f,s),P({...A,...s,deliveryDistaRetryCountFlag:null!==s&&void 0!==s&&s.postOrderDetails?1:0,operatingTime:null===g||void 0===g||null===(e=g.storesWithStatus)||void 0===e||null===(t=e[0])||void 0===t||null===(i=t.summary)||void 0===i?void 0:i.timings});else A&&K()}}),[null===m||void 0===m?void 0:m.tenantId]),Object(s.useEffect)((()=>{var e;f(Object(r.a)({object:Object(_.a)(),contentFull:{content_type:"marketConfig","fields.location":null===Q||void 0===Q||null===(e=Q.tenantReducerContent)||void 0===e?void 0:e.country,"fields.channel":R.b.channel,include:5}}))}),[f]),Object(s.useEffect)((()=>{f(Object(o.c)({object:Object(_.a)(),contentFull:{content_type:"landingPage","fields.pageType":"HomePage","fields.channel":R.b.channel,include:"5"},userStatus:D}))}),[f,D,null===m||void 0===m?void 0:m.tenantId]),Object(s.useEffect)((()=>{let t=null;if(w&&!Object(me.m)(A)){(async()=>{const t=Object(me.e)(N,p,{},!1),i=await Object(me.r)(t,W,e);Object(me.a)({dispatch:f,orderDetails:A,orderAccepted:t,cartData:T,userOrderState:b,appStateReducer:h,isBasketLoading:S,status:i,qrCodeScanTime:C})})()}return Object(me.f)(A)&&!F&&(k(!0),W(!1)),null!==A&&void 0!==A&&A.orderId&&Object(me.n)(A)&&(t=setTimeout((()=>{Object(me.c)(f,A)}),Ee.b)),()=>{t&&clearTimeout(t)}}),[null===A||void 0===A?void 0:A.deliveryDistaRetryCountFlag]),Object(s.useEffect)((()=>{"giftCardPurchase"===localStorage.getItem(ve.gd.POST_PAYMENT_TYPE)&&(localStorage.setItem(ve.gd.PAYMENT_STATUS,ve.Td.SUCCESS),Object(v.Ke)(e))}),[]);const Q=Object(l.c)((e=>({homePageContent:Object(v.od)(e.contentReducer.response),marketPageContent:Object(v.od)(e.marketConfigReducer.response),tenantReducerContent:Object(v.od)(e.tenantReducer)})));if(Q.marketPageContent&&Q.tenantReducerContent&&Q.homePageContent){const{header:e={},footer:t={}}=Object(v.kd)(Q.marketPageContent.headerData);j=Object(v.cc)(e),O=Object(v.Sb)(t)}return Object(E.jsx)(n.a.Fragment,{children:Object(E.jsxs)("div",{className:"PostPaymentProcessComponent",children:[Object(v.Kd)(j)&&Object(E.jsx)(Te.b,{contentData:j,tenantReducerData:Q.tenantReducerContent,userParams:G,paymentHeader:!0,checkoutHeader:!1}),w&&Object(E.jsx)(c.a,{retryCount:M}),Object(me.o)(A)&&!Object(me.l)(A)&&Object(E.jsx)(ce,{orderReducerData:Object(me.e)(N,p,A),userParams:G,tenantReducer:m,orderDetails:A}),F&&Object(E.jsxs)("div",{children:[Object(E.jsx)(Re,{orderDetails:A,orderReducerData:Object(me.e)(N,p,A),tenantReducer:m}),Object(E.jsx)(ye,{orderReducerData:Object(me.e)(N,p,A),userParams:G,tenantReducer:m,orderDetails:A})]}),Object(v.Kd)(O)&&Object(E.jsx)(a.a,{contentData:O,history:e.history,tenantReducerData:Q.tenantReducerContent})]})})}},912:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return d}));var s=i(171),n=i(2);const l=e=>Object(n.jsx)(s.a,{testId:"header-container-test",importPath:"HEADER_CONTAINER",...e}),d=e=>Object(n.jsx)(s.a,{testId:"header-container-test",importPath:"SECONDARY_HEADER_CONTAINER",...e})},920:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i(171),n=i(2);const l=e=>Object(n.jsx)(s.a,{testId:"account-container-test",importPath:"FOOTER_PAGE",...e})},951:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return d}));const s=20,n=5e3,l=15e3,d=18e4},972:function(e,t,i){"use strict";i.d(t,"p",(function(){return v})),i.d(t,"o",(function(){return u})),i.d(t,"l",(function(){return j})),i.d(t,"f",(function(){return O})),i.d(t,"m",(function(){return b})),i.d(t,"n",(function(){return m})),i.d(t,"h",(function(){return h})),i.d(t,"j",(function(){return p})),i.d(t,"i",(function(){return N})),i.d(t,"g",(function(){return x})),i.d(t,"k",(function(){return E})),i.d(t,"r",(function(){return I})),i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return R})),i.d(t,"d",(function(){return T})),i.d(t,"c",(function(){return S})),i.d(t,"s",(function(){return C})),i.d(t,"v",(function(){return _})),i.d(t,"q",(function(){return y})),i.d(t,"u",(function(){return A})),i.d(t,"w",(function(){return P})),i.d(t,"e",(function(){return L})),i.d(t,"t",(function(){return w}));var s=i(138),n=i(102),l=i(30),d=i(5),a=i(0),o=i(951),r=i(22),c=i(42);const v=e=>g(e)===a.Od.STAGED_ACCEPTED,u=e=>g(e)===a.Od.PICKUP_DELIVERY_DINE_IN,j=e=>Object(d.ef)(null===e||void 0===e?void 0:e.service)===a.Lb.DELIVERY&&u(e),O=e=>Object(d.ef)(null===e||void 0===e?void 0:e.service)===a.Lb.DELIVERY&&(j(e)||h(e)||p(e)||N(e)),b=e=>O(e)&&(null===e||void 0===e?void 0:e.deliveryPartner),m=e=>O(e)&&!N(e)&&!x(e),h=e=>g(e)===a.Od.DELIVERY_DISTA_CREATE_ASSIGN,p=e=>g(e)===a.Od.DELIVERY_DISTA,N=e=>g(e)===a.Od.DELIVERY_DISTA_DELIVERED,x=e=>g(e)===a.Od.CANCELLED,E=e=>p(e)||x(e)||N(e),g=e=>{switch(Object(d.ef)(null===e||void 0===e?void 0:e.status)){case a.Qd.STAGED:case a.Qd.ACCEPTED:return r.b.shouldGoogleSpotIgnoreOloFailure?a.Od.PICKUP_DELIVERY_DINE_IN:a.Od.STAGED_ACCEPTED;case a.Qd.SENT_TO_POS_COMPLETED:if(Object(d.ef)(null===e||void 0===e?void 0:e.service)===a.Lb.PICKUP||Object(d.ef)(null===e||void 0===e?void 0:e.service)===a.Lb.DINE_IN||Object(d.ef)(null===e||void 0===e?void 0:e.service)===a.Lb.DELIVERY||Object(d.ef)(null===e||void 0===e?void 0:e.service)===a.Lb.CHRISTMAS_ORDERING)return a.Od.PICKUP_DELIVERY_DINE_IN;break;case a.Qd.CREATED:case a.Qd.ASSIGNED:return a.Od.DELIVERY_DISTA_CREATE_ASSIGN;case a.Qd.PICKED_UP:case a.Qd.OUT_FOR_DELIVERY:case a.Qd.ARRIVED:return a.Od.DELIVERY_DISTA;case a.Qd.DELIVERED:return a.Od.DELIVERY_DISTA_DELIVERED;case a.Qd.CANCELLED:case a.Qd.CANCEL:return Object(d.ef)(null===e||void 0===e?void 0:e.service)===a.Lb.DELIVERY?a.Od.CANCELLED:a.Od.FAILED;case a.Qd.SENT_TO_POS_FAILED:case a.Qd.PAYMENT_FAILED:return a.Od.FAILED}},I=(e,t,i)=>{if(null!==e&&void 0!==e&&e.orderAcceptedLoading)return Promise.resolve(!1);switch(g(e)){case a.Od.STAGED_ACCEPTED:return t(!0),Promise.resolve(!1);case a.Od.PICKUP_DELIVERY_DINE_IN:return t(!1),Promise.resolve(!0);case a.Od.DELIVERY_DISTA_CREATE_ASSIGN:case a.Od.DELIVERY_DISTA:case a.Od.DELIVERY_DISTA_DELIVERED:case a.Od.CANCELLED:return t(!1),Promise.resolve(!1);case a.Od.FAILED:return localStorage.setItem(a.Td.STATUS_TEXT,a.Td.FAILED),Object(d.Se)(i),Promise.resolve(!1)}},f=e=>{let{dispatch:t,orderDetails:i,orderAccepted:s,cartData:n,userOrderState:o,appStateReducer:c,isBasketLoading:v,status:u,qrCodeScanTime:j}=e;if(u){const e=c.userStatus,u=r.b.shouldGoogleSpotIgnoreOloFailure||Object(d.ef)(null===s||void 0===s?void 0:s.status)===a.Qd.SENT_TO_POS_COMPLETED;Object(d.l)(u,!v,null===n||void 0===n?void 0:n.id,e.localized,null===i||void 0===i?void 0:i.tenantId)&&Object(d.G)(t,l.f,null===i||void 0===i?void 0:i.tenantId,o,j)}},D=(e,t,i)=>{t&&(i=setTimeout((()=>{t(e),i&&clearTimeout(i)}),o.c))},R=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const l={emailId:null===t||void 0===t?void 0:t.userEmail,phoneNo:null===t||void 0===t?void 0:t.userPhone,orderNo:null===t||void 0===t?void 0:t.posOrderId,tenantId:null===t||void 0===t?void 0:t.tenantId},d=i+1;e(Object(n.d)(l,(()=>D(d,s,null))))},T=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const l={orderId:null===t||void 0===t?void 0:t.orderId,tenantId:null===t||void 0===t?void 0:t.tenantId,customerId:null===t||void 0===t?void 0:t.customerId},d=i+1;e(Object(s.f)(l,(()=>D(d,n,null))))},S=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null!==t&&void 0!==t&&t.isExternalTrackOrder?R(e,t,i,s):T(e,t,i,s)},C=(e,t,i,s,n,l)=>{null!==t&&void 0!==t&&t.orderId?0===i||v(s)&&i<o.a?S(e,t,i,n):v(s)&&i>=o.a&&(localStorage.setItem("paymentStatus",a.Td.FAILED),Object(d.Se)(l)):Object(d.Me)(l)},_=(e,t,i,s,n)=>{s&&j(e)?Object(d.Se)(n):null!==e&&void 0!==e&&e.status&&(null===e||void 0===e?void 0:e.status)!==(null===t||void 0===t?void 0:t.status)?i({...t,status:null===e||void 0===e?void 0:e.status,orderAcceptedLoading:null===e||void 0===e?void 0:e.orderAcceptedLoading,deliveryPartner:null===e||void 0===e?void 0:e.deliveryPartner,deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1}):i({...t,deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1})},y=(e,t,i)=>{if(j(e)&&!t){const e=setTimeout((()=>{e&&clearTimeout(e)}),o.d)}},A=(e,t,i,s)=>{var n,l;return{...P(e,t,!1,i),orderAcceptedLoading:(null===t||void 0===t?void 0:t.orderAcceptedLoading)||!1,deliveryPartner:null,deliveryDistaRetryCountFlag:0,operatingTime:null===s||void 0===s||null===(n=s.store)||void 0===n||null===(l=n.summary)||void 0===l?void 0:l.timings}},P=function(e,t){var i,s,n,l,d,a,o,r;let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const j={orderId:(null===t||void 0===t?void 0:t.id)||(null===v||void 0===v?void 0:v.id),customerId:(null===t||void 0===t||null===(i=t.customer)||void 0===i?void 0:i.id)||(null===v||void 0===v||null===(s=v.customer)||void 0===s?void 0:s.id),tenantId:e,service:(null===t||void 0===t?void 0:t.service)||(null===v||void 0===v?void 0:v.service),status:(null===t||void 0===t?void 0:t.status)||(null===v||void 0===v?void 0:v.status),orderTime:(null===t||void 0===t?void 0:t.fulfillmentDateTime)||(null===v||void 0===v?void 0:v.fulfillmentDateTime),deliveryPartner:(null===t||void 0===t?void 0:t.deliveryPartner)||(null===v||void 0===v?void 0:v.deliveryPartner),posOrderId:(null===t||void 0===t?void 0:t.posOrderId)||(null===v||void 0===v?void 0:v.posOrderId),userEmail:(null===t||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.email)||(null===v||void 0===v||null===(l=v.customer)||void 0===l?void 0:l.email),userPhone:(null===t||void 0===t||null===(d=t.customer)||void 0===d?void 0:d.phoneNumber)||(null===t||void 0===t||null===(a=t.customer)||void 0===a?void 0:a.phone)||(null===v||void 0===v||null===(o=v.customer)||void 0===o?void 0:o.phoneNumber),postOrderDetails:t,isExternalTrackOrder:c};var O,b,m;null!==u&&void 0!==u&&null!==(r=u.storesWithStatus)&&void 0!==r&&r.length&&(j.operatingTime=null===u||void 0===u||null===(O=u.storesWithStatus)||void 0===O||null===(b=O[0])||void 0===b||null===(m=b.summary)||void 0===m?void 0:m.timings);return j},L=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=(e=>{var t;return null!==e&&void 0!==e&&e.orderAccepted&&Object.keys(null===e||void 0===e?void 0:e.orderAccepted).length&&null!==e&&void 0!==e&&null!==(t=e.orderAccepted)&&void 0!==t&&t.id?null===e||void 0===e?void 0:e.orderAccepted:null})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return null===s&&(s=(e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.pastOrderResponse)&&void 0!==t&&t.length&&null!==e&&void 0!==e&&e.pastOrderResponse[0].id?null===e||void 0===e?void 0:e.pastOrderResponse[0]:null})(e),i&&null===s&&(s=t&&Object.keys(null===t||void 0===t?void 0:t.postOrderDetails).length?null===t||void 0===t?void 0:t.postOrderDetails:{})),s||{}},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(localStorage.getItem(a.gd.PAYMENT_STATUS)!==a.Td.FAILED){var i,l,d,o;if(t&&(null===(i=window)||void 0===i||null===(l=i.location)||void 0===l?void 0:l.pathname)===(null===a.Ae||void 0===a.Ae?void 0:a.Ae.PAYMENT_SUCCESS)||(null===(d=window)||void 0===d||null===(o=d.location)||void 0===o?void 0:o.pathname)===(null===a.Ae||void 0===a.Ae?void 0:a.Ae.CHECKOUT))return!1;(e=>{e(Object(s.h)())})(e),(e=>{e(Object(n.e)())})(e)}(e=>{e(Object(c.z)())})(e),(e=>{e(Object(n.a)({value:[]}))})(e),sessionStorage.removeItem(a.gd.ORDER_TRACKING)}}}]);