(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[71,30],{1e3:function(e,t,a){"use strict";a.d(t,"b",(function(){return v})),a.d(t,"d",(function(){return f})),a.d(t,"c",(function(){return I}));var i=a(3),c=a.n(i),o=a(76),n=a(6),d=a(5),r=a(190),s=a(25),l=a(898),u=a(999),m=a(0),O=a(906),p=a(213),b=a(15),j=a(2);const v=e=>{null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||e.preventDefault()},f=(e,t,a,i,c)=>{t&&c();let o=e.length?JSON.parse(JSON.stringify(e)):[];o.map(((e,t)=>(e.id===a&&(e.expanded=!e.expanded),e))),i([...o])},I=(e,t,a,i)=>{let c=((e,t,a)=>{let i=e.length?e:[];return null===i||void 0===i?void 0:i.map(((e,i)=>{if(Object(d.db)(0===i,t))e.expanded=!0;else{e.expanded=!1;let t=e.modifiers.map((e=>({...e,productId:a})));e.modifiers=t}return e}))})(JSON.parse(JSON.stringify(e)),a,i);t([...c])};t.a=e=>{const{grouplist:t=[],getSelectedModifiers:a,selectedModifiers:g,source:y="",accordionDefaultOpen:h,isModal:S,isStoreClosed:N,catalog:D,localized:E=!0}=e,{PDP:x,HASH_SYMBOL:C}=r.a,{MAX_TAG:T}=O.a,[P,A]=Object(i.useState)([]),_=Object(s.c)((e=>e.cartReducer)),[M,R]=Object(i.useState)([]),{componentOptions:w,currencyConversionFactor:L,currencySymbol:F,taxAmountRoundOff:U,swapPDPContentData:k}=Object(s.c)((e=>e.tenantReducer)),{web:{global:{pricewithNumberofDecimalDigit:B},pdp:{deltaPriceInAccordion:z,showMaxBadge:G}}}=w,{isItemAdded:W=!1}=Object(d.kd)(_),q=Object(s.c)((e=>e.tenantReducer)),{userOrderState:J}=Object(i.useContext)(o.a),{pdpScreenCommons:{currentAccordian:K},pdpPayloadData:H,pdpItemUpsizeId:Q}=J;Object(i.useEffect)((()=>{I(t,A,h,Q),R([])}),[JSON.stringify(t),D,W]),Object(i.useEffect)((()=>{if(Object(d.db)(K,y===x)){let e=(null!==t&&void 0!==t&&t.length?JSON.parse(JSON.stringify(t)):[]).map(((e,t)=>{if(e.id===K){var a;const t=(null===(a=e.modifiers)||void 0===a?void 0:a.length)>1?300:0;let i=document.getElementById("accordion-"+K).offsetTop;window.scrollTo({top:i-t,behavior:"smooth"}),e.expanded=!0}else e.expanded=!1;return e}));A([...e])}}),[K,JSON.stringify(t)]);const Y=e=>{let t,a,i;if(e.length){t=e.map(JSON.stringify),a=new Set(t),i=Array.from(a).map(JSON.parse);let c=[];if(M.length){c=M;let e=M.findIndex((e=>e[0].modgrpId===i[0].modgrpId));e>=0?(c.splice(e,1,i),R([...c])):R([...c,i])}else R((e=>[...e,i]))}};Object(i.useEffect)((()=>{M.length&&a(M),g&&g(M)}),[M]);const X=e=>{let t="",a=null===H||void 0===H?void 0:H.modGrps;if(a[e]){var i;let n=null===(i=a[e])||void 0===i?void 0:i.modifiers,d=[];for(let t in n){let a=n[t];if(a.isSelected){var c,o;const{quantity:t}=a,i=t>1?"".concat(t,"x "):"";let n=!!z&&Object(l.z)(H,"".concat(e).concat(C).concat(a.id),L,F,B);d.push("".concat(i," ").concat(null===(c=a.dname)||void 0===c||null===(o=c[0])||void 0===o?void 0:o.value," ").concat(!1!==n?n:""))}}t=[...new Set(d)].reverse().join(", ")}return t};return Object(d.kc)(P)&&P.map(((e,t)=>{var a;let{id:i,name:o,dname:d,modifiers:r,expanded:s,min:O,max:I,additionalProperties:g}=e;const y=Object(l.g)(i,H),h=Object(l.d)(i,H),x=((e,t,a,i)=>t&&Object(u.b)(e,i,a))(r,E,I,g),C=!x&&((e,t,a)=>{const i=Object(u.c)(a);return e&&i&&t})(G,E,g);return Object(j.jsx)(c.a.Fragment,{children:Object(j.jsxs)("div",{className:"accordian-container ",id:"accordion-"+i,"data-testid":"product-listing-accordion-".concat(t),children:[Object(j.jsxs)("div",{className:"accordian-header",children:[Object(j.jsx)("div",{className:"".concat(s?"accordion active":"accordion"),"data-testid":"toggle-accordion-".concat(i),onClick:e=>f(P,e,i,A,v),children:Object(j.jsxs)("div",{className:"textbadgecontainer",children:[Object(j.jsx)("h3",{className:"accordion-test",children:null===d||void 0===d||null===(a=d[0])||void 0===a?void 0:a.value}),Object(j.jsxs)("div",{className:"badgeContainer",children:[C&&Object(j.jsx)("span",{className:"ml-2 maxBadge",children:k?"".concat(I).concat(Object(n.translateWithI18Next)(T)):"".concat(Object(n.translateWithI18Next)(T)).concat(I)}),y?Object(j.jsx)("span",{className:"updatedBadge-sopac",children:Object(n.translateWithI18Next)(m.If)}):null]})]})}),Object(j.jsx)("span",{className:"selected-mod",children:X(i)})]}),!s&&h?Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)(p.a,{src:null===b.a||void 0===b.a?void 0:b.a.errorIcon,className:"d-flex mr-1 ml-1"}),Object(j.jsx)("span",{children:Object(n.translateWithI18Next)("selectionRequired")})]}):null,Object(j.jsx)("div",{className:"".concat(s?"panel panel-active":"panel"),children:Object(j.jsx)(u.a,{tenantData:q,modifiers:r,modgrpData:{modgrpId:i,modGrpName:d,min:O,max:I,additionalProperties:g,modifierLength:r.length},modgroupPayloadData:Y,isModal:S,isStoreClosed:N,catalog:D})})]})},t)}))}},823:function(e,t,a){"use strict";a.r(t),a.d(t,"filteredModGroups",(function(){return T}));var i=a(3),c=a.n(i),o=a(73),n=a.n(o),d=a(25),r=a(998),s=a(36),l=a(949),u=a.n(l),m=a(1e3),O=a(5),p=a(19);var b=a(30),j=a(922),v=a(76),f=a(6),I=a(54),g=a(899),y=a(903),h=a(14),S=a(913),N=a(0),D=a(2);const E=e=>{let t=document.querySelector(".product-listing-component form .accordion-test");"ArrowDown"===e.key&&void 0!=typeof t&&null!=t&&t.focus()},x=(e,t)=>{var a,i;const{setClickEvent:c,setConfirmed:o,categoryMapById:n,categoryId:d,modifiersList:r,getItemName:s,data:l,getID:m,getUpdatedPrice:j,itemCount:v,getList:f,minipdpData:g,FROMFLAGEDIT:y,dispatch:h,cartReducer:D,tenantId:E,id:x,modifierGrp:C,userOrderStateDispatch:T,confirmUpsizeName:P}=t;let A="";e.stopPropagation(),e.preventDefault(),c(e),o(!0);const{name:_="NA"}=null!==(a=null===n||void 0===n?void 0:n[d])&&void 0!==a?a:{};var M,R;(u()(r,(e=>{A+="".concat(e[0].name,", ")})),Object(S.a)({item_name:s(l.name),item_id:m(l.id),item_category:_,price:j(v,null===(i=l.availability[0])||void 0===i?void 0:i.price),item_variant:f(A),item_list_name:_,item_list_id:d,index:1,quantity:v,currency:N.p.AUD}),g.fromFlag!==y)?h(Object(b.a)({params:{basketId:(null===D||void 0===D?void 0:D.cartData)&&(null===D||void 0===D||null===(M=D.cartData)||void 0===M?void 0:M.id)},tenantId:E},[{Id:x,categoryId:d,quantity:v,modGrps:C}])):h(Object(b.y)({params:{basketId:(null===D||void 0===D?void 0:D.cartData)&&(null===D||void 0===D||null===(R=D.cartData)||void 0===R?void 0:R.id),basketLineItemId:g.foodLineId},tenantId:E},{Id:x,quantity:v,modGrps:C}));h(Object(b.u)(new Date)),T({type:I.a.SET_ADDED_LOCATION,value:{itemLocation:{itemid:x,addedFrom:"PLP-Model"}}}),(async e=>{const t=[];t.push({event:"confirmUpsize",changesMade:e}),await p.a.registerEvent(void 0,{data:t[0]},O.xb)})(P)};var C=e=>{var t;const{data:a,categoryId:o,handleClose:n,showPriceContent:r=!0,source:l="",isModal:u,isStoreClosed:p,localized:b,catalog:S}=e,{id:N,modgrps:C,availability:T=[]}=a,{userOrderState:P,userOrderStateDispatch:A}=Object(i.useContext)(v.a),{confirmUpsizeName:_,minipdpData:M}=P,[R,w]=Object(i.useState)(C),[L,F]=Object(i.useState)([]),U=Object(d.b)(),k=Object(d.c)((e=>e.tenantReducer)),B=Object(d.c)((e=>e.cartReducer)),{cartData:z={},isAddItemLoading:G=!1}=B||{},{currencySymbol:W,tenantId:q,currencyConversionFactor:J,maxItemCountPerLineItem:K,componentOptions:H}=k,{web:{pdp:{productCustomizationAccordionDefaultOpen:Q}}}=H,{flatResponse:{categoryMapById:Y={}}={}}=null!==(t=Object(d.c)((e=>{let{menuReducer:t}=e;return t})))&&void 0!==t?t:{},[X,V]=Object(i.useState)(0),Z=Object(O.yc)(T[0],J),{ADDTOCART:$,UPDATECART:ee}=j.a,{FROMFLAGEDIT:te,EDIT_CLICKED:ae}=h.a,[ie,ce]=Object(i.useState)(1),[oe,ne]=Object(i.useState)(0),{ITEM_QUANTITY:de}=g.a,[re,se]=Object(i.useState)(!1),[le,ue]=Object(i.useState)(null);Object(i.useEffect)((()=>{var t;null===(t=e.callBackToPDP)||void 0===t||t.call(e,{modifierGrp:R})}),[R]),Object(i.useEffect)((()=>{const e=Object(O.Kd)(z)?Object(O.hc)(N,z):{},t=Object(O.Kd)(e)?e.count:0;if(ne(t),M.fromFlag===te){const e=Object(O.Kd)(z)?Object(O.ic)(M.foodLineId,z):{},t=Object(O.Kd)(e)?e.count:1;ce(t)}}),[z]),Object(i.useEffect)((()=>()=>{A({type:ae,value:{cartEditClicked:!1}})}),[A,ae]);Object(i.useEffect)((()=>{re&&!G&&n(le)}),[re,G]),Object(i.useEffect)((()=>(window.addEventListener("keydown",E),()=>{window.removeEventListener("keydown",E)})));const me=M.fromFlag===te?Object(f.translateWithI18Next)(ee):Object(f.translateWithI18Next)($),Oe={setClickEvent:ue,setConfirmed:se,categoryMapById:Y,categoryId:o,modifiersList:L,data:a,itemCount:ie,minipdpData:M,FROMFLAGEDIT:te,dispatch:U,cartReducer:B,tenantId:q,id:N,modifierGrp:R,userOrderStateDispatch:A,confirmUpsizeName:_,getItemName:e=>e||"NA",getID:e=>e||"NA",getUpdatedPrice:(e,t)=>e*t/J||"NA",getList:e=>e.trim()||"NA"};return Object(D.jsxs)(c.a.Fragment,{children:[Object(D.jsx)("div",{className:"modal-body-row product-listing-component","data-testid":"product-listing-component",children:Object(D.jsx)("form",{className:"form",children:Object(O.Kd)(C)?Object(D.jsx)(m.a,{grouplist:C,getSelectedModifiers:e=>{let t=0,a=[];e.forEach((e=>{let i={};i.id=e[0].modgrpId,i.modifiers=[],e.forEach((e=>{let a={},c=JSON.parse(JSON.stringify(e));a.id=c.id,a.quantity=c.defaultQuantity,a.modGrps=c.modgrps,a.categoryId=o,i.modifiers.push(a);let n=Object(O.yc)(e.availability[0],J);t+=n})),a.push(i)})),V(Z+t),w(a)},selectedModifiers:F,source:l,accordionDefaultOpen:Q,isModal:u,localized:b,isStoreClosed:p,catalog:S}):null})}),r&&Object(D.jsx)("div",{className:"price-content",children:Object(D.jsxs)("div",{className:"price-content-parent price-content-parent-sopac","data-testid":"product-listing-button-comp",children:[ie?Object(D.jsx)(y.a,{itemCount:ie,itemQuantity:de,updateItemQuantity:(e,t)=>{t===I.a.QUANTITY_ACTION.Increase?ce((e=>e+1)):ce((e=>e-1))},quantityAction:I.a.QUANTITY_ACTION,item:void 0,maxItemCountPerLineItem:K,cartItemCount:oe+1}):null,Object(D.jsxs)(s.a,{className:"button start-order-btn ".concat(G?"blackButton":"redButton"," customizeCartButton"),id:"startOrderItemButton","data-testid":"product-listing-button",type:"submit",name:"product-listing-button",onClickHandler:e=>x(e,Oe),children:[Object(D.jsx)("span",{className:"title-for-button",children:"".concat(me)}),Object(D.jsx)("span",{className:"currency-symbol",children:"".concat(W," ").concat((pe=X,(ie*pe).toFixed(2)))})]})]})})]});var pe};const T=e=>{if(e){var t;let a=JSON.parse(JSON.stringify(e));return a.modgrps=null===(t=e.modgrps)||void 0===t?void 0:t.filter((e=>{let{isHidden:t}=e;return!t})),a}return{}};t.default=e=>{const{isModal:t=!0,showPriceContent:a=!0,data:i={},source:c="",isStoreClosed:o=!1,localized:s,catalog:l,categoryId:u=""}=e,{MODALHEADERTEXT:m=""}=j.a,p=Object(d.c)((e=>{let{menuReducer:t}=e;return t.currentItemDetails})),v=Object(O.Kd)(i)?T(i):T(p),I=Object(d.b)(),g=e=>{e.stopPropagation(),e.preventDefault(),I(Object(b.v)({showProductListingModal:!1,categorySelected:""}))},y=Object(D.jsx)(C,{data:v,categoryId:u,handleClose:g,showPriceContent:a,"data-testid":"product-listing-modal-enabled",source:c,isModal:t,localized:s,isStoreClosed:o,catalog:l}),h=Object(D.jsx)(r.a,{handleClose:g,ProductListingModalForm:y,headerText:Object(f.translateWithI18Next)(m),"data-testid":"product-listing-inside-modal"}),S=Object(D.jsx)("div",{className:"pdp-custm-sopac",children:y});return t?n.a.createPortal(h,document.getElementById("modal-popups")):S}},905:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return i}));let i;(async()=>{i=await(async()=>{var t,i,c,o,n;const d=null===(t=e)||void 0===t||null===(i=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TENANT_CODE:"in",REACT_APP_API_BASE_URL:"https://online.kfc.co.in",REACT_APP_PWA_VERSION_STRING:"pwa-2502-0-3_39e1541f"}))||void 0===i?void 0:i.REACT_APP_TENANT_CODE,r=await Promise.resolve().then(a.bind(null,176));return null===r||void 0===r||null===(c=r.default)||void 0===c||null===(o=c[null===d||void 0===d||null===(n=d.toUpperCase)||void 0===n?void 0:n.call(d)])||void 0===o?void 0:o.MENU_PLP_CONSTANTS})()})()}).call(this,a(112))},998:function(e,t,a){"use strict";var i=a(3),c=a.n(i),o=a(121),n=a(2);t.a=e=>{const{handleClose:t,ProductListingModalForm:a,headerText:i,modalTitleId:d="",closeDataTestId:r=""}=e;return Object(n.jsx)(c.a.Fragment,{children:Object(n.jsx)(o.a,{"data-testid":"ProductListingModalPopup",role:"dialog",modalTitleId:d,show:!0,classNames:"product-listing-module-modal-sopac",showCloseBtn:!0,closeButtonHandler:t,modalTitle:i,autoFocus:!0,closeDataTestId:r,children:a})})}},999:function(e,t,a){"use strict";a.d(t,"b",(function(){return O})),a.d(t,"c",(function(){return p}));var i=a(3),c=a(76),o=a(5),n=a(25),d=a(54),r=a(940),s=a(922),l=a(190),u=a(0),m=a(2);const O=(e,t,a)=>{const{RECIPE:i,DEFAULT_REASON:c,MODGROUP_MAX_RADIOBUTTON:n}=l.a;return((e,t,a)=>e.every((e=>Object(o.hd)(e.additionalProperties,t)===a)))(e,c,i)||!p(t)||a===n},p=e=>{const{PEROPTIONMAX_KEY:t,PEROPTIONMIN_KEY:a,MAXDISTINCT_KEY:i}=l.a;let c=Object(o.me)(e);return[t,a,i].every((e=>Object.prototype.hasOwnProperty.call(c,e)))&&!(0===c[t]&&0===c[a]&&0===c[i])};t.a=e=>{let{tenantData:t,modifiers:a,modgrpData:l,isModal:b,isStoreClosed:j,catalog:v}=e;const[f,I]=Object(i.useState)(Object(o.Ud)(window.innerWidth)),{modgrpId:g,additionalProperties:y,max:h}=l,[S,N]=Object(i.useState)({}),{userOrderState:D}=Object(i.useContext)(c.a),{resetCustomization:E}=D;let x=Object(n.c)((e=>e.appStateReducer.userStatus));const C=Object(n.c)((e=>e.cartReducer)),{isItemAdded:T=!1}=Object(o.kd)(C),[P,A]=Object(i.useState)(),[_,M]=Object(i.useState)(),[R,w]=Object(i.useState)([]),[L,F]=Object(i.useState)([]),[U,k]=Object(i.useState)(!0),[B,z]=Object(i.useState)(0),{SINGLE:G}=s.a,{PDP_MODIFIER:W}=u.Oc;Object(i.useEffect)((()=>{N({}),w([]),F([]),k(!0)}),[E]),Object(i.useEffect)((()=>{b||(N({}),w([]),F([]),k(!0))}),[v,T]),Object(i.useEffect)((()=>{if(Object(o.db)(Object(o.Kd)(y),Object(o.kc)(a))){let e=O(a,y,h);M(e);let t=!e&&p(y);A(t)}}),[y,a]);const q=()=>{const e=Object(o.Ud)(window.innerWidth),t=e?W.PDP_MODF_IMAGE_VIEWPORT_WIDTH_MOBILE:W.PDP_MODF_IMAGE_VIEWPORT_WIDTH_DESKTOP,a=Math.round(t*window.innerWidth/u.eg);z(a),I(e)};Object(i.useEffect)((()=>{window.addEventListener(u.we,q)}),[f]),Object(i.useEffect)((()=>{q()}),[]);const{QUANTITY_ACTION:J}=d.a,K=function(e,t,i){let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{id:o}=e;if(t===G)a.forEach((e=>{e.id===o&&w([e.id])})),F([{...e,itemId:o,modgrpId:g}]);else if(t){let t=i.some((t=>{let{id:a}=t;return a===e.id}));if(!t){let t=[...i,{...e,itemId:o,modgrpId:g}],a=null===t||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.id));c&&w(a),F(t)}}else if(i.length){let e=i.filter((e=>{let{itemId:t}=e;return t!==o})),t=null===e||void 0===e?void 0:e.map((e=>null===e||void 0===e?void 0:e.id));w(t),F(e)}},H=(e,t,a,i,c)=>{var n;let d=null===S||void 0===S||null===(n=S[t])||void 0===n?void 0:n[e],r=null===S||void 0===S?void 0:S[t],s=null===S||void 0===S?void 0:S.totalQuantity;if(d){let n=a===J.Increase?r[e].quantity+1:Object(o.Tc)(a===J.Decrease,r[e].quantity-1,i),d=a===J.Increase?s+1:Object(o.Tc)(a===J.Decrease,s-1,s-r[e].quantity+i),l=((e,t,a,i)=>Object(o.fb)(e===t.Increase,e===t.Decrease)?a:i)(a,J,n,c);N({...S,totalQuantity:d,[t]:{...r,[e]:{...r[e],quantity:n,quantityDisplay:l}}})}else Object(o.Kd)(S[t])?N({...S,totalQuantity:s+i,[t]:{...r,[e]:{quantity:i,quantityDisplay:i}}}):N({totalQuantity:i,[t]:{[e]:{quantity:i,quantityDisplay:i}}})};return Object(o.j)([void 0!==_,void 0!==P,!!B])&&a.map(((e,a)=>{let i=Object(o.yc)(e.availability[0],null===t||void 0===t?void 0:t.currencyConversionFactor).toFixed(u.dg);return Object(m.jsx)(r.a,{tenantData:t,modgrpData:l,cardData:e,price:i,isMobile:f,localized:x.localized,currencySymbol:null===t||void 0===t?void 0:t.currencySymbol,saveCustomizedItemCount:H,savedCustomizedModifier:S,toRenderCheckBox:_,toRenderQuantityModifier:P,savedModifierHandler:K,updatedItems:R,savedModifiers:L,isModal:b,isStoreClosed:j,initialRender:U,setInitialRender:k,catalog:v,imageContainerSize:B})}))}}}]);