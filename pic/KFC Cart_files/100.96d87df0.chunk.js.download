(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[100],{1127:function(e,l,i){"use strict";var d=i(3),o=i(26),t=i(180),n=i(267),a=i(0),v=i(42),u=i(959);var r=()=>{const e=Object(u.j)();return{getCartAvailability:Object(d.useCallback)((()=>{e.mutate()}),[e])}},c=i(4),s=i(119),O=i(5),b=i(76),m=i(23),P=i(61),y=i(25);l.a=e=>{var l,i,u,p,j,A,E,f,C,h,S,T;const{checkoutDetails:g,updateCheckoutDetails:N}=e,{dispatch:k,tender:D,isPaymentTypeSelected:R}=g,w=Object(d.useRef)(g),{userOrderState:Y}=Object(d.useContext)(b.a),_=Object(O.Hb)(Y),I=Object(P.g)(),{getCartAvailability:x}=r(),M=(null===(l=Object(y.c)((e=>null===e||void 0===e?void 0:e.storesReducer)))||void 0===l||null===(i=l.storesWithStatus[0])||void 0===i||null===(u=i.summary)||void 0===u?void 0:u.deliveryPartner)||"";return Object(d.useEffect)((()=>{var e,l,i;let d={paymentPanelTitle:null===c.a||void 0===c.a?void 0:c.a.ADD_PAYMENT_METHOD_HEADER};switch(null===g||void 0===g?void 0:g.paymentProvider){case a.Sd.GLOBAL_PAYMENTS:d={enablePayOnArrival:!0,payOnArrivalAllowedTenders:null===g||void 0===g||null===(e=g.allowedTenders)||void 0===e?void 0:e.filter((e=>e===a.Ud.PAY_BY_CASH)),payNowAllowedTenders:null===g||void 0===g||null===(l=g.allowedTenders)||void 0===l?void 0:l.filter((e=>e!==a.Ud.PAY_BY_CASH)),paymentPanelTitle:null===c.a||void 0===c.a?void 0:c.a.PAYMENT_BY};break;case a.Sd.PAY_GATE:case null===a.Sd||void 0===a.Sd?void 0:a.Sd.JAPAN_PAYMENTS:case null===a.Sd||void 0===a.Sd?void 0:a.Sd.THAILAND_PAYMENTS:d={paymentPanelTitle:null===c.a||void 0===c.a?void 0:c.a.PAYMENT_BY};break;case a.Sd.ADYEN_PAYMENTS:d={paymentPanelTitle:null===m.a||void 0===m.a||null===(i=m.a.ADYEN_PAYMENT_TYPE)||void 0===i?void 0:i.PAYMENT_OPTIONS}}N(d)}),[]),Object(d.useEffect)((()=>{k&&(null===k||void 0===k||k(null===n.o||void 0===n.o?void 0:Object(n.o)()))}),[k]),Object(d.useEffect)((()=>{w.current=g}),[R,null===D||void 0===D?void 0:D.name,null===D||void 0===D?void 0:D.payload]),Object(d.useEffect)((()=>{Object(O.ce)()&&Object(o.q)(g,N),k&&k(Object(v.z)())}),[null===g||void 0===g?void 0:g.paymentEnabled]),Object(d.useEffect)((()=>{var e;(null===g||void 0===g||null===(e=g.tender)||void 0===e?void 0:e.name)&&Object(o.u)(g)}),[null===g||void 0===g||null===(p=g.tender)||void 0===p?void 0:p.name]),Object(d.useEffect)((()=>{var e;(null===g||void 0===g||null===(e=g.userParams)||void 0===e?void 0:e.loggedIn)&&Object(o.z)(g,N)}),[null===g||void 0===g||null===(j=g.userFullName)||void 0===j?void 0:j.value,null===g||void 0===g||null===(A=g.userEmail)||void 0===A?void 0:A.value,null===g||void 0===g||null===(E=g.userPhone)||void 0===E?void 0:E.value]),Object(d.useEffect)((()=>{var l;if(null!==g&&void 0!==g&&g.enablePayOnArrival&&null!==g&&void 0!==g&&g.enablePayByCashOption&&(null===e||void 0===e||null===(l=e.location)||void 0===l||!l.isRetryPaymentErrorEnabled)){const e=Object(o.j)(g,N);N({isClickPayOnArrival:e})}}),[null===g||void 0===g?void 0:g.enablePayOnArrival,null===g||void 0===g?void 0:g.userOption]),Object(d.useEffect)((()=>{null!==g&&void 0!==g&&g.enablePayOnArrival&&null!==g&&void 0!==g&&g.enablePayByCashOption&&(Object(o.i)(g,N),N({isClickAddPayment:null===g||void 0===g?void 0:g.isClickPayOnArrival,isPaymentTypeSelected:null===g||void 0===g?void 0:g.isClickPayOnArrival}))}),[null===g||void 0===g?void 0:g.isClickPayOnArrival]),Object(d.useEffect)((()=>{0!==(null===g||void 0===g?void 0:g.total)&&null!==g&&void 0!==g&&g.showGiftCardOrVoucher&&N({tender:{name:"",payload:{}},enableContinuePayment:!1,isClickContinuePayment:!0,isClickAddPayment:!1,isPaymentTypeSelected:!0})}),[null===g||void 0===g?void 0:g.total]),Object(d.useEffect)((()=>{0===(null===g||void 0===g?void 0:g.total)&&null!==g&&void 0!==g&&g.isOrderWithoutPayment&&null!==g&&void 0!==g&&g.showGiftCardOrVoucher&&N({enableContinuePayment:!1,isPaymentTypeSelected:!0,showPlaceOrderLoading:!1,isCateringSomeOneElseContactDetailsAreValid:!0,placeOrderButtonEnabled:!0,isClickContinuePayment:!1,tender:{name:a.Ud.WICODE,payload:{name:a.Ud.WICODE,amount:null===g||void 0===g?void 0:g.total},amount:null===g||void 0===g?void 0:g.total}})}),[null===g||void 0===g?void 0:g.isOrderWithoutPayment,null===g||void 0===g?void 0:g.showGiftCardOrVoucher,null===g||void 0===g?void 0:g.total]),Object(d.useEffect)((()=>{(null===g||void 0===g?void 0:g.isOrderWithoutPayment)&&(null===g||void 0===g?void 0:g.orderId)&&(null===g||void 0===g?void 0:g.isCreateOrderValidateCompleted)&&Object(O.Qe)(e)}),[null===g||void 0===g?void 0:g.isCreateOrderValidateCompleted]),Object(d.useEffect)((()=>{(null===g||void 0===g?void 0:g.isRenderFromRNA)&&Object(o.a)(g,N,!1)}),[null===g||void 0===g?void 0:g.isRenderFromRNA]),Object(d.useEffect)((()=>{var e;(null!==(e=g.userParams)&&void 0!==e&&e.loggedIn||null!==g&&void 0!==g&&g.isContactDetailValid)&&N({paymentEnabled:Object(t.b)(g)})}),[null===g||void 0===g||null===(f=g.userParams)||void 0===f?void 0:f.loggedIn,null===g||void 0===g?void 0:g.isContactDetailValid,null===g||void 0===g||null===(C=g.collectionPoint)||void 0===C?void 0:C.name,null===g||void 0===g||null===(h=g.collectionPoint)||void 0===h?void 0:h.carNumber]),Object(d.useEffect)((()=>{var l,i;if(null!==g&&void 0!==g&&null!==(l=g.userParams)&&void 0!==l&&l.loggedIn)switch(null===e||void 0===e||null===(i=e.checkoutDetails)||void 0===i?void 0:i.paymentProvider){case a.Sd.BRAIN_TREE:case a.Sd.ADYEN_PAYMENTS:return Object(o.y)(g,N,!1);case a.Sd.JAPAN_PAYMENTS:return(null===g||void 0===g?void 0:g.total)>0&&Object(s.d)(e)}}),[null===g||void 0===g?void 0:g.paymentProvider,null===g||void 0===g||null===(S=g.userParams)||void 0===S?void 0:S.loggedIn]),Object(d.useEffect)((()=>{var e;(null!==g&&void 0!==g&&g.timerExpired||null!==g&&void 0!==g&&g.maxAttemptReached||null!==g&&void 0!==g&&g.refreshed||null!==g&&void 0!==g&&g.redirectBack)&&((null===g||void 0===g||null===(e=g.userParams)||void 0===e?void 0:e.loggedIn)&&(null===g||void 0===g?void 0:g.lastUsedPaymentMethod)&&N({isClickAddPayment:!0}))}),[null===g||void 0===g?void 0:g.timerExpired,null===g||void 0===g||null===(T=g.userParams)||void 0===T?void 0:T.loggedIn,null===g||void 0===g?void 0:g.maxAttemptReached,null===g||void 0===g?void 0:g.refreshed,null===g||void 0===g?void 0:g.redirectBack]),Object(t.d)({...e,checkoutDetailsUseRef:w,dispositionNew:_,getCartAvailability:x,history:I,deliveryPartner:M})}},1298:function(e,l,i){"use strict";i.r(l);var d=i(3),o=i.n(d),t=i(25),n=i(76),a=i(1127),v=i(2);const u=e=>{const{paymentDetails:l,updatePaymentDetails:i}=e;return Object(v.jsx)(v.Fragment,{children:(null===l||void 0===l?void 0:l.tenantId)&&(null===l||void 0===l?void 0:l.basketId)&&(null===l||void 0===l?void 0:l.customerId)&&(null===l||void 0===l?void 0:l.allowedTenders)&&Object(v.jsx)(a.a,{...e,checkoutDetails:l,updateCheckoutDetails:i})})};var r=o.a.memo(u),c=i(87),s=i(267),O=i(5);var b=e=>{const l=Object(t.b)(),[i,o]=Object(d.useState)(c.c),{userOrderStateDispatch:a}=Object(d.useContext)(n.a),u=Object(d.useCallback)((e=>{o&&o((l=>({...l,...e})))}),[]),{paymentsContentReducer:b,tenantReducer:m}=Object(t.c)((e=>e));return Object(d.useEffect)((()=>{Object(c.F)(b,u)}),[null===b||void 0===b?void 0:b.tendersContent]),Object(d.useEffect)((()=>{var e,i,d,o,t,n,v;const r=new URLSearchParams(window.location.search),c=r.get("token"),s=r.get("gpData"),b=JSON.parse(decodeURIComponent(s)),P={...b,RNAtoken:c,nameOnCardRegex:new RegExp(null===b||void 0===b?void 0:b.nameOnCardRegex),postalCodeRegex:null===m||void 0===m||null===(e=m.componentOptions)||void 0===e||null===(i=e.web)||void 0===i||null===(d=i.global)||void 0===d?void 0:d.postalCodeRegex,paymentTypeSelectedForLastUsedPayment:null===m||void 0===m||null===(o=m.componentOptions)||void 0===o||null===(t=o.checkout)||void 0===t?void 0:t.paymentTypeSelectedForLastUsedPayment};u({dispatch:l,userOrderStateDispatch:a,isRenderFromRNA:null===O.zd||void 0===O.zd?void 0:Object(O.zd)(null===(n=window)||void 0===n?void 0:n.location),paymentEnabled:null===O.zd||void 0===O.zd?void 0:Object(O.zd)(null===(v=window)||void 0===v?void 0:v.location),...P})}),[l]),Object(d.useEffect)((()=>{(null===i||void 0===i?void 0:i.tenantId)&&l(Object(s.o)())}),[null===i||void 0===i?void 0:i.tenantId]),Object(v.jsx)(r,{...e,paymentDetails:i,updatePaymentDetails:u})};l.default=b}}]);