(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[6],{1056:function(e,t,d){"use strict";d.d(t,"a",(function(){return E})),d.d(t,"b",(function(){return f}));var o=d(4),l=d(0),a=d(218);const{AUTO_SUGGESTIONS_DELIVERY_FILTER:s}=a.b,{DELIVERY:r}=l.Jb||{},{DELIVERY_PLACEHOLDER:i,SELECT_KFC_TITLE:n,DELIVERY_ADDRESS_TITLE:c,SWITCH_TO_TAKEAWAY_TEXT:u,RETRY_BTN_TEXT:v,DELIVERY_UNAVAILABLE_ERROR:O,STORE_CLOSE_ERROR_DELIVERY:p,SAVED_ADDRESS:b,DELIVER_TO_YOU:h,ORDER_MODE:S,SELECT_STORE_TEXT:j,START_ORDER:m}=o.a,E="FORM",f={["".concat(r,"_").concat(E)]:{placeholder:i,serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},orderModeScreenErrorText:p,modalHeaderTitle:c,kfcStoresCountText:b,scheduleOrderScreenTitle:S,shouldPopulateFirstSuggestion:!1,storeOpenBtnText:j,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:m,filteredTypes:s},["".concat(r,"_").concat("STORES")]:{serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},modalHeaderTitle:n,orderModeScreenErrorText:p,placeholder:i,kfcStoresCountText:h,scheduleOrderScreenTitle:S,shouldPopulateFirstSuggestion:!0,storeOpenBtnText:j,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:m,filteredTypes:s},["".concat(r,"_").concat("SAVED")]:{placeholder:i,serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},orderModeScreenErrorText:p,modalHeaderTitle:c,kfcStoresCountText:b,scheduleOrderScreenTitle:S,shouldPopulateFirstSuggestion:!1,storeOpenBtnText:j,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:m,filteredTypes:s}}},825:function(e,t,d){"use strict";d.r(t),d.d(t,"addressTitle",(function(){return ue})),d.d(t,"DeliveryAddressSearchFormModule",(function(){return ve}));var o=d(3),l=d.n(o),a=d(25),s=d(218),r=d(0),i=d(76),n=d(14),c=d(6),u=d(269),v=d(1056),O=d(63),p=d(57),b=d(5),h=d(339),S=d(331);const j=e=>{let{localizationData:t={},address:d={}}=e;const{chome:o="",cityTown:l="",postalCode:a="",prefecture:s=""}=d;return{chome:null===o||void 0===o?void 0:o.replace(/\s+/g,""),cityTown:l,localizationData:t,postalCode:null===a||void 0===a?void 0:a.replace("-",""),prefecture:null===s||void 0===s?void 0:s.replace(/\s+/g,"")}},m=e=>{let{chome:t="",cityTown:d="",localizationData:o={},prefecture:l=""}=e;const{[l]:{[d]:a}={}}=o;return(Object(b.af)(a)||{})[t]},E=e=>{let{chome:t="",localizationData:d={},postalCode:o=""}=e;const{[o]:l={}}=d;return Object(b.af)(l)[t]};var f=d(17),T=d(216),D=d(267),y=d(18),g=d.n(y),x=d(55),N=d(4),C=d(2);const _=e=>{const{loggedIn:t=!1,formContent:d={},storeSelection:o}=e,{signInLink:l}=o,{memberText:a="",singInLink:s={}}=d;return Object(C.jsx)("div",{className:"login-section",children:l&&Object(C.jsx)("span",{className:"delivery-member-signin",children:!t&&Object(S.g)(a,S.h,s)})})},I=l.a.memo(_);var A=d(980);const R=e=>{const{defaultSelectedTabIndex:t,onTabSelection:d,tabsList:l}=e,[a,s]=Object(o.useState)(t);return Object(C.jsx)("div",{className:"toggle-tabs",children:l.map(((e,t)=>Object(C.jsx)("div",{className:"toggle-tabs-container",children:Object(C.jsx)("button",{className:"toggle-tabs-button ".concat(t===a?"selected":""),"aria-pressed":t===a,onClick:()=>(e=>{e!==a&&(s(e),d(e))})(t),children:Object(C.jsx)("span",{className:"toggle-tabs-button-text",children:Object(c.translateWithI18Next)(e.title)})})},e.id)))})};R.defaultProps={defaultSelectedTabIndex:0,onTabSelection:()=>null,tabsList:[]};var w=R,L=d(15);const{SearchIconGrey:P,SingleArrow:k,WhiteCloseButton:F}=L.a,M=e=>{const{cssClass:t,dropdownId:d,dropdownList:l,dropdownTitleText:a,enableSearch:r,onDropdownSelection:i,selectedText:n}=e,[u,v]=Object(o.useState)(l),[O,p]=Object(o.useState)(!1),[b,h]=Object(o.useState)(!1),[S,j]=Object(o.useState)(""),m=Object(o.useRef)(),E=Object(o.useCallback)((e=>{e&&e.focus()}),[]);Object(o.useEffect)((()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const f=e=>{var t;null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation();const d=(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"";j(d),(e=>{const t=e.toLowerCase();let d=l;t&&(d=null===l||void 0===l?void 0:l.filter((e=>-1!==e.toLowerCase().indexOf(t)))),v(d)})(d)},T=e=>{null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),j(""),v(l)},D=e=>{h(e)},y=()=>{p(!O),T()};return Object(C.jsxs)("div",{className:"searchable-dropdown ".concat(t),ref:m,children:[a&&Object(C.jsx)("div",{className:"searchable-dropdown-title","aria-level":"1",role:"heading",children:n!==a||O?a:""}),Object(C.jsxs)("div",{id:d,className:"searchable-dropdown-value","data-testid":"searchable-dropdown-value-id",role:"listbox",tabIndex:"0",onClick:y,children:[Object(C.jsx)("div",{className:"selected-value",children:n===a&&O?"":n}),Object(C.jsx)("img",{src:k,alt:" ",className:"down-arrow-img ".concat(O?"dropdown-open":"")})]}),O&&Object(C.jsxs)("div",{className:"searchable-dropdown-options-container",children:[r&&Object(C.jsx)("div",{className:"searchable-dropdown-form-container",children:Object(C.jsxs)("form",{className:"searchable-dropdown-form",children:[Object(C.jsx)("img",{src:P,alt:" ",className:"search-icon"}),Object(C.jsx)("input",{className:"searchable-dropdown-input","data-testid":"searchable-dropdown-search-input",type:"text",ref:E,placeholder:Object(c.translateWithI18Next)(s.b.SEARCH),value:S,onChange:e=>f(e),onKeyDown:e=>(e=>{var t;"Enter"===e.key||13===e.keyCode?(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||null===(t=e.target)||void 0===t||t.blur()):"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),y())})(e),onFocus:()=>D(!0),onBlur:()=>D(!1)}),(b||S)&&Object(C.jsx)("button",{className:"clear-text","data-testid":"searchable-dropdown-clear-text",onClick:e=>T(e),children:Object(C.jsx)("img",{src:F,alt:" ",className:"search-icon"})})]})}),Object(C.jsx)("ul",{children:null===u||void 0===u?void 0:u.map((e=>Object(C.jsx)("li",{tabIndex:"0",onClick:t=>((e,t)=>{null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),p(!O),i(t),T()})(t,e),className:"searchable-dropdown-option","data-testid":"searchable-dropdown-option-id",children:e},e)))})]})]})};M.defaultProps={cssClass:"",dropdownId:"",dropdownList:[],dropdownTitleText:"",enableSearch:!1,onDropdownSelection:()=>null,selectedText:""};var B=M,H=d(996);const W=e=>{const{defaultPostalValue:t,verifyPostalCode:d}=e,[l,a]=Object(o.useState)(t),r=Object(o.useRef)(null);Object(o.useEffect)((()=>{t&&a(t)}),[t]),Object(o.useEffect)((()=>{var e;null===r||void 0===r||null===(e=r.current)||void 0===e||e.focus()}),[]);return Object(C.jsx)("div",{className:"delivery-address-section search-store-postal-content",children:Object(C.jsx)(H.a,{maxLength:8,onClearTextHandler:()=>{d(!1,""),a("")},placeholder:Object(c.translateWithI18Next)(s.b.SEARCH),address:l,inputOnChange:e=>{let t=e.replace(/[^\d ]+/g,"");t=t.length>3?t.replace(/(.{3})/,"$1-"):t;const o=t.length>=8;a(t),d(o,t)},inputRef:r})})};W.defaultProps={defaultPostalValue:"",verifyPostalCode:()=>null};var U=W,V=d(103),Y=d(43),z=d(36),G=d(997),J=d(69),K=d(110);const{DISPOSITION_METHOD:X}=n.a,{CONFIRM_LOCATION:q,DELIVERY_SEARCH_TYPE:$,NO_STORE_WITH_DELIVERY:Q,OTHER_DELIVERY_SERVICES:Z,SEARCH_DELIVERY_LOCATION:ee,SPECIAL_NOTES:te,STORES_VARY_MESSAGE:de,SWITCH_TO_TAKE_AWAY:oe,POSTAL_CODES:le,PREFECTURES:ae}=s.b;var se=e=>{var t;const{changeFlow:d,deliveryLocalizationData:l,formContent:n,getStoreData:u,deliverySearchType:v,onDeliveryTypeChanged:y,isDeliveryLocalizationLoading:_,storesStatusError:R,saveAddressData:L,selectedAddress:P,setSelectedAddress:k,prefectureAddressScreen:F,addressName:M,isPrimaryAddress:H,closeModal:W,modalType:te,address:se,isAccount:re,addressNameExist:ie=!1,updateSetOrderDetails:ne,isAddressFromOrderProcessing:ce}=e,ue=F?r.a:"",ve=Object(a.c)((e=>e.appStateReducer.userStatus)),{postalCodePrefix:Oe,tenantId:pe="",scheduleOrderDateFormat:be,fieldAddressMaxLengthFlag:he}=Object(a.c)((e=>e.tenantReducer||{})),{headerData:{footer:Se={}}={}}=Object(a.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response)||{}})),je=Object(b.Ub)(Se),{loggedIn:me}=Object(b.kd)(ve),{userOrderState:Ee,userOrderStateDispatch:fe}=Object(o.useContext)(i.a),Te=Object(a.b)(),[De,ye]=Object(o.useState)(!1),[ge,xe]=Object(o.useState)(0),[Ne,Ce]=Object(o.useState)(!1),[_e,Ie]=Object(o.useState)(!1),[Ae,Re]=Object(o.useState)(0),[we,Le]=Object(o.useState)(P),Pe=Object(S.c)(),ke=null===v||void 0===v?void 0:v.id,Fe=null!==se&&void 0!==se&&se.pinCode?null===s.b||void 0===s.b?void 0:s.b.POSTAL_CODE:null===s.b||void 0===s.b?void 0:s.b.ADDRESS,Me=se?Fe:null===s.b||void 0===s.b?void 0:s.b.POSTAL_CODE,Be=Math.max(0,Pe.findIndex((e=>e.id===Me))),[He,We]=Object(o.useState)(!1),Ue=Object(S.d)(),[Ve,Ye]=Object(o.useState)(!0),[ze,Ge]=Object(o.useState)({}),[Je,Ke]=Object(o.useState)(!1),Xe=Object(a.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.deliveryAggregatorReducer)||void 0===t?void 0:t.isLoading)||!1})),qe=Object(a.c)((e=>{var t,d;return(null===e||void 0===e||null===(t=e.deliveryAggregatorReducer)||void 0===t||null===(d=t.response)||void 0===d?void 0:d.deliveryAggregators)||{}})),{savedAddresses:$e}=Object(a.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),Qe=!(null===$e||void 0===$e||!$e.length||!me),Ze=Object(a.c)((e=>{var t,d;return null===e||void 0===e||null===(t=e.pwaStoragsReducer)||void 0===t||null===(d=t.pwaStorageState)||void 0===d?void 0:d.selectedFavouriteStoreAddress})),et={text:Q,cta:{label:oe}},tt={header:Z,notice:de},dt=Object(K.a)();Object(o.useEffect)((()=>{var e;(Ae===(null===v||void 0===v||null===(e=v.fieldOrder)||void 0===e?void 0:e.length)||te)&&Ie(!0)}),[v,_e,Ae,te]),Object(o.useEffect)((()=>{g()(qe)&&!Xe&&Te(Object(D.d)())}),[qe,Te,Xe]),Object(o.useEffect)((()=>{var e;const t=d?JSON.parse(localStorage.getItem(r.gd.SELECTED_ADDRESS)):{},o=(null===Ee||void 0===Ee||null===(e=Ee.scheduleOrderData)||void 0===e?void 0:e.selectedAddress)||t;var l,a;o&&Object.keys(o).length>0&&(k(o),Re(null===v||void 0===v||null===(l=v.fieldOrder)||void 0===l?void 0:l.length),xe(null===v||void 0===v||null===(a=v.fieldOrder)||void 0===a?void 0:a.length))}),[we]),Object(o.useEffect)((()=>{ke===f.d.address&&We(!(!(Ve&&P.prefecture&&P.cityTown&&P.chome&&P.streetDetailAddress)||ie)),ke===f.d.postalCode&&We(!(!(Ve&&P.postalCode&&P.chome&&P.streetDetailAddress)||ie))}),[ke,Ve,P.postalCode,P.prefecture,P.cityTown,P.chome,P.streetDetailAddress,We,ie]);Object(o.useEffect)((()=>{const e=ke===f.d.postalCode?le:ae,t=l[e];if(!_&&!g()(t)&&Object.keys(t).length>0){var d;const e=ke===f.d.postalCode?f.d.postalCode:f.d.prefecture,l=null===Ee||void 0===Ee||null===(d=Ee.scheduleOrderData)||void 0===d?void 0:d.storeId,s={[e]:t};let r={};if(null!==P&&void 0!==P&&P[e]&&(l||te)){r={...s};const e=(null===v||void 0===v?void 0:v.fieldOrder)||[];for(let t=1;t<e.length+1;t++){var o,a;const d=(null===(o=e[t])||void 0===o?void 0:o.id)||f.d.selectedStore,l=null===(a=e[t-1])||void 0===a?void 0:a.id,s=P[l].replace("-","");l&&s&&r[l]&&(r[d]=r[l][s])}}Ge({...r,...ze,...s})}te&&(dt(Object(J.d)({key:null===r.gd||void 0===r.gd?void 0:r.gd.SELECTED_ADDRESS,value:P})),Le(P))}),[l,te]);const ot=e=>{let{localizationData:t={},selectedAddress:d={}}=e;const{postalCode:o}=d,l=Boolean(o),a=l?E:m;return Object(h.a)(a,j)({address:d,localizationData:t[l?le:ae]})},lt=Object(o.useCallback)((async()=>{dt(Object(J.d)({key:null===r.gd||void 0===r.gd?void 0:r.gd.SELECTED_ADDRESS,value:P}));const e=ze[f.d.selectedStore]||ot({localizationData:l,selectedAddress:P});if(F&&re||ce){ce&&ne({savedAddressSucess:!0});const t=((e,t)=>{const{CITY_CODE:d,CHOME_CODE:o}=s.b,l=M||Object(S.b)($e);return{postalCode:null===e||void 0===e?void 0:e.postalCode,addressName:l,isPrimary:H,addressLines:[null===e||void 0===e?void 0:e.prefecture,null===e||void 0===e?void 0:e.cityTown,null===e||void 0===e?void 0:e.chome,null===e||void 0===e?void 0:e.streetDetailAddress,null===e||void 0===e?void 0:e.apartmentName,null===e||void 0===e?void 0:e.roomNumber,null===e||void 0===e?void 0:e.companyName,null===e||void 0===e?void 0:e.specialNote],customProperties:[{key:d,value:null===t||void 0===t?void 0:t[2].toString()},{key:o,value:null===t||void 0===t?void 0:t[1].toString()}]}})(P,e),{customerId:d,phoneNumber:o}=x.a.getInstance(),l=te?{addressId:null===se||void 0===se?void 0:se.id,...t}:t;Te(Object(p.a)({customerId:d,phoneNumber:o,tenantId:pe,data:l}));const a=te?Object(c.translateWithI18Next)(N.a.ADDRESS_UPDATED):Object(c.translateWithI18Next)(N.a.SAVED_DELIVERY_ADDRESS);Object(b.pf)(a,"","favorites-added-toast"),ne&&ne({isOpenSaveDeliveryAddressModal:!1}),!ne&&W()}else{let t="";ke===f.d.postalCode&&(t+="".concat(Oe).concat(null===P||void 0===P?void 0:P.postalCode)),t+="".concat(null===P||void 0===P?void 0:P.prefecture).concat(null===P||void 0===P?void 0:P.cityTown),t+="".concat(null===P||void 0===P?void 0:P.chome).concat(null===P||void 0===P?void 0:P.streetDetailAddress);const d="".concat(null===P||void 0===P?void 0:P.apartmentName," ").concat(null===P||void 0===P?void 0:P.roomNumber," ").concat(null===P||void 0===P?void 0:P.companyName);Object(T.e)(t);const o=ze[f.d.selectedStore]||e;o?(L(t,d,o),u(o)):Ye(!1)}}),[ze,P,H,M]);Object(o.useEffect)((()=>{De&&lt()}),[lt,De]),Object(o.useEffect)((()=>{Ye(!R)}),[R]),Object(o.useEffect)((()=>{if(te){var e,t,d,o,l,a,s,r;const i=(null===se||void 0===se?void 0:se.pinCode)||"",n=(null===se||void 0===se||null===(e=se.addressLines)||void 0===e?void 0:e[0])||"",c=(null===se||void 0===se||null===(t=se.addressLines)||void 0===t?void 0:t[1])||"",u=(null===se||void 0===se||null===(d=se.addressLines)||void 0===d?void 0:d[2])||"",v=(null===se||void 0===se||null===(o=se.addressLines)||void 0===o?void 0:o[3])||"",O=(null===se||void 0===se||null===(l=se.addressLines)||void 0===l?void 0:l[4])||"",p=(null===se||void 0===se||null===(a=se.addressLines)||void 0===a?void 0:a[5])||"",b=(null===se||void 0===se||null===(s=se.addressLines)||void 0===s?void 0:s[6])||"",h=(null===se||void 0===se||null===(r=se.addressLines)||void 0===r?void 0:r[7])||"";k({...P,apartmentName:O,chome:u,cityTown:c,companyName:b,postalCode:i,prefecture:n,roomNumber:p,streetDetailAddress:v,specialNote:h})}}),[te]);const at=(e,t,d,o)=>{const a=(e=>e<=1&&ke===f.d.address?Boolean(P[f.d.postalCode]):e<=1&&ke===f.d.postalCode&&Boolean(P[f.d.prefecture]))(d)?{...S.f}:{...P};if(a[t]=e,a[$]=ke,Ke(!1),Re(d),xe(d),d<v.fieldOrder.length)for(let l=d;l<v.fieldOrder.length;l++){a[v.fieldOrder[l].id]=""}if(Ye(!0),e){var s,r;const o=(null===(s=v.fieldOrder[d])||void 0===s?void 0:s.id)||f.d.selectedStore,i=e.replace("-",""),n=ke===f.d.postalCode?le:ae,c=l[n],u=Object.keys(ze).length?null===ze||void 0===ze||null===(r=ze[t])||void 0===r?void 0:r[i]:null===c||void 0===c?void 0:c[i];Ge({...ze,[o]:u}),d===v.fieldOrder.length&&ke===f.d.postalCode&&u.length>4&&(a[f.d.prefecture]=u[3]||P.prefecture,a[f.d.cityTown]=u[4]||P.cityTown),u||Ye(!1)}!o&&k({...P,...a})},st=()=>Object(C.jsx)("div",{className:"text-field-container",children:Ue.map((function(e){return Object(C.jsx)(V.a,{className:"address-text-field",labelClassName:"text-field-title",containerClassName:"text-field-content",name:e.id,placeholder:Object(c.translateWithI18Next)(e.title)||e.title,value:P[e.id],onChange:t=>((e,t)=>{const d=e.target.value,o={...P};o[t]=d,k({...P,...o})})(t,e.id),maxLength:he?e.maxLegth:255},e.id)}))}),rt=(e,t)=>{const d=e;Ce(d),d?at(t,f.d.postalCode,1):at("",f.d.chome,0)},it=Object(o.useCallback)((e=>{null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]);return Object(C.jsxs)("div",{className:"delivery-address-form delivery-module-form","data-testid":"delivery-container",children:[Object(C.jsxs)("div",{className:"delivery-address-form-header",children:[Object(C.jsx)(I,{loggedIn:me,formContent:n,storeSelection:{signInLink:!0,useMyLocation:!1}}),Object(C.jsx)("p",{className:"delivery-address-form-search-text",children:Object(c.translateWithI18Next)(ee)||ee}),Object(C.jsx)(w,{onTabSelection:e=>{const t=Pe[e],d=t.id===P.deliverySearchType;y(t),Re(0),Ce(Boolean(P[f.d.postalCode])),Ie(!1),Ye(!0),Ke(!d),d&&P[t.fieldOrder[0].id]&&Re(ge)},tabsList:Pe,defaultSelectedTabIndex:Be})]}),ke===f.d.address?(()=>{const e=Ae+(_e?2:0);return Object(C.jsxs)("div",{className:"address-search-form",children:[v.fieldOrder.map((function(t,d){if(d<=e){var o;const e=null===(o=v.fieldOrder[d])||void 0===o?void 0:o.id,l=ze[e];if(!l)return null;const a=Object.keys(l),s=!Je&&(null===P||void 0===P?void 0:P[t.id]);return Object(C.jsx)(B,{dropdownList:a,dropdownTitleText:Object(c.translateWithI18Next)(t.title)||t.title,enableSearch:!0,onDropdownSelection:e=>at(e,t.id,d+1),selectedText:s?null===P||void 0===P?void 0:P[t.id]:Object(c.translateWithI18Next)(t.title)},t.id)}return null})),_e&&st()]})})():(()=>{const e=Object.keys(ze[f.d.chome]||[]).sort(),t=e.length>0;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(U,{defaultPostalValue:null===P||void 0===P?void 0:P[f.d.postalCode],verifyPostalCode:rt}),t&&(Ne||_e)&&Object(C.jsx)("div",{className:"address-search-form",children:Object(C.jsx)(B,{dropdownList:e,dropdownTitleText:Object(c.translateWithI18Next)(v.fieldOrder[1].title)||v.fieldOrder[1].title,enableSearch:!0,onDropdownSelection:e=>at(e,v.fieldOrder[1].id,2),selectedText:(null===P||void 0===P?void 0:P[v.fieldOrder[1].id])||Object(c.translateWithI18Next)(v.fieldOrder[1].title)},v.fieldOrder[1].id)}),t&&_e&&st()]})})(),Object(C.jsx)(z.c,{className:"delivery-address-form-confirm-cta ".concat(He?"":"disabled"),disabled:!He,onClick:lt,variant:"secondary","data-testid":"delivery-address-form-confirm-cta",children:Object(C.jsx)("span",{children:Object(c.translateWithI18Next)(q)||q})}),Ve?"":Object(C.jsxs)("div",{className:"undeliverable-address",ref:it,children:[Object(C.jsx)(A.a,{show:!0,comingFrom:ue,errorObj:{showError:!0,errMsg:Object(c.translateWithI18Next)(et.text),errDesc:null,firstBtnText:Object(c.translateWithI18Next)(et.cta.label),firstBtnCTA:()=>{fe({type:X,value:{dispositionType:r.Jb.PICKUP}}),Te(Object(O.u)())}}}),!g()(qe)&&Object(C.jsxs)("div",{className:"third-party-delivery-services",children:[Object(C.jsx)("p",{className:"delivery-address-form-search-text",children:Object(c.translateWithI18Next)(tt.header)}),Object(C.jsx)("div",{className:"third-party-delivery-services__list",children:null===qe||void 0===qe||null===(t=qe.items)||void 0===t?void 0:t.map((e=>{var t,d,o,l,a;const s=null===e||void 0===e?void 0:e.fields;return Object(C.jsxs)("a",{href:null===s||void 0===s?void 0:s.link,target:"_blank",rel:"noreferrer",className:"third-party-delivery-services__service",children:[Object(C.jsx)("span",{className:"third-party-delivery-services__image-container",children:Object(C.jsx)(Y.a,{srcFile:"".concat(f.d.https).concat(null===s||void 0===s||null===(t=s.logo)||void 0===t||null===(d=t.fields)||void 0===d||null===(o=d.file)||void 0===o?void 0:o.url),alt:null===s||void 0===s||null===(l=s.logo)||void 0===l||null===(a=l.fields)||void 0===a?void 0:a.title,className:"third-party-delivery-services__images"})}),Object(C.jsx)("span",{className:"third-party-delivery-services__label",children:null===s||void 0===s?void 0:s.name}),Object(C.jsx)(Y.a,{srcFile:je,alt:"",className:"third-party-delivery-services__image"})]},null===s||void 0===s?void 0:s.name)}))}),Object(C.jsx)("p",{className:"third-party-delivery-services__notice",children:Object(c.translateWithI18Next)(tt.notice)})]})]}),Qe&&!F&&Object(C.jsxs)("div",{className:"delivery-saved-addresses",children:[Object(C.jsx)("div",{className:"placesautocomplete-border"}),Object(C.jsx)(G.a,{show:Qe,savedAddresses:$e,handleSelectAddress:e=>{const t=e||Ze;if(t){var d,o,l,a,s,r,i,n;const e=(null===t||void 0===t?void 0:t.name)||"",c=(null===t||void 0===t?void 0:t.pinCode)||"",u=(null===t||void 0===t||null===(d=t.addressLines)||void 0===d?void 0:d[0])||"",v=(null===t||void 0===t||null===(o=t.addressLines)||void 0===o?void 0:o[1])||"",O=(null===t||void 0===t||null===(l=t.addressLines)||void 0===l?void 0:l[2])||"",p=(null===t||void 0===t||null===(a=t.addressLines)||void 0===a?void 0:a[3])||"",b=(null===t||void 0===t||null===(s=t.addressLines)||void 0===s?void 0:s[4])||"",h=(null===t||void 0===t||null===(r=t.addressLines)||void 0===r?void 0:r[5])||"",S=(null===t||void 0===t||null===(i=t.addressLines)||void 0===i?void 0:i[6])||"",j=(null===t||void 0===t||null===(n=t.addressLines)||void 0===n?void 0:n[7])||"";k({...P,addressName:e,apartmentName:b,chome:O,cityTown:v,companyName:S,postalCode:c,prefecture:u,roomNumber:h,streetDetailAddress:p,specialNote:j});const m=ot({localizationData:ze,selectedAddress:P});Ge({...ze,[f.d.selectedStore]:m}),ye(!0)}},shouldMaintainAddressObject:!0,scheduleOrderDateFormat:be})]})]})},re=d(121);const ie=e=>{const{handleClose:t,handleGoBack:d,orderModeTypeItem:o,headerText:a,modalTitleId:s="",className:r,backDataTestId:i}=e;return Object(C.jsx)(l.a.Fragment,{children:Object(C.jsx)(re.a,{"data-testid":"deliveryAddressSearchFormModal",id:"deliveryAddressSearchForm",role:"dialog",modalTitleId:s,show:!0,classNames:"".concat(r," extra-small-modal"),showCloseBtn:!0,showBackBtn:!0,closeButtonHandler:t,backButtonHandler:d,modalTitle:a,autoFocus:!0,backDataTestId:i,children:o})})};var ne=d(154),ce=d(46);const ue=(e,t)=>e?Object(c.translateWithI18Next)(null===N.a||void 0===N.a?void 0:N.a.ADD_NEW_ADDRESS):Object(c.translateWithI18Next)(t),ve=e=>{var t;const{contentData:d={},deliverySearchType:O,setDeliverySearchType:p,prefectureAddressScreen:h,closeModal:j=(()=>{}),address:m,modalType:E,updateSetOrderDetails:T,isAddressFromOrderProcessing:y}=e,{CHANGE_SCHEDULE_MODE:g,CURRENT_STORE_INFO:x,DISPOSITION_DATA:_,DISPOSITION_METHOD:I,FAV_STORE_NOT_IN_RADIUS:A,FROM_REORDER_MODAL_OPEN:R,REORDER_MODAL_OPEN:w,REORDER_STORE_CHANGED:P,SCHEDULE_ORDER_DATA:k,SEARCH_ORDER_DATA:F,SET_FIND_A_KFC_VIEW:M,SET_ORDER_NOW:B,SET_REDIRECTION_PATH:H,SET_SCHEDULE_ORDER:W,SCHEDULE_ORDER_CLICKED:U,SHOW_SCHEDULE_DISPOSITION:Y}=n.a,{NAME_EXIST_ERROR:z}=ne.b,{CONFIG_SEARCH_SCREEN:G,CURRENT_STORE_INFO_STORAGE:X,DISPOSITION_TYPE:q,RENDER_COMP:$,SET_CART_CLEAR:Q,SELECTED_ADDRESS:Z}=r.gd,{POSTAL_CODE_CONTENTFUL:ee,CHOMES_CONTENTFUL:te,DROPOFF_ADDRESS:de}=s.b,{ENABLE_ADDRESS_LOCALISATION:oe,SHOW_MAP_VIEW_BUTTON:le}=ce.a,ae=Object(a.b)(),{userOrderState:re,userOrderStateDispatch:ve}=Object(o.useContext)(i.a),{dispositionStateData:Oe,searchStoreData:pe,scheduleOrderData:be}=re,{changeFlow:he=!1}=be||{},{dispositionType:Se=localStorage.getItem(q)}=Oe||"",{componentOptions:je,tenantId:me,isUberServiceableEnabled:Ee}=Object(a.c)((e=>e.tenantReducer||{})),{savedAddresses:fe}=Object(a.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),Te=null===je||void 0===je||null===(t=je.web)||void 0===t?void 0:t.dispositionConfig,{searchStoreModalContent:De={}}=d,{formContent:ye={}}=De,[ge,xe]=Object(o.useState)(!1),{configSearchScreen:Ne=localStorage.getItem(G)}=pe,Ce="".concat(null===Se||void 0===Se?void 0:Se.toUpperCase(),"_").concat(Ne),_e=Object(b.Jd)(null===re||void 0===re?void 0:re.dispositionNew)?JSON.parse(localStorage.getItem(r.gd.DISPOSITION_NEW)):null===re||void 0===re?void 0:re.dispositionNew,[Ie,Ae]=l.a.useState(null===m||void 0===m?void 0:m.name),[Re,we]=l.a.useState(!1),[Le,Pe]=Object(o.useState)(!1),{modalHeaderTitle:ke,shouldShowDisposition:Fe,shouldShowSearchStore:Me}={...null===v.b||void 0===v.b?void 0:v.b[Ce],...null===Te||void 0===Te?void 0:Te[Ce]},Be=ke,{storesWithStatus:He=[],deliveryLocalization:We=null,isDeliveryLocalizationLoading:Ue=!0,isStoreStatusLoading:Ve=!1,storesSatusError:Ye=!1}=Object(a.c)((e=>e.storesReducer||{})),[ze,Ge]=Object(o.useState)(S.f),Je=Object(K.a)(),Ke=Object(o.useCallback)((e=>{var t;Ee&&Object(S.e)(null===e||void 0===e||null===(t=e.summary)||void 0===t?void 0:t.deliveryPartner)?(ve({type:k,value:{showScheduleOrderCatering:!1,store:e}}),ve({type:F,value:{showSearchStore:!0,configSearchScreen:v.a}}),ve({type:M,value:{findAKFC:!1}}),ve({type:Y,value:{showSheduleDisposition:!1}}),ve({type:x,value:e}),ve({type:g,value:{changeScheduleModeFlag:!1}}),ve({type:U,value:{scheduleModeClicked:!1}}),ve({type:B,value:{showOrderNow:!1}}),ve({type:W,value:{showScheduleOrder:!1}}),ve({type:A,value:{showNotInRadiusError:!1}}),ve({type:oe,value:!1}),ve({type:le,value:!0})):(ve({type:k,value:{showScheduleOrderCatering:!0,store:e}}),ve({type:F,value:{showSearchStore:!1}}),ve({type:Y,value:{showSheduleDisposition:!0}}),ve({type:x,value:e}),ve({type:g,value:{changeScheduleModeFlag:!1}}),ve({type:U,value:{scheduleModeClicked:!0}}),ve({type:B,value:{showOrderNow:!1}}),ve({type:W,value:{showScheduleOrder:!0}}),ve({type:A,value:{showNotInRadiusError:!1}})),localStorage.setItem(X,JSON.stringify(e))}),[g,x,X,A,U,k,F,B,W,Y,ve]);Object(o.useEffect)((()=>{He.length>0&&ge&&!Ve&&Ke(He[0])}),[Se,ge,Ve,Ke,He]);const Xe=Object(o.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),localStorage.removeItem(Q),localStorage.setItem($,!0),he||ve({type:k,value:{selectedAddress:{}}}),T&&T({isOpenSaveDeliveryAddressModal:!1}),ve({type:_,value:{showDisposition:!1}}),ve({type:I,value:{dispositionType:null===_e||void 0===_e?void 0:_e.type}}),ve({type:F,value:{showSearchStore:!1}}),ve({type:H,value:{redirectionOrder:""}}),ve({type:w,value:{reorderModalOpen:!1}}),ve({type:R,value:{fromReorderFlag:!1}}),ve({type:P,value:{storeChanged:!1}}),ve({type:M,value:{findAKFC:window.location.pathname===r.Ae.FIND_STORE}}),j()}),[he,_,I,null===_e||void 0===_e?void 0:_e.type,R,$,w,P,k,F,Q,M,H,ve]);Object(o.useEffect)((()=>{const e=e=>{27===e.keyCode&&Xe(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[Xe]);const qe=Object(C.jsxs)("div",{className:"address-field-container",children:[h&&Object(C.jsx)("div",{className:"name-field",children:Object(C.jsx)(V.a,{className:"address-text-field",labelClassName:"text-field-title",containerClassName:"text-field-content",name:"name",placeholder:Object(c.translateWithI18Next)(null===N.a||void 0===N.a?void 0:N.a.ADDRESS_NICK_NAME),value:Ie,onChange:e=>Ae(e.target.value),onBlur:e=>{const t=fe.some((t=>t.name===e.target.value));Pe(!!t)},maxlength:10,errorIcon:L.a.Error,errorIconClassName:"flex-div",helperText:Object(c.translateWithI18Next)(z),helperTextClassName:"error-text",error:Le})}),Object(C.jsx)(se,{changeFlow:he,formContent:ye,dispositionType:null===Se||void 0===Se?void 0:Se.toUpperCase(),deliveryLocalizationData:We,getStoreData:e=>{xe(!0);const[t]=e,d=Object(b.Ib)(Se.toUpperCase()),o=[{id:t}];Object(S.a)(o,d,ae,me)},saveAddressData:(e,t,d)=>{const[o,l,a]=d,s={...ze,chomeId:l,cityId:String(a)};localStorage.setItem(de,JSON.stringify(e)),localStorage.setItem(Z,JSON.stringify(s)),Je(Object(J.d)({key:null===r.qe||void 0===r.qe?void 0:r.qe.SELECTED_ADDRESS,value:s})),ve({type:k,value:{deliveryAddress:e,deliveryAddressLine:t,selectedAddress:s,storeId:o}})},selectedAddress:ze,setSelectedAddress:Ge,deliverySearchType:O,onDeliveryTypeChanged:e=>{p(e)},isDeliveryLocalizationLoading:Ue,storesStatusError:Ye,prefectureAddressScreen:h,addressName:Ie,address:m,modalType:E,isPrimaryAddress:Re,closeModal:j,isAccount:!0,addressNameExist:Le,updateSetOrderDetails:T,isAddressFromOrderProcessing:y}),h&&Object(C.jsxs)("div",{className:"default-address-section",children:[Object(C.jsx)("input",{type:"checkbox",name:"isPrimary","data-testid":"default-testid",id:"default-address",value:Re,defaultChecked:(()=>{const e=!(null!==fe&&void 0!==fe&&fe.length)&&!E;return(null===m||void 0===m?void 0:m.isPrimary)||e})(),onChange:()=>we(!Re),disabled:fe.length<1||E&&fe.length<=1}),Object(C.jsx)("div",{className:"default-label-text",children:Object(C.jsx)("label",{htmlFor:"default-address",children:Object(c.translateWithI18Next)(r.hd)})})]})]});return Object(o.useEffect)((()=>{ae(Object(u.b)());const e=(null===O||void 0===O?void 0:O.id)===f.d.postalCode?ee:te;ae(Object(D.e)(e))}),[ae,null===O||void 0===O?void 0:O.id,ee,te]),Object(o.useEffect)((()=>{!Ue&&We&&ae(Object(u.a)())}),[Ue,We,ae]),Object(C.jsx)(ie,{handleClose:Xe,orderModeTypeItem:qe,headerText:ue(h,Be),handleGoBack:e=>{e.stopPropagation(),e.preventDefault(),ve({type:_,value:{showDisposition:Fe}}),he||ve({type:k,value:{selectedAddress:{}}}),ve({type:F,value:{showSearchStore:Me,configSearchScreen:v.a,searchedPlaceNonLocalized:null===pe||void 0===pe?void 0:pe.searchedPlaceNonLocalized}})},modalTitleId:"delivery-address-search-form",className:"search-store-global-container",backDataTestId:"back-btn-global-modal-id"})};ve.defaultProps=s.a;t.default=ve}}]);