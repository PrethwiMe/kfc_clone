(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[43,4,6,7,25,30,89,103,108,109,140],{1003:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(18),n=a.n(l),d=a(25),r=a(340),s=a.n(r),c=a(37),u=a.n(c),v=a(931),O=a.n(v),b=a(61),m=a(138),j=a(97),h=a(964),p=a(63),g=a(30),N=a(6),S=a(121),I=a(991),x=a(4),f=a(5),E=a(0),C=a(43),T=a(915),y=a(15),D=a(136),A=a(2);var R=e=>{const{currencySymbol:t,currencyConversionFactor:a,unavailableItem:i,orderDetails:o}=e,{YOUR_ORDER:l,TOTAL:n,ITEM_NOT_UNAVAILABLE:d,ITEM_CURRENLTY_UNAVAILABLE:r,CART_ITEM:s}=x.a,{foodLines:c=[],id:u,total:v}=Object(f.kd)(o),O=Object(N.translateWithI18Next)(null===x.a||void 0===x.a?void 0:x.a.ADD_HOPE),b=Object(N.translateWithI18Next)(null===x.a||void 0===x.a?void 0:x.a.LARGE_CARRY_BAG),m=Object(f.Pb)(c,O,b),j=null===m||void 0===m?void 0:m.reduce(((e,t)=>e+(null===t||void 0===t?void 0:t.quantity)),0);return Object(A.jsxs)("div",{className:"reorder-item-section",children:[Object(A.jsx)("span",{className:"reorder-section-heading",children:Object(N.translateWithI18Next)(l)}),Object(A.jsx)("div",{className:"".concat(Object(f.Tc)(i.length>0,"error-can-not-deliver","hide-error-container")),children:Object(A.jsx)(T.a,{show:i.length>0,errorMsg:Object(N.translateWithI18Next)(d),errImage:y.a.Error_Yellow,cssClass:"error-sub-container"})}),Object(A.jsx)("section",{className:"reorder-accordian",children:Object(A.jsxs)(D.a,{header:"".concat(j," ").concat(Object(N.translateWithI18Next)(s)).concat(j>1?"s":""),open:!0,children:[null===m||void 0===m?void 0:m.map((e=>{var o,l,n,d,s;return Object(A.jsx)("section",{className:"",children:Object(A.jsxs)("div",{className:"reorder-order-item",children:[Object(A.jsx)("div",{className:"reorder-item-details",children:Object(A.jsx)("div",{className:"item-count-box mr",children:Object(A.jsx)("span",{className:"item-count ml",children:null===e||void 0===e?void 0:e.quantity})})}),Object(A.jsxs)("div",{className:"item-desc-section",children:[Object(A.jsx)("span",{className:"item-desc item-desc-bold",children:null===e||void 0===e||null===(o=e.item)||void 0===o||null===(l=o.dname)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.value}),i.length>0&&i.find((t=>{var a;return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e||null===(a=e.item)||void 0===a?void 0:a.id)}))&&Object(A.jsxs)("span",{className:"item-desc unavailable-msg",children:[Object(A.jsx)(C.a,{srcFile:y.a.Error_Yellow,className:"unavailable-msg-icon"}),Object(N.translateWithI18Next)(r)]})]}),!Object(f.ce)()&&Object(A.jsxs)("span",{className:"item-amount item-desc-bold",children:[t,Object(f.g)((null===e||void 0===e||null===(d=e.item)||void 0===d?void 0:d.quantity)*(null===e||void 0===e||null===(s=e.item)||void 0===s?void 0:s.unitPrice),a)," "]})]})})})),!Object(f.ce)()&&Object(A.jsxs)("div",{className:"reorder-payment-details mt-4 mb-4",children:[Object(A.jsx)("span",{className:"payment-total",children:Object(N.translateWithI18Next)(n)}),Object(A.jsxs)("span",{className:"payment-total-amount",children:[t,Object(f.g)(v,a)]})]})]},"orderItem-".concat(u))})]})},_=a(36),w=a(995),L=a(76);const{CURRENT_STORE_INFO_STORAGE:k}=E.gd||{},M=e=>{const{isGenericError:t,isPastOrderValidationLoading:a,isAddItemLoading:i,enableButton:o,enableScheduleOrder:l,isFutureDateTimeOrder:d,scheduleOrderFlag:r,selectedTime:s,hasError:c,unavailableItem:u,totalItemsLength:v}=e;return t||a||i||!o||c.error||(null===u||void 0===u?void 0:u.length)===v||l&&d&&r&&n()(s)};var P=e=>{var t,a,l,n,r,s;const{closeButtonHandler:c,onChangeDisposition:u,editDeliveryLocation:v,enableButton:O,onChangeRestaurant:b,currentOrderInfo:m,onClickOrderAgain:j,orderTypeDifferentError:h,storeError:p,locationDifferentError:g,isLocationError:C,isGenericError:T,isPastOrderValidationLoading:y,isAddItemLoading:D,storeChanged:k,currentStoreInfo:P,enableScheduleOrderFlag:F,selectedDate:W,selectedTime:H,scheduleOrderFlag:U,hasError:B,changeDateValue:G,changeTimeValue:V,orderNowFlag:Y,enableSceduleCA:K,enableScheduleMode:z,dateTimeArr:q,orderSchedulingMode:J,changeScheduleOrder:X,isFutureDateTimeOrder:Q,isStoreClosed:Z,storeClosedError:$,unavailableItem:ee,elementUniqueLocator:te}=e,{userOrderState:ae}=Object(i.useContext)(L.a),ie=((e,t)=>!!e&&(null===t||void 0===t?void 0:t.length)<=1)(F,q),oe=((e,t)=>{var a;return!!e&&!(null!==t&&void 0!==t&&null!==(a=t.timeSlots)&&void 0!==a&&a.length)})(F,W),le=Object(d.c)((e=>e.tenantReducer)),ne=null===le||void 0===le||null===(t=le.savedAddressPage)||void 0===t?void 0:t.showStateCityAddAddress,{disableChangeCTAForDispostion:de,disableChangeCTAForAddressChange:re,disableChangeCTAForStoreChange:se}=null===le||void 0===le||null===(a=le.componentOptions)||void 0===a||null===(l=a.web)||void 0===l?void 0:l.quickReorder,{modifiedStoreData:ce,modifiedService:ue,modifiedDeliveryAddress:ve}=Object(f.ed)(k,P,m,ae),Oe=k?Object(f.Wb)(null===m||void 0===m?void 0:m.deliveryAddress,ne):Object(f.Wb)(ve,ne),{REVIEW_ORDER:be,ORDER_TYPE:me,ORDER_TYPE_CHANGE:je,YOUR_KFC_RESTAURANT:he,YOUR_LOCATION:pe,ORDER_AGAIN:ge,PICK_UP_TIME:Ne,DELIVERY_TIME:Se}=x.a,{DELIVERY:Ie}=E.Jb,xe=((e,t)=>{const{DELIVERY:a}=E.Jb||{},i=(null===t||void 0===t?void 0:t.toUpperCase())===a?Object(N.translateWithI18Next)(x.a.SELECT_DELIVERY_TIME):Object(N.translateWithI18Next)(x.a.SELECT_PICKUP_TIME);return e?i:Object(N.translateWithI18Next)(x.a.ASAP)})(X,ue),fe=Y||U&&!X,Ee=U&&X,Ce={isGenericError:T,isPastOrderValidationLoading:y,isAddItemLoading:D,enableButton:O,enableScheduleOrder:F,isFutureDateTimeOrder:Q,scheduleOrderFlag:U,selectedTime:H,hasError:B,unavailableItem:ee,totalItemsLength:null===e||void 0===e||null===(n=e.orderDetails)||void 0===n||null===(r=n.foodLines)||void 0===r?void 0:r.length};return Object(A.jsx)(o.a.Fragment,{children:Object(A.jsxs)(S.a,{id:"ReOrderModal",role:"dialog",ariaLabel:"Close Start your Order dialog",modalTitleId:"re-order-id",show:!0,classNames:"reorder-modal-global extra-small-modal",showCloseBtn:!0,closeButtonHandler:c,backButtonHandler:c,modalTitle:Object(N.translateWithI18Next)(be),closeDataTestId:"close-modal-handler",showBackBtn:!0,showFooterSection:!0,buttonVariant:_.b.secondary,footerBtnText:Object(N.translateWithI18Next)(ge),footerBtnHandler:j,footerBtnTestId:"reorder-order-it-again",disabledBtn:M(Ce),loadingBtn:D,children:[Object(A.jsx)(I.a,{show:!0,sectionHeader:me,subSectionValue:Object(N.translateWithI18Next)(ue),orderTypeChange:je,onClickHandler:u,storeUnavailableError:h,isAlert:!0,showChangeButton:!de,dataTestid:"reorder-disposition-change-link",elementUniqueLocator:te}),Object(A.jsx)(I.a,{show:Object(f.Ad)(ue),sectionHeader:pe,subSectionValue:Oe,showChangeButton:!Object(f.Ad)(ue)||!re,description:(null===ve||void 0===ve?void 0:ve.addressLines)>=1?null===ve||void 0===ve||null===(s=ve.addressLines)||void 0===s?void 0:s[0]:null===ae||void 0===ae?void 0:ae.deliveryAddressLineVal,orderTypeChange:je,onClickHandler:()=>v(Oe)}),Object(A.jsx)(I.a,{show:!0,sectionHeader:he,subSectionValue:null===ce||void 0===ce?void 0:ce.name,orderTypeChange:je,onClickHandler:b,showChangeButton:!se,isAlert:Z||!T,storeUnavailableError:T&&p||C&&g||Z&&$,dataTestid:"reorder-store-change-link",elementUniqueLocator:te}),Object(A.jsx)(I.a,{show:Boolean(F&&fe),sectionHeader:Object(f.Ad)(ue)?Se:Ne,subSectionValue:J,orderTypeChange:je,onClickHandler:z,showChangeButton:K,dataTestid:"reorder-time-date-change-link",elementUniqueLocator:te}),Object(A.jsx)(w.a,{show:Boolean(F&&Ee),sectionHeader:Object(f.Ad)(ue)?Se:Ne,subSectionValue:null===ce||void 0===ce?void 0:ce.name,orderTypeChange:je,changeDateValue:G,changeTimeValue:V,dateTimeArr:q,selectedDate:W,selectedTime:H,placeholderText:xe,disableDateOption:ie,disableTimeOption:oe,scheduleTimeWarning:F&&B&&(null===B||void 0===B?void 0:B.error),scheduleErrMsg:F&&B&&(null===B||void 0===B?void 0:B.errormessage),enableScheduleOrderFlag:F,elementUniqueLocator:te}),Object(A.jsx)(R,{...e})]})})},F=a(14),W=a(38),H=a(111),U=a(101),B=a(22),G=a(11),V=a(332),Y=a(266),K=a(122),z=a(318),q=a(69),J=a(110);const X=e=>{var t;const{enableScheduleOrder:a,isFutureTimeOrderAvailable:i,updateReorderDetails:o,storename:l,service:n}=e,{STORE_CLOSED_ERROR:d,STORE_CLOSED_NEXT_TIME_APPLIED_PICKUP_MSG:r,STORE_CLOSED_NEXT_TIME_APPLIED_DELIVERY_MSG:s}=x.a;o(a&&i?{storeError:null,storeClosedError:Object(f.ef)(n)===E.Lb.PICKUP?Object(N.translateWithI18Next)(r):Object(N.translateWithI18Next)(s)}:{storeClosedError:null,storeError:null===(t=Object(N.translateWithI18Next)(d))||void 0===t?void 0:t.replace("$storeName",'<b class="item-desc-bold">'.concat(l,"</b>"))})},Q=e=>{var t;const{timings:a={},orderingAttribute:i={}}=Object(f.kd)(null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.summary),{asap:o={}}=a||{},{isAsapOrder:l=!1}=i||{},n=!(null!==o&&void 0!==o&&o.isAvailable);return Boolean(!n&&l)},Z=(e,t)=>Boolean(e&&t),$=e=>{var t;return e?Object(N.translateWithI18Next)(x.a.TODAY_ASAP):null===(t=Object(N.translateWithI18Next)(x.a.ASAP))||void 0===t?void 0:t.toUpperCase()};t.a=e=>{var t,a,l,r,c,v,S,I,C,T;const{currentOrderInfo:y,reorderModalOpen:D,closeButtonHandler:R,source:_}=e,{service:w,id:k,store:M,name:ee}=Object(f.kd)(y),{storeId:te}=Object(f.kd)(M),ae=Object(d.b)(),ie=Object(b.g)(),{RESET_DELIVERY_ADDRESS_LINE:oe,DISPOSITION_DATA:le,SCHEDULE_ORDER_DATA:ne,SEARCH_ORDER_DATA:de,DISPOSITION_METHOD:re,USER_LOCALIZED:se,CURRENT_STORE_INFO:ce,SET_DISPOSITION:ue,SCHEDULE_ORDER_TIME_DATA:ve,REORDER_MODAL_OPEN:Oe,SET_ASAP_SCHEDULING:be,SCHEDULE_ORDER_CLICKED:me}=F.a,{DISPOSITION_NEW:je,DISPOSITION_OLD:he,DISPOSITION_TYPE:pe,DATE_TIME_ORDER:ge,SELECTED_TILE:Ne,CONFIG_SEARCH_SCREEN:Se,CURRENT_STORE_INFO_STORAGE:Ie,STORE_INFO:xe}=E.gd,{LOCATION_DIFFERENT_ERROR:fe,STORE_CLOSED_ERROR:Ee}=x.a,{userOrderState:Ce,userOrderStateDispatch:Te}=Object(i.useContext)(L.a);let{dispositionNew:ye,reorderFlag:{storeChanged:De=!1},currentStoreInfo:Ae={},scheduleOrderData:Re={},showOrderNowReorder:_e=!1,showScheduleOrderReorder:we=!1,scheduleModeClicked:Le=!1}=Ce;const{changeFlow:ke=!1,isAddressFlow:Me=!1}=Re;ye=Object(f.Tc)(Object(f.Jd)(ye),JSON.parse(localStorage.getItem(je)),ye);const Pe=Object(d.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),{localized:Fe=!1,loggedIn:We=!1}=Object(f.kd)(Pe),He=Object(f.gd)(Fe,We),Ue=Object(d.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),{tenantId:Be,currencyConversionFactor:Ge,currencySymbol:Ve,componentOptions:Ye}=Object(f.kd)(Ue),Ke=null===Ue||void 0===Ue||null===(t=Ue.savedAddressPage)||void 0===t?void 0:t.showPrefectureAddAddressScreen,ze=null===Ue||void 0===Ue||null===(a=Ue.savedAddressPage)||void 0===a?void 0:a.showStateCityAddAddress,qe=null===Ue||void 0===Ue||null===(l=Ue.componentOptions)||void 0===l?void 0:l.showComma,{web:Je={}}=Ye,{shouldCheckDropOffAddress:Xe=!1}=Je,Qe=Object(d.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),{customerId:Ze}=Object(f.kd)(Qe),{elementUniqueLocator:$e,timeFormat:et}=Object(d.c)((e=>e.tenantReducer||{})),tt=Object(d.c)((e=>null===e||void 0===e?void 0:e.postOrderReducer)),{orderAccepted:at={}}=Object(f.kd)(tt),{addHope:it,carryBag:ot}=Ue,lt=o.a.useRef(null),nt=Object(d.c)((e=>null===e||void 0===e?void 0:e.reorderReducer)),{flatResponse:dt}=Object(f.kd)(nt),{items:rt=[]}=Object(f.kd)(dt),st=Object(d.c)((e=>null===e||void 0===e?void 0:e.cartReducer)),ct=Object(d.c)((e=>{var t,a,i;return(null===(t=e.postOrderReducer)||void 0===t?void 0:t.orderAcceptedLoading)||(null===(a=e.storesReducer)||void 0===a?void 0:a.isStoreDetailsLoading)||(null===(i=e.LoaderReducer)||void 0===i?void 0:i.isLoading)})),{cartData:ut,isAddItemLoading:vt,currentItemId:Ot}=Object(f.kd)(st),{discountLines:bt=[],foodLines:mt=[]}=at,jt=Object(f.db)(bt,(null===bt||void 0===bt?void 0:bt.length)-1),ht=Object(f.db)(bt,bt[jt]),{couponCode:pt="",amount:gt=""}=Object(f.kd)(ht),Nt=Object(f.g)(gt,Ge),St=null===Ye||void 0===Ye||null===(r=Ye.web)||void 0===r?void 0:r.dispositionConfig,It=null===Ye||void 0===Ye||null===(c=Ye.web)||void 0===c||null===(v=c.storeSearch)||void 0===v?void 0:v.addPickupAndDropoffLatLngInStatusApi,{enableScheduleOrder:xt=!1}=St,{modifiedService:ft}=Object(f.ed)(De,Ae,y),Et=((e,t,a)=>e&&(null===t||void 0===t?void 0:t.includes(a)))(null===Ye||void 0===Ye||null===(S=Ye.web)||void 0===S||null===(I=S.dispositionConfig)||void 0===I?void 0:I.enableClickCollectScheduleOrder,null===Ye||void 0===Ye||null===(C=Ye.web)||void 0===C||null===(T=C.scheduledDelivery)||void 0===T?void 0:T.allowScheduleOrderForDispositions,ft),Ct=((e,t)=>e||t)(xt,Et),Tt={unavailableItem:[],showModal:D,orderTypeDifferentError:null,locationDifferentError:null,storeDetail:null,storeError:null,confirmed:!1,orderinfoData:{},isLocalizationSetup:!1,enableButton:!1,orderNowFlag:!0,scheduleOrderFlag:!1,changeScheduleOrder:!1,dateTimeArr:[],selectedDate:{},selectedTime:{},orderSchedulingMode:$(Et),isFutureDateTimeOrder:!1,isMenuFetched:!1,hasError:{error:!1,errormessage:""},storeClosedError:null,enableSceduleCA:!1,isFlowChangedLoadingFinish:!1},[yt,Dt]=Object(i.useState)(Tt),[At,Rt]=Object(i.useState)(!1),_t=Object(i.useCallback)((e=>{Dt&&Dt((t=>({...t,...e})))}),[]),{YYYY_MM_DD:wt}=E.sb,Lt=Ct?De:ke,kt=Object(J.b)(q.b);Object(i.useEffect)((()=>{var e;(null===ut||void 0===ut||null===(e=ut.foodLines)||void 0===e||!e.length)&&localStorage.removeItem(E.gd.ADD_TO_ORDER)}),[null===ut||void 0===ut?void 0:ut.foodLines]),Object(i.useEffect)((()=>{lt.current=yt}),[yt]),Object(i.useEffect)((()=>{if(Z(Ct,yt.storeDetail)&&yt.isFutureDateTimeOrder&&!yt.changeScheduleOrder){var e;const t={displayStoreInfo:null===(e=yt.storeDetail)||void 0===e?void 0:e[0],enableScheduleOrder:Ct,enableClickCollectScheduleOrderFlag:Et,fromReorder:!0,scheduleModeClicked:Le,timeFormat:et},a=Object(U.h)(t);_t({dateTimeArr:a})}}),[xt,yt.storeDetail,w,De,yt.isFutureDateTimeOrder,yt.changeScheduleOrder]),Object(i.useEffect)((()=>{if(Z(Ct,yt.storeDetail)&&yt.isFutureDateTimeOrder&&yt.scheduleOrderFlag&&yt.changeScheduleOrder){const e={shouldShowScheduleOrder:yt.scheduleOrderFlag,store:yt.storeDetail,updateReorderDetails:_t,changeFlow:ke,enableScheduleOrder:Ct,selectedDate:yt.selectedDate,selectedTime:yt.selectedTime,service:w,fromReorder:!0,scheduleModeClicked:Le,enableClickCollectScheduleOrderFlag:Et};Object(U.c)(e)}}),[Ct,yt.scheduleOrderFlag,De,yt.storeDetail,yt.isFutureDateTimeOrder,yt.changeScheduleOrder]),Object(i.useEffect)((()=>{if(Z(Ct,yt.storeDetail)){var e,t,a;const i=Q(null===yt||void 0===yt?void 0:yt.storeDetail),o=null===(e=yt.dateTimeArr)||void 0===e?void 0:e.find((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.date)&&void 0!==t&&t.disabled)})),l=!n()(yt.selectedDate)&&!n()(yt.selectedTime),d=u()(null===yt||void 0===yt||null===(t=yt.storeDetail[0])||void 0===t?void 0:t.summary,"name",{}),r=((e,t)=>Boolean(e&&!t))(null===yt||void 0===yt?void 0:yt.storeClosedError,o);((e,t,a,i)=>{var o;(null===e||void 0===e?void 0:e.orderNowFlag)&&t&&a({orderSchedulingMode:i?Object(N.translateWithI18Next)(x.a.TODAY_ASAP):null===(o=Object(N.translateWithI18Next)(x.a.ASAP))||void 0===o?void 0:o.toUpperCase()})})(yt,i,_t,Et);const s=(e=>{const{storeClosedError:t,asapOrderFlag:a,isFutureDateTimeOrder:i,changeScheduleOrder:o,enabledDate:l,isDateTimeSelected:n}=e;return Boolean((t||!a)&&i&&!o&&l&&!n)})({storeClosedError:null===yt||void 0===yt?void 0:yt.storeClosedError,asapOrderFlag:i,isFutureDateTimeOrder:null===yt||void 0===yt?void 0:yt.isFutureDateTimeOrder,changeScheduleOrder:yt.changeScheduleOrder,enabledDate:o,isDateTimeSelected:l});s&&_t({scheduleOrderFlag:!0,selectedDate:o,selectedTime:null===o||void 0===o?void 0:o.timeSlots[0],orderNowFlag:!1});const c=(e=>{const{storeClosedError:t,isFutureDateTimeOrder:a,scheduleOrderFlag:i,changeScheduleOrder:o,enabledDate:l}=e;return Boolean(!t&&a&&i&&o&&l)})({storeClosedError:yt.storeClosedError,isFutureDateTimeOrder:yt.isFutureDateTimeOrder,scheduleOrderFlag:yt.scheduleOrderFlag,changeScheduleOrder:yt.changeScheduleOrder,enabledDate:o});c&&n()(yt.selectedDate)&&_t({selectedDate:o}),r&&_t({storeClosedError:null,storeError:null===(a=Object(N.translateWithI18Next)(Ee))||void 0===a?void 0:a.replace("$storeName",'<b class="item-desc-bold">'.concat(d,"</b>"))})}}),[Ct,yt.orderNowFlag,yt.scheduleOrderFlag,yt.storeClosedError,yt.changeScheduleOrder,yt.storeDetail,yt.isFutureDateTimeOrder,De,yt.dateTimeArr]),Object(i.useEffect)((()=>{if(Ct&&!n()(yt.selectedDate)&&!n()(yt.selectedTime)){const e=yt.selectedDate.date.value,t=yt.selectedTime.value,a=qe?",":"",i=" ".concat(e).concat(a," ").concat(t);_t({orderSchedulingMode:i})}}),[yt.selectedDate,yt.selectedTime,Ct]),Object(i.useEffect)((()=>{if(Z(Ct,yt.storeDetail)){var e,t,a;const i=null===(e=yt.dateTimeArr)||void 0===e?void 0:e.find((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.date)&&void 0!==t&&t.disabled)})),o=Object(f.Pd)(null===(t=yt.storeDetail)||void 0===t?void 0:t[0])||Object(f.Od)(null===(a=yt.storeDetail)||void 0===a?void 0:a[0]),l=((e,t,a)=>Boolean(e&&!t&&a))(o,yt.changeScheduleOrder,i);_t({isFutureDateTimeOrder:o,enableSceduleCA:l})}}),[Ct,yt.storeDetail,De,yt.dateTimeArr]),Object(i.useEffect)((()=>{null!==yt&&void 0!==yt&&yt.showModal&&Ct&&!De&&Te({type:me,value:{scheduleModeClicked:!1}})}),[null===yt||void 0===yt?void 0:yt.showModal,Ct,De]),Object(i.useEffect)((()=>{if(Z(Ct,yt.storeDetail)&&yt.showModal&&De&&!yt.isFlowChangedLoadingFinish){var e,t,a;const i=null===(e=yt.dateTimeArr)||void 0===e?void 0:e.find((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.date)&&void 0!==t&&t.disabled)})),o=((e,t,a)=>Boolean(e&&t&&a))(Q(null===yt||void 0===yt?void 0:yt.storeDetail),yt.isFutureDateTimeOrder,i);o&&_t({orderNowFlag:_e,changeScheduleOrder:!_e||we&&(null===(t=yt.dateTimeArr)||void 0===t?void 0:t.length),scheduleOrderFlag:!_e||we&&(null===(a=yt.dateTimeArr)||void 0===a?void 0:a.length),isFlowChangedLoadingFinish:!0})}}),[Ct,_e,we,De,yt.showModal,yt.storeDetail,yt.dateTimeArr,yt.isFlowChangedLoadingFinish,yt.isFutureDateTimeOrder]);Object(i.useEffect)((()=>{Object(f.db)(yt.confirmed,Ot)&&(_t({confirmed:!1}),ie.push(E.Ae.CART))}),[yt.confirmed,Ot]);const Mt=Object(f.g)(null===at||void 0===at?void 0:at.total,Ge),Pt=Object(i.useCallback)((()=>{var e,t;const a=null===(e=yt.storeDetail[0])||void 0===e||null===(t=e.addresses[0])||void 0===t?void 0:t.address,i=Object(f.Wb)(a);localStorage.setItem(E.gd.RETAIN_ADDRESS,i),_t({showModal:!1}),Te({type:oe}),Te({type:le,value:{showDisposition:!0}}),Te({type:ne,value:{showScheduleOrder:!1}}),Te({type:de,value:{showSearchStore:!1}}),Te({type:Oe,value:{reorderModalOpen:!1}})}),[Te,yt.storeDetail]),Ft=Object(i.useCallback)((e=>{const t=s()(yt.storeDetail,{});t&&(Te({type:re,value:{dispositionType:t.service}}),Object(U.a)(Me,t,H.a,Lt,!0,e,Te),Te({type:Oe,value:{reorderModalOpen:!1}}))}),[Te,Lt,Me,yt.storeDetail]),Wt=Object(i.useCallback)((e=>{if(!Object(f.Jd)(e)){var t;const{summary:a}=e,{futureDates:i,scheduled:o,asap:l}=Object(f.kd)(null===a||void 0===a?void 0:a.timings),{interval:n=0,startEndTime:d={}}=o&&o.periods.length&&o.periods[0],{from:r,to:s}=d;return Object(U.j)(r,s,n,null===l||void 0===l?void 0:l.isAvailable,Object(f.db)(1===i.length,Object(f.ce)())),{time:E.t,interval:null===a||void 0===a||null===(t=a.timings.scheduled.periods[0])||void 0===t?void 0:t.interval,date:new Date,selectedTime:E.t}}})),Ht=e=>{const t=e;return e.forEach(((t,a)=>{var i;e[a].modifiers=null===(i=t.modifiers)||void 0===i?void 0:i.filter((e=>!0===e.isAdded))})),t},Ut=(e,t,a)=>{const i=[];let o=0,l=[],n=Object(f.Pb)(e,it,ot);return null===n||void 0===n||n.forEach((e=>{var n;const{isAvailable:d,product:r}=((e,t,a)=>{var i,o,l,n,d,r;const s=a&&"ASAP"!==a?Object(G.C)(a,E.sb.lll):Object(G.e)(E.sb.lll),c=(null===t||void 0===t?void 0:t.filter((t=>(null===t||void 0===t?void 0:t.id)===e)))||{},u=null===(i=c[0])||void 0===i||null===(o=i.availability[0])||void 0===o?void 0:o.availableHours,v=null===u||void 0===u||null===(l=u.startTime)||void 0===l?void 0:l.time,O=null===u||void 0===u||null===(n=u.endTime)||void 0===n?void 0:n.time,b=Object(z.j)(Object(f.y)(v),E.sb.lll,1e3*a),m=Object(z.j)(Object(f.y)(O),E.sb.lll,1e3*a),j=null===(d=c[0])||void 0===d?void 0:d.isNotAvailable,h=Object(G.f)(s,b,m)&&!j;return(null===(r=c[0])||void 0===r?void 0:r.isHidden)?{isAvailable:"hidden",product:c}:{isAvailable:h,product:c}})(null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.id,t,a);var s,c,u,v,O;d?i.push({Id:e.item.id,quantity:e.quantity,categoryUrl:null===r||void 0===r||null===(s=r[0])||void 0===s||null===(c=s.categoryUrl)||void 0===c?void 0:c[0],categoryName:null===r||void 0===r||null===(u=r[0])||void 0===u?void 0:u.categoryName,categoryId:null===r||void 0===r||null===(v=r[0])||void 0===v?void 0:v.categoryId,modGrps:Ht(null===e||void 0===e||null===(O=e.item)||void 0===O?void 0:O.modGrps)}):(o+=1,l.push(e.item))})),_t({unavailableItem:l}),{unAval:o,itemArr:i}},Bt=(e,t,a)=>{const i=(e=>{var t;return{...e,startDateInEpoch:+(null===(t=sessionStorage)||void 0===t?void 0:t.getItem(null===E.Ke||void 0===E.Ke?void 0:E.Ke.SCHEDULE_DATE_EPOCH))}})({storeId:t,channel:B.b.channel,service:a});Object(K.g)(),ae(Ct?Object(h.b)({tenantId:Be,catalogName:e},i,(()=>_t({isMenuFetched:!0}))):Object(h.b)({tenantId:Be,catalogName:e},{storeId:t,channel:B.b.channel,service:a},(()=>_t({isMenuFetched:!0}))))};Object(i.useEffect)((()=>{if(Object(f.j)([mt.length>0,rt.length>0,yt.isMenuFetched])){var e;const{id:t}=Object(f.kd)(ut),a=Object(f.Pb)(mt,E.i),i=Ut(a,rt,null===(e=yt.selectedTime)||void 0===e?void 0:e.key),o={dispatch:ae,response:i,foodLineInfo:mt,basketId:t,tenantId:Be,updateReorderDetails:_t,setupLocalization:Vt,storeDetail:yt.storeDetail,orderinfoData:yt.orderinfoData,closeButtonHandler:R};At||((e=>{const{dispatch:t,response:a,foodLineInfo:i,basketId:o,tenantId:l,updateReorderDetails:n,setupLocalization:d,storeDetail:r,orderinfoData:s,closeButtonHandler:c}=e;a.unAval!==i.length&&t(Object(g.a)({params:{basketId:o},tenantId:l,isFromReorder:!0},a.itemArr,(e=>{localStorage.removeItem(E.gd.ADD_TO_ORDER),d(r,s),n({confirmed:!0}),c()})))})(o),_t({isMenuFetched:!1})),Rt(!1)}}),[mt,rt,yt.isMenuFetched]);const Gt=async function(){var e,t,a,i,o,l,n,d,r,s,c,u,v,b,m,j,h,p,S,I,C,T,y,D;let A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},R=arguments.length>1&&void 0!==arguments[1]&&arguments[1];R||Rt(!1);const{lang:_,catalog:L,storeId:k,deliveryAddress:M,storename:P,service:F}=Object(f.dd)(R?A:yt.storeDetail),H=De?M:null===(e=yt.orderinfoData)||void 0===e?void 0:e.deliveryAddress,U={date:null!==(t=null===(a=yt.selectedDate)||void 0===a||null===(i=a.date)||void 0===i?void 0:i.key)&&void 0!==t?t:Object(G.h)(new Date,wt),time:null!==(o=null===(l=yt.selectedTime)||void 0===l?void 0:l.value)&&void 0!==o?o:E.t,selectedTime:null!==(n=null===(d=yt.selectedTime)||void 0===d?void 0:d.value)&&void 0!==n?n:E.t,epochTime:null!==(r=yt.selectedTime)&&void 0!==r&&r.key&&(null===(s=yt.selectedTime)||void 0===s?void 0:s.key)!==E.t?null===(c=yt.selectedTime)||void 0===c?void 0:c.key:E.t},B={time:E.t,date:new Date,selectedTime:E.t,epochTime:E.t},V=Ct?U:B;let Y={id:k,summary:{menu:{catalogs:[L]}},addresses:[{lang:_}]};const{addressLines:K=[],customProperties:z}=(null===yt||void 0===yt||null===(u=yt.orderinfoData)||void 0===u?void 0:u.deliveryAddress)||{},[J,Q,Z,$,ee,te,ie,oe]=K,le=null===yt||void 0===yt||null===(v=yt.orderinfoData)||void 0===v||null===(b=v.deliveryAddress)||void 0===b?void 0:b.name,ne=null===yt||void 0===yt||null===(m=yt.orderinfoData)||void 0===m||null===(j=m.deliveryAddress)||void 0===j?void 0:j.pinCode,de=null===(h=O()(z,{key:E.V}))||void 0===h?void 0:h.value,re=null===(p=O()(z,{key:E.S}))||void 0===p?void 0:p.value,se=(null===yt||void 0===yt||null===(S=yt.orderinfoData)||void 0===S||null===(I=S.customProperties)||void 0===I||null===(C=I[0])||void 0===C?void 0:C.value)||{},ce=Ke&&null!==K&&void 0!==K&&K.length?{addressName:le,apartmentName:ee,chome:Z,chomeId:re,cityId:de,cityTown:Q,companyName:ie,postalCode:ne,prefecture:J,roomNumber:te,specialNote:oe,streetDetailAddress:$}:{},ue=await Object(f.z)(Y,Object(f.Ib)(F),Ze,V,Object(f.Wb)(H,ze),null,ce,null===yt||void 0===yt||null===(T=yt.orderinfoData)||void 0===T||null===(y=T.deliveryAddress)||void 0===y?void 0:y.addressLines);let ve=Object(G.p)();if(Ct&&(null===(D=yt.selectedTime)||void 0===D?void 0:D.key)<ve)_t({hasError:{...yt.hasError,error:!0,errormessage:Object(N.translateWithI18Next)(x.a.SCHEDULE_ORDER_CA)}});else{const e=Object(f.Kd)(yt.selectedTime)?yt.selectedTime.key:"";Ct&&sessionStorage.setItem(E.Ke.SCHEDULE_DATE_EPOCH,e),ae(Object(g.f)({data:ue,tenantId:Be,successCallback:()=>Bt(L,k,F),errorCallback:()=>{var e,t;const a=lt.current,i=Object(f.Pd)(null===a||void 0===a||null===(e=a.storeDetail)||void 0===e?void 0:e[0])||Object(f.Od)(null===a||void 0===a||null===(t=a.storeDetail)||void 0===t?void 0:t[0]);X({enableScheduleOrder:xt,isFutureTimeOrderAvailable:i,updateReorderDetails:_t,storename:P,service:w})}}))}ae(Object(q.d)({key:E.gd.ADD_HOPE_TRIGGER,value:!0})),ae(Object(q.d)({key:null===E.qe||void 0===E.qe?void 0:E.qe.REORDER_FLAG,value:{isReorderFlow:!0}})),ae(Object(q.d)({key:null===E.gd||void 0===E.gd?void 0:E.gd.SELECTED_NOT_NOW,value:!1})),ae(Object(q.d)({key:null===E.gd||void 0===E.gd?void 0:E.gd.SHOW_ADDHOPE_NOTIFICATION,value:!1})),ae(Object(q.d)({key:null===W.a||void 0===W.a?void 0:W.a.STREET_NUMBER,value:se}))},Vt=(e,t)=>{var a,i,o,l,n,d,r,c,u,v,O,b;const m=s()(e,{});let{deliveryAddress:h,service:p}=De?Object(f.dd)(e):t;Te({type:re,value:{dispositionType:p}});const N=Ke?Object(G.R)(null===(a=yt.selectedTime)||void 0===a?void 0:a.value,E.sb.HH_mm,E.sb.hh_mm_A):null===(i=yt.selectedTime)||void 0===i?void 0:i.value,S={date:null!==(o=null===(l=yt.selectedDate)||void 0===l||null===(n=l.date)||void 0===n?void 0:n.key)&&void 0!==o?o:Object(G.h)(new Date,wt),time:null!==N&&void 0!==N?N:E.t,selectedTime:null!==N&&void 0!==N?N:E.t,epochTime:null!==(d=yt.selectedTime)&&void 0!==d&&d.key&&(null===(r=yt.selectedTime)||void 0===r?void 0:r.key)!==E.t?null===(c=yt.selectedTime)||void 0===c?void 0:c.key:E.t},I=Ct?S:Wt(m),x=Boolean((null===I||void 0===I?void 0:I.key)===E.t),C={type:p,store:m,date:null===I||void 0===I?void 0:I.date,time:null===I||void 0===I?void 0:I.time,epochTime:null===I||void 0===I?void 0:I.epochTime,interval:null===I||void 0===I?void 0:I.interval,selectedTime:null===I||void 0===I?void 0:I.selectedTime,deliveryAddress:Object(f.Wb)(h,ze),deliveryAddressLine:(null===h||void 0===h||null===(u=h.addressLines)||void 0===u?void 0:u.length)>=1?null===h||void 0===h||null===(v=h.addressLines)||void 0===v?void 0:v[0]:""};Te({type:ue,value:{oldvalue:ye,newValue:C}}),localStorage.setItem(he,JSON.stringify(null)),localStorage.setItem(je,JSON.stringify(C)),localStorage.setItem(je,JSON.stringify({type:p,store:m,date:null===I||void 0===I?void 0:I.date,time:null===I||void 0===I?void 0:I.time,interval:null===I||void 0===I?void 0:I.interval,selectedTime:null===I||void 0===I?void 0:I.selectedTime,epochTime:null===I||void 0===I?void 0:I.epochTime,deliveryAddress:Object(f.Wb)(h,ze),deliveryAddressLine:(null===h||void 0===h||null===(O=h.addressLines)||void 0===O?void 0:O.length)>=1?null===h||void 0===h||null===(b=h.addressLines)||void 0===b?void 0:b[0]:""})),Te({type:de,value:{showSearchStore:!1}}),Te({type:se,value:{isLocalized:!0}}),Te({type:ce,value:m}),ae(Object(j.a)({...Pe,localized:!0})),localStorage.setItem(Ie,JSON.stringify(m)),localStorage.setItem(xe,JSON.stringify(m)),Ct&&(Te({type:F.a.SET_ORDER_NOW,value:{showOrderNow:!1}}),Te({type:F.a.SET_SCHEDULE_ORDER,value:{showScheduleOrder:!0}}),Te({type:be,value:{enableASAPScheduling:x}})),Te({type:ve,value:{selectedDateTime:I}}),localStorage.setItem(Ne,JSON.stringify({})),localStorage.setItem(Se,H.a),localStorage.setItem(pe,p),localStorage.setItem(ge,JSON.stringify(I)),Te({type:F.a.SET_ORDER_NOW_REORDER,value:{showOrderNowReorder:!1}}),Te({type:F.a.SET_SCHEDULE_ORDER_REORDER,value:{showScheduleOrderReorder:!1}}),(async()=>{const{deliveryAddress:e=null,service:t}=Object(f.dd)(yt.storeDetail);if(Object(f.Kd)(e)){const a=Object(f.Wb)(e),i=await Object(Y.geocodeByAddress)(a),o=await Object(Y.getLatLng)(null===i||void 0===i?void 0:i[0]);Object(f.gf)(t,i),It&&ae(Object(q.d)({key:E.qe.LAT_LONG,value:o}))}localStorage.setItem(E.gd.SERVICE_TYPE,Object(f.Ib)(t));const a=E.p.AUD;let i=[];null===mt||void 0===mt||mt.forEach(((e,t)=>{var o,l,n,d;let r=Object(f.g)(null===e||void 0===e?void 0:e.unitPrice,Ge);i.push({item_name:Object(f.fb)(null===e||void 0===e||null===(o=e.item)||void 0===o||null===(l=o.dname[0])||void 0===l?void 0:l.value,"NA"),item_id:Object(f.fb)(null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.id,"NA"),price:Object(f.fb)(parseFloat(r),"NA"),coupon:pt,currency:a,discount:Nt,item_category:(null===e||void 0===e||null===(d=e.item)||void 0===d?void 0:d.categoryName)||"NA",item_list_name:_,item_list_id:"",index:t+0,quantity:Object(f.fb)(null===e||void 0===e?void 0:e.quantity,"NA")})})),Object(V.o)(i,He,a,Mt,t),mt.length>0&&ae(Object(g.r)()),Object(V.p)(He,ee)})()},Yt=(e,t)=>{const{modifiedStoreData:a}=Object(f.ed)(De,Ae,y);if(_t({showModal:!0,orderinfoData:t,enableButton:!0}),e.length){const t=s()(e,{}),n=u()(t,"summary",{}),{currentStatus:d}=u()(n,"status",{}),r=u()(n,"name",{}),c=Object(f.Pd)(t)||Object(f.Od)(t);if(d===E.Y){X({enableScheduleOrder:xt,isFutureTimeOrderAvailable:c,updateReorderDetails:_t,storename:r,service:w})}var i,o,l;if(Pe.localized)((e,t,a)=>{var i,o;Object(f.ef)(null===e||void 0===e?void 0:e.type)!==Object(f.ef)(t)&&a({orderTypeDifferentError:null===(i=Object(N.translateWithI18Next)(x.a.ORDER_TYPE_DIFFERENT_ERROR))||void 0===i?void 0:i.replaceAll("$previousOrderType",'<b class="item-desc-bold capitalize-text">'.concat(Object(N.translateWithI18Next)(null===t||void 0===t?void 0:t.toLowerCase()),"</b>")).replaceAll("$currentOrderType",'<b class="item-desc-bold capitalize-text">'.concat(Object(N.translateWithI18Next)(null===e||void 0===e||null===(o=e.type)||void 0===o?void 0:o.toLowerCase()),"</b>"))})})(ye,ft,_t),te!==(null===(i=ye)||void 0===i||null===(o=i.store)||void 0===o?void 0:o.id)&&_t({locationDifferentError:null===(l=Object(N.translateWithI18Next)(fe))||void 0===l?void 0:l.replaceAll("$storeName",'<b class="item-desc-bold">'.concat(null===a||void 0===a?void 0:a.name,"</b>"))});Rt(!0),Gt(e,!0)}else{var n;_t({storeClosedError:null,storeError:null===(n=Object(N.translateWithI18Next)(Ee))||void 0===n?void 0:n.replace("$storeName",'<b class="item-desc-bold">'.concat(null===a||void 0===a?void 0:a.name,"</b>"))})}};return Object(i.useEffect)((()=>{const e=null===y||void 0===y?void 0:y.service,{modifiedStoreId:t,modifiedStoreData:a,modifiedService:i,modifiedDeliveryAddress:o}=Object(f.ed)(De,Ae,y);ae(Object(p.l)({storeId:t,tenantId:Be},(t=>{const l={data:Object(f.B)([a],i,o,Xe,null===kt||void 0===kt?void 0:kt.latLong),store:[{...t,service:i}],tenantId:Be,setStatusFlag:!1,isFavoritePage:!1};ae(Object(p.d)(l,(t=>{_t({storeDetail:t}),ae(Object(m.f)({tenantId:Be,orderId:k,customerId:Ze,CTO:!!Object(f.Ad)(e)&&void 0},(e=>Yt(t,e))))})))})))}),[]),Object(A.jsx)(A.Fragment,{children:yt.showModal?Object(A.jsx)(P,{...e,onChangeDisposition:Pt,editDeliveryLocation:Ft,onChangeRestaurant:()=>{const{modifiedStoreData:e,modifiedService:t}=Object(f.ed)(De,Ae,y),a=s()(yt.storeDetail,{});var i;a?(_t({showModal:!1}),Te({type:re,value:{dispositionType:a.service}}),Object(f.tf)(Te,null===(i=a.summary)||void 0===i?void 0:i.name),Te({type:Oe,value:{reorderModalOpen:!1}})):(_t({showModal:!1}),Te({type:re,value:{dispositionType:t}}),Object(f.tf)(Te,null===e||void 0===e?void 0:e.name),Te({type:Oe,value:{reorderModalOpen:!1}}))},onClickOrderAgain:Gt,storeError:yt.storeError,locationDifferentError:yt.locationDifferentError,currencySymbol:Ve,currencyConversionFactor:Ge,orderDetails:at,isPastOrderValidationLoading:ct,isAddItemLoading:vt,storeChanged:De,currentStoreInfo:Ae,enableScheduleOrderFlag:Ct,changeDateValue:e=>{var t,a;const i=null===(t=yt.dateTimeArr)||void 0===t?void 0:t.find((t=>{var a;return(null===t||void 0===t||null===(a=t.date)||void 0===a?void 0:a.key)===(null===e||void 0===e?void 0:e.key)}));_t({hasError:{...yt.hasError,error:!1,errormessage:""},selectedDate:i,storeError:null,storeClosedError:null,selectedTime:{...null===i||void 0===i||null===(a=i.timeSlots)||void 0===a?void 0:a[0]}})},changeTimeValue:e=>{_t({hasError:{...yt.hasError,error:!1,errormessage:""},selectedTime:e,storeError:null,storeClosedError:null})},enableScheduleMode:e=>{_t({changeScheduleOrder:!0,scheduleOrderFlag:!0,orderNowFlag:!1})},isStoreClosed:Boolean(yt.storeClosedError),isGenericError:Boolean(yt.storeError),isLocationError:Boolean(yt.locationDifferentError),...yt,elementUniqueLocator:$e}):null})}},1004:function(e,t,a){"use strict";var i=a(3),o=a(25),l=a(52),n=a(57),d=a(268),r=a(6),s=a(4),c=a(121),u=a(43),v=a(15),O=a(49),b=a(5),m=a(36),j=a(2);var h=e=>{const{onCancel:t,setOccasionNameHandler:a,updateFavouriteOrder:i,occasionName:o,isNameExist:l,isInValid:n,isEditOrderName:d=!1,onClearTextHandler:c,disaableButton:O,editFavHeading:b=!1,isAddFavOrderBox:h=!1,errorMessage:p}=e,{CANCEL:g,SAVE:N,OCCASSION_ADD_HEADING:S,OCCASSION_EDIT_HEADING:I,ORDER_PLACEHOLDER:x,NAME_EXIST:f,OCCASION_NAME_VALIDATION:E,EDIT_FAVOURITE_HEADING:C,SAVE_FAV_ORDER:T,PLEASE_FILL_OUT_THIS_FIELD:y}=s.a,D=d?b?C:I:S,A=n?"special-char-error":"name-exist-error";return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"InputHeading",children:Object(r.translateWithI18Next)(h?T:D)}),Object(j.jsx)("form",{children:Object(j.jsxs)("div",{className:"inputLookUpNumbox",children:[Object(j.jsx)("input",{value:o,type:"text","data-testid":"occasion-input",className:l||n?"error-input":"occasion-input-box",required:!0,maxLength:20,onChange:e=>a(e,d),title:Object(r.translateWithI18Next)(y)}),Object(j.jsx)("label",{children:Object(r.translateWithI18Next)(x)}),n&&Object(j.jsxs)("div",{className:"error-text-container ".concat(A),children:[Object(j.jsx)(u.a,{srcFile:v.a.Error}),Object(j.jsx)("span",{className:"error-text","data-testid":"error-text",children:Object(r.translateWithI18Next)(p)})]}),""!==o?Object(j.jsx)("img",{src:v.a.clearTextIcon,alt:"clear-text-btn","data-testid":"clear-text-btn",className:"clearTextIcon",onClick:()=>c()}):null]})}),Object(j.jsxs)("div",{className:"buttonItems",children:[Object(j.jsx)(m.a,{"data-testid":"occasion-cancel-button",className:"button whiteButton blackBorder closebtn-cls",onClick:()=>t(),children:Object(r.translateWithI18Next)(g)}),Object(j.jsx)(m.a,{disabled:O,"data-testid":"submit-button",className:"button blackButton blackBorder save-button",onClickHandler:()=>i(),children:Object(r.translateWithI18Next)(N)})]})]})};t.a=e=>{const{isMobile:t,editItemId:a,setEditItemId:m,showOccassionModal:p,setOccassionModalOpen:g,cardInfo:N,toastmessage:S,hasEdit:I=!1,occasionName:x,setOccasionName:f,isAddFavOrderBox:E,updateSetOrderDetails:C,userParams:T,currencyShortName:y,currencyConversionFactor:D,orderDetail:A,productMapById:R}=e,_=Object(o.b)(),[w,L]=Object(i.useState)(""),[k,M]=Object(i.useState)(""),[P,F]=Object(i.useState)(!0),[W,H]=Object(i.useState)([]),U=Object(o.c)((e=>{var t;return Object(b.jd)(null===(t=e.profileReducer)||void 0===t?void 0:t.favouriteOrders)})),{id:B,phone:G}=Object(o.c)((e=>{var t;return Object(b.kd)(null===(t=e.profileReducer)||void 0===t?void 0:t.basic)})),{favouriteOrderRegex:V,favouriteNameMinLength:Y}=Object(o.c)((e=>Object(b.jd)(e.tenantReducer))),{tenantId:K}=Object(o.c)((e=>Object(b.kd)(e.tenantReducer))),[z,q]=Object(i.useState)(!1),[J,X]=Object(i.useState)(!1),[Q,Z]=Object(i.useState)(""),{FavoriteActiveWhite:$}=v.a,ee=Object(j.jsx)(u.a,{srcFile:$}),te=Object(r.translateWithI18Next)(s.a.FAVORITE_ORDER_NAME_EDITED),ae=Object(b.Tc)(I,"occassion-modal","OccassionModal"),ie=Object(b.Tc)(I,"edit-modal",""),{NAME_EXIST:oe,OCCASION_NAME_VALIDATION:le,OCCASION_NAME_LENGTH_INVALID_CHARS_ERROR:ne,OCCASION_NAME_LENGTH_ERROR:de}=s.a;Object(i.useEffect)((()=>{var e;null===(e=window)||void 0===e||e.scrollTo(0,0)}),[]),Object(i.useEffect)((()=>{M(x),L(x)}),[p]),Object(i.useEffect)((()=>{w&&Object(b.db)(!z,!J)&&(null===w||void 0===w?void 0:w.length)>=Y?F(!1):F(!0)}),[w,z,J]);const re=Object(b.Tc)(I,(()=>{let e=null===w||void 0===w?void 0:w.trim();const t=null===W||void 0===W?void 0:W.indexOf(null===e||void 0===e?void 0:e.toUpperCase()),i=null===V||void 0===V?void 0:V.test(w);let o=null===e||void 0===e?void 0:e.replace(/ /g,"").length;if(Object(b.fb)(!i,0===o))q(!0);else if(i&&t>=0&&k!==w)X(!0),q(!1);else{const e={tenantId:K,customerId:B,phoneNumber:Object(b.Ic)(G)},t={orderId:a,name:w};_(Object(d.a)(e,t)),m(""),ce(),Object(b.qf)(te,ee,"favorites-added-toast"),setTimeout((()=>{l.b.dismiss()}),3e3)}}),(()=>{let e=null===w||void 0===w?void 0:w.trim();const t=null===W||void 0===W?void 0:W.indexOf(null===e||void 0===e?void 0:e.toUpperCase()),a=null===V||void 0===V?void 0:V.test(w);let i=null===e||void 0===e?void 0:e.replace(/ /g,"").length;if(Object(b.fb)(!a,0===i))q(!0);else if(a&&t>=0)X(!0),q(!1);else{const{id:e}=N;_(Object(d.a)({customerId:B,tenantId:K,phoneNumber:Object(b.Ic)(G)},{orderId:e,name:w})),Object(b.db)(p,C)&&C({saveFavoriteSummarySucess:!0}),ce(),Object(b.qf)(S,ee,"favorites-added-toast"),setTimeout((()=>{l.b.dismiss()}),3e3);const t=[],a={userType:Object(b.gd)(null===T||void 0===T?void 0:T.localized,null===T||void 0===T?void 0:T.loggedIn),coupon:(null===A||void 0===A?void 0:A.discountLines)||"NA",value:((null===A||void 0===A?void 0:A.total)/D).toFixed(2),currency:y},i=(null===A||void 0===A?void 0:A.orderedItemDetails)||(null===A||void 0===A?void 0:A.filteredFoodLines);null===i||void 0===i||i.forEach(((e,a)=>{var o,l,n,d,r,s,c,u,v,O,b,m;const{categoryId:j="NA",categoryName:h="NA"}=null!==(o=null===R||void 0===R?void 0:R[null===e||void 0===e||null===(l=e.item)||void 0===l?void 0:l.id])&&void 0!==o?o:{};t.push({item_name:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.name)||"NA",item_id:void 0!==(null===A||void 0===A?void 0:A.orderedItemDetails)?(null===e||void 0===e?void 0:e.id)||"NA":null===e||void 0===e||null===(d=e.item)||void 0===d?void 0:d.id,price:Number(((null===e||void 0===e?void 0:e.amount)/D).toFixed(2))||0,item_category:""!==h?(null===(r=i[a])||void 0===r?void 0:r.categoryUrl)||(null===(s=i[a])||void 0===s||null===(c=s.item)||void 0===c?void 0:c.categoryUrl):h,item_list_name:""!==h?(null===(u=i[a])||void 0===u?void 0:u.categoryUrl)||(null===(v=i[a])||void 0===v||null===(O=v.item)||void 0===O?void 0:O.categoryUrl):h,item_list_id:void 0!==(null===A||void 0===A?void 0:A.orderedItemDetails)?""!==j?null===(b=i[a])||void 0===b?void 0:b.id:j:null===e||void 0===e||null===(m=e.item)||void 0===m?void 0:m.id,index:a,quantity:(null===e||void 0===e?void 0:e.quantity)||0})})),Object(O.i)(t,a)}}));Object(i.useEffect)((()=>{const e=[];null===U||void 0===U||U.map((t=>{var a,i;return null===e||void 0===e?void 0:e.push(null===t||void 0===t||null===(a=t.name)||void 0===a||null===(i=a.toUpperCase())||void 0===i?void 0:i.trim())})),H(e),a&&(q(!1),X(!1))}),[a]);const se={id:"occassion-modal",role:"dialog",modalTitleId:ae,show:p,classNames:"Base-modal ".concat(Object(b.Tc)(t,"Mobile-occassion-modal","Occassion-modal")),showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:()=>ce(),modalTitle:"",modalTitleRequired:!1,closeDataTestId:"close-modal",autoFocus:!0},ce=Object(b.Tc)(I,(()=>{X(!1),q(!1),g(!1)}),(()=>{g(!1)}));return Object(i.useEffect)((()=>{((e,t,a,i)=>{if(e){const o={customerId:t,tenantId:e,phoneNumber:Object(b.Ic)(a),updateUserData:!0};i(Object(n.d)(o))}})(K,B,G,_)}),[_,K,B,G]),Object(j.jsx)("div",{className:"account-order-desktop",id:"favourite-orders-global",children:Object(j.jsx)("div",{className:"sub-section sub-section-favourite",children:Object(j.jsx)("section",{children:Object(j.jsx)(c.a,{...se,children:Object(j.jsx)("div",{className:"OccassionModal add-occassion-global",children:Object(j.jsx)(h,{onCancel:ce,setOccasionNameHandler:(e,t)=>{var a;const i=null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value,o=null===W||void 0===W?void 0:W.includes(null===i||void 0===i?void 0:i.toUpperCase()),l=null===V||void 0===V?void 0:V.test(i),n=(null===i||void 0===i?void 0:i.length)<3;let d="";""!==i&&(n&&!l?d=ne:n?d=de:l?o&&(d=oe):d=le),F(!!d),q(!!d),X(d===oe),Z(d),f(i),L(i)},updateFavouriteOrder:re,occasionName:w,isNameExist:J,isInValid:z,onClearTextHandler:()=>{f(""),L(""),X(!1),q(!1)},disaableButton:P,isEditOrderName:I,editFavHeading:I,"data-testid":ie,isAddFavOrderBox:E,errorMessage:Q})})})})})})}},1006:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var i=a(3),o=a.n(i),l=a(6),n=a(36),d=a(996),r=a(4),s=a(43),c=a(15),u=(a(1015),a(2));const{Error:v}=c.a,O=e=>{const{showConfirmBtn:t=!1,onClickHandler:a}=e,{CONFIRM_BTN_TEXT:i}=r.a;return Object(u.jsxs)(o.a.Fragment,{children:[Object(u.jsxs)("div",{className:"delivery-address-section",children:[Object(u.jsx)(d.a,{...e}),t&&Object(u.jsx)("form",{children:Object(u.jsx)(n.a,{className:"button blackButton blackBorder delivery-confirm-button","data-testid":"btn-confirm",disabled:!e.confirm,onClick:a,children:Object(l.translateWithI18Next)(i)})})]}),Object(u.jsx)("div",{className:"placesautocomplete-border"}),Object(u.jsx)("span",{className:"d-none",children:Object(u.jsx)(s.a,{srcFile:v,className:"location-alert-icon"})})]})},b=o.a.memo(O)},1007:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var i=a(3),o=a.n(i),l=a(6),n=a(212),d=a(43),r=a(216),s=a(318),c=a(15),u=a(2);const{LocationImage:v}=c.a,O=e=>{const{loggedIn:t=!1,formContent:a={},useCurrentLocation:i,storeSelection:o,hideLocationLink:c,showLocationConfirmModal:O}=e,{signInLink:b,useMyLocation:m}=o,{memberText:j="",singInLink:h={},currentLocationText:p=""}=a;return Object(u.jsxs)("div",{className:"login-section",children:[b&&Object(u.jsx)("span",{className:"delivery-member-signin",children:!t&&Object(r.f)(j,s.R,h)}),m&&Object(u.jsx)("span",{className:"".concat(O?"disable-location-link":""),children:Object(u.jsxs)(n.a,{onClickHandler:i,className:"delivery-location-link","data-testid":"use-my-location",children:[Object(u.jsx)(d.a,{"data-testid":"",srcFile:v,alt:" ",className:"location-img"}),Object(l.translateWithI18Next)(p)]})})]})},b=o.a.memo(O)},1008:function(e,t,a){"use strict";var i=a(5),o=a(3),l=a(1013),n=a(43),d=a(981),r=a(111),s=a(15),c=a(0),u=a(25),v=a(2);const{UseLocationIcon:O}=s.a,b=e=>{var t,a,s,b,m;const{eligibleStores:j,loggedIn:h,defaultStoreId:p,selectedCoords:g,passAddress:N,configSearchKey:S,useCurrentLocation:I,showLocationConfirmModal:x,findAKFC:f,favouriteStores:E,useLatLngForReverseGeocode:C,disableMapSelection:T=!1,disableUseLocationIcon:y=!1,markerDragValue:D=!1,zoomLevel:A=12}=e,R=Object(u.c)((e=>(null===e||void 0===e?void 0:e.tenantReducer)||{})),{componentOptions:_,countryCode:w}=R,L=null===R||void 0===R||null===(t=R.componentOptions)||void 0===t||null===(a=t.web)||void 0===a||null===(s=a.dispositionConfig)||void 0===s?void 0:s.showLabelOnMapPin,k=null===_||void 0===_||null===(b=_.web)||void 0===b?void 0:b.dispositionConfig,{shouldShowStoresLocation:M,shouldShowStoreCardsMap:P,shouldShowMarkerWithText:F,shouldIgnoreStoreList:W,storeOpenBtnText:H}={...null===r.d||void 0===r.d?void 0:r.d[S],...null===k||void 0===k?void 0:k[S]},[U,B]=Object(o.useState)(Object(i.Ud)(window.innerWidth)),[G,V]=Object(o.useState)(p),[Y,K]=Object(o.useState)({storeDetails:{},storeIndex:0}),[z,q]=Object(o.useState)([]),[J,X]=Object(o.useState)(!0),[Q,Z]=Object(o.useState)(200),[$,ee]=Object(o.useState)(400),te=e=>{let t=null===j||void 0===j?void 0:j.findIndex((t=>(null===t||void 0===t?void 0:t.id)===e));t=-1===t?0:t,K({storeDetails:null===j||void 0===j?void 0:j[t],storeIndex:t}),X(Boolean(null===j||void 0===j?void 0:j.length))},ae=()=>{var e,t;const a=Object(i.Ud)(window.innerWidth);B(a);const o=null===(e=document.getElementById("search-store-global-content"))||void 0===e?void 0:e.clientHeight,l=null===(t=document.querySelector(".modal-body"))||void 0===t?void 0:t.clientHeight;let n=.9*(l-o);if(a){var d,r;n=l-o-(null===(d=document.getElementById("store-card-".concat(null===Y||void 0===Y||null===(r=Y.storeDetails)||void 0===r?void 0:r.id)))||void 0===d?void 0:d.clientHeight)}ee(n)};Object(o.useEffect)((()=>(window.addEventListener("resize",ae),()=>{window.removeEventListener("resize",ae)})),[U]),Object(o.useEffect)((()=>{te(G)}),[G,E]),Object(o.useEffect)((()=>{j.length>0&&te(G)}),[j,G]),Object(o.useEffect)((()=>{const e=c.cd[w]||{lat:-35.2809,lng:149.13},t=null===j||void 0===j?void 0:j.map((e=>({lat:+e.location.latitude,lng:+e.location.longitude})));let a=null!==g&&void 0!==g&&g.lat?g:e;null!==t&&void 0!==t&&t.length?q(t):q(a)}),[E,G,j]),Object(o.useEffect)((()=>{var e,t;const a=null===(e=document.getElementById("store-card-".concat(null===Y||void 0===Y||null===(t=Y.storeDetails)||void 0===t?void 0:t.id)))||void 0===e?void 0:e.clientHeight;a&&Z(a)}),[null===Y||void 0===Y||null===(m=Y.storeDetails)||void 0===m?void 0:m.id]),Object(o.useEffect)((()=>{ae()}),[]);const ie=Object(i.xe)(J,P);return Object(v.jsxs)("div",{className:"takeawayDineInMap delivery-map global-map ".concat(T&&"block-map"),children:[Object(v.jsxs)("div",{className:f?"".concat(Object(i.Tc)(ie,"mapcard-container","no-mapcard-container")):"selectkfc-map-container",children:[Object(v.jsx)(l.a,{latLongValue:z,loadingElement:Object(v.jsx)("div",{style:{height:"100%"}}),containerElement:Object(v.jsx)("div",{style:{height:"400px"}}),mapElement:Object(v.jsx)("div",{style:{height:"100%"}}),passAddress:N,isVisible:M,isMobile:U,centerIndex:null===Y||void 0===Y?void 0:Y.storeIndex,onPositionChangeHandler:e=>{if(0===e){var t;const e=null===j||void 0===j||null===(t=j[(null===Y||void 0===Y?void 0:Y.storeIndex)-1])||void 0===t?void 0:t.id;te(e),V(e)}else if(1===e){var a;const e=null===j||void 0===j||null===(a=j[(null===Y||void 0===Y?void 0:Y.storeIndex)+1])||void 0===a?void 0:a.id;te(e),V(e)}},setShowCard:X,setStoreMarker:e=>{const t=Object(i.U)(j,e);t&&(te(null===t||void 0===t?void 0:t.id),V(null===t||void 0===t?void 0:t.id))},storeCardHeight:Q,isMarkerVisible:W||Boolean(null===j||void 0===j?void 0:j.length),shouldShowMarkerWithText:F,locationAlertProp:F,style:{height:"".concat($,"px")},defaultZoom:A,useLatLngForReverseGeocode:C,markerDragValue:D,showLabelOnMapPin:L}),!y&&Object(v.jsx)("div",{className:"use-location-icon ".concat(x?"disable-location-icon":""),children:Object(v.jsx)(n.a,{srcFile:O,alt:"",onClick:I,"data-testid":"use-location-icon"})})]}),Object(v.jsx)("div",{className:f?"".concat(Object(i.Tc)(ie,"store-dynamic-mapcard-container","store-no-mapcard-container")):"selectkfc-mapcard-container",children:ie&&(null===Y||void 0===Y?void 0:Y.storeDetails)&&Object(v.jsx)(d.a,{store:null===Y||void 0===Y?void 0:Y.storeDetails,isMapView:!0,loggedIn:h,centerIndex:null===Y||void 0===Y?void 0:Y.storeIndex,storeLength:null===j||void 0===j?void 0:j.length,findAKFC:f,storeOpenBtnText:H})})]})};b.defaultProps={eligibleStores:[],loggedIn:!1,defaultStoreId:"",selectedCoords:{},passAddress:null,configSearchKey:"FORM",useCurrentLocation:null},t.a=b},1013:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(38),n=a(325),d=a(6),r=a(5),s=a(76),c=a(0),u=a(15),v=a(2);t.a=e=>{const{userOrderState:t}=o.a.useContext(s.a),{dispositionStateData:a={}}=t,{DISPOSITION_TYPE:O}=c.gd,{dispositionType:b=localStorage.getItem(O)}=a,{locationAlertProp:m,negativeScenarioAlertProp:j,isMobile:h,onPositionChangeHandler:p,centerIndex:g,isVisible:N,setShowCard:S,locationAlert:I,setStoreMarker:x=r.L,passAddress:f,storeCardHeight:E,latLongValue:C,isMarkerVisible:T=!0,style:y,defaultZoom:D=10,shouldShowMarkerWithText:A=b!==c.Af,useLatLngForReverseGeocode:R=!1,markerDragValue:_=!1,showLabelOnMapPin:w}=e,{PLACE_PIN:L}=l.a,{RedMarker:k,RedMarkerNoText:M,BlackMarker:P,ArrowIcon:F}=u.a,W=Object(i.useRef)(null),H=Object(i.useRef)(null),U=Object(i.useRef)([]),[B,G]=Object(i.useState)(!1),[V,Y]=Object(i.useState)(D),[K,z]=Object(i.useState)(C),[q,J]=Object(i.useState)(!1),[X,Q]=Object(i.useState)(g);Object(i.useEffect)((()=>{H.current=Z(K),U.current=ee(K)}),[]),Object(i.useEffect)((()=>{B||z(C)}),[C]),Object(i.useEffect)((()=>{if(U.current&&H.current){const e=H.current,t=U.current;K.length!==t.length&&(t.forEach((e=>{e.setMap(null)})),U.current=ee(K)),Array.isArray(K)&&K.length>0?(K.forEach(((e,a)=>{t[a]&&t[a].setPosition(e)})),e.setCenter(K[g])):(t[0]&&t[0].setPosition(K),e.setCenter(K))}}),[K,g]),Object(i.useEffect)((()=>{if(U.current&&H.current){U.current.forEach(((e,t)=>{t===X?e.setIcon($()):e.setIcon(P)}))}}),[X]);const Z=e=>new window.google.maps.Map(W.current,{zoom:V,center:Array.isArray(e)&&e.length>0?e[g]:e,disableDefaultUI:!0,fullscreenControl:!1,zoomControl:!h,gestureHandling:"greedy"}),$=()=>A&&w?k:M,ee=e=>{const t=new window.google.maps.Geocoder;let a=e;const i=H.current;N?(i.addListener("zoom_changed",(()=>{const e=U.current[g];e&&(x(e.internalPosition),S(!0)),J(!0)})),i.addListener("drag",(()=>{J(!0)}))):(i.addListener("drag",(()=>{_||(Y(null===i||void 0===i?void 0:i.getZoom()),a={lat:i.getCenter().lat(),lng:i.getCenter().lng()},U.current[0]&&U.current[0].setPosition(a))})),i.addListener("dragend",(function(){_||(Y(null===i||void 0===i?void 0:i.getZoom()),te(t,i,a),G(!0))})));let o=(Array.isArray(a)&&a.length>0?a:[a]).map(((e,a)=>{let o=new window.google.maps.Marker({position:e,map:i,draggable:_,visible:T,icon:Object(r.id)(!N,N&&a===X)?$():P});return((e,t)=>{null===e||void 0===e||e.addListener("click",(function(e){x(e.latLng),Q(t),S(!0)}))})(o,a),_&&((e,t,a)=>{null===e||void 0===e||e.addListener("dragend",(function(e){var i,o;let l={lat:null===e||void 0===e||null===(i=e.latLng)||void 0===i?void 0:i.lat(),lng:null===e||void 0===e||null===(o=e.latLng)||void 0===o?void 0:o.lng()};te(a,t,l),G(!0)}))})(o,i,t),o}));return o};function te(e,t,a){e.geocode({location:a},((e,t)=>{if(t===c.Kd){let t=((e,t)=>{let a=[];return e&&(a=null===t||void 0===t?void 0:t.filter((e=>{var t;return null===e||void 0===e||null===(t=e.types)||void 0===t?void 0:t.includes(c.he)}))),Object(r.Id)(a)?null===t||void 0===t?void 0:t.filter((e=>{var t;return!(null!==e&&void 0!==e&&null!==(t=e.types)&&void 0!==t&&t.includes(c.he))})):a})(R,e);var i;if(t[0])f(null===t||void 0===t||null===(i=t[0])||void 0===i?void 0:i.formatted_address,a)}}))}const ae=Object(r.xe)(h,!q,T,A);return Object(v.jsxs)(o.a.Fragment,{children:[!m&&((null===b||void 0===b?void 0:b.toUpperCase())!==c.Af||""!==j&&j?null:Object(v.jsx)("div",{className:"map-top-note ".concat(Object(r.Tc)(I,"place-pin-off","")),children:Object(v.jsx)("div",{className:"map-top-note-text","data-testid":"map-top-text-test",children:Object(d.translateWithI18Next)(L)})})),ae&&Object(v.jsxs)("div",{className:"arrows",children:[Object(v.jsx)("span",{className:"map-arrow-left ".concat(Object(r.db)(0===g,"disableArrow")),"data-testid":"map-arrow-left",onClick:e=>Object(r.Tc)(0===g,e.preventDefault(),p(0)),children:Object(v.jsx)(n.a,{srcFile:F,alt:"map-arrow-left"})}),Object(v.jsx)("span",{className:"map-arrow-right ".concat(g===K.length-1&&"disableArrow"),"data-testid":"map-arrow-right",onClick:e=>g===K.length-1?e.preventDefault():p(1),children:Object(v.jsx)(n.a,{srcFile:F,alt:"map-arrow-right"})})]}),Object(v.jsx)("div",{id:"google-map",ref:W,style:{height:"240px",...y}})]})}},1015:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(25),n=a(61),d=a(57),r=a(6),s=a(4),c=a(36),u=a(15),v=a(5),O=a(2);const b=o.a.createRef();var m=e=>{var t;const{onClickHandler:a,currencyConversionFactor:i,isDarkMode:o=!1,dataTestId:n,title:d,onEditOccasionName:c,itemId:m,itemName:j,showContent:h,setCurrentIndex:p,currentIndex:g,index:N}=e,{AccordianArrow:S,AccordianUpArrow:I,AccordianDownDark:x,AccordianUpDark:f}=u.a,E=Object(l.c)((e=>{var t;return(null===(t=e.profileReducer)||void 0===t?void 0:t.favouriteOrders)||[]})),{flatResponse:{productMapById:C={}}={}}=null!==(t=Object(l.c)((e=>{let{menuReducer:t}=e;return t})))&&void 0!==t?t:{},T=e=>{p(Object(v.Tc)(g!==N,N,null)),!h&&(null===a||void 0===a||a(m,E,C,b.current,i))};return Object(O.jsxs)("div",{className:"global-accordian-container favorite-container-global ".concat(h?"account-accordian-open":""),ref:b,children:[Object(O.jsxs)("div",{className:"global-accordian-header-container",children:[Object(O.jsx)("span",{className:"global-accordian-header",children:d&&Object(O.jsxs)("div",{className:"occasion-accordian-header-global",children:[Object(O.jsx)("span",{className:"order-accordian-heading",children:d}),Object(O.jsx)("div",{className:"edit-occasion-link","data-testid":"edit-occasion-modal",onClick:()=>{c(m,j)},children:Object(r.translateWithI18Next)(null===s.a||void 0===s.a?void 0:s.a.EDIT_FAVORITE_NAME)})]})}),Object(O.jsx)("div",{className:"global-accordian-right","data-testid":"favorite-order-dropdown",children:o?Object(O.jsx)("img",{src:h&&f||x,onClick:T,className:"global-accordian-arrow","data-testid":"acordian-handle-dark",alt:""}):Object(O.jsx)("img",{src:h&&I||S,onClick:T,className:"global-accordian-arrow","data-testid":n,alt:""})})]}),h&&Object(O.jsx)("div",{className:"global-accordian-content",children:e.children})]})},j=a(43),h=a(332);a(336);var p=e=>{const{occassionOrder:t,tenantReducer:a,imageContainerSize:i,plpbackgroundImageData:l}=e,{currencySymbol:n,addHope:d,carryBag:r,currencyConversionFactor:s,taxAmountRoundOff:c}=a,{items:u}=t;let b=Object(h.k)(u,d,r);return Object(O.jsx)(o.a.Fragment,{children:null===b||void 0===b?void 0:b.map((e=>{var t;return Object(O.jsx)("div",{className:"account-accordian-details-section",children:Object(O.jsxs)("div",{className:"option-section option-section-fav-menu default-img",children:[Object(O.jsx)("div",{style:Object(v.ib)(l,i.width,i.height),className:"product-image-parent-container-fav-menu",children:e.content&&Object(O.jsx)(j.a,{className:"favourite-order-img-sopac",srcFile:Object(v.lc)(e.content,i.width,i.height),alt:"No-Image",defaultPath:Object(v.Xb)(e.imageName,a,!0)})}),Object(O.jsxs)("div",{className:"favourite-order-details fav-order-details-global",children:[Object(O.jsxs)("span",{className:"fav-orders-item-name",children:[null===e||void 0===e?void 0:e.quantity,"x ",null===e||void 0===e?void 0:e.name]}),Object(O.jsx)("span",{className:"fav-item-price","data-testid":"".concat(e.id,"-fav-item-price"),children:Object(v.I)(null!==(t=null===e||void 0===e?void 0:e.priceWithTax)&&void 0!==t?t:null===e||void 0===e?void 0:e.price,{currencySymbol:n,currencyConversionFactor:s},"",c)})]})]})})}))})},g=a(268),N=a(121);var S=e=>{const{onCancelHandler:t,onRemoveHandler:a}=e,{REMOVE:i,CANCEL:o,REMOVE_FROM_FAVMODAL_MSG:l}=s.a;return Object(O.jsxs)("div",{className:"remove-from-favorite-orders-modal",children:[Object(O.jsx)("div",{className:"remove-message-section",children:Object(O.jsx)("p",{className:"remove-message",children:Object(r.translateWithI18Next)(l)})}),Object(O.jsxs)("div",{className:"buttonItems remove-from-fav-modal-btns",children:[Object(O.jsx)(c.a,{"data-testid":"cancel-remove-favOrders",className:"button whiteButton blackBorder closebtn-cls",onClickHandler:t,children:Object(r.translateWithI18Next)(o)}),Object(O.jsx)(c.a,{"data-testid":"yes-keep-it-btn",className:"button blackButton blackBorder save-button",onClickHandler:a,children:Object(r.translateWithI18Next)(i)})]})]})};var I=e=>{const{item:t,setIsModalOpen:a,tenantId:i,customerId:o,currentItemId:n}=e,d=Object(l.b)(),c=Object(O.jsx)(j.a,{srcFile:u.a.FavoriteInActiveWhite}),b=Object(r.translateWithI18Next)(s.a.REMOVED_FROM_FAVORDERS),m=()=>{a(!1)},h={id:"removeFromFavOrders",role:"dialog",modalTitleId:"FavouriteOrdersRemove",show:!0,classNames:"test",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:m,modalTitle:"",modalTitleRequired:!1,closeDataTestId:"close-modal",autoFocus:!0};return Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{...h,children:Object(O.jsx)(S,{onCancelHandler:m,setIsModalOpen:a,onRemoveHandler:e=>{var t,l,r;const s=null===(t=e.target)||void 0===t||null===(l=t.parentElement)||void 0===l||null===(r=l.parentElement)||void 0===r?void 0:r.parentElement;null!==s&&void 0!==s&&s.classList.contains("account-accordian-open")&&(null===s||void 0===s||s.classList.remove("account-accordian-open")),a(!1),(async(e,t,a)=>{await d(Object(g.b)({tenantId:e,customerId:t,itemId:a}))})(i,o,n),Object(v.qf)(b,c,"favorites-added-toast")},item:t,"data-testid":"remove-modal"})})})},x=a(1003),f=a(0),E=a(1004),C=a(76),T=a(14),y=a(9),D=a(49);var A=a(327);const R=(e,t,a,i,o)=>{var l,n,d,r;const{ACCOUNT_FAV_PAGE:s}=A.d;null!==i&&void 0!==i&&null!==(l=i.classList)&&void 0!==l&&l.contains("account-accordian-open")?null===i||void 0===i||null===(n=i.classList)||void 0===n||n.remove("account-accordian-open"):null===i||void 0===i||null===(d=i.classList)||void 0===d||d.add("account-accordian-open");const c=null===t||void 0===t?void 0:t.find((t=>e===(null===t||void 0===t?void 0:t.id))),u=null===c||void 0===c?void 0:c.service;((e,t)=>{var a,i,o;Object(D.p)(null===y.a||void 0===y.a||null===(a=y.a.accountViewFavItemList)||void 0===a?void 0:a.name,{data:{event:"view_item_list",disposition:Object(v.h)(t),ecommerce:{item_list_id:null===e||void 0===e||null===(i=e[0])||void 0===i?void 0:i.item_list_id,item_list_name:null===e||void 0===e||null===(o=e[0])||void 0===o?void 0:o.item_list_name,items:e}}})})(null===c||void 0===c||null===(r=c.items)||void 0===r?void 0:r.map(((e,t)=>{var i;const{categoryId:l="NA",categoryName:n="NA"}=null!==(i=null===a||void 0===a?void 0:a[e.id])&&void 0!==i?i:{};return{item_name:null===e||void 0===e?void 0:e.name,item_id:null===e||void 0===e?void 0:e.id,price:Object(v.fb)(Number(((null===e||void 0===e?void 0:e.price)/o).toFixed(f.dg)),0),item_category:n,item_list_name:s,item_list_id:l,index:t,quantity:null===e||void 0===e?void 0:e.quantity,coupon:Object(v.fb)(null===c||void 0===c?void 0:c.couponCode,"NA"),discount:Object(v.fb)((null===c||void 0===c?void 0:c.discountTotal)/o,0),currency:f.p.AUD}})),u)};t.a=e=>{const{updateMenu:t,imageContainerSize:a}=e,o=Object(l.b)(),b=Object(n.g)(),{userOrderState:j,userOrderStateDispatch:h}=Object(i.useContext)(C.a),[g,N]=Object(i.useState)(""),[S,y]=Object(i.useState)(""),A=Object(l.c)((e=>{var t;return(null===(t=e.profileReducer)||void 0===t?void 0:t.favouriteOrders)||[]})),{id:_,phone:w}=Object(l.c)((e=>{var t;return Object(v.kd)(null===(t=e.profileReducer)||void 0===t?void 0:t.basic)})),{tenantId:L,currencyConversionFactor:k}=Object(l.c)((e=>e.tenantReducer||{})),M=Object(l.c)((e=>e.tenantReducer)),{cartData:P}=Object(l.c)((e=>e.cartReducer||{})),[F,W]=Object(i.useState)(!1),[H,U]=Object(i.useState)(!1),[B,G]=Object(i.useState)(!1),[V,Y]=Object(i.useState)(!1),[K,z]=Object(i.useState)(null),{SingleArrowback:q,FavouriteActiveBlack:J}=u.a,{reorderFlag:{reorderModalOpen:X=!1}}=j,[Q,Z]=Object(i.useState)({}),{headerData:{plpBackgroundImage:$={}}={}}=Object(l.c)((e=>{var t;return Object(v.kd)(null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response)})),ee=Object(l.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),te=Object(v.hb)($),{REORDER_MODAL_OPEN:ae,FROM_REORDER_MODAL_OPEN:ie,REORDER_STORE_CHANGED:oe}=T.a;Object(i.useEffect)((()=>{var e;null===(e=window)||void 0===e||e.scrollTo(0,0)}),[]);const le=()=>{h({type:ae,value:{reorderModalOpen:!1}}),h({type:ie,value:{fromReorderFlag:!1}}),h({type:oe,value:{storeChanged:!1}})};Object(i.useEffect)((()=>()=>le()),[]);const ne=(e,t)=>{W(!0),e&&(N(e),y(t),U(!1),G(!1))};Object(i.useEffect)((()=>{((e,t,a,i)=>{if(e){const o={customerId:t,tenantId:e,phoneNumber:Object(v.Ic)(a),updateUserData:!0};i(Object(d.d)(o))}})(L,_,w,o)}),[o,L,_,w]);const[de,re]=Object(i.useState)(null);return Object(O.jsxs)("div",{className:"account-order-desktop",id:"favourite-orders-global",children:[Object(O.jsxs)("div",{className:"account-settings-header-mobile",children:[Object(O.jsx)("img",{className:"backArrow-account-setting","data-testid":"fav-menu-backArrow",onClick:()=>t(""),src:q,alt:"back button"}),Object(O.jsx)("span",{className:"account-setting-text-header",children:Object(r.translateWithI18Next)(s.a.FAVOURITES)})]}),Object(O.jsxs)("div",{className:"page-header page-header-favourite-occasion",children:[Object(O.jsx)("img",{src:J,className:"account-icon mr-2",alt:""}),Object(O.jsx)("span",{className:"page-heading",children:Object(r.translateWithI18Next)(null===s.a||void 0===s.a?void 0:s.a.ORDER_AGAIN)})]}),!(null!==A&&void 0!==A&&A.length)&&Object(O.jsx)("div",{className:"no-occasion-container",children:Object(O.jsx)("p",{children:Object(r.translateWithI18Next)(null===s.a||void 0===s.a?void 0:s.a.MY_OCCASSION_UNAVAILABLE_TITLE)})}),A&&(null===A||void 0===A?void 0:A.map(((t,i)=>Object(O.jsx)("div",{className:"sub-section sub-section-favourite",children:Object(O.jsxs)("section",{children:[Object(O.jsx)("section",{className:"account-accordian",children:Object(O.jsxs)(m,{onClickHandler:R,currencyConversionFactor:k,title:null===t||void 0===t?void 0:t.name,onEditOccasionName:ne,itemId:null===t||void 0===t?void 0:t.id,itemName:null===t||void 0===t?void 0:t.name,"data-testid":"order-details",setOccassionModalOpen:W,currentIndex:de,setCurrentIndex:re,index:i,showContent:de===i,children:[Object(O.jsx)(p,{occassionOrder:t,tenantReducer:M,"data-testid":"occasion-component",plpbackgroundImageData:te,imageContainerSize:a}),Object(O.jsx)("section",{className:"fav-menu-event",children:Object(O.jsxs)("div",{className:"global-accordian-header-container mobile-accordian-reorder-container",children:[Object(O.jsx)("span",{className:"global-accordian-header mobile-accordian-header",children:Object(O.jsx)("span",{className:"order-receipt-option remove-from-fav","data-testid":"delete-occassion",onClick:()=>{Y(!0),z(null===t||void 0===t?void 0:t.id)},children:Object(r.translateWithI18Next)(null===s.a||void 0===s.a?void 0:s.a.REMOVE_FAVOURITES)})}),Object(O.jsx)("br",{}),Object(O.jsx)("div",{className:"global-accordian-right",children:Object(O.jsx)(c.a,{className:"button re-order-btn ".concat(Object(v.yd)(null===t||void 0===t?void 0:t.service)?"":"redButton"),"aria-label":"",type:"submit","data-testid":"re-order-btn",onClick:()=>{var a;Object(v.yd)(null===t||void 0===t?void 0:t.service)?(a={...e,history:b},Object(v.yd)(null===P||void 0===P?void 0:P.service)?Object(v.Fe)(a):h({type:null===f.Ne||void 0===f.Ne?void 0:f.Ne.UPDATE_CATERING_RETAIL_MENU_ALERT,value:{flag:!0,pathname:null===f.Ae||void 0===f.Ae?void 0:f.Ae.CATERING_PAGE,title:null===s.a||void 0===s.a?void 0:s.a.CATERING_NAVALERT_TITLE,contentMsg:null===s.a||void 0===s.a?void 0:s.a.CATERING_NAVALERT_SUBTITLE}})):(e=>{(null===ee||void 0===ee||!ee.localized)&&Object(D.o)(),Z(e),h({type:ae,value:{reorderModalOpen:!0}}),h({type:ie,value:{fromReorderFlag:!0}}),sessionStorage.setItem(f.gd.REORDER_CLICK,!0)})(t)},children:Object(O.jsx)("span",{children:Object(r.translateWithI18Next)(Object(v.yd)(null===t||void 0===t?void 0:t.service)?null===s.a||void 0===s.a?void 0:s.a.EXPLORE_CATERING:null===s.a||void 0===s.a?void 0:s.a.ORDER_AGAIN)})})})]})})]},i)}),V&&Object(O.jsx)(I,{item:t,setIsModalOpen:Y,isModalOpen:V,tenantId:L,customerId:_,itemId:null===t||void 0===t?void 0:t.id,currentItemId:K}),F&&Object(O.jsx)(E.a,{showOccassionModal:F,setOccassionModalOpen:W,occasionName:S,setOccasionName:y,editItemId:g,setEditItemId:N,hasEdit:!0})]})})))),X&&Object(O.jsx)(x.a,{currentOrderInfo:Q,reorderModalOpen:X,closeButtonHandler:le,source:f.ve.ACCOUNT_FAVOURITES})]})}},1018:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(1);function o(e){return{type:i.fe,payload:e}}},1020:function(e,t,a){},1021:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r}));var i=a(3),o=a.n(i);const l=o.a.createContext({}),n=!0;function d(e){let{baseColor:t,highlightColor:a,width:i,height:o,borderRadius:l,circle:d,direction:r,duration:s,enableAnimation:c=n}=e;const u={};return"rtl"===r&&(u["--animation-direction"]="reverse"),"number"===typeof s&&(u["--animation-duration"]="".concat(s,"s")),c||(u["--pseudo-element-display"]="none"),"string"!==typeof i&&"number"!==typeof i||(u.width=i),"string"!==typeof o&&"number"!==typeof o||(u.height=o),"string"!==typeof l&&"number"!==typeof l||(u.borderRadius=l),d&&(u.borderRadius="50%"),"undefined"!==typeof t&&(u["--base-color"]=t),"undefined"!==typeof a&&(u["--highlight-color"]=a),u}function r(e){let{count:t=1,wrapper:a,className:i,containerClassName:r,containerTestId:s,circle:c=!1,style:u,...v}=e;var O,b,m;const j=o.a.useContext(l),h={...v};for(const[o,l]of Object.entries(v))"undefined"===typeof l&&delete h[o];const p={...j,...h,circle:c},g={...u,...d(p)};let N="react-loading-skeleton";i&&(N+=" ".concat(i));const S=null!==(O=p.inline)&&void 0!==O&&O,I=[],x=Math.ceil(t);for(let l=0;l<x;l++){let e=g;if(x>t&&l===x-1){const a=null!==(b=e.width)&&void 0!==b?b:"100%",i=t%1,o="number"===typeof a?a*i:"calc(".concat(a," * ").concat(i,")");e={...e,width:o}}const a=o.a.createElement("span",{className:N,style:e,key:l},"\u200c");S?I.push(a):I.push(o.a.createElement(o.a.Fragment,{key:l},a,o.a.createElement("br",null)))}return o.a.createElement("span",{className:r,"data-testid":s,"aria-live":"polite","aria-busy":null!==(m=p.enableAnimation)&&void 0!==m?m:n},a?I.map(((e,t)=>o.a.createElement(a,{key:t},e))):I)}function s(e){let{children:t,...a}=e;return o.a.createElement(l.Provider,{value:a},t)}},1022:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(28),n=a(4),d=a(92),r=a(84),s=a(15),c=a(2);t.a=e=>{let{confirmationMsg:t,handleClose:a,handleConfirmBtn:i,imageSrc:u}=e;const{CONFIRM_BTN_TEXT:v,CANCEL:O}=n.a;return Object(c.jsx)(o.a.Fragment,{children:Object(c.jsx)(d.a,{handleClose:a,classNames:"delete-account-modal unlink-confirmation-modal",CartAlertForm:Object(c.jsx)(r.a,{title:t,cancelButtonText:Object(l.translateWithI18Next)(O),confirmButtonText:Object(l.translateWithI18Next)(v),confirmHandler:i,cancelHandler:a,imageSrc:s.a.PictogramAlertIcon})})})}},1023:function(e,t,a){"use strict";a.d(t,"d",(function(){return I})),a.d(t,"e",(function(){return _})),a.d(t,"c",(function(){return w})),a.d(t,"g",(function(){return L})),a.d(t,"b",(function(){return k})),a.d(t,"a",(function(){return M})),a.d(t,"f",(function(){return P}));var i=a(6),o=(a(268),a(175)),l=(a(326),a(36),a(171)),n=a(4),d=a(121),r=a(825),s=a(1081),c=(a(43),a(15),a(1004)),u=a(0),v=a(154),O=a(1058),b=a(5),m=a(12),j=a(13),h=a(215),p=a(1059),g=a(331),N=a(11),S=a(2);const I=e=>{var t,a,i,o;const{orderDetails:n,updateSetOrderDetails:r}=e,{deliveryAddress:s={},store:c,isOpenOrderSummaryDirectionMap:u=!0,isMobileView:v=!1}=n,O={role:"dialog",modalTitleId:"direction-map-modal",show:!0,classNames:"map-modal",showCloseBtn:u,closeButtonHandler:()=>{r({isOpenOrderSummaryDirectionMap:!1})},modalTitle:"",showBackBtn:v,closeDataTestId:"close-direction-map-modal",id:"directionMapModal",autoFocus:!0},b=[null===c||void 0===c||null===(t=c.location)||void 0===t?void 0:t.latitude,null===c||void 0===c||null===(a=c.location)||void 0===a?void 0:a.longitude],m=[null===s||void 0===s||null===(i=s.location)||void 0===i?void 0:i.latitude,null===s||void 0===s||null===(o=s.location)||void 0===o?void 0:o.longitude];return u&&Object(S.jsx)(d.a,{...O,children:(j={storeLatLng:b,customerLatLng:m},Object(S.jsx)(l.a,{...j,testId:"appGoogleMap",importPath:"APP_GOOGLE_MAP",orderTracking:!0}))});var j},x=(e,t)=>{const a=Object(i.translateWithI18Next)(e),l=Object(i.translateWithI18Next)(t),d=(e=>{const{FAVORITE_ORDERS:t}=n.a;return"<a href='".concat(u.Ae.ACCOUNT,"#").concat(t,"' className='favorites-hyperlink-style'><u>").concat(e,"</u></a>")})(l),r=null===a||void 0===a?void 0:a.replace(l,d);return Object(o.a)(String(r))},f=e=>{var t;const{orderDetails:a,updateSetOrderDetails:i}=e,{orderId:o,isOpenOrderSummarySaveYourOrderCheckoutFaster:l}=a,{ORDER_ADDED_TO_FAVOURITE:d,FAVOURITES:r}=n.a,s=x(d,r);return l&&Object(S.jsx)(c.a,{showOccassionModal:l,updateSetOrderDetails:i,setOccassionModalOpen:()=>{i({isOpenOrderSummarySaveYourOrderCheckoutFaster:!1})},occasionName:"",setOccasionName:e=>console.log(e),cardInfo:{id:o},toastmessage:s,isAddFavOrderBox:!0,userParams:null===a||void 0===a?void 0:a.userStatus,currencyShortName:null===a||void 0===a?void 0:a.currencyShortName,currencyConversionFactor:null===a||void 0===a?void 0:a.currencyConversionFactor,productMapById:null===a||void 0===a||null===(t=a.flatResponse)||void 0===t?void 0:t.productMapById,orderDetail:a})},E=e=>{const{orderDetails:t,updateSetOrderDetails:a}=e,{isOpenSaveDeliveryAddressModal:i,deliveryAddress:o,scheduleOrderDateFormat:l}=t,n=(e=>{var t,a;let i={},o=["",""];return o[1]=null===e||void 0===e?void 0:e.addressLines[1],o[0]=null===e||void 0===e?void 0:e.addressLines[0],i={id:(null===e||void 0===e?void 0:e.id)||"",addressName:(null===e||void 0===e?void 0:e.name)||"",city:null===e||void 0===e?void 0:e.city,pinCode:null===e||void 0===e?void 0:e.pinCode,state:null===e||void 0===e?void 0:e.state,country:(null===e||void 0===e?void 0:e.country)||"",location:{latitude:null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude,longitude:null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude},addressLines:o,deliveryInstruction:(null===e||void 0===e?void 0:e.deliveryInstructions)||"",deliveryOptions:(null===e||void 0===e?void 0:e.deliveryOptions)||""},i})(o),{EDIT:d}=v.b;return i&&!l&&Object(S.jsx)("div",{className:"addresses-and-stores-container",children:Object(S.jsx)(s.a,{"data-testid":"address-modal",address:n,isOpen:i,updateSetOrderDetails:a,toggleModal:()=>{a({isOpenSaveDeliveryAddressModal:!1})},isAddressFromOrderProcessing:!0,modalType:d,deliveryInstration:null===t||void 0===t?void 0:t.instruction})})},C=e=>{const{orderDetails:t,updateSetOrderDetails:a}=e,{isOpenSaveDeliveryAddressModal:i,deliveryAddress:o,scheduleOrderDateFormat:l,deliverySearchType:n}=t,d=Object(g.c)()[null!==o&&void 0!==o&&o.pinCode?1:0],s=!0;return i&&l&&Object(S.jsx)("div",{className:"addresses-and-stores-container",children:Object(S.jsx)(r.default,{"data-testid":"new-address-modal",deliverySearchType:n||d,setDeliverySearchType:e=>{a({deliverySearchType:e})},prefectureAddressScreen:s,handleClose:i,updateSetOrderDetails:a,modalType:s,address:o,isAddressFromOrderProcessing:s})})},T=e=>{const{orderDetails:t,updateSetOrderDetails:a}=e,{isShowPickupOrderCancelModal:i,isShowStoreClosePickupOrderCancelModal:o}=t,l=()=>{a({isShowPickupOrderCancelModal:!1,isShowStoreClosePickupOrderCancelModal:!1})},n={id:"pickupCancelOrderModal",role:"dialog",modalTitleId:"pickupCancelOrderModal",show:!0,classNames:"Base-modal pickupCancelOrderBaseModal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:l,modalTitle:"",modalTitleRequired:!1,closeDataTestId:"close-modal",autoFocus:!0};return i||o?Object(S.jsx)(d.a,{...n,children:Object(O.c)({...e,closeModalHandler:l})}):null},y=e=>{const{orderDetails:t,updateSetOrderDetails:a}=e,{isShowPickupOrderCheckReadyToPrepareModal:i}=t,o=()=>{a({isShowPickupOrderCheckReadyToPrepareModal:!1})},l={id:"pickupGeoLocationVerifyModal",role:"dialog",modalTitleId:"pickupGeoLocationVerifyModal",show:!0,classNames:"Base-modal pickupCancelOrderBaseModal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:o,modalTitle:"",modalTitleRequired:!1,closeDataTestId:"close-modal",autoFocus:!0};return i?Object(S.jsx)(d.a,{...l,children:Object(O.d)({...e,closeModalHandler:o})}):null},D=e=>{var t;const{orderDetails:a}=e,{pickupClosedInfoModal:i,buffertimepmpickup:o=30,isPostorderStoreShutdownPopupModal:l,useTradingHoursForStoreCloseCalculation:n}=a,r={...null===a||void 0===a?void 0:a.store,status:{currentStatus:u.Nd,message:u.Nd}},s=Object(b.u)(r,o);return Object(h.w)(a)||(!i||null===s||void 0===s||!s.timingFlag||n&&Object(b.je)(null===r||void 0===r||null===(t=r.timings)||void 0===t?void 0:t.storeTradingHours,o))&&!l?null:Object(S.jsx)(d.a,{id:"pickupClosedInfoModal",role:"dialog",modalTitleId:"pickupClosedInfoModal",show:!0,classNames:"Base-modal pickupClosedInfoModalBaseModal",showCloseBtn:!0,showBackBtn:!1,modalTitle:"",modalTitleRequired:!1,closeDataTestId:"close-modal",autoFocus:!0,children:Object(O.g)({...e})})},A=e=>{const{orderDetails:t}=e,{isShowCurbsidePlateNumberInputModal:a}=t,i={id:"curbsidePlateNumberInputModal",role:"dialog",modalTitleId:"curbsidePlateNumberInputModal",show:!0,classNames:"Base-modal pickupClosedInfoModalBaseModal",showCloseBtn:!0,closeButtonHandler:()=>(e=>{const{updateSetOrderDetails:t}=e;t({isShowCurbsidePlateNumberInputModal:!1})})(e),showBackBtn:!1,modalTitle:"",modalTitleRequired:!1,closeDataTestId:"close-modal",autoFocus:!0};return!Object(h.w)(t)&&a?Object(S.jsx)(d.a,{...i,children:Object(O.b)({...e})}):null},R=e=>{const{orderDetails:t}=e,{pickupClosingSoonModal:a}=t,i={...null===t||void 0===t?void 0:t.store,status:{currentStatus:u.Nd,message:u.Nd}},o=Object(b.u)(i,Object(j.a)(m.Ib));return!Object(h.w)(t)&&a&&null!==o&&void 0!==o&&o.timingFlag?Object(S.jsx)(d.a,{id:"pickupClosingSoonModal",role:"dialog",modalTitleId:"pickupClosingSoonModal",show:!0,classNames:"Base-modal pickupClosingSoonModalBaseModal",showCloseBtn:!0,showBackBtn:!1,modalTitle:"",modalTitleRequired:!1,closeDataTestId:"close-modal",autoFocus:!0,children:Object(O.h)({...e,lastCheckIn:null===o||void 0===o?void 0:o.lastCheckInTime})}):null},_=e=>Object(S.jsxs)(S.Fragment,{children:[I(e),f(e),E(e),C(e),T(e),y(e),D(e),R(e),A(e)]}),w=(e,t)=>Object(S.jsx)(p.a,{isOpen:e,checkoutHeader:!1,showOrderSummaryHeader:!0,handleClose:()=>(e=>{e({openCallSupportModal:!1})})(t)}),L=e=>{const{updateSetOrderDetails:t,orderDetails:a}=e;a.enableCancelOrderCallsupportModal?t({isShowPickupOrderCancelModal:!1,openCallSupportModal:!0,pickupCancelOrder:!(null!==a&&void 0!==a&&a.enableCancelOrderCallsupportModal)}):t({isShowPickupOrderCancelModal:!1,pickupCancelOrder:!0})},k=e=>{const t=[];for(const i of e){const e=i.codePointAt(0);t.push(e)}const a=t.join("%");return btoa(a)},M=(e,t)=>{if(e){const a=Object(N.I)(e,t),i=Object(N.F)(t),o=a.date(),l=i.date(),n=a.isBefore(i);return o===l||n}return!1},P=(e,t,a)=>{if(e){const i=Object(N.I)(e,a),o=Object(N.F)(a),l=i.subtract(t,"minutes"),n=i.add(t,"minutes");let d=0,r=0;return o.isBefore(l)?(d=l.diff(o,"millisecond"),r=n.diff(o,"millisecond")):o.isAfter(l)&&o.isBefore(n)&&(r=n.diff(o,"millisecond")),{timeToEnable:d,timeToDisable:r}}return{timeToEnable:0,timeToDisable:0}}},1051:function(e,t,a){var i=a(517),o=a(512),l=a(519),n=4294967295,d=Math.min;e.exports=function(e,t){if((e=l(e))<1||e>9007199254740991)return[];var a=n,r=d(e,n);t=o(t),e-=n;for(var s=i(r,t);++a<e;)t(a);return s}},1055:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(25),n=a(13),d=a(12),r=a(44),s=a(1022),c=a(6),u=a(4),v=a(937),O=a(15),b=a(2);t.a=e=>{let{setStep:t,cardType:a,setShowConfirmationModal:m,handleUnlinkedAction:j,showConfirmationModal:h}=e;const p=Object(l.b)(),[g,N]=Object(i.useState)(!1),{ID:S,UNLINK:I,EXPIRATION_DATE:x,BALANCE:f,UNLINK_CONFIRMATION_MESSAGE:E,ABOUT_KFC_CARD:C,TRANSFER_BALANCE:T,AVAILABLE_POINTS:y,PONTA_CARD_NUMBER:D,RAKUTEN_CARD_NUMBER:A,LINKING:R}=u.a,_=a===v.a.KFC,w=Object(l.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),{KFC_Card:L,PontaId:k,RakutenId:M}=w||{},P=Object(l.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.rakutenBalanceInquiry)||void 0===a?void 0:a.AvailablePoints})),F=Object(l.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.pontaBalanceInquiry)||void 0===a?void 0:a.AvailablePoints})),W="-1"===(null===w||void 0===w?void 0:w.RakutenId),H=Object(l.c)((e=>{var t;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t?void 0:t.hideRakutenIdInDetails})),U=Object(l.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.kfcLinkingData})),{BalanceAfter:B,ExpirationDate:G}=U||{};let V="";if(G){const e=G.slice(0,4),t=G.slice(4,6),a=G.slice(6,8);V="".concat(e,"/").concat(t,"/").concat(a)}return Object(i.useEffect)((()=>{p(Object(r.j)({memberId:M}))}),[M]),Object(i.useEffect)((()=>{p(Object(r.i)({memberId:k}))}),[k]),Object(b.jsx)("div",{className:"kfc-card-details align-items-center flex-column d-flex",children:Object(b.jsxs)("div",{className:"col-12 col-lg-8 p-0",children:[h&&Object(b.jsx)(s.a,{confirmationMsg:Object(c.translateWithI18Next)(E),handleClose:()=>m(!1),handleConfirmBtn:()=>j(a),imageSrc:O.a.PictogramAlertIcon}),Object(b.jsx)("button",{onClick:()=>t(v.d.Home),className:"btn-back",children:"\u2794"}),Object(b.jsxs)("div",{className:"kfc-card-details_wrapper",children:[_&&Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsxs)("div",{className:"info-wraper",children:[Object(b.jsx)("p",{className:"lbl-note-dark",children:Object(c.translateWithI18Next)(f)}),Object(b.jsx)("p",{className:"detail-value",children:B})]}),Object(b.jsxs)("div",{className:"info-wraper",children:[Object(b.jsx)("p",{className:"lbl-note-dark",children:Object(c.translateWithI18Next)(S)}),Object(b.jsx)("p",{className:"detail-value",children:L})]}),Object(b.jsxs)("div",{className:"info-wraper",children:[Object(b.jsx)("p",{className:"lbl-note-dark",children:Object(c.translateWithI18Next)(x)}),Object(b.jsx)("p",{className:"detail-value",children:V})]}),Object(b.jsx)("div",{className:"linking-wraper",children:Object(b.jsx)("a",{href:Object(n.a)(d.gb),target:"_blank",className:"linking-text",rel:"noopener noreferrer",children:Object(c.translateWithI18Next)(T)})})]}),a===v.a.PONTA&&Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsxs)("div",{className:"info-wraper",children:[Object(b.jsx)("p",{className:"lbl-note-dark",children:Object(c.translateWithI18Next)(y)}),Object(b.jsx)("p",{className:"detail-value",children:F||Object(b.jsx)("div",{className:"loader"})})]}),Object(b.jsxs)("div",{className:"info-wraper",children:[Object(b.jsx)("p",{className:"lbl-note-dark",children:Object(c.translateWithI18Next)(D)}),Object(b.jsx)("p",{className:"detail-value",children:k.slice(-15)})]})]}),a===v.a.RAKUTEN&&Object(b.jsxs)(o.a.Fragment,{children:[!W&&Object(b.jsxs)("div",{className:"info-wraper",children:[Object(b.jsx)("p",{className:"lbl-note-dark",children:Object(c.translateWithI18Next)(y)}),Object(b.jsx)("p",{className:"detail-value",children:P||Object(b.jsx)("div",{className:"loader"})})]}),!H&&Object(b.jsxs)("div",{className:"info-wraper",children:[Object(b.jsx)("p",{className:"lbl-note-dark",children:Object(c.translateWithI18Next)(A)}),Object(b.jsx)("p",{className:"detail-value",children:M})]})]})]}),Object(b.jsx)("div",{className:"loyalty-fields loyalty-fields-btns",children:Object(b.jsx)("button",{"data-loading":g,"data-type":"primary",className:"button-contained kfc-button kfc-unlink-btn ".concat(g?"loading":""),onClick:()=>{p(Object(r.b)()),N(!0),m(!0)},children:Object(c.translateWithI18Next)(I)})}),_&&Object(b.jsx)("p",{style:{textAlign:"center",textDecoration:"underline"},children:Object(b.jsx)("a",{className:"btn-kfc-card btn-link btn-sm",href:"".concat(Object(n.a)(d.a)),children:"".concat(Object(c.translateWithI18Next)(C))})})]})})}},1056:function(e,t,a){"use strict";a.d(t,"a",(function(){return N})),a.d(t,"b",(function(){return S}));var i=a(4),o=a(0),l=a(218);const{AUTO_SUGGESTIONS_DELIVERY_FILTER:n}=l.b,{DELIVERY:d}=o.Jb||{},{DELIVERY_PLACEHOLDER:r,SELECT_KFC_TITLE:s,DELIVERY_ADDRESS_TITLE:c,SWITCH_TO_TAKEAWAY_TEXT:u,RETRY_BTN_TEXT:v,DELIVERY_UNAVAILABLE_ERROR:O,STORE_CLOSE_ERROR_DELIVERY:b,SAVED_ADDRESS:m,DELIVER_TO_YOU:j,ORDER_MODE:h,SELECT_STORE_TEXT:p,START_ORDER:g}=i.a,N="FORM",S={["".concat(d,"_").concat(N)]:{placeholder:r,serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},orderModeScreenErrorText:b,modalHeaderTitle:c,kfcStoresCountText:m,scheduleOrderScreenTitle:h,shouldPopulateFirstSuggestion:!1,storeOpenBtnText:p,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:g,filteredTypes:n},["".concat(d,"_").concat("STORES")]:{serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},modalHeaderTitle:s,orderModeScreenErrorText:b,placeholder:r,kfcStoresCountText:j,scheduleOrderScreenTitle:h,shouldPopulateFirstSuggestion:!0,storeOpenBtnText:p,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:g,filteredTypes:n},["".concat(d,"_").concat("SAVED")]:{placeholder:r,serviceUnavailableError:{errMsg:O,firstBtnText:v,secondBtnText:u,firstBtnHandler:"focusInputBox",secondBtnHandler:"switchToPickup"},orderModeScreenErrorText:b,modalHeaderTitle:c,kfcStoresCountText:m,scheduleOrderScreenTitle:h,shouldPopulateFirstSuggestion:!1,storeOpenBtnText:p,shouldShowOrderType:!0,shouldShowDateTime:!0,orderModeBtnText:g,filteredTypes:n}}},1057:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return r}));var i=a(3);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},o.apply(this,arguments)}var l=function(e){var t=Object(i.useRef)(e);return t.current=e,t},n=function(e){var t=void 0===e?{}:e,a=t.requestOptions,n=t.debounce,d=void 0===n?200:n,r=t.cache,s=void 0===r?86400:r,c=t.cacheKey,u=t.googleMaps,v=t.callbackName,O=t.defaultValue,b=void 0===O?"":O,m=t.initOnMount,j=void 0===m||m,h=Object(i.useState)(!1),p=h[0],g=h[1],N=Object(i.useState)(b),S=N[0],I=N[1],x=Object(i.useState)({loading:!1,status:"",data:[]}),f=x[0],E=x[1],C=Object(i.useRef)(null),T=l(a),y=l(u),D=c?"upa-"+c:"upa",A=Object(i.useCallback)((function(){var e;if(!C.current){var t=window.google,a=y.current,i=(null==a?void 0:a.places)||(null==t||null==(e=t.maps)?void 0:e.places);i?(C.current=new i.AutocompleteService,g(!0)):console.error("\ud83d\udca1 use-places-autocomplete: Google Maps Places API library must be loaded. See: https://github.com/wellyshen/use-places-autocomplete#load-the-library")}}),[]),R=Object(i.useCallback)((function(){E({loading:!1,status:"",data:[]})}),[]),_=Object(i.useCallback)((function(){try{sessionStorage.removeItem(D)}catch(e){}}),[]),w=Object(i.useCallback)(function(e,t){var a;return function(){for(var i=this,o=arguments.length,l=new Array(o),n=0;n<o;n++)l[n]=arguments[n];null!==a&&(clearTimeout(a),a=null),a=setTimeout((function(){return e.apply(i,l)}),t)}}((function(e){if(e){E((function(e){return o({},e,{loading:!0})}));var t={};try{t=JSON.parse(sessionStorage.getItem(D)||"{}")}catch(a){}s&&(t=Object.keys(t).reduce((function(e,a){return t[a].maxAge-Date.now()>=0&&(e[a]=t[a]),e}),{}))[e]?E({loading:!1,status:"OK",data:t[e].data}):C.current.getPlacePredictions(o({},T.current,{input:e}),(function(i,o){if(E({loading:!1,status:o,data:i||[]}),s&&"OK"===o){t[e]={data:i,maxAge:Date.now()+1e3*s};try{sessionStorage.setItem(D,JSON.stringify(t))}catch(a){}}}))}else R()}),d),[d,R]),L=Object(i.useCallback)((function(e,t){void 0===t&&(t=!0),I(e),C.current&&t&&w(e)}),[w]);return Object(i.useEffect)((function(){if(!j)return function(){return null};var e=window.google;return y.current||null!=e&&e.maps||!v?A():window[v]=A,function(){window[v]&&delete window[v]}}),[v,A]),{ready:p,value:S,suggestions:f,setValue:L,clearSuggestions:R,clearCache:_,init:A}},d=function(e){var t=new window.google.maps.Geocoder;return new Promise((function(a,i){t.geocode(e,(function(t,o){"OK"!==o&&i(o),!e.address&&e.componentRestrictions&&(console.error("\ud83d\udca1 use-places-autocomplete: Please provide an address when using getGeocode() with the componentRestrictions."),a(t)),a(t)}))}))},r=function(e){return new Promise((function(t,a){try{var i=e.geometry.location,o=i.lat,l=i.lng;t({lat:o(),lng:l()})}catch(n){a(n)}}))}},1058:function(e,t,a){"use strict";a.d(t,"a",(function(){return R})),a.d(t,"b",(function(){return L})),a.d(t,"g",(function(){return k})),a.d(t,"h",(function(){return M})),a.d(t,"f",(function(){return P})),a.d(t,"e",(function(){return F})),a.d(t,"c",(function(){return W})),a.d(t,"d",(function(){return H}));var i=a(6),o=a(4),l=a(15),n=a(215),d=a(1023),r=a(0),s=a(36),c=a(22),u=a(824),v=a(958),O=a(5),b=a(513),m=a(103),j=a(18),h=a.n(j),p=a(63),g=a(939),N=a(2);const S=e=>{var t;const{orderDetails:a}=e,{storeName:l,displayOrderId:n,showOrderSummaryOnSentToPosFailed:d=!1}=a;return Object(N.jsxs)(N.Fragment,{children:[!d&&Object(N.jsx)("div",{className:"pickup-store-order",children:l}),n&&Object(N.jsx)("div",{className:"pickup-store-order red",children:(null===(t=Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ORDER_HASH))||void 0===t?void 0:t.toUpperCase())+n})]})},I=e=>{const{orderDetails:t}=e,{orderStatus:a,deliveryOrEstimatedOrCollectAtTime:l,enableRetryCountForPickupOrderTracking:d,pickupOrderEstimatedOrCollectAtTime:r}=t,s=d?r:l;return!Object(n.r)(t)&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"estimated-arrival estimated-arrival-refund ".concat(a,"-delivery"),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.COLLECTED_AT)}),Object(N.jsx)("div",{className:"idAndTime time-delivery",children:s})]})},x=e=>{var t,a,i,o;const{orderDetails:d}=e,{orderStatus:r,orderSummarycontentData:s}=d,c=null!==(t=null===s||void 0===s||null===(a=s.icon)||void 0===a||null===(i=a.fields)||void 0===i||null===(o=i.file)||void 0===o?void 0:o.url)&&void 0!==t?t:Object(n.ib)(d)?null===l.a||void 0===l.a?void 0:l.a.TakeawayCompleted:Object(n.fb)(d)?null===l.a||void 0===l.a?void 0:l.a.CartError:Object(n.gb)(d)?null===l.a||void 0===l.a?void 0:l.a.ConfirmedImg:"";return""!==c&&Object(N.jsx)("img",{src:c,className:"statusIcon",alt:r})},f=e=>{const{orderDetails:t,updateSetOrderDetails:a}=e,{enablePickupMethodChangePostOrder:i,buffertimepmpickup:o=30,postorderStoreShutdownPopup:l}=t;if(Object(g.p)(t),i){const e={...null===t||void 0===t?void 0:t.store,status:{currentStatus:r.Nd,message:r.Nd}},i=Object(O.u)(e,o);null!==i&&void 0!==i&&i.timingFlag||a({isShowPickupOrderCheckReadyToPrepareModal:!1,isPickupOrderUserConfirmedToCheckIn:!0})}else a({isShowPickupOrderCheckReadyToPrepareModal:!1,isPickupOrderUserConfirmedToCheckIn:!0});l&&(a({isPickupOrderUserConfirmedToCheckIn:!1}),E(e))},E=e=>{var t;const{orderDetails:a,updateSetOrderDetails:i}=e,{postorderStoreShutdownPopup:o,dispatch:l}=a,n={storeid:null===a||void 0===a||null===(t=a.store)||void 0===t?void 0:t.storeId,channel:null===c.b||void 0===c.b?void 0:c.b.channel,service:null===a||void 0===a?void 0:a.service};l(Object(p.n)({data:n,tenantId:null===a||void 0===a?void 0:a.tenantId},(e=>((e,t,a)=>{var i,o,l,n,d,s;t&&(null===(i=e[0])||void 0===i||null===(o=i.summary)||void 0===o||null===(l=o.status)||void 0===l?void 0:l.currentStatus)===r.Y?a({isPickupOrderUserConfirmedToCheckIn:!1,isPostorderStoreShutdownPopupModal:!0,pickupClosedInfoModal:!1}):t&&(null===(n=e[0])||void 0===n||null===(d=n.summary)||void 0===d||null===(s=d.status)||void 0===s?void 0:s.currentStatus)===r.Nd&&a({isPickupOrderUserConfirmedToCheckIn:!0,isPostorderStoreShutdownPopupModal:!1})})(e,o,i))))},C=e=>{var t;const{orderDetails:a,isCheckinLoading:l,activateCheckinLimitedWindow:v,mintsBeforePickupCheckinEnabled:O}=e,{collectionPoint:b={},enablePickupMethodChangePostOrder:m,isShowCurbsidePlateNumberInputModal:j=!1,requestedDateTime:h={},selectedPickupOrderCollectionMethod:p,store:g={},hidePostOrderCollectionForAsap:S,orderSummarycontentData:I,fulfillmentDateTime:x}=a,{futureDateTime:E,isForNow:C}=h,{timeZoneIANA:T=""}=g,y=!j&&p===r.de.CURB_SIDE&&(null===b||void 0===b?void 0:b.carNumber)&&(m||!C&&S),D=()=>{switch(p){case null===r.de||void 0===r.de?void 0:r.de.DRIVE_THRU:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.I_AM_AT_DRIVE_THRU_QUEUE);case(null===r.de||void 0===r.de?void 0:r.de.IN_STORE)||(null===r.de||void 0===r.de?void 0:r.de.DINE_IN):return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.I_AM_INSIDE_RESTAURANT);case null===r.de||void 0===r.de?void 0:r.de.CURB_SIDE:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.I_AM_AT_CURB_SIDE);default:return""}};let A;if(v){const{timeToEnable:e,timeToDisable:t}=Object(d.f)(x,O,T);A=m&&!S&&!((e,t)=>0===e&&t>0)(e,t)}else A=l||m&&!S&&!Object(d.a)(E,T);return Object(n.ib)(a)&&(null===a||void 0===a?void 0:a.selectedPickupOrderCollectionMethod)&&(!S||!C)&&Object(N.jsxs)("div",{className:"pickup-collection-method-ready-to-prepare",children:[Object(N.jsx)("div",{className:"linebreak col-12"}),y?Object(N.jsx)("div",{className:"car-number-plate",children:S?null===I||void 0===I||null===(t=I.subHeadline)||void 0===t?void 0:t.replace(r.L,b.carNumber):"".concat(Object(i.translateWithI18Next)(o.a.CAR_NUMBER_PLATE_LABEL)," ").concat(b.carNumber)}):Object(N.jsx)("div",{children:S?null===I||void 0===I?void 0:I.subHeadline:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.READY_TO_PREPARE_MEAL)}),Object(N.jsx)(s.c,{"data-testid":"pickup-collection-method-ready-to-prepare-btn",variant:s.b.primary,style:{marginTop:"2rem"},inactive:A,loading:l,onClick:()=>(async e=>{const{orderDetails:t,updateSetOrderDetails:a}=e,{store:i,geoLocationCheckForCheckin:o}=t;if(o&&await c.b.BindLocation(),Object(n.gb)(t)&&a({isShowPickupOrderAlreadyCheckInModal:!0}),c.b.coordinates&&o){var l,d,s,v,O;const{latitude:t,longitude:o}=(null===i||void 0===i?void 0:i.location)||{},n=await Object(u.getDistanceByLatLong)({destinations:{latitude:t,longitude:o},origins:(null===c.b||void 0===c.b?void 0:c.b.coordinates)||{}});(null===n||void 0===n||null===(l=n[0])||void 0===l||null===(d=l.status)||void 0===d?void 0:d.toLowerCase())===(null===r.Ne||void 0===r.Ne||null===(s=r.Ne.ZERO_RESULTS)||void 0===s?void 0:s.toLowerCase())||(null===n||void 0===n||null===(v=n[0])||void 0===v||null===(O=v.distance)||void 0===O?void 0:O.value)>300?a({isShowPickupOrderCheckReadyToPrepareModal:!0}):f(e)}else f(e)})(e),ariaLable:D(),children:S?null===I||void 0===I?void 0:I.buttonText:D()})]})},T=e=>{const{orderDetails:t}=e,{selectedPickupOrderCollectionMethod:a,hidePostOrderCollectionForAsap:l}=t;return a&&!l&&!(null!==t&&void 0!==t&&t.disableTrackingFields)&&Object(N.jsx)("div",{className:"change-collection-method",children:Object(N.jsx)(s.c,{className:"change-collection-method-btn","data-testid":"change-collection-method-btn",variant:s.b.tertiary,onClick:()=>(e=>{const{updateSetOrderDetails:t}=e;t({selectedPickupOrderCollectionMethod:null,pickupClosedInfoModal:!1})})(e),ariaLable:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CHANGE_COLLECTION_METHOD),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CHANGE_COLLECTION_METHOD)})})},y=e=>{const{orderDetails:t}=e,{orderStatus:a,service:l,selectedPickupOrderCollectionMethod:d,enableRetryCountForPickupOrderTracking:s,enablePickupMethodChangePostOrder:c,hidePostOrderCollectionForAsap:u,requestedDateTime:O}=t,b=!s||c&&!u?(e=>{var t;const{hideCustomerName:a}=e,l=a?" ":", "+(null===e||void 0===e||null===(t=e.customer)||void 0===t?void 0:t.firstName.replace(/(.{7})..+/,"$1..."));if(Object(n.ib)(e))switch(null===e||void 0===e?void 0:e.selectedPickupOrderCollectionMethod){case null===r.de||void 0===r.de?void 0:r.de.DRIVE_THRU:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CHECIN_AT_DRIVE_THRU);case null===r.de||void 0===r.de?void 0:r.de.IN_STORE:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CHECIN_AT_IN_STORE);case null===r.de||void 0===r.de?void 0:r.de.CURB_SIDE:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CHECIN_AT_CURB_SIDE);default:return"".concat(Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ORDER_RECEIVED)).concat(l)}else{if(Object(n.fb)(e))return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CANCEL_ORDER);if(Object(n.gb)(e))return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ENJOY_MEAL)}return""})(t):Object(v.g)(t),m=Object(n.r)(t)||Object(n.fb)(t)?Object(v.c)(t):Object(v.h)(t);return Object(N.jsxs)("div",{children:[""!==b&&Object(N.jsxs)("div",{className:"allSet ".concat(a,"-allSet ").concat(l," ").concat(d," col-12 ").concat(Object(n.hb)(t)?"":"p-0px-imp"),children:[Object(N.jsx)("div",{className:"col-12 statusMessage",children:b}),C(e),c&&T(e)]}),""!==m&&!Object(n.u)(t)&&(!u||!((null===O||void 0===O||!O.isForNow)&&Object(n.nb)(t)))&&Object(N.jsx)("div",{className:"substatusmsg",dangerouslySetInnerHTML:{__html:m}})]})},D=e=>{const{orderDetails:t}=e,{orderSummarycontentData:a,enableClickCollectScheduleOrder:i,allowScheduleOrderForDispositions:o,service:l}=t;return i&&(null===o||void 0===o?void 0:o.includes(l))?""!==(null===a||void 0===a?void 0:a.confirmationEmailSubHeadline)&&!Object(n.u)(t)&&Object(N.jsx)("div",{className:"emailconfirmation-container",children:Object(N.jsx)("span",{className:"emailconfirmation-msg",children:null===a||void 0===a?void 0:a.confirmationEmailSubHeadline})}):null},A=e=>{const{orderDetails:t}=e,{deliveryPartner:a,deliveryDetails:l}=t,d=(null===a||void 0===a?void 0:a.otp)||(null===l||void 0===l?void 0:l.otp);return!Object(n.hb)(t)&&d&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"estimated-arrival estimated-arrival-refund driver-msg col-12",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ASK_FOR_OTP)}),Object(N.jsx)("div",{className:"idAndTime time-delivery",children:Object(N.jsx)("div",{className:"red otp",children:d})})]})},R=e=>Object(N.jsxs)(N.Fragment,{children:[!Object(n.hb)(null===e||void 0===e?void 0:e.orderDetails)&&S(e),Object(n.gb)(null===e||void 0===e?void 0:e.orderDetails)&&I(e),x(e),y(e),D(e),A(e)]}),_=e=>{switch(e){case null===r.de||void 0===r.de?void 0:r.de.DRIVE_THRU:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.DRIVE_THRU);case null===r.de||void 0===r.de?void 0:r.de.IN_STORE:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.IN_STORE);case null===r.de||void 0===r.de?void 0:r.de.CURB_SIDE:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CURB_SIDE)}return""},w=e=>{switch(e){case null===r.de||void 0===r.de?void 0:r.de.DRIVE_THRU:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.PICKUP_FROM_WINDOW);case null===r.de||void 0===r.de?void 0:r.de.IN_STORE:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.PICKUP_INSIDE_RESTAURANT);case null===r.de||void 0===r.de?void 0:r.de.CURB_SIDE:return Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.PICKUP_FROM_CURB_SIDE)}return""},L=e=>{var t;const{updateSetOrderDetails:a,orderDetails:l}=e;return Object(N.jsxs)("div",{className:"closingsoon-wrapper curbside-plate-number",children:[Object(N.jsxs)("div",{className:"message-cancel",children:[Object(N.jsx)("div",{className:"vehicle-details-title",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.VEHICAL_DETAILS)}),Object(N.jsx)(m.a,{id:"curbside-plate-number-input",name:"curbside-plate-number-input",className:"curbside-plate-number-input",placeholder:Object(i.translateWithI18Next)(o.a.CAR_NUMBER_PLATE),isMandatory:!0,maxLength:10,value:null===(t=l.collectionPoint)||void 0===t?void 0:t.carNumber,onChange:e=>{const t=Object(b.a)(e.target.value);a({collectionPoint:{name:r.de.CURB_SIDE,carNumber:t}})},onKeyPress:e=>{Object(b.c)(e.key)||e.preventDefault()}})]}),Object(N.jsx)("div",{className:"buttonItems",children:Object(N.jsx)(s.a,{id:"confirm-car-number-btn",className:"button blackButton blackBorder save-button",onClick:()=>{l.collectionPoint.carNumber&&a({selectedPickupOrderCollectionMethod:r.de.CURB_SIDE,pickupClosedInfoModal:!0,isShowCurbsidePlateNumberInputModal:!1})},children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CONFIRM)})})]})},k=e=>{var t;const{updateSetOrderDetails:a,orderDetails:n}=e,{postorderStoreShutdownPopup:d}=n;return Object(N.jsxs)("div",{className:"closingsoon-wrapper",children:[Object(N.jsx)("img",{src:null===l.a||void 0===l.a?void 0:l.a.CartError,alt:"closedOrderModal"}),Object(N.jsxs)("div",{className:"message-cancel",children:[Object(N.jsx)("div",{className:"selected-store-name",children:null===n||void 0===n||null===(t=n.store)||void 0===t?void 0:t.name}),Object(N.jsx)("div",{children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.HAS_NOW_CLOSED)})]}),Object(N.jsx)("div",{className:"message-refund closing-msg "+(d&&"postorderStoreShutdownPopup-msg"),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ORDER_NO_LONGER_CHECKEDIN)}),Object(N.jsx)("div",{className:"buttonItems",children:Object(N.jsx)(s.a,{"data-testid":"pickup-store-close-soon-btn",className:"button blackButton blackBorder save-button",onClick:()=>a({pickupClosedInfoModal:!1,isPostorderStoreShutdownPopupModal:!1}),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.OK)})})]})},M=e=>{var t,a;const{updateSetOrderDetails:n,orderDetails:d,lastCheckIn:r}=e;return Object(N.jsxs)("div",{className:"closingsoon-wrapper",children:[Object(N.jsx)("img",{src:null===l.a||void 0===l.a?void 0:l.a.Timeout,alt:"closingsoonOrderModal"}),Object(N.jsxs)("div",{className:"message-cancel last-checkin",children:[Object(N.jsx)("div",{className:"selected-store-name",children:null===d||void 0===d||null===(t=d.store)||void 0===t?void 0:t.name}),Object(N.jsxs)("div",{children:[Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.LAST_ORDER_CHECKIN_AT),Object(N.jsx)("span",{className:"selected-store-name",children:r})]})]}),Object(N.jsxs)("div",{className:"message-refund closing-msg",children:[null===d||void 0===d||null===(a=d.store)||void 0===a?void 0:a.name," ",Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.IS_CLOSING_SOON)]}),Object(N.jsx)("div",{className:"message-refund ahead-time",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CHECK_IN_AHEADTIME)}),Object(N.jsx)("div",{className:"buttonItems",children:Object(N.jsx)(s.a,{"data-testid":"pickup-store-close-soon-btn",className:"button blackButton blackBorder save-button",onClick:()=>n({pickupClosingSoonModal:!1}),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.OK)})})]})},P=e=>{var t,a;const{orderDetails:d,updateSetOrderDetails:s}=e,{collectionPoint:c,postOrderDetails:u={},pickupOrderAvailableCollectionPoints:v,enablePickupMethodChangePostOrder:O,hidePostOrderCollectionForAsap:b,allowedPickupCollectionMethods:m}=d,j=e=>-1!==(null===v||void 0===v?void 0:v.findIndex((t=>t.collectionPointName===e)));var p;if(!h()(null===u||void 0===u||null===(t=u.collectionPoint)||void 0===t?void 0:t.name)&&j(null===u||void 0===u||null===(a=u.collectionPoint)||void 0===a?void 0:a.name)&&h()(c)&&(O||b))return s({collectionPoint:null===u||void 0===u?void 0:u.collectionPoint,selectedPickupOrderCollectionMethod:null===u||void 0===u||null===(p=u.collectionPoint)||void 0===p?void 0:p.name,pickupClosedInfoModal:!0}),null;const g=Object(n.e)(v,r.de);return Object(N.jsxs)("div",{className:"col-12 pickupOrder-collection-method-container",children:[Object(N.jsx)("div",{className:"col-12 pickupOrder-collection-method-header",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.SELECT_PICK_UP_METHOD)}),Object(N.jsx)("div",{className:"col-12 pickupOrder-collection-method",children:null===g||void 0===g?void 0:g.map((e=>{const t=null===r.de||void 0===r.de?void 0:r.de[e],a=t===r.de.CURB_SIDE,n=j(null===r.de||void 0===r.de?void 0:r.de[e]);return!O&&a?null:Object(N.jsxs)("div",{className:"col-12 pickupOrder-collection-method-node","data-testid":"PickupCollectionMethod_"+t,onClick:()=>{n&&s(a?{isShowCurbsidePlateNumberInputModal:!0}:{collectionPoint:{name:t,carNumber:null},selectedPickupOrderCollectionMethod:t,pickupClosedInfoModal:!0})},children:[Object(N.jsx)("img",{src:null===l.a||void 0===l.a?void 0:l.a.TakeAwayImg,className:"methodIcon",alt:""}),Object(N.jsxs)("div",{className:"methodDetails",children:[Object(N.jsxs)("div",{className:"methodTitle",children:[_(t),!n&&Object(N.jsx)("div",{className:"methodTitle-Unavailable",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.UNAVAILABLE)})]}),Object(N.jsx)("span",{className:"methodMessage",children:w(t)})]}),n&&Object(N.jsx)("img",{src:null===l.a||void 0===l.a?void 0:l.a.Arrow,className:"arrowIcon",alt:""})]},e)}))})]})},F=e=>{const{updateSetOrderDetails:t,orderDetails:a}=e;return Object(N.jsxs)("div",{className:"col-12 pickupOrderCancelPanel",children:[Object(N.jsx)("span",{children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CHANGED_YOUR_MIND)}),null!==a&&void 0!==a&&a.showCancelOrderNumber?Object(N.jsx)("span",{children:Object(N.jsx)("a",{className:"pickupOrderCancelPanelBtn","data-testid":"pickupOrderCancelBtn",href:(null===r.oc||void 0===r.oc?void 0:r.oc.TEL)+Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CONTACTUS_NUMBER),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CONTACTUS_DISPLAYTEXT)})}):Object(N.jsx)("span",{"data-testid":"pickupOrderCancelPanelBtn",tabIndex:"0",className:"pickupOrderCancelPanelBtn",onClick:()=>t({isShowPickupOrderCancelModal:!0}),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CANCEL_ORDER_BUTTON_TEXT)})]})},W=e=>{var t,a,n,c,u;const{closeModalHandler:v,orderDetails:b}=e,{isShowPickupOrderCancelModal:m,isShowStoreClosePickupOrderCancelModal:j}=b,h=null===b||void 0===b||null===(t=b.store)||void 0===t?void 0:t.phoneNumber,p=null===b||void 0===b||null===(a=b.paymentReferences)||void 0===a||null===(n=a[0])||void 0===n?void 0:n.paymentType;return Object(N.jsxs)("div",{className:"pickupCancelOrderModal",children:[Object(N.jsx)("img",{src:null===l.a||void 0===l.a?void 0:l.a.CartError,alt:"pickupCancelOrderModal"}),Object(N.jsxs)("div",{className:"message-cancel",children:[m&&Object(O.Ad)(null===b||void 0===b?void 0:b.service)?Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CANCEL_DELIVERY_ORDER):Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CANCEL_PICKUP_ORDER),j&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"selected-store-name",children:null===b||void 0===b||null===(c=b.store)||void 0===c?void 0:c.name}),Object(N.jsx)("div",{children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.HAS_NOW_CLOSED)})]})]}),m&&Object(N.jsx)("div",{className:"message-refund",children:null===(u=Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.FULL_PAYMENT_REFUND))||void 0===u?void 0:u.replace("{{storePhoneNumber}}",h)}),p!==(null===r.Ud||void 0===r.Ud?void 0:r.Ud.PAY_BY_CASH)&&j&&Object(N.jsx)("div",{className:"message-refund",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ORDER_NO_LONGER_CHECKEDIN)}),Object(N.jsxs)("div",{className:"buttonItems",children:[m&&Object(N.jsx)(s.a,{"data-testid":"coupon-button-one",className:"button whiteButton blackBorder closebtn-cls",onClick:v,children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.KEEP_ORDER)}),Object(N.jsx)(s.a,{"data-testid":"coupon-button-two",className:"button blackButton blackBorder save-button",onClick:()=>Object(d.g)(e),children:b.enableCancelOrderCallsupportModal?Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CALL_SUPPORT_ORDER_BUTTON_TEXT):Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CANCEL_ORDER_BUTTON_TEXT)})]})]})},H=e=>{const{closeModalHandler:t}=e;return Object(N.jsxs)("div",{className:"pickupGeoLocationVerifyModal",children:[Object(N.jsx)("img",{src:null===l.a||void 0===l.a?void 0:l.a.LocationError,alt:"pickupGeoLocationVerifyModal"}),Object(N.jsx)("div",{className:"message-cancel",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.READY_TO_START_COOKING)}),Object(N.jsx)("div",{className:"message-refund",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CONFIRM_YOU_ARE_HERE_TEXT)}),Object(N.jsxs)("div",{className:"buttonItems",children:[Object(N.jsx)(s.a,{"data-testid":"coupon-button-one",className:"button whiteButton blackBorder closebtn-cls",onClick:t,children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.I_AM_ELSE_WHERE_TEXT)}),Object(N.jsx)(s.a,{"data-testid":"coupon-button-two",className:"button blackButton blackBorder save-button",onClick:()=>f(e),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.I_AM_HERE_TEXT)})]})]})}},1059:function(e,t,a){"use strict";var i=a(3),o=a(25),l=a(5),n=a(76),d=a(0),r=a(1060),s=a(61),c=a(939);t.a=e=>{var t,a,u,v,O,b;const m=Object(s.g)(),{isOpen:j,handleClose:h,isModalView:p=!0,showOrderSummaryHeader:g=!1,orderHistoryPage:N=!1}=e,S=Object(o.b)(),{userOrderState:I}=Object(i.useContext)(n.a),x=Object(l.Jd)(I.dispositionNew)?JSON.parse(localStorage.getItem(d.gd.DISPOSITION_NEW)):I.dispositionNew,{type:f,store:E,orderDetails:C={}}=Object(l.Kd)(x)?x:{},{helpReducer:T,orderReducer:y,postOrderReducer:D,tenantReducer:A}=Object(o.c)((e=>e)),R=Object(l.ec)(T.helpResponse||null),_=N?void 0:(null===y||void 0===y||null===(t=y.response)||void 0===t||null===(a=t.order)||void 0===a?void 0:a.deliveryPartners)||(null===D||void 0===D||null===(u=D.orderAccepted)||void 0===u?void 0:u.deliveryPartners),[w,L]=Object(i.useState)(_);return Object(i.useEffect)((()=>{Object(c.d)(S),L(_)}),[]),Object(l.Kd)(R)&&Object(r.e)({contentData:R,service:g?null===C||void 0===C?void 0:C.type:f,store:g?null===C||void 0===C?void 0:C.store:E,isOpen:j,handleClose:h,isModalView:p,history:m,deliveryPartner:w,NeedHelpSectionDisplayFlag:null===A||void 0===A||null===(v=A.componentOptions)||void 0===v||null===(O=v.web)||void 0===O||null===(b=O.orderPages)||void 0===b?void 0:b.getDeliveryOrderStatusMessageFlag})}},1060:function(e,t,a){"use strict";a.d(t,"e",(function(){return v})),a.d(t,"b",(function(){return b})),a.d(t,"d",(function(){return m})),a.d(t,"a",(function(){return h})),a.d(t,"c",(function(){return g}));var i=a(6),o=a(171),l=a(4),n=a(0),d=a(5),r=a(121),s=a(2);const c=e=>Object(s.jsx)(o.a,{...e,testId:"need_help_view",importPath:"NEED_HELP_VIEW"}),u=e=>{switch(null===e||void 0===e?void 0:e.toUpperCase()){case n.Jb.DELIVERY:return Object(i.translateWithI18Next)(null===l.a||void 0===l.a?void 0:l.a.DELIVERY_TITLE);case n.Jb.PICKUP:return Object(i.translateWithI18Next)(null===l.a||void 0===l.a?void 0:l.a.PICKUP_TITLE)}return""},v=e=>null!==e&&void 0!==e&&e.isModalView?O(e):c(e),O=e=>{const{service:t,handleClose:a,isOpen:i}=e,o={role:"dialog",modalTitleId:"need-help-modal",show:!0,classNames:"need-help-modal",showCloseBtn:!0,closeButtonHandler:a,modalTitle:u(t),showBackBtn:!1,closeDataTestId:"close-need-help-modal",id:"NeedHelpModal",autoFocus:!0};return i&&Object(s.jsx)(r.a,{...o,children:c(e)})},b=e=>{var t;const{service:a,contentData:i,store:o,deliveryPartner:l}=e,{helpSectionCallDetails:d}=i;switch(null===a||void 0===a?void 0:a.toUpperCase()){case n.Jb.PICKUP:return(null===o||void 0===o?void 0:o.phoneNumber)||(null===o||void 0===o||null===(t=o.contacts.find((e=>e.key===n.Yd)))||void 0===t?void 0:t.value);case n.Jb.DELIVERY:default:return j(l,d)}},m=(e,t)=>{e.preventDefault();const{contentData:a,history:i,handleClose:o}=t,{helpSectionContactDetails:l}=a;o(),i.push({pathname:null===l||void 0===l?void 0:l.url})||i.push({pathname:null===l||void 0===l?void 0:l.internalURL})},j=(e,t)=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case n.Ab.SKEDADEL:return"".concat(null===t||void 0===t?void 0:t.skedadelContactNo);case n.Ab.UBERDIRECT:return"".concat(null===t||void 0===t?void 0:t.uberDirectContactNo);case n.Ab.KFC_GENERIC_MSG:return"".concat(null===t||void 0===t?void 0:t.kfcGenericContactNo);default:return"".concat(null===t||void 0===t?void 0:t.contactNo)}},h=e=>{const{service:t,contentData:a,deliveryPartner:o}=e,{helpSectionCallDetails:d}=a;switch(null===t||void 0===t?void 0:t.toUpperCase()){case n.Jb.PICKUP:case n.Jb.CATERING:return Object(i.translateWithI18Next)(null===l.a||void 0===l.a?void 0:l.a.CALL_KFC_STORE);case n.Jb.DELIVERY:default:return"".concat(null===d||void 0===d?void 0:d.buttonText," ").concat(j(o,d))}},p=e=>{var t;return e&&Array.isArray(e)?null===e||void 0===e||null===(t=e[0])||void 0===t?void 0:t.value:e},g=e=>{var t,a;const{service:i,contentData:o,store:l,deliveryPartner:r}=e,{helpSectionCallDetails:c,callsupportcontent:u=[]}=o;switch(null===i||void 0===i?void 0:i.toUpperCase()){case n.Jb.PICKUP:return Object(s.jsxs)("div",{children:[!u.length&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("span",{className:"bold-text",children:p(null===l||void 0===l?void 0:l.name)}),Object(s.jsx)("br",{}),Object(d.Wb)((null===l||void 0===l?void 0:l.address)||(null===l||void 0===l?void 0:l.addresses))]}),u.length&&Object(s.jsx)("span",{children:null===(t=u[0])||void 0===t||null===(a=t.fields)||void 0===a?void 0:a.description})]});case n.Jb.CATERING:return Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"bold-text",children:p(null===l||void 0===l?void 0:l.name)}),Object(s.jsx)("br",{}),Object(d.Wb)((null===l||void 0===l?void 0:l.address)||(null===l||void 0===l?void 0:l.addresses))]});case n.Jb.DELIVERY:default:return((e,t)=>{const a=(e,a,i)=>Object(s.jsxs)("span",{children:[null===t||void 0===t?void 0:t[e]," ",Object(s.jsxs)("span",{className:"bold-text",children:[null===t||void 0===t?void 0:t[a]," "]}),null===t||void 0===t?void 0:t[i]]});switch(null===e||void 0===e?void 0:e.toLowerCase()){case n.Ab.SKEDADEL:return a("skededal1","skededal2","skededal3");case n.Ab.UBERDIRECT:return a("uberDirect1","uberDirect2","uberDirect3");case n.Ab.KFC_GENERIC_MSG:return a("kfcGenericMsg1","kfcGenericMsg2","kfcGenericMsg3");default:return a("val1","val2","val3")}})(r,c)}}},1068:function(e,t,a){"use strict";a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return O})),a.d(t,"d",(function(){return b})),a.d(t,"m",(function(){return m})),a.d(t,"g",(function(){return j})),a.d(t,"f",(function(){return h})),a.d(t,"l",(function(){return p})),a.d(t,"j",(function(){return g})),a.d(t,"i",(function(){return N})),a.d(t,"k",(function(){return S})),a.d(t,"e",(function(){return I})),a.d(t,"c",(function(){return x})),a.d(t,"h",(function(){return f}));var i=a(6),o=a(102),l=a(268),n=a(4),d=a(958),r=a(215),s=a(11),c=a(5),u=a(939);const v={props:null,dispatch:null,customerId:null,tenantId:null,customer:null,userStatus:null,isMobileView:!1,favoriteItems:null,selectedOrderId:null,currencySymbol:null,currencyConversionFactor:null,addHope:null,carryBag:null,showCarryBagInLineItem:null,pastOrderDateformat:"",pastOrderTimeFormat:"",orderDetails:{},orderHistory:[],currentOrderHistory:[],completedOrderHistory:[],displayNumOfRecords:10,currentPage:1,totalNumOfPages:1,displayAllRecords:!1,showHaveQuestionSection:!0,showViewReceiptModal:!1,showFavoriteModal:!1,showReorderModal:!1,isDarkMode:!1,orderHistoryLoading:!0,userOrderStateDispatch:null,cartDataService:null,showTaxLines:!1,showTaxExcluded:!0},O=e=>{const{dispatch:t,customerId:a,tenantId:i}=e,o=Object(c.tc)(12);t(Object(l.d)({customerId:a,tenantId:i},o))},b=e=>{const{dispatch:t,tenantId:a,selectedOrderId:i,orderDetails:l}=e,n=null===l||void 0===l?void 0:l.service;Object(c.he)(i)&&t(Object(o.c)({orderId:i,tenantId:a,CTO:!!Object(c.Ad)(n)&&void 0}))},m=e=>{var t,a,i,o,l,n,d,r,s,c,u,v,O,b,m,j,h,p,g,N,S,I,x,f,E,C,T,y,D,A,R,_,w,L,k,M,P,F;const{props:W,dispatch:H,tenantReducer:U,profileReducer:B,updateSetOrderHistoryDetails:G,openReorderModal:V,userOrderStateDispatch:Y}=e,{authoredContent:K,tenantId:z,currencySymbol:q,currencyConversionFactor:J,addHope:X,carryBag:Q,showCarryBagInLineItem:Z,pastOrderDateformat:$="",pastOrderTimeFormat:ee="",componentOptions:te,scheduleOrderDateFormat:ae,dateFormat:ie,timeFormat:oe}=U;G({props:W,dispatch:H,authoredContent:K,tenantId:z,currencySymbol:q,currencyConversionFactor:J,addHope:X,carryBag:Q,showCarryBagInLineItem:Z,pastOrderDateformat:$,pastOrderTimeFormat:ee,scheduleOrderDateFormat:ae,dateFormat:ie,timeFormat:oe,customerId:null===B||void 0===B?void 0:B.customerId,customer:null===B||void 0===B?void 0:B.basic,favoriteItems:(null===B||void 0===B?void 0:B.favouriteItems)||[],openReorderModal:V,userOrderStateDispatch:Y,showTaxLines:null===te||void 0===te||null===(t=te.web)||void 0===t||null===(a=t.cartPage)||void 0===a?void 0:a.showTaxLines,showTaxExcluded:null===te||void 0===te||null===(i=te.web)||void 0===i||null===(o=i.checkout)||void 0===o?void 0:o.showTaxExcluded,enableGlobalOrderTracking:null===U||void 0===U||null===(l=U.componentOptions)||void 0===l||null===(n=l.web)||void 0===n||null===(d=n.orderPages)||void 0===d?void 0:d.enableGlobalOrderTracking,enableRetryCountForPickupOrderTracking:null===U||void 0===U||null===(r=U.componentOptions)||void 0===r||null===(s=r.web)||void 0===s||null===(c=s.orderPages)||void 0===c?void 0:c.enableRetryCountForPickupOrderTracking,pickupTrackOrderButtonLabel:null===U||void 0===U||null===(u=U.componentOptions)||void 0===u||null===(v=u.web)||void 0===v||null===(O=v.orderPages)||void 0===O?void 0:O.pickupTrackOrderButtonLabel,enableClickCollectScheduleOrder:null===te||void 0===te||null===(b=te.web)||void 0===b||null===(m=b.dispositionConfig)||void 0===m?void 0:m.enableClickCollectScheduleOrder,allowScheduleOrderForDispositions:null===te||void 0===te||null===(j=te.web)||void 0===j||null===(h=j.scheduledDelivery)||void 0===h?void 0:h.allowScheduleOrderForDispositions,showGiftCardOrVoucherSummary:null===U||void 0===U||null===(p=U.componentOptions)||void 0===p||null===(g=p.web)||void 0===g||null===(N=g.orderPages)||void 0===N?void 0:N.showGiftCardOrVoucherSummary,showPromosSummary:null===U||void 0===U||null===(S=U.componentOptions)||void 0===S||null===(I=S.web)||void 0===I||null===(x=I.orderPages)||void 0===x?void 0:x.showPromosSummary,enableScheduleOrder:null===U||void 0===U||null===(f=U.componentOptions)||void 0===f||null===(E=f.web)||void 0===E||null===(C=E.dispositionConfig)||void 0===C?void 0:C.enableScheduleOrder,showStoreRegistrationNumber:null===te||void 0===te||null===(T=te.web)||void 0===T||null===(y=T.orderPages)||void 0===y?void 0:y.showStoreRegistrationNumber,showStoreOrderNumber:null===te||void 0===te||null===(D=te.web)||void 0===D||null===(A=D.orderPages)||void 0===A?void 0:A.showStoreOrderNumber,showOrderDateTime:null===te||void 0===te||null===(R=te.web)||void 0===R||null===(_=R.orderPages)||void 0===_?void 0:_.showOrderDateTime,showOrderMode:null===te||void 0===te||null===(w=te.web)||void 0===w||null===(L=w.orderPages)||void 0===L?void 0:L.showOrderMode,showOrderStatus:null===te||void 0===te||null===(k=te.web)||void 0===k||null===(M=k.orderPages)||void 0===M?void 0:M.showOrderStatus,showPickupOrDeliveryTime:null===te||void 0===te||null===(P=te.web)||void 0===P||null===(F=P.orderPages)||void 0===F?void 0:F.showPickupOrDeliveryTime})},j=e=>{const{cartReducer:t,updateSetOrderHistoryDetails:a}=e,{cartData:i}=t;a({cartDataService:null===i||void 0===i?void 0:i.service})},h=e=>{const{appStateReducer:t,updateSetOrderHistoryDetails:a}=e;a({userStatus:null===t||void 0===t?void 0:t.userStatus})},p=e=>{const{paymentsContentReducer:t,updateSetOrderHistoryDetails:a}=e;a({paymentsContentReducer:t})},g=e=>{var t,a,i;const{orderHistoryReducer:o,orderHistoryDetails:l,updateSetOrderHistoryDetails:n,tenantReducer:r}=e;n({selectedOrderId:"",orderHistory:null!==o&&void 0!==o&&o.orderHistory&&Array.isArray(null===o||void 0===o?void 0:o.orderHistory)&&(null===o||void 0===o||null===(t=o.orderHistory)||void 0===t?void 0:t.length)>0?null===o||void 0===o||null===(a=o.orderHistory)||void 0===a||null===(i=a.sort(((e,t)=>(null===t||void 0===t?void 0:t.orderDateTimeInEpoch)-(null===e||void 0===e?void 0:e.orderDateTimeInEpoch))))||void 0===i?void 0:i.map((t=>{var a;const i=Object(d.j)({postOrPastOrderDetails:{...t,customer:null===l||void 0===l?void 0:l.customer,phoneNum:null===t||void 0===t||null===(a=t.customer)||void 0===a?void 0:a.phoneNumber},orderDetails:l,paymentsContentReducer:null===l||void 0===l?void 0:l.paymentsContentReducer,tenantReducer:r});return i.enableGlobalOrderTracking=null===l||void 0===l?void 0:l.enableGlobalOrderTracking,i.enableRetryCountForPickupOrderTracking=null===l||void 0===l?void 0:l.enableRetryCountForPickupOrderTracking,(e=>{const{profileReducer:t,orderDetails:a}=e,{favouriteOrders:i}=t;if(Object(c.ge)(a)&&(null===i||void 0===i?void 0:i.length)>0){const e=null===i||void 0===i?void 0:i.find((e=>(null===e||void 0===e?void 0:e.id)===(null===a||void 0===a?void 0:a.orderId)));Object(c.ge)(e)&&(a.isOrderSavedAsFavorite=!0,a.favoriteOrderName=null===e||void 0===e?void 0:e.name)}return a})({orderDetails:i,...e})})):[]})},N=e=>{const{orderHistoryDetails:t,updateSetOrderHistoryDetails:a}=e,{orderHistory:i}=t;a({currentOrderHistory:null===i||void 0===i?void 0:i.filter((e=>!Object(r.bb)(e)&&!Object(r.ab)(e))),completedOrderHistory:null===i||void 0===i?void 0:i.filter((e=>Object(r.bb)(e)||Object(r.ab)(e)))})},S=e=>{const{orderReducer:t,orderHistoryDetails:a,updateSetOrderHistoryDetails:i,tenantReducer:o}=e;i({orderDetails:Object(d.j)({postOrPastOrderDetails:null===t||void 0===t?void 0:t.response,orderDetails:a,paymentsContentReducer:null===a||void 0===a?void 0:a.paymentsContentReducer,tenantReducer:o})})},I=e=>{const{orderDetails:t,orderHistoryDetails:a,redirectTo:i}=e,{props:o}=a;(null===t||void 0===t?void 0:t.orderId)&&Object(u.r)({trackDetails:a,orderDetails:t,redirectTo:i,props:o})},x=e=>{var t,a,o,l;const{orderHistoryDetails:d,orderDetails:u,tenantReducer:v}=e,{orderDateOn:O,displayTodayDate:b,displayFormatOrderTime:m,service:j,statusUpdatedDate:h,showOrderingTime:p}=u,{showOrderDateTime:g}=d,N=g?p:m,S=null===O||void 0===O?void 0:O.split(" "),I=!!(null===v||void 0===v||null===(t=v.componentOptions)||void 0===t||null===(a=t.orderHistory)||void 0===a?void 0:a.showGiftCardRefundStatus)&&Object(r.Y)(null===u||void 0===u?void 0:u.postOrderDetails),x=Object(c.Ad)(j)?Object(r.A)(u):Object(r.u)(u),{isMobileView:f}=d;var E,C;if(Object(r.Z)(u))return"".concat(Object(i.translateWithI18Next)(Object(r.kb)(u)||Object(r.jb)(u)?I?null===n.a||void 0===n.a?void 0:n.a.GIFT_CARD_PROVIDED:null===n.a||void 0===n.a?void 0:n.a.REFUNDED:null===n.a||void 0===n.a?void 0:n.a.CANCELED),": ").concat(Object(i.translateWithI18Next)(null===S||void 0===S?void 0:S[0])+" "+(null!==(E=null===S||void 0===S?void 0:S[1])&&void 0!==E?E:"")+" "+(null!==(C=null===S||void 0===S?void 0:S[2])&&void 0!==C?C:"")+" "+N);if(!x&&Object(s.J)(h)&&O===b){var T,y;let e="".concat(Object(i.translateWithI18Next)(null===S||void 0===S?void 0:S[0])+" "+(null!==(T=null===S||void 0===S?void 0:S[1])&&void 0!==T?T:"")+" "+(null!==(y=null===S||void 0===S?void 0:S[2])&&void 0!==y?y:"")," ").concat(Object(i.translateWithI18Next)(null===n.a||void 0===n.a?void 0:n.a.AT)," ");return O===b&&(e=Object(i.translateWithI18Next)(null===n.a||void 0===n.a?void 0:n.a.SCHEDULE)+" ".concat(Object(i.translateWithI18Next)(null===n.a||void 0===n.a?void 0:n.a.FOR)," ")+Object(i.translateWithI18Next)(null===n.a||void 0===n.a?void 0:n.a.TODAY_AT)),"".concat(e," ").concat(N)}return"".concat(Object(i.translateWithI18Next)(null===S||void 0===S?void 0:S[0])+" "+(null!==(o=null===S||void 0===S?void 0:S[1])&&void 0!==o?o:"")+" "+(null!==(l=null===S||void 0===S?void 0:S[2])&&void 0!==l?l:"")," ").concat(f?" "+N:Object(i.translateWithI18Next)(null===n.a||void 0===n.a?void 0:n.a.AT)+" "+N)},f=e=>{const{contentReducer:t,updateSetOrderHistoryDetails:a}=e;a({StoreRegistrationNumber:Object(c.Nc)(t),...Object(c.Mc)(t)})}},1070:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return r}));var i=a(28),o=a(3),l=a(0),n=a(2);var d=e=>{const{tabIndex:t,ariaLable:a,className:d,options:r,onChange:s,testid:c="",selectedValue:u,name:v,...O}=e;return Object(o.useEffect)((()=>{u&&(null===s||void 0===s||s({target:{value:u,name:v}}))}),[u,v]),Object(n.jsx)("select",{className:d,tabIndex:t,"aria-label":a,onChange:s,onKeyPress:e=>{const{SPACE:t,ENTER:a}=l.Xf.KEY_CHAR_CODE;!s||e.charCode!==t&&e.charCode!==a||s()},"data-testid":c,defaultValue:u,name:v,...O,children:null===r||void 0===r?void 0:r.map(((e,t)=>((e,t)=>{const a=u===e?{selected:"selected"}:"";return Object(n.jsx)("option",{value:e,"data-testid":"".concat(c).concat(t),defaultValue:u===e,...a,children:Object(i.translateWithI18Next)(e)},e)})(e,t)))})};const r=e=>{const{tabIndex:t,ariaLable:a,className:i,options:o,onChange:d,testid:r="",selectedValue:s,...c}=e;return Object(n.jsxs)("select",{className:i,tabIndex:t,"aria-label":a,onChange:d,onKeyPress:e=>{const{SPACE:t,ENTER:a}=l.Xf.KEY_CHAR_CODE;!d||e.charCode!==t&&e.charCode!==a||d()},"data-testid":r,defaultValue:s,...c,children:[Object(n.jsx)("option",{children:l.Xf.DROPDOWN_DEFAULT_VALUE}),Object.keys(o).map(((e,t)=>{return Object(n.jsx)("optgroup",{label:e,"data-testid":"sort-visit-group",children:(a=o[e],a.map((e=>Object(n.jsx)("option",{value:e.value,title:e.category,"data-testid":"sort-visit-option",children:e.value},e.value))))},t);var a}))]})}},1071:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=(a(73),a(6)),n=a(36),d=a(15),r=a(154),s=a(121),c=a(61),u=a(4),v=a(5),O=(a(0),a(2));var b=e=>{let{timeSrc:t,resendOtpHandler:a,disabledOtpLink:o,fromCheckout:n,updateCheckoutDetails:d,showGuidanceMessageForOtpExpiry:s,showResendButton:b=!0}=e;const[m,j]=Object(i.useState)(t),[h,p]=Object(i.useState)(0),[g,N]=Object(i.useState)(0),S=Object(c.g)(),I=e=>{const t=Math.floor(e/60),a=e-60*t;p(t),N(a),j((e=>e-1))};Object(i.useEffect)((()=>{I(t)}),[t]),Object(i.useEffect)((()=>{let e;return m>=0?e=setInterval((()=>{I(m)}),1e3):clearInterval(e),()=>{e&&clearInterval(e)}}),[m]);return Object(O.jsxs)(O.Fragment,{children:[(m>=0&&n&&s&&d({showGuidanceMessageForOtpExpiry:!1}),m>=0?n?Object(O.jsxs)("span",{children:["".concat(Object(l.translateWithI18Next)(null===r.e||void 0===r.e?void 0:r.e.TIMER_EXPIRED_TEXT))," ",h,":",g<10&&"0".concat(g)||g]}):Object(O.jsxs)("span",{children:["".concat(Object(l.translateWithI18Next)(null===u.a||void 0===u.a?void 0:u.a.TIMER_EXPIRED_TEXT_ACCOUNT))," ",h,":",g<10&&"0".concat(g)||g," ",Object(l.translateWithI18Next)(null===u.a||void 0===u.a?void 0:u.a.SECONDS)]}):b?((e,t,a)=>(t&&!a&&e({showGuidanceMessageForOtpExpiry:!0}),Object(l.translateWithI18Next)(r.e.CODE_TIMER_EXPIRED)))(d,n,s):Object(v.Ge)({history:S},!1,!1,!0,!1)),b&&Object(O.jsx)("div",{children:Object(O.jsx)("button",{"data-testid":"resend-otp-testid",disabled:o,className:"otp-link-button ".concat(o?"disableOtpLinkCls":""),id:"otpResendButton",onClick:e=>{j(179),a(e)},children:Object(l.translateWithI18Next)(r.e.RESEND_CODE)})})]})},m=a(25),j=a(87);const h=e=>document.getElementById("codeBox"+e),p=e=>Object.fromEntries(Array.from({length:e},((e,t)=>[t,""]))),g=e=>{var t,a;const{closeOtpModalHandler:o,otpSendTo:c,fromCheckout:u,callValidateOtpAPI:v,callResendOtpAPI:g,isOtpMatch:N,hideError:S,invalidOtpCount:I,isItPageView:x=!1,showResendButton:f=!0,otpInputCountTruemoneyWallet:E="",otpTimerValueTruemoneyWallet:C="",updateCheckoutDetails:T,closeOtpModalHandlerCheckout:y,numberOfDigitsTobeMasked:D,maskedNumberOfDigit:A,checkoutDetails:R,showInvalidAttempt:_=!0}=e,w=Object(m.c)((e=>e.tenantReducer)),{otpInputLength:L,otpTimerValue:k}=(null===w||void 0===w||null===(t=w.componentOptions)||void 0===t||null===(a=t.web)||void 0===a?void 0:a.accountPage)||{},{SUBMIT_BUTTON_TEXT:M,SENT_AN_SMS:P,OTP_SENT_TEXT:F,INVALID_OTP:W,USE_A_DIFFERENT_NUMBER:H,INVALID_CODE:U,PAYMENT_TAKEN:B,PAYMENT_SUBMITTED:G,PASSCODE:V}=r.e,[Y,K]=Object(i.useState)(!1),[z,q]=Object(i.useState)(!1),J=E||L,[X]=Object(i.useState)(C||k);let Q=p(x?E:L);const[Z,$]=Object(i.useState)(Q),[ee,te]=Object(i.useState)(Q),[ae,ie]=Object(i.useState)(X);Object(i.useEffect)((()=>{let e=Object.values(ee).join("").length;J===e?q(!0):(q(!1),u?S(T):S())}),[ee]),Object(i.useEffect)((()=>{u&&!N&&0!==I&&(q(!1),S(T))}),[u,N,I]);const oe={closeDataTestId:"close-otp-testId",role:"dialog",show:!1,classNames:"customized-otp-modal",showCloseBtn:!0,closeButtonHandler:u?()=>((e,t)=>{y(e,t)})(R,T):o,modalTitle:Object(l.translateWithI18Next)(P)};Object(i.useEffect)((()=>{const e=setInterval((()=>{ie((e=>e>0?e-1:e))}),1e3);return()=>clearInterval(e)}),[ae]);const le=Object(O.jsxs)(O.Fragment,{children:[u&&!N&&0!==I&&Object(O.jsxs)("div",{className:"otp-error-text otp-attempt-error-show",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(l.translateWithI18Next)(U),_&&"(".concat(I,"/3)")]}),u&&(null===R||void 0===R?void 0:R.showGuidanceMessageForOtpExpiry)&&Object(O.jsxs)("div",{className:"otp-error-text otp-attempt-error-show",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(l.translateWithI18Next)(r.e.VERIFICATION_CODE_EXPIRED)]}),Object(O.jsxs)("div",{className:"otp-main-container ".concat(x&&"page-otp-main-container"," "),children:[Object(O.jsxs)("div",{className:"left-section",children:[" ",Object(O.jsx)("div",{children:Object(l.translateWithI18Next)(P)})]}),Object(O.jsxs)("div",{className:"right-section",children:[Object(O.jsxs)("div",{className:"otp-title-text otp-title-text-th",children:[Object(l.translateWithI18Next)(F),"."]}),Object(O.jsx)("div",{className:"sendto",children:(ne=c,null===ne||void 0===ne?void 0:ne.replace(ne.substring(0,D),A))}),u&&Object(O.jsx)("button",{className:"useDifferentNumberButton",onClick:()=>(e=>{e({useDifferentNumberFlow:!0,openOtpModal:!1,useDifferentNumberFlowFlagForGuidanceMessage:!0}),Object(j.o)(R,e)})(T),children:Object(l.translateWithI18Next)(H)}),Object(O.jsxs)("div",{className:"otpDiv","aria-describedby":"otpInvalid",children:[[...Array(J)].map(((e,t)=>Object(O.jsx)("input",{id:"codeBox".concat(t),"data-testid":"otp-testid-".concat(t),className:"otpNum ".concat(N||0===I?"":"otpNum-invalid"),type:"tel",maxLength:1,onKeyPress:e=>(e=>{(8!==e.which&&0!==e.which&&e.which<48||e.which>57)&&e.preventDefault()})(e),onKeyUp:e=>((e,t,a)=>{var i,o;const l=e.which||e.keyCode;if(1===(null===(i=h(t))||void 0===i||null===(o=i.value)||void 0===o?void 0:o.length))if(t!==a-1){const e=h(t+1);e&&e.focus()}else h(t).blur();8===l&&0!==t&&h(t-1).focus()})(e,t),onChange:e=>((e,t)=>{let a=e.target.value;$((e=>({...e,[t]:a}))),te((e=>({...e,[t]:a})))})(e,t),onBlur:()=>(e=>{$((t=>({...t,[e]:null===ee||void 0===ee?void 0:ee[e]})))})(t),onFocus:()=>(e=>{$((t=>({...t,[e]:""}))),te((t=>({...t,[e]:""})))})(t),value:null===Z||void 0===Z?void 0:Z[t],onInput:e=>(e=>{const t=e.target.value;/^\d*$/.test(t)||(e.target.value=t.slice(0,-1))})(e)},"key".concat(t)))),!N&&0!==I&&!Object.values(Z).every((e=>""===e))&&Object(O.jsx)("img",{"data-testid":"clear-otp-testid",className:"",src:d.a.Clear_icon,alt:"clear otp",onClick:()=>{$((()=>Q)),te((()=>Q))}})]}),u&&(null===R||void 0===R?void 0:R.showGuidanceMessageForOtpExpiry)&&Object(O.jsxs)("div",{className:"otp-error-text dob-error-show otp-invalid",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(l.translateWithI18Next)(r.e.CODE_EXPIRED_TEXT)]}),!N&&0!==I&&Object(O.jsxs)("div",{className:"otp-error-text dob-error-show otp-invalid",children:[Object(O.jsx)("span",{children:Object(O.jsx)("img",{src:d.a.Error,alt:"Error visible"})}),Object(l.translateWithI18Next)(W)," ",_&&"(".concat(I,"/3)")]}),x&&Object(O.jsx)("div",{className:"infoPayment",children:Object(O.jsx)("p",{children:Object(l.translateWithI18Next)(B)})}),Object(O.jsx)("div",{className:"otp-expired-text",children:Object(O.jsx)(b,{timeSrc:X,resendOtpHandler:e=>{e.preventDefault(),ie(X),g(R),K(!0),setTimeout((()=>{K(!1)}),3e4)},disabledOtpLink:Y,fromCheckout:u,updateCheckoutDetails:T,showGuidanceMessageForOtpExpiry:null===R||void 0===R?void 0:R.showGuidanceMessageForOtpExpiry,showResendButton:f})}),Object(O.jsx)("div",{className:"buttons-container",children:Object(O.jsx)(n.a,{className:"buttons-group ".concat(z&&0!==ae?"save":"save-disabled"),"data-testid":"update-account-button-testid",onClickHandler:()=>(()=>{let e=Object.values(ee).join("");v(e),q(!1)})(),disabled:!z||0===ae,children:Object(l.translateWithI18Next)(M)})})]})]})]});var ne;return x?le:Object(O.jsx)(s.a,{...oe,children:le})};t.a=o.a.memo(g)},1073:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return C})),a.d(t,"c",(function(){return T})),a.d(t,"e",(function(){return y})),a.d(t,"d",(function(){return D}));var i=a(1051),o=a.n(i),l=a(6),n=a(171),d=a(4),r=a(15),s=a(1088),c=a(215),u=(a(3),a(2));var v=e=>(e=>Object(u.jsx)(n.a,{...e,testId:"order_summary_raider_details_view",importPath:"ORDER_SUMMARY_RAIDER_DETAILS_VIEW"}))(e),O=a(0),b=a(5),m=a(958),j=a(331);const h=e=>{const{orderDetails:t,arrivalTime:a,showDeliveryEstimatedTime:i,pastOrderTimeFormat:o}=e,{orderStatus:l,deliveryOrEstimatedOrCollectAtTime:n}=t;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"estimated-arrival estimated-arrival-refund ".concat(l,"-delivery"),children:i&&null==a?"":S(t)}),Object(u.jsx)("div",{className:"idAndTime time-delivery",children:i?x({orderDetails:t,arrivalTime:a,pastOrderTimeFormat:o}):I(t)})]})},p=e=>{var t;const{orderSummarycontentData:a,total:i,currencySymbol:o,currencyConversionFactor:l}=e,n=null===a||void 0===a||null===(t=a.payOnArrivalSubheadline)||void 0===t?void 0:t.replace(O.tf,'<span class="red">'.concat(Object(b.I)(i,{currencySymbol:o,currencyConversionFactor:l}),"</span>")),d="<div class='subheadline-content'>".concat(n,"</div>");return Object(c.B)(e)?d:null===a||void 0===a?void 0:a.payOnArrivalSubheadline},g=e=>{var t,a;const{orderDetails:i,isUberServiceableEnabled:l}=e,n=null!==i&&void 0!==i&&null!==(t=i.requestedDateTime)&&void 0!==t&&t.isForNow||l&&Object(j.e)(null===i||void 0===i||null===(a=i.deliveryDetails)||void 0===a?void 0:a.partnerName)?null===i||void 0===i?void 0:i.orderTrackingProgressBarCount:null===i||void 0===i?void 0:i.orderTrackingProgressBarScheduleOrdersCount;let d=[];const r=Object(m.d)(i);return 0!==r&&o()(n,(e=>{d.push(Object(u.jsx)("div",{className:"ProgressDelivery Bar",children:Object(u.jsx)("div",{className:"subProgressDelivery ".concat(e<r?e===r-1?"play":"full":"none")},e)},e))})),r>0&&r<=n&&Object(u.jsx)("div",{className:"progress-bar-list col-12",children:d})},N=e=>{var t,a,i;const{orderDetails:o}=e,{orderStatus:l,orderSummarycontentData:n,enableRetryCountForPickupOrderTracking:d,enableClickCollectScheduleOrder:s}=o,{ConfirmedImg:v,TakeAwayImg:O,DeliveryTracker:b,DeliveryCart:m,CartError:j,TakeawayCompleted:h}=r.a,p=d&&!s?null===n||void 0===n||null===(t=n.icon)||void 0===t||null===(a=t.fields)||void 0===a||null===(i=a.file)||void 0===i?void 0:i.url:Object(c.O)(o)?v:Object(c.J)(o)?O:Object(c.G)(o)||Object(c.R)(o)?h:Object(c.P)(o)||Object(c.N)(o)||Object(c.F)(o)?b:Object(c.K)(o)?m:Object(c.I)(o)?j:v;return""!==p&&Object(u.jsx)("img",{src:p,alt:l})},S=e=>{const{orderSummarycontentData:t}=e,a=null===t||void 0===t?void 0:t.mainHeadingOne;if(null!==a&&void 0!==a&&a.includes(O.df))return null===e||void 0===e?void 0:e.storeName;if(null!==a&&void 0!==a&&a.includes(O.tb)){const i={...t,subHeadline:a};return Object(u.jsx)("div",{className:"substatusmsgDelivered",dangerouslySetInnerHTML:{__html:Object(m.p)(i,e)}})}return Object(l.translateWithI18Next)(null===t||void 0===t?void 0:t.mainHeadingOne)},I=e=>{const{orderSummarycontentData:t,deliveryOrEstimatedOrCollectAtTime:a}=e,i=null===t||void 0===t?void 0:t.mainHeadingTwo;return null!==i&&void 0!==i&&i.includes(O.Pd)?Object(s.d)(e):i?a:void 0},x=e=>{var t;const{arrivalTime:a,orderDetails:i,pastOrderTimeFormat:o}=e;return Object(c.D)(i)?"".concat(Object(b.Uc)(null===i||void 0===i||null===(t=i.deliveryDetails)||void 0===t?void 0:t.actualDeliveryTime,o)):a},f=e=>{var t;const{orderDetails:a,isUberServiceableEnabled:i}=e,{orderStatus:o,enableRetryCountForPickupOrderTracking:n,enableClickCollectScheduleOrder:r,orderSummarycontentData:s,showPinCode:v,deliveryPinDetails:O}=a,b=Object(j.e)(null===a||void 0===a||null===(t=a.deliveryDetails)||void 0===t?void 0:t.partnerName)&&i,h=!n&&!b||r?Object(c.a)(a):Object(m.g)(a),p=!Object(c.r)(a)&&!Object(c.I)(a)||r?Object(m.h)(a):Object(m.c)(a);return Object(u.jsxs)("div",{children:[""!==h&&Object(u.jsx)("div",{className:"allSet allset-delivery ".concat(o,"-delivery-allSet col-12 ").concat(Object(c.L)(a)?"":"p-0px-imp"," ").concat(i?"allSet-smaller-font":""),children:Object(u.jsx)("span",{children:Object(l.translateWithI18Next)(h)})}),""!==p&&!Object(c.A)(a)&&Object(u.jsx)("div",{className:"substatusmsg",dangerouslySetInnerHTML:{__html:p}}),(null===s||void 0===s?void 0:s.description)&&Object(u.jsxs)("div",{className:"emailConfirmTxt",children:[" ",Object(l.translateWithI18Next)(null===s||void 0===s?void 0:s.description)]}),v&&O&&(null===O||void 0===O?void 0:O.isPinEnabled)&&!Object(c.L)(a)&&Object(u.jsxs)("div",{className:"row pincode-section",children:[Object(u.jsxs)("span",{children:[Object(l.translateWithI18Next)(d.a.PIN_CODE),":"]}),Object(u.jsx)("span",{children:O.pin})]})]})},E=e=>{const{orderDetails:t}=e,{deliveryPartner:a,deliveryDetails:i}=t,o=(null===a||void 0===a?void 0:a.otp)||(null===i||void 0===i?void 0:i.otp);return!Object(c.O)(t)&&o&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"estimated-arrival estimated-arrival-refund driver-msg col-12",children:Object(l.translateWithI18Next)(null===d.a||void 0===d.a?void 0:d.a.ASK_FOR_OTP)}),Object(u.jsx)("div",{className:"idAndTime time-delivery",children:Object(u.jsx)("div",{className:"red otp",children:o})})]})},C=e=>Object(u.jsxs)(u.Fragment,{children:[!Object(m.k)(null===e||void 0===e?void 0:e.orderDetails)&&!Object(c.I)(null===e||void 0===e?void 0:e.orderDetails)&&h(e),N(e),!Object(m.l)(null===e||void 0===e?void 0:e.orderDetails)&&g(e),f(e),E(e)]}),T=e=>{const{orderDetails:t}=e,{deliveryPartner:a,deliveryDetails:i}=t;return Object(u.jsx)("iframe",{sandbox:"allow-same-origin allow-scripts",className:"iframe-ordertrackingmaps",title:Object(l.translateWithI18Next)(null===d.a||void 0===d.a?void 0:d.a.TRACK_ORDER),src:(()=>{const e=(null===a||void 0===a?void 0:a.tracking_url)||(null===i||void 0===i?void 0:i.deliveryTrackingUrl);return(e&&-1===e.indexOf(O.Lc)?O.Lc:"")+e})()})},y=e=>{const{deliveryAddress:t,store:a,deliveryDetails:i}=null===e||void 0===e?void 0:e.orderDetails;if(Object(b.ge)(a)&&Object(b.ge)(t)){var o,l,d,r;const s=[null===a||void 0===a||null===(o=a.location)||void 0===o?void 0:o.latitude,null===a||void 0===a||null===(l=a.location)||void 0===l?void 0:l.longitude],c=[null===t||void 0===t||null===(d=t.location)||void 0===d?void 0:d.latitude,null===t||void 0===t||null===(r=t.location)||void 0===r?void 0:r.longitude];return(e=>Object(u.jsx)(n.a,{...e,testId:"appGoogleMap",importPath:"APP_GOOGLE_MAP",orderTracking:!0,storeLatLng:s,customerLatLng:c,raiderCurrentLatLng:null===i||void 0===i?void 0:i.riderLocation,stylers:A}))(e)}},D=e=>{const{orderDetails:t}=e;return(Object(c.y)(t)||Object(c.eb)(t))&&Object(u.jsx)(v,{...e})},A=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#202124"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"off"},{color:"#202124"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#e3e3e3"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#e3e3e3"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{lightness:20}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#e3e3e3"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#e3e3e3"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.4}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{lightness:17}]}]},1078:function(e,t,a){"use strict";var i=a(3),o=a(15),l=a(213),n=a(44),d=a(85),r=a(25),s=a(1281),c=a(1282),u=a(6),v=a(2);t.a=e=>{let{success:t,msg:a,infinit:O=!1}=e;const{Error_Yellow:b,GreenCheck:m}=o.a,[j,h]=Object(i.useState)(!0),p=Object(r.b)();Object(i.useEffect)((()=>{if(!O){const e=setTimeout((()=>{h(!1)}),5e3);return j?()=>{p(Object(n.g)({})),clearTimeout(e)}:(p(Object(n.g)({})),null)}}),[p,O,j]);const g=Object(u.translateWithI18Next)(d.a.mapMessageInJP(a));return Object(v.jsx)(s.a,{className:"info-notification_wrapper",children:Object(v.jsxs)(c.a,{xs:"12",className:"info-notification_container ".concat(t&&"greenbg"),children:[Object(v.jsx)("div",{className:"info-notification_icon ",children:t?Object(v.jsx)(l.a,{src:m,className:"info-notification_image green-icon",alt:""}):Object(v.jsx)(l.a,{src:b,className:"info-notification_image",alt:""})}),Object(v.jsx)("div",{className:"info-notification_text-container",children:Object(v.jsx)("div",{className:"info-notification_text",children:g||a})})]})})}},1080:function(e,t,a){"use strict";a(3);var i=a(171),o=a(2);t.a=e=>(e=>Object(o.jsx)(i.a,{...e,testId:"order_summary_info_details_view",importPath:"ORDER_SUMMARY_INFO_DETAILS_VIEW"}))(e)},1081:function(e,t,a){"use strict";(function(e){var i=a(3),o=a.n(i),l=a(25),n=a(1057),d=a(57),r=a(63),s=a(155),c=a(6),u=a(5),v=a(154),O=a(1103),b=a(0),m=a(4),j=a(55),h=a(990),p=a(216),g=a(269),N=a(2);t.a=t=>{var a,S,I,x,f,E,C,T,y,D,A,R,_,w,L,k,M;const P=Object(l.b)(),{modalType:F,toggleModal:W,updateSetOrderDetails:H}=t,{HIDDEN:U,DELIVERY_SERVICE:B,CHANNEL:G,INITIAL_STATE:V,MAX_DELIVERY_DISTANCE:Y,NO_OF_STORE_FOR_DELIVERY:K}=v.b,{FIELD_NAME:z,PIN_CODE:q}=v.d,{ADDRESS_UPDATED:J,ADDRESS_SAVED:X}=m.a,{allStores:Q=[]}=Object(l.c)((e=>e.allStoresReducer)),{savedAddresses:Z}=Object(l.c)((e=>e.profileReducer)),$=Object(l.c)((e=>e.tenantReducer)),{tenantId:ee="",storeSearch:te={},country:ae,countryNameInDefaultLang:ie,componentOptions:oe}=$,le=null===oe||void 0===oe||null===(a=oe.web)||void 0===a||null===(S=a.dispositionConfig)||void 0===S||null===(I=S.deliveryStores)||void 0===I?void 0:I.shouldEnableConfirmButton,ne=Object(u.Tc)(Object(u.Kd)(null===t||void 0===t?void 0:t.address),null===t||void 0===t?void 0:t.address,V),[de,re]=Object(i.useState)(ne),[se,ce]=Object(i.useState)(!1),[ue,ve]=Object(i.useState)(!0),Oe=null===te||void 0===te?void 0:te.geohashprecision,be=(null===te||void 0===te?void 0:te.boundingBoxSizeMeters)/1e3,[me,je]=Object(i.useState)(!1),[he,pe]=Object(i.useState)(!1),ge=null===$||void 0===$||null===(x=$.componentOptions)||void 0===x||null===(f=x.web)||void 0===f||null===(E=f.accountPage)||void 0===E?void 0:E.filterConditions,Ne=null===$||void 0===$||null===(C=$.componentOptions)||void 0===C||null===(T=C.web)||void 0===T||null===(y=T.accountPage)||void 0===y?void 0:y.showAddressMapView,Se=null===$||void 0===$||null===(D=$.componentOptions)||void 0===D||null===(A=D.web)||void 0===A?void 0:A.address,Ie=null===$||void 0===$?void 0:$.addressRegex,[xe,fe]=Object(i.useState)(),[Ee,Ce]=o.a.useState([]),[Te,ye]=o.a.useState(!1),[De,Ae]=o.a.useState(!1),{ready:Re,value:_e,suggestions:we,setValue:Le,clearSuggestions:ke}=Object(n.a)({requestOptions:{componentRestrictions:{country:null===(R=e)||void 0===R||null===(_=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TENANT_CODE:"in",REACT_APP_API_BASE_URL:"https://online.kfc.co.in",REACT_APP_PWA_VERSION_STRING:"pwa-2502-0-3_39e1541f"}))||void 0===_?void 0:_.REACT_APP_TENANT_CODE},types:null===$||void 0===$||null===(w=$.componentOptions)||void 0===w||null===(L=w.web)||void 0===L||null===(k=L.dispositionConfig)||void 0===k||null===(M=k.DELIVERY_FORM)||void 0===M?void 0:M.filteredTypes},debounce:300}),Me={...we,data:Object(p.d)(null===we||void 0===we?void 0:we.data,ge)},Pe=Object(i.useRef)(null),Fe=()=>{document.querySelector("body").style.overflow="",W(!1),P(Object(r.u)())};Object(i.useEffect)((()=>{var e,t;F&&s.a.calculateGH({lat:parseFloat(Object(u.fb)(null===de||void 0===de||null===(e=de.location)||void 0===e?void 0:e.latitude,null===de||void 0===de?void 0:de.latitude)),lon:parseFloat(Object(u.fb)(null===de||void 0===de||null===(t=de.location)||void 0===t?void 0:t.longitude,null===de||void 0===de?void 0:de.longitude)),distanceFromCurrentLoc:be,geoHashPrecision:Oe});document.querySelector("body").style.overflow=U}),[]),Object(i.useEffect)((()=>(document.addEventListener("mousedown",We),()=>{document.removeEventListener("mousedown",We)}))),Object(i.useEffect)((()=>{re(F?e=>({...e,isAddressSelected:!0}):e=>({...e,isAddressSelected:!1}))}),[F]);const We=e=>{Pe.current&&!Pe.current.contains(e.target)&&ke()},He=()=>{var e,t,a,i,o,l,n,d;return(null===de||void 0===de||null===(e=de.addressLines)||void 0===e||null===(t=e[1])||void 0===t?void 0:t.length)&&(null===de||void 0===de||null===(a=de.city)||void 0===a?void 0:a.length)&&(null===de||void 0===de||null===(i=de.pinCode)||void 0===i?void 0:i.length)&&(null===de||void 0===de||null===(o=de.state)||void 0===o?void 0:o.length)&&(null===de||void 0===de||null===(l=de.deliveryOptions)||void 0===l?void 0:l.length)&&(!le||(null===de||void 0===de||null===(n=de.addressLines)||void 0===n||null===(d=n[0])||void 0===d?void 0:d.length))&&!me&&!he},Ue=e=>{var t,a,i;return(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude)&&(null===e||void 0===e||null===(i=e.availableServicesPerChannel)||void 0===i?void 0:i.filter((e=>{var t;return(null===e||void 0===e?void 0:e.channel)===G&&(null===e||void 0===e||null===(t=e.services)||void 0===t?void 0:t.disposition)===B})))},Be=()=>{let e="".concat(Object(c.translateWithI18Next)("Address")," 1");const t=[...Z.map((e=>e.name))].filter((e=>e.indexOf(Object(c.translateWithI18Next)("Address"))>-1));return Ge(t,e)},Ge=(e,t)=>{let a=t;return e.includes(a)?(a=a.replace(/(\d+)+/g,((e,t)=>parseInt(t)+1)),Ge(e,a)):a},Ve=(e,t)=>{const a={lat:e,lon:t,distanceFromCurrentLoc:10,geohashprecision:Oe},i=s.a.calculateGH(a);P(Object(r.v)(null===i||void 0===i?void 0:i.length))};return Object(N.jsx)(O.a,{...t,dataTestId:"addressModalTest",setValue:Le,value:_e,error:se,addresses:de,handleChange:e=>{let{target:t}=e;const{name:a,value:i}=t,o=Object(u.Tc)(a===z.NAME,i,de.name);if(a===q){var l;if(!(null===(l=/^\d+$/)||void 0===l?void 0:l.test(i))&&""!==i)return;re({...de,[a]:i})}if(a===z.DELIVERY_OPTION)return void re({...de,[a]:i!==b.zb[0]?i:""});const n={addressRegex:Ie,valueInfo:i,setSaveAddress:re,addresses:de,name:a};if(o){const e=(e=>!!Object(u.Tc)(!F,Z,Z.filter((e=>(null===e||void 0===e?void 0:e.id)!==(null===ne||void 0===ne?void 0:ne.id)))).find((t=>{var a,i;return(null===t||void 0===t||null===(a=t.name.toUpperCase())||void 0===a?void 0:a.trim())===(null===e||void 0===e||null===(i=e.toUpperCase())||void 0===i?void 0:i.trim())})))(o);(null===Ie||void 0===Ie?void 0:Ie.test(o))?e?(je(!0),pe(!1)):(pe(!1),je(!1)):(je(!1),pe(!0))}else pe(!1),je(!1);if(a!==z.FLOOR)if(t.type!==z.CHECKBOX)re({...de,[a]:i});else{Z.find((e=>e.isPrimary&&e.id===de.id))||re({...de,[a]:"true"!==i})}else(e=>{const{addressRegex:t,valueInfo:a,setSaveAddress:i,addresses:o,name:l}=e;if(null===t||void 0===t?void 0:t.test(a)){const e=[a,null===o||void 0===o?void 0:o.addressLines[1]];i({...o,[l]:a,addressLines:e,isFlatNumberSelected:!1})}})(n)},handleInput:e=>{if(null===de||void 0===de||!de.isAddressSelected){Le(e.target.value);const t=[null===de||void 0===de?void 0:de.addressLines[0],e.target.value];re({...de,addressLines:t})}ve(!0)},ready:Re,suggestionRef:Pe,suggestions:Me,handleSelect:t=>{let{description:a,structured_formatting:{main_text:i,secondary_text:o}}=t;return()=>{var t,i;ve(!1),ce(!1),ke(),P(Object(r.u)()),Object(n.b)({address:a,componentRestrictions:{country:null===(t=e)||void 0===t||null===(i=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TENANT_CODE:"in",REACT_APP_API_BASE_URL:"https://online.kfc.co.in",REACT_APP_PWA_VERSION_STRING:"pwa-2502-0-3_39e1541f"}))||void 0===i?void 0:i.REACT_APP_TENANT_CODE}}).then((e=>(Object(h.e)(b.Hd,e[0],Le,re,ke,He),fe(null===de||void 0===de?void 0:de.addressLines[1]),Object(n.c)(e[0])))).then((e=>{s.a.calculateGH({lat:parseFloat(null===e||void 0===e?void 0:e.lat),lon:parseFloat(null===e||void 0===e?void 0:e.lng),distanceFromCurrentLoc:be,geoHashPrecision:Oe}),re((t=>({...t,latitude:null===e||void 0===e?void 0:e.lat,longitude:null===e||void 0===e?void 0:e.lng,isAddressSelected:!0,isFlatNumberSelected:!0})))})).catch((e=>{console.log("Error: ",e)}))}},checkFormValidation:Ne?()=>{var e,t,a,i;return(null===de||void 0===de||null===(e=de.addressLines[1])||void 0===e?void 0:e.length)&&(null===de||void 0===de||null===(t=de.city)||void 0===t?void 0:t.length)&&(null===de||void 0===de||null===(a=de.pinCode)||void 0===a?void 0:a.length)&&(null===de||void 0===de||null===(i=de.state)||void 0===i?void 0:i.length)&&!me&&!he}:He,handleSubmit:e=>{const t=(e=>{var t,a;let i={},o=["",""];return o[1]=e.addressLines[1],o[0]=Object(u.fb)(null===e||void 0===e?void 0:e.floor,e.addressLines[0]),i={addressId:Object(u.md)(null===e||void 0===e?void 0:e.id),addressName:Object(u.fb)(e.name,Be()),city:e.city,postalCode:null===e||void 0===e?void 0:e.pinCode,state:e.state,country:Object(u.md)(e.country),isPrimary:Object(u.ob)(e.isPrimary,Z.length<1,!1),location:{latitude:Object(u.fb)(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude,null===e||void 0===e?void 0:e.latitude),longitude:Object(u.fb)(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude,null===e||void 0===e?void 0:e.longitude)},addressLines:o,deliveryInstructions:null===e||void 0===e?void 0:e.deliveryInstructions,deliveryOptions:null===e||void 0===e?void 0:e.deliveryOptions,placeId:null===e||void 0===e?void 0:e.placeId},i})(de),a=null===Q||void 0===Q?void 0:Q.filter(Ue),i=null===te||void 0===te?void 0:te.maxDriveTimeMins,o=Object(u.fb)(null===te||void 0===te?void 0:te.maxDeliveryDistanceMtrs,Y),l=s.a.checkAndProceed({stores:a,disposition:B,distanceMetrics:null===te||void 0===te?void 0:te.distanceMetrics,driveTime:i,distanceInMtrs:o,noOfStores:K});if(e&&H({savedAddressSucess:!0}),null!==l&&void 0!==l&&l.length||e){const{customerId:e,phoneNumber:a}=j.a.getInstance();P(Object(d.a)({customerId:e,phoneNumber:a,tenantId:ee,data:t})),Fe();const i=Object(u.Tc)(F,Object(c.translateWithI18Next)(J),Object(c.translateWithI18Next)(X));Object(u.pf)(i,"","favorites-added-toast")}else ce(!0)},isNameExist:me,isInvalidName:he,handleClose:Fe,savedAddresses:Z,showSuggestions:ue,country:ae,countryNameInDefaultLang:ie,setSaveAddress:re,nonFormattedAddress:xe,setNonFormattedAddress:fe,addressFormConditions:Se,seteligibleStoreData:Ce,showStores:Te,setShowStores:ye,showMapBasedField:De,setShowMapBasedFiled:Ae,clearSuggestions:ke,showAddressMapView:Ne,allStores:Q,getUserLatLong:e=>{P(Object(g.b)()),P(Object(r.u)()),Ve(e.userLat,e.userLong),setTimeout((()=>{P(Object(g.a)())}),2e3)},dispatch:P,setError:ce})}}).call(this,a(112))},1088:function(e,t,a){"use strict";a.d(t,"a",(function(){return D})),a.d(t,"e",(function(){return A})),a.d(t,"f",(function(){return R})),a.d(t,"c",(function(){return _})),a.d(t,"d",(function(){return w})),a.d(t,"b",(function(){return L}));var i=a(6),o=a(4),l=a(15),n=a(215),d=a(1080),r=a(5),s=a(36),c=a(43),u=a(901),v=a(0),O=a(77),b=a(1023),m=a(2);const j=e=>Object(m.jsxs)("div",{className:"savingdivDelivery",children:[Object(m.jsx)("span",{className:"savingText",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.REORDER_FAVORITES)}),Object(m.jsx)("span",{className:"saveButton",children:Object(m.jsx)(s.a,{"data-testid":"create-kfc-account-btn",className:"button transparent-btn black-border",onClick:()=>(e=>{const{orderDetails:t}=e,{total:a,currencyConversionFactor:i,customer:o}=t,{firstName:l,lastName:n,email:d,phoneNumber:s,id:c}=o;Object(u.a)(),sessionStorage.setItem(v.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT,c);const m=sessionStorage.getItem(v.Ke.MARKETING_OPT_VAL),j="&userEmail=".concat(d?Object(b.b)(d):void 0);let h="userFirstName=".concat(Object(b.b)(l),"&userLastName=").concat(n?Object(b.b)(n):void 0).concat(j,"&userPhoneNumber=").concat(Object(b.b)(s));if(m){const e=JSON.parse(m),{Email:t,Phone:a}=e;h=t?"".concat(h,"&emailSubscription=").concat(t):h,h=a?"".concat(h,"&phoneSubscription=").concat(a):h}Object(O.a)(h),Object(u.d)({orderValue:Object(r.g)(a/i)})})(e),ariaLable:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CREATE_KFC_ACCOUNT),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CREATE_KFC_ACCOUNT)})})]}),h=e=>{var t;const{orderDetails:a,savedAddresses:l}=e,d=null===a||void 0===a||null===(t=a.deliveryAddress)||void 0===t?void 0:t.location,r=null===l||void 0===l?void 0:l.find((e=>{var t,a;const i=parseFloat(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)===parseFloat(null===d||void 0===d?void 0:d.latitude),o=parseFloat(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude)===parseFloat(null===d||void 0===d?void 0:d.longitude);return i&&o})),{orderSummarySaveYourOrderCompleted:u,userStatus:v,savedAddressSucess:O,saveFavoriteSummarySucess:b,hideCreateAccountPanel:h}=a;return Object(m.jsx)("div",{className:"saveYourOrdersAndCreateKFCAccountContainer col-12",children:Object(n.I)(a)||Object(n.fb)(a)?(e=>{const{orderDetails:t}=e,{helpContantData:a}=t,{helpSectionCallDetails:l}=a;return Object(m.jsxs)("div",{className:"savingdivDelivery",children:[Object(m.jsx)("span",{className:"savingText",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.HERE_TO_HELP)}),Object(m.jsx)("span",{className:"saveButton",children:Object(m.jsx)("a",{tabIndex:"-1",href:"tel:"+(null===l||void 0===l?void 0:l.contactNo),className:"anchorTags",children:Object(m.jsxs)(s.a,{ariaLable:"contact us","data-testid":"contact-us-btn",className:"button transparent-btn black-border",children:[Object(m.jsx)(c.a,{srcFile:null===l||void 0===l?void 0:l.icon,alt:" ",className:"Messageimage"}),"".concat(null===l||void 0===l?void 0:l.buttonText," ").concat(null===l||void 0===l?void 0:l.contactNo)]})})})]})})(e):u&&null!==a&&void 0!==a&&a.deliveryAddress&&!r?(e=>{const{updateSetOrderDetails:t}=e;return Object(m.jsxs)("div",{className:"savingdivDelivery",children:[Object(m.jsx)("span",{className:"savingText",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.SAVE_ADDRESS_BOOK)}),Object(m.jsx)("span",{className:"saveButton",children:Object(m.jsx)(s.a,{"data-testid":"save-delivery-address",className:"button transparent-btn black-border",onClick:()=>t({isOpenSaveDeliveryAddressModal:!0}),ariaLable:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.SAVE_DELIVERY_ADDRESS),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.SAVE_DELIVERY_ADDRESS)})})]})})(e):null===v||void 0===v||!v.loggedIn||O||b?O||b||h?void 0:j(e):(e=>{var t,a;const{orderDetails:l,updateSetOrderDetails:n,saveOrderDescriptionText:d=(null===o.a||void 0===o.a?void 0:o.a.SAVE_YOUR_ORDERS_AND_CHECKOUT_FASTER),saveOrderButtonLabel:r=(null===o.a||void 0===o.a?void 0:o.a.SAVE_THIS_ORDER)}=e;return void 0===(null===l||void 0===l||null===(t=l.favouriteOrders)||void 0===t?void 0:t.find((e=>e.id===(null===l||void 0===l?void 0:l.orderId))))&&Object(m.jsxs)("div",{className:"savingdiv",children:[Object(m.jsx)("span",{className:"saving",children:null===(a=Object(i.translateWithI18Next)(d))||void 0===a?void 0:a.toUpperCase()}),Object(m.jsx)("span",{className:"saveButton",children:Object(m.jsx)(s.a,{"data-testid":"save-logged-order",className:"button transparent-btn black-border",onClick:()=>n({isOpenOrderSummarySaveYourOrderCheckoutFaster:!(null!==l&&void 0!==l&&l.isOpenOrderSummarySaveYourOrderCheckoutFaster)}),ariaLable:Object(i.translateWithI18Next)(r),children:Object(i.translateWithI18Next)(r)})})]})})(e)})};var p=a(1073),g=a(1058);const N=e=>{var t;const{orderDetails:a}=e,{storeName:l,displayOrderId:n}=a;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"catering-store-order",children:l}),n&&Object(m.jsx)("div",{className:"catering-store-order red",children:(null===(t=Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ORDER_HASH))||void 0===t?void 0:t.toUpperCase())+n})]})},S=e=>{const{orderDetails:t}=e,{orderStatus:a,deliveryOrEstimatedOrCollectAtTime:l}=t;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"estimated-arrival estimated-arrival-refund ".concat(a,"-delivery"),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.COLLECTED_AT)}),Object(m.jsx)("div",{className:"idAndTime time-delivery",children:l})]})},I=e=>{const{orderDetails:t}=e,{orderStatus:a}=t,i=Object(n.m)(t)?null===l.a||void 0===l.a?void 0:l.a.CartError:Object(n.n)(t)?null===l.a||void 0===l.a?void 0:l.a.ConfirmedImg:null===l.a||void 0===l.a?void 0:l.a.clockFeature;return""!==i&&Object(m.jsx)("img",{src:i,className:"statusIcon",alt:a})},x=e=>{const{orderDetails:t}=e,{orderStatus:a,service:l,selectedCateringOrderCollectionMethod:d,deliveryOrEstimatedOrCollectAtMonthDate:r,deliveryOrEstimatedOrCollectAtTime:s}=t,c=(e=>{var t;return Object(n.m)(e)?Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CANCEL_ORDER):Object(n.n)(e)?Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ENJOY_MEAL):"".concat(Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.THANK_YOU),", ").concat(null===e||void 0===e||null===(t=e.customer)||void 0===t?void 0:t.firstName.replace(/(.{7})..+/,"$1..."))})(t);return""!==c&&Object(m.jsxs)("div",{className:"allSet ".concat(a,"-allSet ").concat(l," ").concat(d," col-12 ").concat(Object(n.o)(t)?"":"p-0px-imp"),children:[Object(m.jsx)("div",{className:"statusMessage",children:c}),!Object(n.o)(t)&&Object(m.jsxs)("div",{className:"catering-order-deliver-details",children:["".concat(Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.YOUR_CATERING))," ",Object(m.jsx)("span",{className:"red",children:r})," ",Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.AT)," ",Object(m.jsx)("span",{className:"red",children:s})]}),!Object(n.o)(t)&&Object(m.jsx)("div",{className:"catering-confirmation-email-details",children:"".concat(Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.CATERING_CONFIRMATION_EMAIL))})]})},f=e=>{const{orderDetails:t}=e,{deliveryPartner:a,deliveryDetails:l}=t,d=(null===a||void 0===a?void 0:a.otp)||(null===l||void 0===l?void 0:l.otp);return!Object(n.o)(t)&&d&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"estimated-arrival estimated-arrival-refund driver-msg col-12",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ASK_FOR_OTP)}),Object(m.jsx)("div",{className:"idAndTime time-delivery",children:Object(m.jsx)("div",{className:"red otp",children:d})})]})},E=e=>Object(m.jsxs)(m.Fragment,{children:[!Object(n.o)(null===e||void 0===e?void 0:e.orderDetails)&&N(e),Object(n.n)(null===e||void 0===e?void 0:e.orderDetails)&&S(e),I(e),x(e),f(e)]}),C=e=>Object(m.jsx)(d.a,{...e}),T=()=>Object(m.jsx)("div",{className:"linebreak col-12"}),y=e=>{const t=null===e||void 0===e?void 0:e.hideCreateAccountSection,a={saveOrderDescriptionText:null===o.a||void 0===o.a?void 0:o.a.RECKON_TEXT,saveOrderButtonLabel:null===o.a||void 0===o.a?void 0:o.a.SAVE_TO_FAVOURITE_ORDER};if(!t)return Object(m.jsxs)("div",{className:"col-12 bottomPanel","data-testid":"bottomPanel",children:[T(),h({...e,...a})]})},D=e=>{const{orderDetails:t}=e,{service:a}=t;return Object(m.jsxs)("div",{className:"orderSummaryContainer row ".concat(a),children:[Object(m.jsx)("div",{className:"col-12 col-lg-8 leftPanel ".concat(a),children:Object(m.jsx)("div",{className:"orderSummaryStatusContainer col-12 ".concat(Object(n.o)(t)?"redCard":"","  ").concat(a),children:Object(m.jsx)("div",{className:"orderSummaryStatusPanel col-12  ".concat(a),children:E(e)})})}),Object(m.jsx)("div",{className:"col-12 col-lg-6 rightPanel ".concat(a),children:C(e)}),!(null!==t&&void 0!==t&&t.disableTrackingFields)&&y(e)]})},A=e=>{var t;const{orderDetails:a}=e,{service:i,isMobileView:o,hideCancelOrderPanel:l,hidePickupCheckin:d}=a;return Object(m.jsxs)("div",{className:"orderSummaryContainer row ".concat(i),children:[(Object(n.fb)(a)&&(null===a||void 0===a?void 0:a.enableRetryCountForPickupOrderTracking)||!Object(n.fb)(a))&&Object(m.jsxs)("div",{className:"col-12 col-lg-8 leftPanel ".concat(i),children:[Object(m.jsx)("div",{className:"orderSummaryStatusContainer col-12 ".concat(Object(n.hb)(a)?"redCard":"","  ").concat(i),children:Object(m.jsx)("div",{className:"orderSummaryStatusPanel col-12  ".concat(i),children:Object(g.a)(e)})}),Object(n.ib)(a)&&!(null!==a&&void 0!==a&&a.selectedPickupOrderCollectionMethod)&&(null===a||void 0===a||null===(t=a.pickupOrderAvailableCollectionPoints)||void 0===t?void 0:t.length)>0&&d&&!(null!==a&&void 0!==a&&a.disableTrackingFields)&&Object(g.f)(e)]}),Object(m.jsxs)("div",{className:"col-12 col-lg-6 rightPanel ".concat(i),children:[C(e),!l&&!Object(n.hb)(a)&&!(null!==a&&void 0!==a&&a.disableTrackingFields)&&Object(g.e)(e)]}),!Object(n.mb)(a)&&!(null!==a&&void 0!==a&&a.disableTrackingFields)&&y(e),!l&&o&&!Object(n.hb)(a)&&Object(m.jsx)("div",{className:"col-12 ".concat(i," p-0px-imp"),children:T()})]})},R=e=>{const{orderDetails:t}=e,{service:a}=t;return Object(m.jsxs)("div",{className:"orderSummaryContainer row ".concat(a),children:[Object(m.jsx)("div",{className:"col-12 col-lg-6 rightPanel ".concat(a),children:C(e)}),y(e)]})},_=e=>Object(m.jsx)("div",{className:"orderSummaryContainer row giftcardorder",children:Object(m.jsx)("div",{className:"col-12 col-lg-8 leftPanel",children:Object(m.jsx)("div",{className:"orderSummaryStatusContainer col-12 redCard",children:Object(m.jsxs)("div",{className:"giftcard-content",children:[Object(m.jsx)("div",{className:"giftcard-success",children:Object(m.jsx)("img",{src:null===l.a||void 0===l.a?void 0:l.a.ConfirmedImg,className:"statusIcon",alt:"tex"})}),Object(m.jsx)("div",{className:"giftcard-success-msg",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.GIFT_CARD_PURCHASE_ORDER_SUCCESS_MESSAGE_PART_ONE)}),Object(m.jsx)("div",{className:"giftcard-success-msg",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.GIFT_CARD_PURCHASE_ORDER_SUCCESS_MESSAGE_PART_TWO)}),Object(m.jsx)("div",{className:"giftcard-success-status",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.GIFT_CARD_PURCHASE_MSG)}),Object(m.jsx)("div",{className:"gift-card-button",children:Object(m.jsx)("button",{"data-testid":"gift-card-button",className:"button giftcard-button",onClick:()=>Object(r.Ke)({history:e},!1,!0),children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.RETURN_TO_GIFT_CARD)})})]})})})}),w=e=>{const{displayOrderId:t}=e;return Object(m.jsxs)("div",{className:"orderNumber",children:[Object(m.jsx)("span",{className:"",children:Object(i.translateWithI18Next)(null===o.a||void 0===o.a?void 0:o.a.ORDER_HASH)}),t]})},L=e=>{const{orderDetails:t}=e,{service:a,isMobileView:i,enableCancelOrderCallsupportModal:o,showDeliveryTrackingMap:l,showDeliveryOrderRaiderDetailsView:d,showDeliveryDriverDetails:r,showOrderSummaryInfoDetails:s,orderStatusFlag:c}=t;return Object(m.jsxs)("div",{className:"orderSummaryContainer row ".concat(a),children:[Object(m.jsxs)("div",{className:"col-12 ".concat(!Object(n.K)(t)||s||c?"col-lg-6":"col-lg-8 m-auto"," leftPanel ").concat(a),children:[Object(m.jsx)("div",{className:"orderSummaryStatusContainer col-12 mb-1 ".concat(Object(n.L)(t)?"redCard":""," ").concat(Object(n.O)(t)||Object(n.C)(t)?Object(n.d)(t):"dasher-dropoff-updated"," "),children:Object(m.jsx)("div",{className:"orderSummaryStatusPanel col-12",children:Object(p.b)(e)})}),l&&i&&(Object(n.Q)(t)||Object(n.rb)(t))&&Object(m.jsx)("div",{className:"mt-20px",children:k(e)}),(r||d)&&Object(p.d)(e),!i&&(Object(n.Q)(t)||Object(n.rb)(t))&&Object(m.jsx)(m.Fragment,{children:C(e)})]}),Object(n.K)(t)&&s&&Object(m.jsx)("div",{className:"col-12 col-lg-6 rightPanel ".concat(a),children:C(e)}),Object(m.jsx)("div",{className:"col-12 col-lg-6 rightPanel ".concat(a),children:(!Object(n.K)(t)||c)&&(l&&!i&&(Object(n.Q)(t)||Object(n.rb)(t))?k(e):Object(m.jsxs)(m.Fragment,{children:[C(e),o&&!(null!==t&&void 0!==t&&t.disableTrackingFields)&&(Object(n.nb)(t)||Object(n.C)(t))&&Object(g.e)(e)]}))}),!Object(n.mb)(t)&&!(null!==t&&void 0!==t&&t.disableTrackingFields)&&y(e)]})},k=e=>{const{orderDetails:t}=e;return null!==t&&void 0!==t&&t.showOrderTrackingIFrame?Object(p.c)(e):Object(p.e)(e)}},1103:function(e,t,a){"use strict";(function(e){var i=a(3),o=a(6),l=a(36),n=a(43),d=a(121),r=a(154),s=a(1070),c=a(15),u=a(0),v=a(4),O=a(5),b=a(342),m=a(318),j=a(25),h=a(1104),p=a(990),g=a(351),N=a(63),S=a(18),I=a.n(S),x=a(2);const f=e=>{let{isNameExist:t,isInvalidName:a,SPECIAL_CHAR_ERROR:i,NAME_EXIST_ERROR:l}=e;return(t||a)&&Object(x.jsxs)("div",{className:"error-text-container",children:[Object(x.jsx)(n.a,{srcFile:c.a.Error}),Object(x.jsx)("span",{className:"error-text",children:Object(o.translateWithI18Next)(a?i:l)})]})},E=e=>{const{data:t,status:a,handleSelect:i,countryNameInDefaultLang:l}=e;return(null===a||void 0===a?void 0:a.toUpperCase())===r.b.OK?null===t||void 0===t?void 0:t.map((e=>{const{place_id:t,structured_formatting:{main_text:a,secondary_text:o}}=e;return Object(x.jsx)(x.Fragment,{children:e&&Object(x.jsxs)("li",{"data-testid":"address-suggestion-id",className:"address-suggestion-text",onClick:i(e),children:[Object(x.jsx)(n.a,{srcFile:c.a.SuggestionItemSearchPin,alt:"googleMapLocation",className:"suggetion-pin"}),Object(x.jsxs)("span",{className:"address-text",children:[a," ",o]})]},t)})})):(e=>(null===e||void 0===e?void 0:e.toUpperCase())===r.b.ZERO_RESULTS?Object(x.jsx)("div",{className:"noAddressText",children:Object(o.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.NO_ADDRESS_FOUND)}):null)(a)},C=(e,t)=>{const{floor:a,addressLines:i,isFlatNumberSelected:o}=e;return t&&(null===u.jf||void 0===u.jf?void 0:u.jf.some((e=>t.includes(e))))&&o?Object(m.y)(t):a||i[0]},T=(e,t,a)=>{const{addressLines:i}=e;return null!==u.jf&&void 0!==u.jf&&u.jf.some((e=>null===a||void 0===a?void 0:a.includes(e)))?a:t||(null===i||void 0===i?void 0:i[1])},y=(e,t,a)=>{((e,t,a)=>{(null===a||void 0===a?void 0:a.isAddressSelected)&&!t||e.preventDefault()})(e,t,a)};t.a=t=>{var a,S,D;const A=Object(j.c)((e=>e.tenantReducer)),R=null===A||void 0===A?void 0:A.addressValidRemove,_=null===A||void 0===A||null===(a=A.componentOptions)||void 0===a||null===(S=a.web)||void 0===S||null===(D=S.address)||void 0===D?void 0:D.addressNickNameCharacterLimit,{setValue:w,value:L,isOpen:k,handleClose:M,modalType:P,error:F,addresses:W,handleChange:H,handleInput:U,showSuggestions:B,ready:G,suggestionRef:V,suggestions:Y,handleSelect:K,checkFormValidation:z,handleSubmit:q,isNameExist:J,isInvalidName:X,savedAddresses:Q=[],isAddressFromOrderProcessing:Z=!1,countryNameInDefaultLang:$,setSaveAddress:ee,nonFormattedAddress:te,setNonFormattedAddress:ae,addressFormConditions:ie,seteligibleStoreData:oe,showStores:le,setShowStores:ne,showMapBasedField:de,setShowMapBasedFiled:re,clearSuggestions:se,showAddressMapView:ce,getUserLatLong:ue,dispatch:ve,allStores:Oe,setError:be,deliveryInstration:me=""}=t,{data:je,status:he}=Y,{ADD_NEW_ADDRESS:pe,EDIT_DELIVERY_ADDRESS:ge,NOT_SERVICEABLE:Ne,SPECIAL_CHAR_ERROR:Se,NAME_EXIST_ERROR:Ie,ADDRESS_ERROR_MSG:xe,INITIAL_STATE:fe}=r.b,{CANCEL:Ee,SAVE:Ce,ADDRESS_NICK_NAME:Te,HAND_IT_TO_ME:ye,LEAVE_AT_MY_DOOR:De,PLEASE_FILL_OUT_THIS_FIELD:Ae,DELIVERY_OPTIONS_TOOL_TIP:Re}=v.a,{ADDRESS:_e,APT_SUITE_FLOOR:we,POSTAL_CODE:Le,CITY_TOWN:ke,MAKE_THIS_DEFAULT_ADD:Me,STATE:Pe,DELIVERY_OPTION:Fe,DELIVERY_INSTRUCTION:We}=r.d,{disableCityTownField:He,disablePostalCodeField:Ue,disableStateField:Be}=ie,Ge=[ye,De],Ve=[Object(o.translateWithI18Next)(ye),Object(o.translateWithI18Next)(De)],Ye={id:"AddressModalPopup",role:"dialog",modalTitleId:"AddressModalPopup",show:k,classNames:"address-module-modal edit-addr-model",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:M,modalTitle:P?ge:pe,autoFocus:!0};Object(i.useEffect)((()=>{te&&(null===u.jf||void 0===u.jf?void 0:u.jf.some((e=>te.includes(e))))&&te&&ee({...W,addressLines:[Object(m.y)(te),te]})}),[te]),Object(i.useEffect)((()=>{ce&&ve(Object(N.u)())}),[]),Object(i.useEffect)((()=>{var e;de&&null!==W&&void 0!==W&&null!==(e=W.results)&&void 0!==e&&e.length&&Object(p.e)("",null===W||void 0===W?void 0:W.results[0],w,ee,se,z,"","","",de)}),[null===W||void 0===W?void 0:W.results,de]);const Ke=()=>Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"address-form-section",children:Object(x.jsxs)("div",{className:"form-container",children:[F&&Object(x.jsx)("div",{className:"error-service-msg",children:Object(o.translateWithI18Next)(Ne)}),Object(x.jsxs)("form",{autocomplete:"off",children:[!de&&Object(x.jsxs)("div",{className:"input-container",children:[(L||(null===W||void 0===W?void 0:W.addressLines[1]))&&Object(x.jsx)("div",{className:"remove-container",onClick:()=>(ee({...W,addressLines:[null===W||void 0===W?void 0:W.addressLines[0],""],isAddressSelected:!1,isFlatNumberSelected:!1}),w(""),C(fe),void ae("")),"data-testid":"clear-text-icon",children:Object(x.jsx)("img",{alt:"",src:b.a})}),Object(x.jsx)("input",{"data-testid":"search-input-address",value:T(W,L,te),onChange:U,disabled:!G,name:"addressLine",onFocus:()=>w(L),required:!0,type:"text",title:Object(o.translateWithI18Next)(Ae)}),Object(x.jsxs)("label",{children:[Object(o.translateWithI18Next)(_e),"*"]}),B&&Object(x.jsx)("ul",{ref:V,className:"address-list",children:E({data:je,status:he,handleSelect:K,countryNameInDefaultLang:$})})]}),Object(x.jsxs)("div",{className:"d-flex adjust-width flex-dir",children:[Object(x.jsxs)("div",{className:"input-container",children:[Object(x.jsx)("input",{required:!0,type:"text",name:"floor",value:C(W,te),onChange:H,"data-testid":"floor-test-id",maxLength:ce&&40,title:Object(o.translateWithI18Next)(Ae)}),Object(x.jsx)("label",{children:Object(o.translateWithI18Next)(we)})]}),Object(x.jsxs)("div",{className:"input-container ml5",children:[Object(x.jsx)("input",{required:!0,type:"text",name:"pinCode",onKeyDown:e=>y(e,Ue,W),onKeyPress:e=>y(e,Ue,W),value:null===W||void 0===W?void 0:W.pinCode,tabIndex:"-1","data-testid":"pincode-id",onChange:H,title:Object(o.translateWithI18Next)(Ae),maxLength:ce&&5}),Object(x.jsxs)("label",{children:[Object(o.translateWithI18Next)(Le),"*"]})]})]}),Object(x.jsxs)("div",{className:"d-flex adjust-width flex-dir",children:[Object(x.jsxs)("div",{className:"input-container",children:[Object(x.jsx)("input",{required:!0,type:"text",tabIndex:"-1",name:"city",onKeyDown:e=>y(e,He,W),onKeyPress:e=>y(e,He,W),value:null===W||void 0===W?void 0:W.city,"data-testid":"city-id",onChange:H,title:Object(o.translateWithI18Next)(Ae)}),Object(x.jsxs)("label",{children:[Object(o.translateWithI18Next)(ke),"*"]})]}),Object(x.jsxs)("div",{className:"input-container ml5",children:[Object(x.jsx)("input",{required:!0,type:"text",tabIndex:"-1",name:"state",onKeyDown:e=>y(e,Be,W),onKeyPress:e=>y(e,Be,W),value:null===W||void 0===W?void 0:W.state,"data-testid":"state-id",onChange:H,title:Object(o.translateWithI18Next)(Ae)}),Object(x.jsxs)("label",{children:[Object(o.translateWithI18Next)(Pe),"*"]})]})]}),Object(x.jsxs)("div",{className:ce?"col-12 delivery-option-select":"d-flex adjust-width flex-dir",children:[!ce&&Object(x.jsxs)("div",{className:"input-container",children:[Object(x.jsx)(s.b,{options:Ve,selectClassName:"select-deliveryOptions-selection",optionContainerClassName:"select-deliveryOptions-option-conatiner",optionClassName:"select-deliveryOptions-option",onChange:H,testid:"select-deliveryOptions",name:"deliveryOptions",required:!0,selectedValue:(null===W||void 0===W?void 0:W.deliveryOptions)||Object(o.translateWithI18Next)(null===Ge||void 0===Ge?void 0:Ge[0]),title:Object(o.translateWithI18Next)(Re)}),Object(x.jsxs)("label",{children:[Object(o.translateWithI18Next)(Fe),"*"]})]}),Object(x.jsxs)("div",{className:"input-container ".concat(!ce&&"ml-5"),children:[Object(x.jsx)("input",{required:!0,type:"text",name:"deliveryInstructions",value:(null===W||void 0===W?void 0:W.deliveryInstructions)||me,"data-testid":"deliveryInstruction-id",onChange:H,maxlength:R?r.b.TH_DELIVERY_MAX_LENGTH:r.b.DELIVERY_MAX_LENGTH,title:Object(o.translateWithI18Next)(Ae)}),Object(x.jsx)("label",{children:Object(o.translateWithI18Next)(We)})]})]}),Object(x.jsxs)("div",{className:ce?"col-12 default-address-section default-address-sectionth default-selection":"default-address-section",children:[Object(x.jsx)("input",{type:"checkbox",name:"isPrimary","data-testid":"default-testid",id:"default-address",value:null===W||void 0===W?void 0:W.isPrimary,checked:Object(O.fb)(null===W||void 0===W?void 0:W.isPrimary,Q.length<1||P&&Q.length<=1),onChange:H,disabled:Q.length<1||P&&Q.length<=1,title:Object(o.translateWithI18Next)(Ae)}),Object(x.jsx)("div",{className:"default-label-text",children:Object(x.jsx)("label",{htmlFor:"default-address",children:Object(o.translateWithI18Next)(Me)})})]})]})]})}),Object(x.jsxs)("div",{className:"text-center input-container",children:[Object(x.jsx)(l.a,{onClick:M,"data-testid":"close-testid",className:"mt-10 button font-bold whiteButton blackBorder",children:Object(o.translateWithI18Next)(Ee)}),Object(x.jsx)(l.a,{disabled:!z()||F,className:"mt-10 button font-bold whiteButton blkColor ml5","data-testid":"submit-testid",onClick:()=>{q(Z)},children:Object(o.translateWithI18Next)(Ce)})]})]});return Object(x.jsx)("div",{className:"".concat(ce&&"map-modal-view"),children:Object(x.jsxs)(d.a,{...Ye,"data-testid":"address-modal-landing-page",children:[Object(x.jsx)(x.Fragment,{children:J&&Object(x.jsx)("div",{className:"addr-error-container",children:Object(x.jsxs)("div",{className:"error-sub-container",children:[Object(x.jsx)(n.a,{srcFile:c.a.Error,className:"mr-1 location-alert-icon"}),Object(x.jsx)("div",{className:"error-msg",children:Object(o.translateWithI18Next)(xe)})]})})}),(()=>{return Object(x.jsx)("div",{className:"address-form-section",children:Object(x.jsx)("div",{className:"form-container",children:Object(x.jsx)("form",{autocomplete:"off",children:Object(x.jsxs)("div",{className:"input-container ".concat((J||X)&&"error-input-container"),children:[Object(x.jsx)("input",{required:!0,type:"text","data-testid":"name-testid",name:"name",value:null===W||void 0===W?void 0:W.name,maxLength:_,onChange:H,title:Object(o.translateWithI18Next)(Ae),className:(e=J,t=X,e||t?"error-input":"")}),Object(x.jsx)("label",{children:Object(o.translateWithI18Next)(Te)}),f({isNameExist:J,isInvalidName:X,SPECIAL_CHAR_ERROR:Se,NAME_EXIST_ERROR:Ie})]})})})});var e,t})(),ce&&(()=>{var t,a,i,o,l;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.a,{formContent:null===g.a||void 0===g.a||null===(t=g.a.contentData)||void 0===t||null===(a=t.searchStoreModalContent)||void 0===a?void 0:a.formContent,storeData:[],eligibleStoreData:[],currentMarket:null===(i=e)||void 0===i||null===(o=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TENANT_CODE:"in",REACT_APP_API_BASE_URL:"https://online.kfc.co.in",REACT_APP_PWA_VERSION_STRING:"pwa-2502-0-3_39e1541f"}))||void 0===o||null===(l=o.REACT_APP_TENANT_CODE)||void 0===l?void 0:l.toUpperCase(),dispositionType:null===u.Jb||void 0===u.Jb?void 0:u.Jb.DELIVERY,seteligibleStoreData:oe,storeSelection:{signInLink:!0,useMyLocation:!0,placesSearchInput:!0},eligibleFavoriteStoreData:[],findAKFC:!1,finAKFCContentData:{},isMobile:!1,setShowStores:ne,showStores:le,setShowMapBasedFiled:re,addresses:W,setSaveAddress:ee,userPositionHandler:ue,allStores:Oe,setError:be}),I()(null===W||void 0===W?void 0:W.locationErrorObj)&&(null===W||void 0===W?void 0:W.isConfirmButtonClicked)&&de&&Ke()]})})(),(Z||!ce)&&Ke()]})})}}).call(this,a(112))},1104:function(e,t,a){"use strict";var i=a(3),o=a(25),l=a(38),n=a(76),d=a(1006),r=a(216),s=a(5),c=a(266),u=a(0),v=a(6),O=a(318),b=a(111),m=a(61),j=a(4),h=a(22),p=a(1008),g=a(15),N=a(915),S=a(980),I=a(1007),x=a(18),f=a.n(x),E=a(2);const{MIN_SEARCH_CHARACTER_LIMIT:C,TYPE_DELIVERY:T}=l.a,{LOCATION_BLOCKED_ERROR:y,KFC_URL:D}=j.a,{KEY_CHAR_CODE:A}=u.Xf||{},{ENTER:R}=A||{},{Error_Yellow:_}=g.a;t.a=e=>{var t,a;const{userPositionHandler:l,dispositionType:u,storeSelection:g,setShowMapBasedFiled:x,addresses:T,setSaveAddress:A,formContent:w,allStores:L,setError:k}=e,M=Object(i.useRef)(null),P=Object(m.g)(),{userOrderState:F,userOrderStateDispatch:W}=Object(i.useContext)(n.a),{showLocationConfirmModal:H}=F,[U,B]=Object(i.useState)(!1),[G,V]=Object(i.useState)(!1),[Y,K]=Object(i.useState)(!1),[z,q]=Object(i.useState)(!1),[J,X]=Object(i.useState)([]),[Q,Z]=Object(i.useState)(""),[$,ee]=Object(i.useState)(!1),[te,ae]=Object(i.useState)(!1),ie=Object(o.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t||null===(a=t.savedAddressPage)||void 0===a?void 0:a.showStateCityAddAddress})),[oe,le]=Object(i.useState)({}),ne=Object(o.c)((e=>e.appStateReducer.userStatus)),{loggedIn:de}=Object(s.kd)(ne),{componentOptions:re}=Object(o.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),se=null===re||void 0===re||null===(t=re.web)||void 0===t?void 0:t.dispositionConfig,ce="DELIVERY_FORM",{shouldHandleKeyPress:ue,shouldPopulateFirstSuggestion:ve,filteredTypes:Oe,filterConditions:be,shouldShowLocationLink:me}={...null===b.d||void 0===b.d?void 0:b.d[ce],...null===se||void 0===se?void 0:se[ce]},je=Object(s.xe)(H,me),[he,pe]=Object(i.useState)(!1),{RETRY_BTN_TEXT:ge,ADDRESS_NOT_FOUND_ERROR:Ne,VIEW_MAP_BTN_TEXT:Se,SEARCH:Ie}=j.a,xe=Object(s.Ud)(window.innerWidth);Object(i.useEffect)((()=>{null!==T&&void 0!==T&&T.isLocationButtonClicked&&(null===L||void 0===L?void 0:L.length)>0?(A({...T,locationErrorObj:{}}),V(!0)):null===T||void 0===T||!T.isLocationButtonClicked||null!==L&&void 0!==L&&L.length||A({...T,locationErrorObj:{showError:!0,errMsg:Object(v.translateWithI18Next)(Ne),errDesc:null,firstBtnText:Object(v.translateWithI18Next)(ge),firstBtnCTA:Ee}})}),[L]),Object(i.useEffect)((()=>{var e,t,a;null!==T&&void 0!==T&&T.location&&(le({lat:parseFloat(null===T||void 0===T||null===(e=T.location)||void 0===e?void 0:e.latitude),lng:parseFloat(null===T||void 0===T||null===(t=T.location)||void 0===t?void 0:t.longitude)}),V(!0),Z(null===T||void 0===T||null===(a=T.addressLines)||void 0===a?void 0:a[1]),A({...T,isConfirmButtonClicked:!0,locationErrorObj:{}}),x(!0),ae(!0))}),[null===T||void 0===T?void 0:T.id]);const fe=()=>{A({...T,locationErrorObj:{}}),V(!0),B(!1)},Ee=()=>{var e;!xe&&(null===M||void 0===M||null===(e=M.current)||void 0===e||e.select()),V(!1),B(!1),A({...T,name:null===T||void 0===T?void 0:T.name,locationErrorObj:{}}),pe(!1)};Object(i.useEffect)((()=>{!f()(oe)&&A({...T,location:{latitude:null===oe||void 0===oe?void 0:oe.lat,longitude:null===oe||void 0===oe?void 0:oe.lng}})}),[oe]),Object(i.useEffect)((()=>{Object(O.f)(W,H)}),[W]);const Ce=Object(i.useCallback)((e=>{Object(O.I)(ue,(null===e||void 0===e?void 0:e.keyCode)===R,M,W),Object(O.K)(ve,(null===e||void 0===e?void 0:e.keyCode)===R,J,Z,Q)}),[ue,null===J||void 0===J?void 0:J.length]),Te=Object(i.useCallback)((async e=>{if(A({...T}),null===e||void 0===e||e.preventDefault(),V(!0),B(!1),x(!0),ae(!0),null!==T&&void 0!==T&&T.isLocationButtonClicked)A({...T,isConfirmButtonClicked:!0});else{const e=await Object(c.geocodeByAddress)(Q);A({...T,results:e,isConfirmButtonClicked:!0})}}),[ue,J,l,z,Y]),ye=Object(i.useCallback)((async(e,t)=>{const a=Object(O.o)(t,ue,J,e,u);K(a),q(e),B(!0),x(!1),Z(e),(async(e,t)=>{const a=await Object(c.geocodeByAddress)(e);(null===T||void 0===T?void 0:T.isLocationButtonClicked)&&A({...T,results:a});const i=await Object(c.getLatLng)(a[0]);(null===T||void 0===T||!T.isLocationButtonClicked)&&l({userLat:i.lat,userLong:i.lng}),le(i)})(a),V(!0),pe(!1)}),[ue,J,Y,z]),De=document.getElementsByClassName("suggestion-list")[0];Object(i.useEffect)((()=>{De||!he||null!==T&&void 0!==T&&T.isLocationButtonClicked?A({...T,locationErrorObj:{},isConfirmButtonClicked:!(null===T||void 0===T||!T.id)}):A({...T,locationErrorObj:{showError:!0,errMsg:Object(v.translateWithI18Next)(Ne),errDesc:null,firstBtnText:Object(v.translateWithI18Next)(ge),secondBtnText:Object(v.translateWithI18Next)(Se),firstBtnCTA:Ee,secondBtnCTA:fe}})}),[De,he]);const Ae=()=>{var e;k(!1),Z(""),B(!1),V(!1),!xe&&(null===M||void 0===M||null===(e=M.current)||void 0===e||e.focus()),x(!1),A({addressId:"",city:"",pinCode:"",name:null===T||void 0===T?void 0:T.name,state:"",country:"",isPrimary:null===T||void 0===T?void 0:T.isPrimary,location:{latitude:"",longitude:""},addressLines:["",""],isSelectedAddress:!1,isFlatNumberSelected:!1,deliveryInstructions:"",isLocationButtonClicked:!1,results:[],id:null===T||void 0===T?void 0:T.id}),ae(!1),le({}),K(""),q(""),pe(!1)},Re=Object(i.useCallback)(((e,t)=>{var a;e.length>2&&pe(!0),B(!1),ae(!1),x(!1),null!==e&&void 0!==e&&e.trim()&&(q(e),K(e)),e.trim()?Z(e):Ae(),t&&G&&xe&&(null===M||void 0===M||null===(a=M.current)||void 0===a||a.blur())}),[Ae]),{handleSelectAddress:_e}=Object(r.a)({handleSelectAddressGlobal:ye}),we=Object(i.useCallback)((async()=>{const e=await Object(r.b)(W,ie),t=e&&await Object(c.geocodeByAddress)(h.b.address);if(e){V(!1),B(!0),A({...T,isLocationButtonClicked:!0,results:[null===t||void 0===t?void 0:t[0]],isConfirmButtonClicked:!1,locationErrorObj:{}}),Z(h.b.address),X([{description:h.b.address}]);const{longitude:e,latitude:a}=h.b.coordinates;l({userLat:a,userLong:e}),le({lat:a,lng:e}),k(!1),ae(!1)}Object(O.s)(W,!e)}),[W,l,u]);Object(i.useEffect)((()=>{const e=Object(s.d)(Q,C);ee(e)}),[Q]);return Object(E.jsx)("div",{className:"selectkfc-delivery-container","data-testid":"delivery-container",children:Object(E.jsxs)("div",{className:"delivery-module-form search-store-global","data-testid":"delivery-component",children:[Object(E.jsxs)("div",{id:"search-store-global-content",className:Object(O.u)(H),children:[Object(E.jsx)(N.a,{show:je,errorMsg:Object(O.G)(y,D),errImage:_,cssClass:"location-blocked"}),Object(E.jsxs)("div",{className:"selectkfc-search-store-container",children:[Object(E.jsx)(I.a,{loggedIn:de,formContent:w,storeSelection:g,useCurrentLocation:we,hideLocationLink:!1,showLocationConfirmModal:H}),Object(E.jsx)(d.a,{...e,dataTestId:"ConfirmSearchAddress",storeSelection:g,history:P,inputOnChange:Re,address:Q,showAutoSuggestion:$,setSuggestedAddress:X,handleSelectAddress:_e,alreadySearched:r.c,onClearTextHandler:Ae,keyPress:Ce,inputRef:M,placeholder:Object(v.translateWithI18Next)(Ie),filteredTypes:Oe,filterConditions:be,showConfirmBtn:!0,onClickHandler:Te,confirm:U}),(null===T||void 0===T?void 0:T.locationErrorObj)&&Object(E.jsx)(S.a,{show:null===T||void 0===T||null===(a=T.locationErrorObj)||void 0===a?void 0:a.showError,dataTestId:"locationSearchError",errorObj:null===T||void 0===T?void 0:T.locationErrorObj})]})]}),G?Object(E.jsx)(p.a,{dataTestId:"SearchErrors",eligibleStores:[],defaultStoreId:"",loggedIn:de,selectedCoords:oe,passAddress:(e,t)=>{const a=Object(s.Ud)(window.innerWidth);var i;(Re(e,!0),X([{description:e}]),le(t),l({userLat:t.lat,userLong:t.lng}),a)||(null===M||void 0===M||null===(i=M.current)||void 0===i||i.focus());G&&(e=>{var t;let a=new KeyboardEvent("keydown",{altKey:!1,bubbles:!0,cancelBubble:!1,cancelable:!0,charCode:0,code:"Enter",composed:!0,ctrlKey:!1,currentTarget:null,defaultPrevented:!0,detail:0,eventPhase:0,isComposing:!1,isTrusted:!0,key:"Enter",keyCode:13,location:0,metaKey:!1,repeat:!1,returnValue:!1,shiftKey:!1,type:"keydown",which:13});null===e||void 0===e||null===(t=e.current)||void 0===t||t.dispatchEvent(a)})(M)},configSearchKey:ce,useCurrentLocation:we,showLocationConfirmModal:!1,findAKFC:!1,disableUseLocationIcon:!0,disableMapSelection:te,markerDragValue:!0}):null]})})}},1120:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(1146),n=a.n(l),d=a(368),r=a(2);var s=e=>{let{timer:t,setTimer:a,restartTimer:o,setRestartTimer:l}=e;const n=Object(i.useRef)(null),d=Object(i.useCallback)((e=>{const t=e=>{let{total:t,minutes:i,seconds:o}=(e=>{const t=Date.parse(e)-Date.parse(new Date),a=Math.floor(t/1e3%60);return{total:t,minutes:Math.floor(t/1e3/60%60),seconds:a}})(e);t>=0&&a((i>9?i:"0"+i)+":"+(o>9?o:"0"+o))};a("15:00"),n.current&&clearInterval(n.current);const i=setInterval((()=>{t(e)}),1e3);n.current=i}),[a]),s=()=>{let e=new Date;return e.setSeconds(e.getSeconds()+900),e};return Object(i.useEffect)((()=>{d(s())}),[d]),Object(i.useEffect)((()=>{o&&(d(s()),l(!1))}),[d,o,l]),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("span",{children:t})})},c=a(25),u=a(144),v=a.n(u),O=a(44),b=a(937),m=a(12),j=a(13),h=a(156);var p=e=>{var t,a,l;const[u,p]=Object(i.useState)(!1),[g,N]=Object(i.useState)(""),[S,I]=Object(i.useState)(!1),x=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),f=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),E=Object(c.b)(),[C,T]=Object(i.useState)("00:00");let y;switch(null===f||void 0===f||null===(t=f.stage)||void 0===t||null===(a=t.code)||void 0===a||null===(l=a.toString())||void 0===l?void 0:l.toLowerCase()){case b.c.REGULAR:y="10";break;case b.c.BRONZE:y="20";break;case b.c.SILVER:y="30";break;case b.c.GOLD:y="40";break;case b.c.PLATINUM:y="50";break;default:y="01"}Object(i.useEffect)((()=>{if(x&&f){let t="";var e;if(y&&(t=t.concat(b.b.stageNumber,y)),null!==x&&void 0!==x&&x.MilesMemberId&&(t=t.concat(b.b.milesMemberId,h.g,"4",null===x||void 0===x?void 0:x.MilesMemberId)),t=t.concat(b.b.expirationTime,A()),null!==x&&void 0!==x&&x.PontaId)t=t.concat(b.b.pontaId,null===x||void 0===x||null===(e=x.PontaId)||void 0===e?void 0:e.slice(-15));null!==x&&void 0!==x&&x.KFC_Card&&(t=t.concat(b.b.kfcCard,null===x||void 0===x?void 0:x.KFC_Card,null===x||void 0===x?void 0:x.KFC_PIN)),null!==x&&void 0!==x&&x.RakutenId&&"-1"!==(null===x||void 0===x?void 0:x.RakutenId)&&(t=t.concat(b.b.rakutenId,null===x||void 0===x?void 0:x.RakutenId));const a=D(t);N(a)}}),[x,f]);const D=e=>{const t=v.a.enc.Utf8.parse(Object(j.a)(m.lb)),a=v.a.AES.encrypt(e,t,{keySize:16,BlockSize:128,mode:v.a.mode.ECB,padding:v.a.pad.Pkcs7}).toString();var i="";return i=i.concat("K|",a,"|")},A=()=>{function e(e){return e<10?"0".concat(e):e}const t=new Date,a=new Date(t.getTime()+9e5),i=a.getFullYear().toString().slice(-2),o=e(a.getMonth()+1),l=e(a.getDate()),n=e(a.getHours()),d=e(a.getMinutes()),r=e(a.getSeconds());return"".concat(i).concat(o).concat(l).concat(n).concat(d).concat(r)};return Object(r.jsx)(r.Fragment,{children:x&&Object(r.jsx)("div",{className:"loyalty-qr",children:Object(r.jsxs)("div",{className:"loyalty-qr-wrap",children:[null!==x&&void 0!==x&&x.MilesUUID&&null!==f&&void 0!==f&&f.stage?(_=C,w=g,"00:00"!==_?w&&Object(r.jsx)(n.a,{size:192,value:w}):Object(r.jsx)("div",{className:"qr-placeholder"})):Object(r.jsx)("div",{className:"placeholder",children:Object(r.jsx)("div",{className:"qr-placeholder loading"})}),Object(r.jsx)("div",{className:"pnl-refresh",children:null!==x&&void 0!==x&&x.MilesUUID&&null!==f&&void 0!==f&&f.stage?Object(r.jsxs)(o.a.Fragment,{children:[Object(r.jsx)("div",{id:"qr-timer",children:Object(r.jsx)(s,{timer:C,setTimer:T,restartTimer:S,setRestartTimer:I})}),Object(r.jsx)("button",{id:"btn-refresh-qr",className:"kfc-button btn-black",onClick:()=>{E(Object(O.e)()),p(!0),setTimeout((()=>{p(!1),I(!0)}),1e3)},children:Object(r.jsx)("img",{src:d.a,alt:"refresh",className:(R=u,R?"rotate":"")})})]}):Object(r.jsx)("div",{className:"placeholder",children:Object(r.jsx)("div",{className:"qr-timer-placeholder loading"})})})]})})});var R,_,w},g=a(6),N=a(4);var S=e=>{var t,a,i,o,l,n,d,s;let{setStep:u}=e;const{LEARN_MORE:v,CUMULATIVE_MILES:O,CONGRATULATIONS_TOP_STAGE:m,TO:j,LEVEL:h,CUMULATIVE_CHICKEN_MILES:p,AFTER:S,IN_MILE:I,MEMBER:x}=N.a,f=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),E=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.isLoading})),C=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userOverAllRankingData})),T=(null===C||void 0===C||C.mile,Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData}))),{user:y}=T||{},{total_mile:D}=y||{},A=null===f||void 0===f||null===(t=f.next_stage)||void 0===t?void 0:t.lower,R=null===f||void 0===f?void 0:f.current_mile,_=R/A*100,w=A-R,L=(null===f||void 0===f||null===(a=f.stage)||void 0===a||null===(i=a.code)||void 0===i||null===(o=i.toString())||void 0===o?void 0:o.toLowerCase())===b.c.PLATINUM;return Object(r.jsxs)("div",{className:"loyalty-status px-0",children:[Object(r.jsx)("div",{className:"loyalty-heading",children:null!==f&&void 0!==f&&null!==(l=f.stage)&&void 0!==l&&l.name?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsxs)("h3",{className:"current-mile",children:[null===f||void 0===f||null===(n=f.stage)||void 0===n?void 0:n.name," ",Object(g.translateWithI18Next)(h)]}),Object(r.jsx)("div",{className:"current-mile-value",children:null===f||void 0===f?void 0:f.current_mile})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})}),Object(r.jsx)("div",{className:"meter",children:null!==f&&void 0!==f&&f.current_mile?Object(r.jsx)("span",{style:{width:"".concat(L?"100":_,"%")}}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"status loading"})})}),Object(r.jsx)("div",{className:"lbl-note-light",children:null!==f&&void 0!==f&&null!==(d=f.next_stage)&&void 0!==d&&d.name||L?Object(r.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(r.jsxs)("div",{className:"cumulative-container w-50",children:[Object(r.jsx)("div",{className:"status-miles-value",children:D}),Object(r.jsx)("div",{className:"status-miles-text",children:Object(g.translateWithI18Next)(O)})]}),Object(r.jsx)("div",{className:"w-50",children:L?Object(g.translateWithI18Next)(m):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"status-miles-value",children:[Object(r.jsx)("span",{className:"status-miles-text",children:Object(g.translateWithI18Next)(S)}),w,Object(r.jsx)("span",{className:"status-miles-text",children:Object(g.translateWithI18Next)(I)})]}),Object(r.jsxs)("div",{className:"status-miles-text",children:[null===f||void 0===f||null===(s=f.next_stage)||void 0===s?void 0:s.name," ",Object(g.translateWithI18Next)(x)]})]})})]}):Object(r.jsx)("div",{className:"placeholder justify-content-start m-0",children:Object(r.jsx)("div",{className:"line md loading"})})}),Object(r.jsx)("button",{disabled:E,onClick:()=>{u(b.d.MILE_DETAILS)},className:"btn-loyalty-details btn-sm p-0",children:"".concat(Object(g.translateWithI18Next)(v))})]})},I=a(43),x=a(15),f=a(5);var E=e=>{let{cardImg:t,disabled:a,cardTitle:i="",isLinked:o=!1,cardRedirect:l,setStep:n,onClick:d,isLinkingStatue:s,availablePoints:u,cardType:v}=e;const{LINKED:O,NOT_LINKED:m,DETAILS:j,LINKING:h,LINKING_IN_PROGRESS:p,WORK_TOGETHER:S,ALREADY_LINKED:f,COMING_SOON:E}=N.a,C=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),T=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t?void 0:t.rakutenComingSoon}));let y=!1;const D=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.isLoading}));let A=Object(g.translateWithI18Next)(m);return v===b.a.RAKUTEN?(y=T,s?A=Object(g.translateWithI18Next)(p):o&&(A=Object(g.translateWithI18Next)(f))):o&&(A=Object(g.translateWithI18Next)(O)),Object(r.jsxs)("div",{className:"linkage-card",children:[Object(r.jsx)("img",{src:t,alt:i}),Object(r.jsxs)("span",{className:"linkage-title",children:[Object(r.jsx)("span",{className:"linkage-title-text",children:i}),null!==C&&void 0!==C&&C.MilesUUID||o?Object(r.jsx)("span",{className:"linkage-status",children:A}):Object(r.jsx)("span",{className:"linkage-status",children:Object(g.translateWithI18Next)(m)})]}),!s&&Object(r.jsxs)("button",{disabled:a||D||y,className:"linkage-btn btn-link",onClick:d,children:[!o&&!D&&!y&&Object(r.jsx)(I.a,{srcFile:x.a.External_url,alt:"External url",className:"details-icon"})," ",y?Object(g.translateWithI18Next)(E):o?Object(g.translateWithI18Next)(j):Object(g.translateWithI18Next)(S)]})]})},C=a(61),T=a(0),y=a(1022);var D=e=>{let{setStep:t,setCartType:a,showConfirmationModal:o,setShowConfirmationModal:l,handleUnlinkedAction:n}=e;const{KFC_CARD:d,PONTA_POINTS:s,RAKUTEN_POINTS:u,LINKED_TO_CARD_MESSAGE:v,UNLINK_CONFIRMATION_MESSAGE:m}=N.a,j=Object(c.b)(),h=Object(C.g)(),p=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),S=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pontaAccountID})),I=(null===p||void 0===p?void 0:p.KFC_Card)&&(null===p||void 0===p?void 0:p.KFC_PIN),D=null===p||void 0===p?void 0:p.PontaId,A=null===p||void 0===p?void 0:p.RakutenId,R=Object(c.c)((e=>e.profileReducer)),_=Object(f.Vb)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===R||void 0===R?void 0:R.customerId)),w=(null===_||void 0===_?void 0:_.isUserBlocked)||!1,[L,k]=Object(i.useState)(w),[M,P]=Object(i.useState)(""),F="-1"===A,W=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.kfcLinkingData})),{BalanceAfter:H}=W||{},U=Object(c.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.rakutenBalanceInquiry)||void 0===a?void 0:a.AvailablePoints})),B=Object(c.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.pontaBalanceInquiry)||void 0===a?void 0:a.AvailablePoints}));Object(i.useEffect)((()=>{G()}),[]);const G=()=>{var e;const t=null===(e=Object(f.Vb)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===R||void 0===R?void 0:R.customerId)))||void 0===e?void 0:e.lastAttemptDate,a=new Date;a.setHours(0,0,0,0),t!==a.toDateString()&&(Object(f.kf)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===R||void 0===R?void 0:R.customerId),{isUserBlocked:!1,attemptsCount:0,lastAttemptDate:a.toDateString()}),k(!1))};return Object(i.useEffect)((()=>{A&&j(Object(O.j)({memberId:A}))}),[A]),Object(i.useEffect)((()=>{D&&j(Object(O.i)({memberId:D}))}),[D]),Object(r.jsxs)("div",{className:"linkage-cards",children:[Object(r.jsx)(E,{cardImg:x.a.HeaderLogo,isLinked:I,cardTitle:Object(g.translateWithI18Next)(d),setStep:t,disabled:L,onClick:()=>{I?(t(b.d.CARD_DETAILS_VIEW),a(b.a.KFC)):t(b.d.KFC_FORM)},availablePoints:H,cardType:b.a.KFC}),Object(r.jsx)(E,{cardImg:x.a.PontaLogo,isLinked:D,cardTitle:Object(g.translateWithI18Next)(s),onClick:()=>{A?(P(b.a.RAKUTEN),l(!0)):(D?(t(b.d.CARD_DETAILS_VIEW),a(b.a.PONTA)):j(Object(O.h)(S)),P(""),l(!1))},availablePoints:B,cardType:b.a.PONTA}),Object(r.jsx)(E,{isLinked:A,isLinkingStatue:F,cardImg:x.a.RakutenLogo,cardTitle:Object(g.translateWithI18Next)(u),onClick:()=>{D?(P(b.a.PONTA),l(!0)):(A?(t(b.d.CARD_DETAILS_VIEW),a(b.a.RAKUTEN)):h.push({pathname:"/rakuten-tc"}),P(""),l(!1))},availablePoints:U,cardType:b.a.RAKUTEN}),o&&Object(r.jsx)(y.a,{confirmationMsg:Object(g.translateWithI18Next)(v),handleClose:()=>l(!1),handleConfirmBtn:()=>n(M)})]})};var A=e=>{let{setStep:t,setCartType:a,showConfirmationModal:i,setShowConfirmationModal:o,handleUnlinkedAction:l}=e;return Object(r.jsx)("div",{className:"loyalty-linkage",children:Object(r.jsx)(D,{setStep:t,setCartType:a,setShowConfirmationModal:o,handleUnlinkedAction:l,showConfirmationModal:i})})};var R=e=>{var t,a,i,o,l,n,d;let{totalMile:s,expDate:u}=e;const{CHICKEN_MILES:v,CONGRATULATIONS_TOP_STAGE:O,STAGE_WITH:h,LEVEL:p,EXPIRATION_DATE:S,WHAT_IS_CHICKEN_MILE:I,CUMULATIVE_MILES:x,AFTER:f,MEMBER:E,IN_MILE:C}=N.a,T=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),y=null===T||void 0===T||null===(t=T.next_stage)||void 0===t?void 0:t.lower,D=null===T||void 0===T?void 0:T.current_mile,A=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userOverAllRankingData})),R=(null===A||void 0===A||A.mile,Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData}))),{user:_}=R||{},{total_mile:w}=_||{},L=D/y*100,k=y-D,M=(null===T||void 0===T||null===(a=T.stage)||void 0===a||null===(i=a.code)||void 0===i?void 0:i.toLowerCase())===b.c.PLATINUM,P=new Date(u),F=P.getFullYear(),W=String(P.getMonth()+1).padStart(2,"0"),H=String(P.getDate()).padStart(2,"0"),U="".concat(F,"/").concat(W,"/").concat(H);return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"loyalty-heading",children:null!==T&&void 0!==T&&null!==(o=T.stage)&&void 0!==o&&o.name?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsxs)("h3",{className:"current-mile",children:[null===T||void 0===T||null===(l=T.stage)||void 0===l?void 0:l.name," ",Object(g.translateWithI18Next)(p)]}),Object(r.jsx)("div",{className:"current-mile-value",children:null===T||void 0===T?void 0:T.current_mile})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})}),Object(r.jsx)("div",{className:"meter",children:Object(r.jsx)("span",{style:{width:"".concat(L,"%")}})}),Object(r.jsx)("div",{className:"lbl-note-light",children:null!==T&&void 0!==T&&null!==(n=T.next_stage)&&void 0!==n&&n.name||M?Object(r.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(r.jsxs)("div",{className:"cumulative-container w-50",children:[Object(r.jsx)("div",{className:"status-miles-value",children:w}),Object(r.jsx)("div",{className:"status-miles-text",children:Object(g.translateWithI18Next)(x)})]}),Object(r.jsx)("div",{className:"w-50",children:M?Object(g.translateWithI18Next)(O):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"status-miles-value",children:[Object(r.jsx)("span",{className:"status-miles-text",children:Object(g.translateWithI18Next)(f)}),k,Object(r.jsx)("span",{className:"status-miles-text",children:Object(g.translateWithI18Next)(C)})]}),Object(r.jsxs)("div",{className:"status-miles-text",children:[null===T||void 0===T||null===(d=T.next_stage)||void 0===d?void 0:d.name," ",Object(g.translateWithI18Next)(E)]})]})})]}):Object(r.jsx)("div",{className:"placeholder justify-content-start m-0",children:Object(r.jsx)("div",{className:"line md loading"})})}),Object(r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[Object(r.jsx)("div",{className:"lbl-mileage-expiration",children:"".concat(Object(g.translateWithI18Next)(S)," ").concat(U)}),Object(r.jsx)("div",{className:"lbl-mileage-link",children:Object(r.jsx)("a",{className:"lbl-mileage-link-item",href:"".concat(Object(j.a)(m.Ob)),children:"".concat(Object(g.translateWithI18Next)(I))})})]})]})},_=a(1086),w=a(1077),L=a(1281),k=a(1282);var M=e=>{let{Date:t,Title:a,Points:i}=e;const{CHICKEN_MILES:o}=N.a;return Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsxs)("div",{className:"loyalty-history-date",children:[Object(r.jsx)("label",{children:t}),Object(r.jsx)("p",{children:a})]}),Object(r.jsx)("div",{className:"loyalty-history-point d-flex align-items-end",children:Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[i," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(g.translateWithI18Next)(o)})]})})]})};const P=(e,t)=>{var a;return"".concat(null===(a=e[0])||void 0===a?void 0:a.rank," ").concat(Object(g.translateWithI18Next)(t))};var F=e=>{var t,a,i;let{setStep:o}=e;const l=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData})),{user:n,ranking:d}=l||{},{total_mile:s,ends_at:u}=n||{},v=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.currentMilesHisory})),O=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pastMilesHisory})),m=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),j=(null===m||void 0===m||null===(t=m.stage)||void 0===t||null===(a=t.code)||void 0===a?void 0:a.toLowerCase())||b.c.REGULAR.toLowerCase(),h=Object(c.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),{showAllRanking:p}=h,{CHICKEN_MILE_DETAILS:S,RANKING_OF_MONTH:I,PLACE:f,VIEW_ALL:E,PAST_TAB_TITLE:C,THE_CURRENT_TAB_TITLE:T}=N.a,y=e=>e&&e.length?e.map((e=>{return Object(r.jsx)(M,{Date:(t=e.issue_date,new Date(t).toLocaleDateString()),Title:e.rule_name,Points:e.mile});var t})):Object(r.jsx)("div",{children:"No Data"});return Object(r.jsx)("div",{className:"loyalty-miles w-100",children:Object(r.jsxs)(L.a,{className:"justify-content-center w-100 m-0",children:[Object(r.jsxs)(k.a,{xs:"12",className:"d-lg-none",children:[Object(r.jsx)("button",{onClick:()=>o(b.d.Home),className:"btn-back",children:"\u2794"}),Object(r.jsx)("h2",{children:Object(g.translateWithI18Next)(S)})]}),Object(r.jsx)(k.a,{lg:"5",xs:"12",className:"loyalty-mile-details ".concat(j),children:Object(r.jsx)(R,{totalMile:s,expDate:u})}),Object(r.jsxs)(k.a,{lg:"7",xs:"12",children:[Object(r.jsx)("div",{className:"loyalty-ranking",children:Object(r.jsxs)("div",{className:"loyalty-heading",children:[Object(r.jsxs)("h3",{children:[Object(r.jsx)("img",{src:x.a.CrownRankLogo,alt:"Ranking of the month"}),Object(r.jsx)("span",{className:"ranking-crown-heading",children:Object(g.translateWithI18Next)(I)})]}),p?Object(r.jsx)("button",{className:"btn-link btn-sm",onClick:()=>o(b.d.RANKING),children:"".concat(d&&null!==(i=d[0])&&void 0!==i&&i.rank?P(d,f):Object(g.translateWithI18Next)(E))}):null]})}),Object(r.jsx)("div",{className:"ranking-tabs",style:{paddingTop:"1.5rem"},children:Object(r.jsxs)(_.a,{defaultActiveKey:"current",id:"uncontrolled-tab-example",className:"loyalty-tabs",children:[Object(r.jsx)(w.a,{eventKey:"current",title:Object(g.translateWithI18Next)(T),children:y(v)}),Object(r.jsx)(w.a,{eventKey:"past",title:Object(g.translateWithI18Next)(C),children:y(O)})]})})]})]})})},W=a(1017);var H=e=>{let{Rank:t,Points:a,Img:i,hasImg:o=!1}=e;const{CHICKEN_MILES:l}=N.a;return Object(r.jsxs)("div",{className:"loyalty-history-item  d-flex align-items-center",children:[Object(r.jsx)("div",{className:"loyalty-history-rank",children:o?Object(r.jsx)("img",{src:i,alt:"Rank"}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("p",{children:t})})}),Object(r.jsxs)("div",{className:"loyalty-history-point d-flex align-items-center",children:[Object(r.jsx)("span",{children:a})," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(g.translateWithI18Next)(l)})]})]},t)};var U=e=>{let{Date:t,Rank:a}=e;return Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsx)("div",{className:"loyalty-history-rank",children:t}),Object(r.jsx)("div",{className:"loyalty-history-rank",children:a})]},a)},B=a(349),G=a(36),V=a(28);var Y=e=>{let{title:t,handleConfirmBtn:a,handleClose:i,content:o}=e;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(B.a,{id:"PastRanking",show:!0,classNames:"ranking-modal",showCloseBtn:!0,closeButtonHandler:i,closeDataTestId:"handler-close",autoFocus:!0,handleClose:!0,buttonVariant:G.b.primary,footerBtnText:Object(V.translateWithI18Next)(N.a.BACK_BUTTON),footerBtnHandler:a,showFooterSection:!0,modalTitle:t,children:o})})};const K=e=>{if(e>=11&&e<=13)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}},z=e=>{switch(e){case 1:return x.a.IconGold;case 2:return x.a.IconSilver;case 3:return x.a.IconBronze;default:return""}};var q=e=>{var t,a,l;let{setStep:n,stageColor:d}=e;const{CHICKEN_MILES:s,CUMULATIVE_CHICKEN_MILES:u,ALL_RANKING:v,PAST_MONTH_RESULT:O,YOUR_RANKING:m,PAST_MONTHLY_PERFORMANCE:j,MONTHLY_CHICKEN_MILES:h,NO_PAST_DATA:p,NO_DATA:S,PLACE:I,CHICKEN_MILE_DETAILS:f,RANKING_TAB_TITLE:E,COMPREHENSIVE_TAB_TITLE:C}=N.a,[T,y]=Object(i.useState)(!1),D=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.rankingViewData})),A={},R=(null===D||void 0===D?void 0:D.filter((e=>{const t="".concat(e.rank,"-").concat(e.value);return!A[t]&&(A[t]=!0,!0)})))||[],L=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.overAllRankingData})),k=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userOverAllRankingData})),M=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData})),{ranking:P}=M||{},F=null!==(t=P[0])&&void 0!==t&&t.rank?"".concat(K(Number(null===(a=P[0])||void 0===a?void 0:a.rank))," ").concat(Object(g.translateWithI18Next)(I)):"-",B=null!==k&&void 0!==k&&k.rank?"".concat(K(null===k||void 0===k?void 0:k.rank)," ").concat(Object(g.translateWithI18Next)(I)):"-",{user:G}=(null===k||void 0===k||k.mile,M||{}),{total_mile:V}=G||{},q=null===(l=P[0])||void 0===l?void 0:l.mile,J=new Date,X=J.getFullYear(),Q=(J.getMonth()+1).toString().padStart(2,"0"),Z=("1/".concat(Q,"/").concat(X),Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pastMonthlyRankingData}))),$=null===Z||void 0===Z?void 0:Z.ranking,ee=((e,t)=>e?Object(r.jsxs)(o.a.Fragment,{children:[e," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(g.translateWithI18Next)(t)})]}):"-")(q,s);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(W.a,{lg:"5",xs:"12",children:[Object(r.jsx)("div",{children:Object(r.jsxs)("button",{onClick:()=>{T?y(!1):n(b.d.MILE_DETAILS)},className:"d-flex back-to-mileage-loyalty-details show-qr-btn btn-back align-items-center",children:[Object(r.jsx)("img",{className:"back-CTA-Arrow",src:x.a.CTA_Arrow,alt:"back-btn"})," ",Object(r.jsx)("h2",{children:Object(g.translateWithI18Next)(f)})]})}),Object(r.jsxs)("div",{className:"mb-lg-0 mb-4 mileage-loyalty-status ".concat(d),children:[Object(r.jsx)("div",{className:"loyalty-status px-0",children:Object(r.jsx)("div",{className:"loyalty-heading",children:F?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("h3",{className:"current-mile",children:Object(g.translateWithI18Next)(m)}),Object(r.jsx)("div",{className:"current-mile-value",children:F})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})})}),Object(r.jsx)("div",{className:"loyalty-status px-0",children:Object(r.jsx)("div",{className:"loyalty-heading",children:ee?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("h3",{className:"current-mile",children:Object(g.translateWithI18Next)(h)}),Object(r.jsx)("div",{className:"current-mile-value",children:ee})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})})})]})]}),Object(r.jsx)(W.a,{lg:"7",xs:"12",children:Object(r.jsxs)("div",{className:"loyalty-ranking-history w-100",children:[Object(r.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(r.jsx)("h2",{children:Object(g.translateWithI18Next)(v)}),Object(r.jsx)("button",{className:"btn-link btn-sm",id:"btn-viewpastranking",onClick:()=>y(!0),children:"\u27a4 ".concat(Object(g.translateWithI18Next)(j))})]}),T?Object(r.jsx)(Y,{title:Object(g.translateWithI18Next)(O),content:Object(r.jsx)(o.a.Fragment,{children:Object(r.jsx)("div",{style:{padding:"1rem"},children:Object(r.jsx)("div",{id:"ranking-pastranking",children:$&&$.length?$.map((e=>Object(r.jsx)(U,{Date:e.target_date,Rank:e.rank}))):Object(r.jsx)("div",{className:"loyalty-history-item no-data",children:Object(g.translateWithI18Next)(p)})})})}),handleClose:()=>y(!1),handleConfirmBtn:()=>y(!1)}):Object(r.jsx)("div",{className:"py-4",children:Object(r.jsxs)(_.a,{defaultActiveKey:"month",id:"uncontrolled-tab-example",className:"loyalty-tabs",children:[Object(r.jsx)(w.a,{eventKey:"month",title:Object(g.translateWithI18Next)(E),children:Object(r.jsx)("div",{id:"list-rankingthismonth",children:R&&R.length?R.map((e=>{const t=K(null===e||void 0===e?void 0:e.rank),a=1===(null===e||void 0===e?void 0:e.rank)||2===(null===e||void 0===e?void 0:e.rank)||3===(null===e||void 0===e?void 0:e.rank),i=z(null===e||void 0===e?void 0:e.rank);return Object(r.jsx)(H,{Rank:t,Points:e.mile,hasImg:a,Img:i})})):Object(r.jsx)("div",{className:"loyalty-history-item no-data",children:Object(g.translateWithI18Next)(S)})})}),Object(r.jsxs)(w.a,{eventKey:"comprehensive",title:Object(g.translateWithI18Next)(C),children:[Object(r.jsx)("div",{className:"loyalty-ranking",children:Object(r.jsxs)("div",{className:"loyalty-heading",children:[Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsxs)("h3",{children:[Object(r.jsx)("img",{src:x.a.CrownRankLogo,alt:"your ranking"}),Object(g.translateWithI18Next)(m)]}),Object(r.jsx)("div",{children:B})]}),Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsx)("div",{children:Object(g.translateWithI18Next)(u)}),Object(r.jsxs)("div",{className:"loyalty-history-point",children:[V," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(g.translateWithI18Next)(s)})]})]})]})}),Object(r.jsx)("div",{id:"list-rankingthismonth",children:L&&L.length?L.map((e=>{const t=K(null===e||void 0===e?void 0:e.rank),a=1===(null===e||void 0===e?void 0:e.rank)||2===(null===e||void 0===e?void 0:e.rank)||3===(null===e||void 0===e?void 0:e.rank),i=z(null===e||void 0===e?void 0:e.rank);return Object(r.jsx)(H,{Rank:t,Points:e.mile,hasImg:a,Img:i})})):Object(r.jsx)("div",{className:"loyalty-history-item no-data",children:Object(g.translateWithI18Next)(S)})})]})]})})]})})]})};var J=e=>{let{inputId:t,placeholder:a,type:i,minLength:o,maxLength:l,labelTxt:n,value:d,errorMsg:s,errorIcon:c="",handleOnChange:u}=e;return Object(r.jsxs)("div",{className:"loyalty-fields",children:[Object(r.jsxs)("div",{className:"field material-input",children:[Object(r.jsx)("input",{id:t,placeholder:a,maxLength:l,type:i,value:d,onChange:u}),Object(r.jsx)("label",{for:t,children:n})]}),s&&Object(r.jsxs)("div",{className:"kfc-link-form-error",children:[Object(r.jsx)(I.a,{srcFile:x.a.Error,className:"location-alert-icon mr-1"}),Object(r.jsx)("div",{className:"error-msg",children:s})]})]})};var X=e=>{let{setStep:t}=e;const[a,o]=Object(i.useState)(!1),l=Object(c.b)(),n=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.loading})),d=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.errorMsg})),s=Object(c.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.kfcLinkingData)||void 0===a?void 0:a.BalanceAfter})),u=Object(c.c)((e=>e.profileReducer)),v=Object(f.Vb)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===u||void 0===u?void 0:u.customerId)),h=(null===v||void 0===v?void 0:v.isUserBlocked)||!1,p=(null===v||void 0===v?void 0:v.attemptsCount)||0,[S,E]=Object(i.useState)(""),[C,y]=Object(i.useState)(""),[D,A]=Object(i.useState)(""),[R,_]=Object(i.useState)(h?"Block error msg":""),[w,L]=Object(i.useState)(""),[k,M]=Object(i.useState)(!1),{KFC_CARD_COOPERATION:P,ENTER_ID_AND_PIN:F,WRONG_PIN_LIMIT:W,ABOUT_KFC_CARD:H,RETURN:U,SUBMIT:B,KFC_CARD_HAS_NO_BALANCE:V,BLOCK_ERROR_MESSAGE:Y,CARD_NUMBER_VALIDATION_MESSAGE:K,PIN_NUMBER_VALIDATION_MESSAGE:z,CARD_NUMBER_LABEL:q,PIN_NUMBER_LABEL:X,LINK_CARD:Q}=N.a;Object(i.useEffect)((()=>{a&&(n||d||t(b.d.Home))}),[n,d,t,a]),Object(i.useEffect)((()=>{l(Object(O.b)())}),[]),Object(i.useEffect)((()=>{Z()}),[s]);const Z=async()=>{l(Object(O.l)(!1)),s<=0?(l(Object(O.k)(Object(g.translateWithI18Next)(V))),$(),l(Object(O.b)())):s>0&&Object(f.kf)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===u||void 0===u?void 0:u.customerId),{isUserBlocked:!1,attemptsCount:0})},$=()=>{(()=>{var e;const t=null===(e=Object(f.Vb)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===u||void 0===u?void 0:u.customerId)))||void 0===e?void 0:e.lastAttemptDate,a=new Date;a.setHours(0,0,0,0),t!==a.toDateString()&&Object(f.kf)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===u||void 0===u?void 0:u.customerId),{isUserBlocked:!1,attemptsCount:0,lastAttemptDate:a.toDateString()})})();const e=new Date;e.setHours(0,0,0,0),p<5&&!h?Object(f.kf)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===u||void 0===u?void 0:u.customerId),{isUserBlocked:!1,attemptsCount:Number(p)+1,lastAttemptDate:e.toDateString()}):(5===p||p>5)&&(Object(f.kf)("".concat(T.gd.CARD_ATTEMPT_DATA,"-").concat(null===u||void 0===u?void 0:u.customerId),{isUserBlocked:!0,attemptsCount:Number(p),lastAttemptDate:e.toDateString()}),_(Object(g.translateWithI18Next)(Y)))};return Object(r.jsxs)("div",{className:"kfc-card-form align-items-center flex-column d-flex",children:[Object(r.jsx)(G.c,{onClick:()=>t(b.d.Home),className:"btn-back",children:"\u2794"}),Object(r.jsx)("h2",{className:"form-title",children:Object(g.translateWithI18Next)(P)}),Object(r.jsxs)("div",{className:"col-12 col-lg-8 p-0",children:[Object(r.jsx)("p",{children:Object(g.translateWithI18Next)(F)}),R&&Object(r.jsx)("div",{children:R}),d&&Object(r.jsxs)("div",{className:"kfc-link-form-error general-error",children:[Object(r.jsx)(I.a,{srcFile:x.a.Error,className:"location-alert-icon mr-1"}),Object(r.jsx)("div",{className:"error-msg",children:d})]}),Object(r.jsx)(J,{type:"number",labelTxt:Object(g.translateWithI18Next)(q),inputId:"txt-kfccard",placeholder:Object(g.translateWithI18Next)(q),maxLength:50,value:S,errorMsg:D,handleOnChange:e=>{if(h)return;const t=e.target.value;E(t),/^\d{16}$/.test(t)&&/^\d{4}$/.test(C)?M(!0):M(!1)}}),Object(r.jsx)(J,{type:"password",labelTxt:Object(g.translateWithI18Next)(X),inputId:"txt-kfcpin",placeholder:Object(g.translateWithI18Next)(X),maxLength:4,value:C,errorMsg:w,handleOnChange:e=>{if(h)return;const t=e.target.value;y(t),/^\d{16}$/.test(S)&&/^\d{4}$/.test(t)?M(!0):M(!1)}}),Object(r.jsx)("div",{className:"loyalty-fields loyalty-fields-btns",children:Object(r.jsx)(G.c,{"data-type":"primary",className:"button-contained kfc-button ".concat(C&&S?"filled-fields":"empty-fields"," ").concat(n?"loading":""),"data-loading":n,disabled:h||n,onClick:e=>{e.preventDefault(),h||(/^\d{16}$/.test(S)?A(""):A(Object(g.translateWithI18Next)(K)),/^\d{4}$/.test(C)?L(""):L(Object(g.translateWithI18Next)(z)),k?(o(!0),l(Object(O.a)({translateCallback:g.translateWithI18Next,KFC_Card:S,KFC_PIN:C,linking:!0})),l(Object(O.l)(!0))):$())},children:Object(g.translateWithI18Next)(Q)})}),Object(r.jsx)("p",{style:{textAlign:"center",textDecoration:"underline"},children:Object(r.jsx)("a",{className:"btn-kfc-card btn-link btn-sm",href:"".concat(Object(j.a)(m.a)),children:"".concat(Object(g.translateWithI18Next)(H))})})]})]})},Q=a(1055),Z=a(1078),$=a(55);const{getInstance:ee}=$.a;t.a=e=>{const[t,a]=Object(i.useState)(b.d.Home),[o,l]=Object(i.useState)(b.a.KFC),n=Object(c.b)(),d=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),{KFC_Card:s,KFC_PIN:u}=d||{},v=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),[m,j]=Object(i.useState)(!1),h=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.linkingStatus})),g=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.loading})),{MY_CHICKEN_MILES:I,SHOW_CODE:f,KFC_DETAILS:E,KFC_CARD_LINKING:C,PONTA_DETAILS:T,RAKUTEN_DETAILS:y}=N.a,D=Object(c.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData}));Object(i.useEffect)((()=>{d&&d.MilesUUID||(!ee().isValidAccessToken&&null!==v&&void 0!==v&&v.loggedIn&&$.a.getInstance().refreshAuthentication(),n(Object(O.e)())),s&&u&&n(Object(O.a)({translateCallback:V.translateWithI18Next,KFC_Card:s,KFC_PIN:u,linking:!1}))}),[n,s,u,d]),Object(i.useEffect)((()=>{const e=()=>{const t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))};t&&e()}),[t]);const R=e=>{n(Object(O.b)()),n(Object(O.o)(e)),j(!1),a(b.d.Home)};let _=Object(r.jsx)(X,{setStep:a}),w=Object(V.translateWithI18Next)(C);if(t===b.d.Home){var M,P;const e=(null===D||void 0===D||null===(M=D.stage)||void 0===M||null===(P=M.code)||void 0===P?void 0:P.toLowerCase())||b.c.REGULAR.toLowerCase();w=Object(V.translateWithI18Next)(I),_=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(k.a,{lg:"5",xs:"12",className:"mb-lg-0 mb-4 mileage-loyalty-status ".concat(e),children:[Object(r.jsx)("div",{className:"membership-id d-flex justify-content-center text-white",children:null===d||void 0===d?void 0:d.MilesMemberId}),Object(r.jsx)(p,{}),Object(r.jsx)(S,{setStep:a})]}),Object(r.jsx)(k.a,{lg:"7",xs:"12",className:"p-0",children:Object(r.jsx)(A,{setStep:a,setCartType:l,setShowConfirmationModal:j,handleUnlinkedAction:R,showConfirmationModal:m})})]})}else if(t===b.d.MILE_DETAILS)w=Object(V.translateWithI18Next)(I),_=Object(r.jsx)(F,{setStep:a});else if(t===b.d.RANKING){var W,H;w=Object(V.translateWithI18Next)(I);const e=(null===D||void 0===D||null===(W=D.stage)||void 0===W||null===(H=W.code)||void 0===H?void 0:H.toLowerCase())||b.c.REGULAR.toLowerCase();_=Object(r.jsx)(q,{setStep:a,stageColor:e})}else t===b.d.CARD_DETAILS_VIEW&&(o===b.a.KFC?w=Object(V.translateWithI18Next)(E):o===b.a.PONTA?w=Object(V.translateWithI18Next)(T):o===b.a.RAKUTEN&&(w=Object(V.translateWithI18Next)(y)),_=Object(r.jsx)(k.a,{lg:"9",xs:"12",children:Object(r.jsx)(Q.a,{setStep:a,cardType:o,setShowConfirmationModal:j,handleUnlinkedAction:R,showConfirmationModal:m})}));return Object(r.jsxs)("div",{className:"chicken-mile container",children:[(null===h||void 0===h?void 0:h.message)&&Object(r.jsx)(Z.a,{success:null===h||void 0===h?void 0:h.success,msg:null===h||void 0===h?void 0:h.message}),g&&t===b.d.Home&&Object(r.jsx)("div",{className:"overlay-Loader"}),Object(r.jsxs)(L.a,{children:[Object(r.jsxs)(k.a,{lg:"11",xs:"12",className:"d-flex justify-content-center justify-content-lg-between my-5 chicken-mile_heading pl-0",children:[Object(r.jsx)("h4",{className:"chicken-mile_heading4",children:w}),t!==b.d.Home&&Object(r.jsxs)("button",{onClick:()=>a(b.d.Home),className:"d-none d-lg-flex show-qr-btn",children:[Object(V.translateWithI18Next)(f)," ",Object(r.jsx)("img",{className:"back-CTA-Arrow",src:x.a.CTA_Arrow,alt:"back-btn"})]})]}),Object(r.jsx)(k.a,{lg:"12",xs:"12",className:"d-lg-flex justify-content-lg-center px-lg-0 ".concat(t!==b.d.Home&&t!==b.d.MILE_DETAILS&&t!==b.d.RANKING?"sub-chicken-mile-view":""),children:_})]})]})}},1121:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(25),n=a(6),d=a(15),r=a(43),s=a(61),c=a(110),u=a(182),v=a(2);var O=e=>{let{category:t,children:a}=e;return Object(v.jsxs)("div",{children:[t&&Object(v.jsx)("div",{className:"preferences-item-category",children:Object(v.jsx)("label",{htmlFor:t,children:t})}),a]})};var b=e=>{let{dataChecked:t,dataUnChecked:a,isChecked:i,onToggleChange:o}=e;const l=e=>{null!==e&&(null===o||void 0===o||o(e))};return Object(v.jsxs)("div",{className:"switch-button",children:[Object(v.jsx)("div",{"data-testid":"switch-button-testid",className:"switch-button ".concat(i?"active":""),onClick:()=>l(!0),children:t}),Object(v.jsx)("div",{className:"switch-button ".concat(i?"":"active"),onClick:()=>l(!1),children:a})]})};var m=e=>{let{property:t,onToggleChange:a}=e;return Object(v.jsx)("div",{className:"communication-preferences-item",children:Object(v.jsxs)("div",{className:"preferences-item-container",children:[t.subTitle&&Object(v.jsxs)("div",{className:"preferences-item-title",children:[" ",Object(v.jsx)("label",{htmlFor:t.subTitle,children:t.subTitle})]}),t.copy&&Object(v.jsxs)("div",{className:"preferences-sub-title",children:[" ",Object(v.jsx)("label",{htmlFor:t.copy,children:t.copy})]}),Object(v.jsx)("div",{className:"switch-button-container",children:Object(v.jsx)(b,{dataChecked:t.status.checkedLabel,dataUnChecked:t.status.unCheckedLabel,onToggleChange:()=>{a(t,!t.status.isChecked)},isChecked:t.status.isChecked})})]})})},j=a(332),h=a(4);var p=e=>{let{content:t,data:a,onPreferenceDataChange:o}=e;const{PREFERENCES_COMMUNICATION_PREFERENCES:d}=h.a,[r,s]=Object(i.useState)(Object(j.j)(t,a)),[c]=Object(i.useState)({...a});Object(i.useEffect)((()=>{s(Object(j.j)(t,a))}),[t,a]);const u=Object(l.c)((e=>{var t,a,i,o,l,n;return null!==(t=null===(a=e.tenantReducer)||void 0===a||null===(i=a.componentOptions)||void 0===i||null===(o=i.web)||void 0===o||null===(l=o.accountPage)||void 0===l||null===(n=l.preferenceCenter)||void 0===n?void 0:n.showUnsubscribeAllButton)&&void 0!==t&&t})),b=(e,a)=>{if(e.status.isChecked=a,e.code===j.a.globalOptOut&&e.status.isChecked&&(null!==r&&void 0!==r?r:[]).forEach((t=>{t.code!==e.code&&(t.status.isChecked=!1)})),e.code===j.a.globalOptOut&&!e.status.isChecked){const a=Object(j.j)(t,c)||[];(null!==r&&void 0!==r?r:[]).forEach((t=>{var i,o,l,n;t.code!==e.code&&(t.status.isChecked=null!==(i=null===(o=a.filter((e=>e.code===t.code)))||void 0===o||null===(l=o[0])||void 0===l||null===(n=l.status)||void 0===n?void 0:n.isChecked)&&void 0!==i&&i)}))}e.code!==j.a.globalOptOut&&e.status.isChecked&&((null!==r&&void 0!==r?r:[]).filter((e=>e.code===j.a.globalOptOut))[0].status.isChecked=!1),s(r),o(r)};return Object(v.jsxs)("div",{"data-testid":"preferences-testid",className:"preferences-card",children:[Object(v.jsx)("div",{className:"preferences-card-left-side preferences-card-left-side-au",children:Object(n.translateWithI18Next)(d)}),Object(v.jsx)("div",{className:"preferences-card-right-side",children:Object(v.jsx)("div",{className:"preferences-container",children:Object(v.jsx)("div",{className:"preferences-item",children:r.map((e=>e.code!==j.a.globalOptOut||u?Object(v.jsxs)(i.Fragment,{children:[e.code===j.a.globalOptOut&&Object(v.jsx)("hr",{className:"divider"},"hr-".concat(e.code)),Object(v.jsx)(O,{category:e.title,children:Object(v.jsx)(m,{property:e,onToggleChange:b})},e.code)]},"fragment-".concat(e.code)):null))})})})]})};var g=e=>{let{data:t,onToggleChange:a,isChecked:i}=e;return Object(v.jsxs)("div",{className:"meal-list-item",children:[Object(v.jsx)("input",{id:t.title,checked:i,className:"meal-item-checkbox ".concat(i?"checked":""),value:t.title,type:"checkbox",onChange:e=>{a(e.target.value)}}),Object(v.jsx)("label",{className:"meal-item-text",htmlFor:t.title,children:t.title}),Object(v.jsx)(r.a,{srcFile:t.image})]})};var N=e=>{let{data:t,selectedMeals:a,onToggleChange:i}=e;const o=e=>{if(a)return a.includes(e.title)},l=e=>{i(e)},{PREFERENCES_MEAL_PREFERENCE:d,PREFERENCES_MEAL_PREFERENCE_DESCRIPTION:r}=h.a;return Object(v.jsxs)("div",{className:"meal-list-card","data-testid":"meal-checkbox",children:[Object(v.jsx)("div",{className:"preferences-card-left-side preferences-card-left-side-au",children:Object(n.translateWithI18Next)(d)}),Object(v.jsxs)("div",{className:"preferences-card-right-side",children:[Object(v.jsx)("div",{className:"meal-description",children:Object(n.translateWithI18Next)(r)}),null===t||void 0===t?void 0:t.map(((e,t)=>{var a;return Object(v.jsx)("div",{children:Object(v.jsx)(g,{data:e,onToggleChange:l,isChecked:null!==(a=o(e))&&void 0!==a&&a})},t)}))]})]})},S=a(213);var I=()=>Object(v.jsxs)("div",{"data-testid":"communication-thankyou-container",className:"communication-thankyou-container",children:[Object(v.jsx)("div",{className:"communication-thankyou-confirm-icon",children:Object(v.jsx)(S.a,{src:d.a.ThankYou})}),Object(v.jsx)("div",{className:"communication-main-text",children:Object(n.translateWithI18Next)(h.a.PREFERENCES_THANK_YOU)}),Object(v.jsx)("div",{className:"communication-subTitle-text",children:Object(n.translateWithI18Next)(h.a.PREFERENCES_THANK_COMMENT_MSG)})]});var x=e=>{let{variant:t}=e;return Object(v.jsxs)("div",{"data-testid":"communication-error-container",className:"communication-error-container",children:[Object(v.jsx)("div",{className:"communication-error-icon",children:Object(v.jsx)(S.a,{src:d.a.CartError})}),Object(v.jsx)("div",{className:"communication-main-text",children:Object(n.translateWithI18Next)(h.a.PREFERENCES_ERROR)}),Object(v.jsx)("div",{className:"communication-subTitle-text",children:Object(n.translateWithI18Next)(h.a.PREFERENCES_ERROR_MSG)})]})},f=a(1021);a(1020);var E=()=>Object(v.jsx)(f.a,{baseColor:"#f8f9fa",highlightColor:"#e3e3e3",children:Object(v.jsx)("div",{className:"communication-preferences-container",children:Object(v.jsxs)("div",{"data-testid":"preferences-skeleton-testid",className:"preferences-card preferences-card-skeleton",children:[Object(v.jsx)("div",{className:"preferences-card-left-side preferences-card-left-side-au",children:Object(v.jsx)(f.b,{height:50})}),Object(v.jsx)("div",{className:"preferences-card-right-side",children:Object(v.jsx)("div",{className:"preferences-container",children:Object(v.jsx)("div",{className:"preferences-item",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{class:"preferences-item-category",children:Object(v.jsx)(f.b,{width:"50%"})}),[1,2,3,4,5].map(((e,t)=>Object(v.jsx)("div",{class:"communication-preferences-item",children:Object(v.jsxs)("div",{class:"preferences-item-container",children:[Object(v.jsx)("div",{class:"preferences-item-title",children:Object(v.jsx)(f.b,{width:"50%"})}),Object(v.jsx)("div",{class:"preferences-sub-title",children:Object(v.jsx)(f.b,{})}),Object(v.jsx)("div",{class:"switch-button-container",children:Object(v.jsx)("div",{class:"switch-button",children:Object(v.jsx)("div",{class:"switch-button",children:Object(v.jsx)(f.b,{width:50})})})})]})},t)))]})})})})]})})}),C=a(52),T=a(106);t.a=e=>{var t,a,O;let{updateMenu:b,variant:m="account"}=e;const j=Object(l.b)(),{PREFERENCES_SAVE_PREFERENCES:g,PREFERENCES_COMMUNICATION_PREFERENCES:S}=h.a,f=Object(l.c)((e=>e.profileReducer||null)),{SingleArrowback:y}=d.a,D=Object(l.c)((e=>e.tenantReducer||null)),[A,R]=Object(i.useState)([...new Set]),_=new URLSearchParams(Object(s.h)().search),w=_.has("src")&&_.get("src").startsWith("mobile"),L=Object(l.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response)||{}})),k=null===L||void 0===L||null===(t=L.headerData)||void 0===t?void 0:t.communicationPreferences,M=null===L||void 0===L||null===(a=L.headerData)||void 0===a||null===(O=a.mealPreferences)||void 0===O?void 0:O.map((e=>{var t,a,i;return{title:e.fields.title,image:null===(t=e.fields.desktopImage)||void 0===t||null===(a=t.fields)||void 0===a||null===(i=a.file)||void 0===i?void 0:i.url}})),P=Object(l.c)((e=>{var t,a,i,o,l,n;return null!==(t=null===(a=e.tenantReducer)||void 0===a||null===(i=a.componentOptions)||void 0===i||null===(o=i.web)||void 0===o||null===(l=o.accountPage)||void 0===l||null===(n=l.preferenceCenter)||void 0===n?void 0:n.showMealPreferences)&&void 0!==t&&t})),F=Object(c.b)(T.c),W=Object(l.c)((e=>e.commPreferencesReducer)),[H,U]=Object(i.useState)({mealPreferences:[]}),[B,G]=Object(i.useState)({}),[V,Y]=Object(i.useState)(!1),[K,z]=Object(i.useState)();let q=function(){const{search:e}=Object(s.h)();return o.a.useMemo((()=>new URLSearchParams(e)),[e])}();const J=Object(l.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus}));Object(i.useEffect)((()=>{const e=null===f||void 0===f?void 0:f.customerId,t=q.get("id"),a=q.get("src");G({userId:null!==t&&void 0!==t?t:e,src:null!==a&&void 0!==a?a:"web",queryUserId:t,sessionUserId:e,authenticated:null===J||void 0===J?void 0:J.loggedIn})}),[j,null===f||void 0===f?void 0:f.customerId,q,null===D||void 0===D?void 0:D.brazeMparticle,null===J||void 0===J?void 0:J.loggedIn]),Object(i.useEffect)((()=>{null!==B&&void 0!==B&&B.userId&&null!==B&&void 0!==B&&B.src&&"123"!==(null===D||void 0===D?void 0:D.brazeSMSGroupId)&&j(T.a.fetch({params:{customerId:B.userId,src:B.src,smsSubscriptionGroupId:null===D||void 0===D?void 0:D.brazeSMSGroupId}}))}),[B,j,null===D||void 0===D?void 0:D.brazeSMSGroupId]),Object(i.useEffect)((()=>{!1===(null===W||void 0===W?void 0:W.loading)&&!1===(null===W||void 0===W?void 0:W.updating)&&(U(F),R(F.mealPreferences))}),[null===W||void 0===W?void 0:W.loading,null===W||void 0===W?void 0:W.updating]),Object(i.useEffect)((()=>{if(V&&!1===(null===W||void 0===W?void 0:W.updating)){const e=null===W||void 0===W?void 0:W.error;z(e?"error":"success"),Y(!1),window.scrollTo(0,0)}}),[V,null===W||void 0===W?void 0:W.updating,B.src,null===W||void 0===W?void 0:W.error,b]),Object(i.useEffect)((()=>{z(""),null!==W&&void 0!==W&&W.loading&&z("loading"),null!==W&&void 0!==W&&W.loading||null===W||void 0===W||!W.error||z("error")}),[null===W||void 0===W?void 0:W.error,null===W||void 0===W?void 0:W.loading]),Object(i.useEffect)((()=>{"account"===m&&"success"===K&&(X(h.a.PREFERENCES_SUCCESS_MSG),z("")),"account"===m&&"error"===K&&(Q(h.a.PREFERENCES_ERROR_MSG),z(""))}),[m,K]);const X=e=>{C.b.dark(Object(v.jsx)("div",{"data-testid":"preferences-success-toast",className:"img-text-div",children:Object(v.jsx)("span",{className:"text",children:Object(n.translateWithI18Next)(e)})}),{hideProgressBar:!0,position:C.b.POSITION.BOTTOM_CENTER,autoClose:5e3,closeOnClick:!0})},Q=e=>{C.b.error(Object(v.jsx)("div",{"data-testid":"preferences-success-toast",className:"img-text-div",children:Object(v.jsx)("span",{className:"text",children:Object(n.translateWithI18Next)(e)})}),{hideProgressBar:!0,position:C.b.POSITION.BOTTOM_CENTER,autoClose:5e3,closeOnClick:!0})},Z=()=>{if(null!==W&&void 0!==W&&W.loading||null!==W&&void 0!==W&&W.updating)return;const e={...H,mealPreferences:A};U(e),Y(!0),j(T.a.update({params:{customerId:B.userId,src:B.src,smsSubscriptionGroupId:null===D||void 0===D?void 0:D.brazeSMSGroupId},data:{...e}}))},$=e=>{A.includes(e)?R(A.filter((t=>t!==e))):R([...A,e])},ee=e=>{const t={...H};(null!==e&&void 0!==e?e:[]).forEach((e=>{t[e.code]=e.status.isChecked})),U(t)},te=()=>Object(v.jsxs)("div",{className:"communication-preferences-container",children:[Object(v.jsx)(p,{content:k,data:H,onPreferenceDataChange:ee}),P&&Object(v.jsx)(N,{data:M,selectedMeals:A,onToggleChange:$}),Object(v.jsx)("div",{className:"save-preferences-container",children:Object(v.jsx)(u.b,{"data-testid":"save-communication-preferences",className:"save-preferences-button",loading:null===W||void 0===W?void 0:W.updating,variant:u.a.tertiary,onClick:Z,children:Object(n.translateWithI18Next)(g)})})]});return Object(v.jsxs)("div",{className:"communication-preferences-page","data-testid":"communication-preferences-container-testid",children:[!w&&Object(v.jsxs)("div",{className:"account-settings-header-mobile",children:[Object(v.jsx)("img",{className:"backArrow-account-setting",onClick:()=>b(""),src:y,alt:"back btn"}),Object(v.jsx)("span",{className:"account-setting-text-header",children:Object(n.translateWithI18Next)(S)})]}),Object(v.jsxs)("div",{className:"communication-preferences-heading-alignment",children:["email"===m&&Object(v.jsx)(r.a,{srcFile:d.a.Strips,className:"preferences-strips-icon","data-testid":"preferences-strips-icon"}),Object(v.jsx)("p",{className:"communication-preferences-text-heading",children:Object(n.translateWithI18Next)(S)})]}),(()=>{switch(K){case"loading":return Object(v.jsx)(E,{});case"success":return"email"===m?Object(v.jsx)(I,{}):te();case"error":return"email"===m?Object(v.jsx)(x,{}):te();default:return te()}})()]})}},812:function(e,t,a){"use strict";a.r(t),a.d(t,"removeCouponHandler",(function(){return u})),a.d(t,"quantityModifierOnClickHandler",(function(){return v}));var i=a(3),o=a(317),l=a(25),n=a(54),d=a(918),r=a(6),s=a(4),c=a(2);const u=e=>{let{setCartItem:t,item:a,setCouponModal:i,setQuantityActionData:o,quantityAction:l}=e;i(!0),t(a),o(l)},v=e=>{let{paymentDiscountAmounts:t,setCartItem:a,item:i,setCouponModal:o,setQuantityActionData:l,quantityAction:n,event:d,updateItemQuantity:r}=e;null!==t&&void 0!==t&&t.length?u({setCartItem:a,item:i,setCouponModal:o,setQuantityActionData:l,quantityAction:n}):r(i,n,d)};t.default=e=>{var t,a;const{itemQuantity:u,itemCount:O,updateItemQuantity:b,quantityAction:m,item:j,itemName:h,cartItemCount:p,maxItemCountPerLineItem:g,hideChild:N=!1,type:S="",paymentDiscountAmounts:I=[],removeSingleItem:x=!1}=e,{QUANTITY_INCREASE_DECREASE:f}=n.a;var E="".concat(Object(r.translateWithI18Next)(s.a.DECREASE_QUANTITY_BY)," ").concat(h),C="".concat(Object(r.translateWithI18Next)(s.a.INCREASE_QUANTITY_BY),"  ").concat(h);const T=Object(l.c)((e=>{var t;return null===(t=e.cartReducer)||void 0===t?void 0:t.isUpdateQuantityLoading})),[y,D]=Object(i.useState)(!1),[A,R]=Object(i.useState)({}),[_,w]=Object(i.useState)(""),L=Object(l.c)((e=>{var t,a,i,o,l,n;return(null===(t=e.cartReducer)||void 0===t?void 0:t.isBasketDetailsLoading)||(null===(a=e.cartReducer)||void 0===a?void 0:a.isUpdateQuantityLoading)||(null===(i=e.cartReducer)||void 0===i?void 0:i.isValidateBasketLoading)||(null===(o=e.storesReducer)||void 0===o?void 0:o.isStoreStatusLoading)||(null===(l=e.orderReducer)||void 0===l?void 0:l.isCreateOrderLoading)||(null===(n=e.orderReducer)||void 0===n?void 0:n.isPlaceOrder)}));return Object(c.jsxs)("div",{className:"cart-food-quantity-change",children:[!x&&+O===+u||null!==j&&void 0!==j&&j.isProductPromo&&(null===j||void 0===j?void 0:j.minQuantity)===(null===j||void 0===j?void 0:j.maxQuantity)?Object(c.jsx)(o.a,{className:"button quantity-decrease",disabled:!0,"data-testid":"quantity-minus",ariaLable:"minus",children:!N&&Object(c.jsx)("span",{children:"-"})}):Object(c.jsx)(o.a,{className:"button quantity-decrease",ariaLable:E,disabled:T||L,onClickHandler:e=>v({paymentDiscountAmounts:I,setCartItem:R,item:j,setCouponModal:D,setQuantityActionData:w,quantityAction:m.Decrease,event:e,updateItemQuantity:b}),"data-testid":"quantity-minus",type:S,children:!N&&Object(c.jsx)("span",{children:"-"})}),Object(c.jsx)("span",{className:"cart-food-quantity",children:O}),Object(c.jsx)("span",{className:"sr-only",role:"alert",children:"Quantity updated to ".concat(O)}),Object(c.jsx)(o.a,{className:".transparent-btn button quantity-increase",ariaLable:C,"data-testid":"quantity-plus",type:S,onClickHandler:e=>v({paymentDiscountAmounts:I,setCartItem:R,item:j,setCouponModal:D,setQuantityActionData:w,quantityAction:m.Increase,event:e,updateItemQuantity:b}),disabled:!!(0!==g&&p+O>g||null!==j&&void 0!==j&&null!==(t=j.discountComponents)&&void 0!==t&&null!==(a=t[0])&&void 0!==a&&a.isDiscounteditem)||(T||L),children:!N&&Object(c.jsx)("span",{children:"+"})}),y&&Object(c.jsx)(d.a,{cartItem:A,setCouponModal:D,quantityAction:_,updateItemQuantity:b,flag:f})]})}},813:function(e,t,a){"use strict";a.r(t),a.d(t,"ScheduleOrder",(function(){return O}));var i=a(3),o=a.n(i),l=a(936),n=a(121),d=a(2);var r=e=>{const{handleClose:t,ScheduleOrderForm:a,headerText:i,modalTitleId:l="",handleGoBack:r}=e;return Object(d.jsx)(o.a.Fragment,{children:Object(d.jsx)(n.a,{id:"ScheduleOrderModal",role:"dialog",ariaLabel:"Close Start your Order dialog",modalTitleId:l,show:!0,classNames:"search-store-modal extra-small-modal",showCloseBtn:!0,closeButtonHandler:t,modalTitle:i,closeDataTestId:"close-modal-handler",showBackBtn:!0,backButtonHandler:r,children:a})})},s=a(76),c=a(14),u=a(6),v=a(4);const O=e=>{const{onStoreSelectFinish:t}=e,{userOrderState:a,userOrderStateDispatch:o}=Object(i.useContext)(s.a),{SEARCH_ORDER_DATA:n,SCHEDULE_ORDER_DATA:O}=c.a,{scheduleOrderData:b}=a,{changeFlow:m=!1}=b,j=e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem("renderComp",!0),o({type:O,value:{selectedStoreInfo:a.scheduleOrderData.storeInfo,showScheduleOrderCatering:!1}}),o({type:n,value:{showSearchStore:!1}})};Object(i.useEffect)((()=>{const e=e=>{27===e.keyCode&&j(e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const h=Object(d.jsx)(l.a,{onStoreSelectFinish:t});return Object(d.jsx)(r,{handleGoBack:()=>{o({type:n,value:{showSearchStore:!0}}),o({type:O,value:{showScheduleOrderCatering:!1}})},handleClose:j,ScheduleOrderForm:h,modalTitleId:"schedule-order",headerText:m?Object(u.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.SCHEDULE_ORDER):Object(u.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.CHANGE_ORDER_TITLE)})};t.default=O},814:function(e,t,a){"use strict";a.r(t),a.d(t,"SearchStoreModule",(function(){return vt}));var i=a(12),o=a(13),l=a(6),n=a(269),d=a(63),r=a(155),s=a(22),c=a(5),u=a(76),v=a(3),O=a.n(v),b=a(25),m=a(807),j=a(14),h=a(128),p=a(330),g=a(212),N=a(43),S=a(266),I=a.n(S),x=a(36),f=a(928),E=a(323),C=a(49),T=a(15),y=a(2);const D=e=>!0===e.includes(",")?e.replace(",",", "):e;var A=e=>{var t,a;const{onMapClickHandler:i,startOrderFormSavedAddress:o}=e,{MapImage:n}=T.a,{SAVED_ADDRESS:d,SAVED_ADDRESSES:r,START_ORDER_TEXT:s}=h.a,{savedAddresses:c}=Object(b.c)((e=>e.profileReducer)),u=null===(t=c.filter((e=>{let{isPrimary:t}=e;return t}))[0])||void 0===t||null===(a=t.addressLines)||void 0===a?void 0:a.join(" ");return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"savedAddress-store-count",children:[Object(y.jsxs)("span",{className:"saved-address-count-title",children:[c.length>1?"".concat(Object(l.translateWithI18Next)(r)," "):"".concat(Object(l.translateWithI18Next)(d))," ","(",c.length,")"," "]}),Object(y.jsx)("div",{"data-testid":"saved-map-link",onClick:e=>i(e,"",u),children:Object(y.jsxs)(g.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:n,alt:"map",className:"map-img"})}),"Map"]})})]}),c.map((e=>Object(y.jsx)("div",{className:"savedAddress-module-card",children:Object(y.jsxs)("div",{className:"inside-card",children:[Object(y.jsxs)("div",{className:"address-section",children:[Object(y.jsxs)("div",{className:"address-type",children:[e.name," : "]}),Object(y.jsxs)("div",{className:"address",children:[(null===e||void 0===e?void 0:e.addressLines[1])&&Object(y.jsxs)("span",{children:[" ",D(null===e||void 0===e?void 0:e.addressLines[1]),", "]}),(null===e||void 0===e?void 0:e.addressLines[0])&&Object(y.jsxs)("span",{children:[" ",D(null===e||void 0===e?void 0:e.addressLines[0]),", "]}),(null===e||void 0===e?void 0:e.city)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.city,", "]}),(null===e||void 0===e?void 0:e.state)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.state," - "]}),(null===e||void 0===e?void 0:e.pinCode)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.pinCode,", "]}),(null===e||void 0===e?void 0:e.country)&&Object(y.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.country," "]})]})]}),Object(y.jsx)("div",{children:Object(y.jsx)(x.a,{className:"button redButton search-store-card-btn",onClickHandler:t=>((e,t)=>{var a;const{latitude:i,longitude:l}=t.location,n={userLat:i,userLong:l},d=(null===t||void 0===t||null===(a=t.addressLines)||void 0===a?void 0:a.reduce(((e,t)=>e+" "+t)))+", "+(null===t||void 0===t?void 0:t.city)+", "+(null===t||void 0===t?void 0:t.state)+", "+(null===t||void 0===t?void 0:t.country);o(d,n)})(0,e),"data-testid":"savedaddress-click-test",children:Object(l.translateWithI18Next)(s)})})]})})))]})})},R=a(124);var _=e=>{const{errorMsgToShow:t,onClearTextHandler:a,dispositionType:i,onRetryClickHandler:o,onMapClickHandler:n,showMap:d}=e,{userOrderStateDispatch:r}=Object(v.useContext)(u.a),{DISPOSITION_METHOD:s}=j.a,{DELIVERY_UNAVAILABLE_WITH_CTA:c,TAKE_AWAY:b,TYPE_TAKE_WAY:m,RETRY_TEXT:p,CTA1_SEARCH_DIFF_ADDRESS:g,CTA2_ORDER_TAKEAWAY:S,CTA2_VIEW_MAP_BUTTON_TEXT:I}=h.a,{Error:f}=T.a,E=Object(R.a)({"error-alert-location-popup":!0,"error-alert-location-popup-with-map-view":d});return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsxs)("div",{"data-testid":"alert-locationid",className:"Delivery"===i?E:"error-alert-location-popup error-adjust",children:[Object(y.jsx)(N.a,{srcFile:f,className:"location-alert-icon"}),t!==c&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"location-error-address",children:Object(l.translateWithI18Next)(t)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(x.a,{"data-testid":"btn-searchDifferentAddressClick",className:"button whiteButton blackBorder location-warning-button mr",onClickHandler:e=>(e=>{e.preventDefault(),a()})(e),children:Object(l.translateWithI18Next)(g)}),i.toLowerCase()!==b.toLowerCase()&&Object(y.jsx)(x.a,{"data-testid":"btn-orderTakeawayClick",className:"button whiteButton blackBorder location-warning-button ml",onClickHandler:e=>(e=>{e.preventDefault(),r({type:s,value:{dispositionType:m}})})(e),children:Object(l.translateWithI18Next)(S)})]})]}),t===c&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"location-error-address",children:Object(l.translateWithI18Next)(t)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(x.a,{"data-testid":"btn-onRetryClick",className:"button whiteButton blackBorder location-warning-button mr retrybtn",onClickHandler:e=>o(e),children:Object(l.translateWithI18Next)(p)}),i!==b&&Object(y.jsx)(x.a,{"data-testid":"btn-onMapClick",className:"button whiteButton blackBorder location-warning-button ml retrybtn",onClickHandler:e=>n(e),children:Object(l.translateWithI18Next)(I)})]})]})]})})},w=a(0),L=a(110),k=a(69),M=a(318);const{LocationImage:P,GoogleMapLocationImage:F,SuggestionItemSearchPin:W,clearTextIcon:H,Time_Clock:U,Error:B,MapImage:G}=T.a,{MIN_SEARCH_CHARACTER_LIMIT:V,SUUGESTED_ITEMS_TEXT:Y,ALLOWED_SUGGESTION_LIST:K,ALREADY_SERACHED_LOCATIONS:z,COUNTRY_CODE:q,SUGGESTION_ACTIVE_COLOR:J,SUGGESTION_ACTIVE_OPACITY:X,BRAND_BLACK:Q,COLOR_BLACK:Z,CONFIRM_BUTTON_TEXT:$,LOCATION_WARNING_MESSAGE:ee,RETRY_TEXT:te,USE_THIS_ADDRESS_TEXT:ae,DELIVERY_UNAVAILABLE:ie,DELIVERY_UNAVAILABLE_WITH_CTA:oe,NOTAVAILABLE:le,CTA1_SEARCH_DIFF_ADDRESS:ne,TAKE_AWAY:de,CTA2_ORDER_TAKEAWAY:re}=h.a,se=(e,t)=>{t()},ce=e=>{var t;let{eligibleStoreData:a,suggestedAddress:i,setNegativeScenarioAlert:o,getNegativeView:n}=e,d=null===a||void 0===a?void 0:a.filter((e=>{var t,a,i;return(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.menu)||void 0===a||null===(i=a.catalogs)||void 0===i?void 0:i.length)>0})),r=d.filter((e=>{var t,a,i,o,l,n;const d="CLOSED"===e.summary.status.currentStatus,r=-1!==(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a||null===(i=a.message)||void 0===i?void 0:i.indexOf("EMERGENCY_SHUTDOWN")),s=-1!==(null===e||void 0===e||null===(o=e.summary)||void 0===o||null===(l=o.status)||void 0===l||null===(n=l.message)||void 0===n?void 0:n.indexOf("TECHNICAL_SHUTDOWN"));return d&&(r||s)})),s=Object(E.a)("delivery",d);var u;return Object(c.id)(s,Object(c.id)(!(null!==(t=i[0])&&void 0!==t&&t.description),(null===r||void 0===r?void 0:r.length)===d.length))?(Object(c.db)((null===r||void 0===r?void 0:r.length)===(null===d||void 0===d?void 0:d.length),null===d||void 0===d?void 0:d.length)?s=ie:null!==(u=i[0])&&void 0!==u&&u.description||(s=oe),o(s),Object(c.Kb)(Object(l.translateWithI18Next)(p.a.contentData.deliveryHeaderText),Object(l.translateWithI18Next)(s)),n(s)):void 0},ue=(e,t,a)=>Object(y.jsx)(x.a,{className:"button blackButton blackBorder delivery-confirm-button delivery-confirm-button-in","data-testid":"btn-confirm",disabled:!e||t,onClick:a,"data-loading":t,children:Object(l.translateWithI18Next)($)}),ve=(e,t,a)=>{var i,o,l,n,d;return null===e||void 0===e||null===(i=e.toString())||void 0===i||null===(o=i.replace)||void 0===o||null===(l=o.call(i,t,""))||void 0===l||null===(n=l.trim())||void 0===n||null===(d=n.replace)||void 0===d?void 0:d.call(n,a,"")};var Oe=e=>{var t;const{formContent:a={},userPositionHandler:i,singInClickhandler:o,eligibleStoreData:n}=e,{memberText:d="",singInLink:r={},currentLocationText:m="",addressBoxPlaceHolderForDelivery:h=""}=a,{RETAIN_ADDRESS:f}=w.gd,{SCHEDULE_ORDER_DATA:T,DISPOSITION_METHOD:D}=j.a,R=Object(b.c)((e=>e.appStateReducer.userStatus)),{loggedIn:G}=Object(c.kd)(R),{userOrderState:Z,userOrderStateDispatch:$}=Object(v.useContext)(u.a),{searchStoreData:oe={},dispositionStateData:Oe={}}=Z,[he,pe]=Object(v.useState)(""),[ge,Ne]=Object(v.useState)(!1),[Se,Ie]=Object(v.useState)(!1),[xe,fe]=Object(v.useState)(!1),[Ee,Ce]=Object(v.useState)({lat:28.7,lng:77.1}),[Te,ye]=Object(v.useState)(!1),[De,Ae]=Object(v.useState)(!1),[Re,_e]=Object(v.useState)([]),[we,Le]=Object(v.useState)(""),ke=Object(v.useRef)(null),[Me,Pe]=Object(v.useState)(""),[Fe,We]=Object(v.useState)(""),[He,Ue]=Object(v.useState)(!1),[Be,Ge]=Object(v.useState)(!1),[Ve,Ye]=Object(v.useState)(!1),[Ke,ze]=Object(v.useState)(""),[qe,Je]=Object(v.useState)(!1),{dispositionType:Xe=localStorage.getItem("dispositionType")}=Oe,[Qe,Ze]=Object(v.useState)({}),$e=Object(b.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t||null===(a=t.savedAddressPage)||void 0===a?void 0:a.showStateCityAddAddress})),et=Object(L.a)(),{componentOptions:{web:{storeSearch:{postalCodeRemoval:tt=!1,addPickupAndDropoffLatLngInStatusApi:at}}},postalcodeRemoveRegex:it=null,specialCharRemoveRegex:ot=null}=Object(b.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),lt=Object(b.c)((e=>{var t,a,i,o;return(null===(t=e.storesReducer)||void 0===t?void 0:t.isGoogleDistanceLoading)||(null===(a=e.storesReducer)||void 0===a?void 0:a.isStoreStatusLoading)||(null===(i=e.storesReducer)||void 0===i?void 0:i.isNearByStoresLoading)||(null===(o=e.storesReducer)||void 0===o?void 0:o.isStoreTimeSlotsLoading)}));Object(v.useEffect)((()=>{Object(E.e)(De,Fe,p.a)}),[De,Fe]);const nt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(_,{errorMsgToShow:Object(c.id)(Fe,e),onClearTextHandler:Ot,onRetryClickHandler:st,onMapClickHandler:dt,dispositionType:Xe,showMap:xe})})},dt=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.preventDefault(),Object(E.i)(xe,Xe),fe(!0),We(!1),t&&!he&&ct(t)},rt=e=>{var t;const a=null===(t=e.toString())||void 0===t?void 0:t.split(" "),i=null===a||void 0===a?void 0:a.filter((e=>!(null!==e&&void 0!==e&&e.includes("+"))));return null===i||void 0===i?void 0:i.join(" ")},st=e=>{ke.current.select(),Ne(!1),ye(!1),We(!1),Ae(!1)},ct=async function(e,t,a){var o;let l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Je(!1),ze(""),Object(c.db)(null===t,null===a)&&(null===(o=Re[0])||void 0===o?void 0:o.description)&&Ae(!0),Ue(!0),ye(!0);const n=await Object(S.geocodeByAddress)(e),d=await Object(S.getLatLng)(n[0]);at&&et(Object(k.d)({key:w.qe.LAT_LONG,value:d})),Ce(d),ut(e);const r=tt?ve(e,it,ot):rt(e);pe(r),l||Ne(!0),i({userLat:d.lat,userLong:d.lng}),Ie(!1)};Object(v.useEffect)((()=>{var e;let t=null===(e=localStorage)||void 0===e?void 0:e.getItem(f);Object(E.b)(t,_e,ct)}),[]),Object(v.useEffect)((()=>{let e=null===n||void 0===n?void 0:n.filter((e=>{var t,a;return(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.menu)||void 0===a?void 0:a.catalogs[0])!==le})),t=null===e||void 0===e?void 0:e.filter((e=>{var t,a;return"CLOSED"!==(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)}));qe&&Ke&&t&&(null===t||void 0===t?void 0:t.length)>=1?(Ye(!1),$({type:T,value:{deliveryAddress:Ke,showScheduleOrderCatering:!0,selectedStoreInfo:t[0]}})):Ke&&Ye(!0)}),[n,Ke,qe]),Object(v.useEffect)((()=>{}),[Ee]);Object(v.useEffect)((()=>{(null===he||void 0===he?void 0:he.length)>2?Ne(!De):(Ne(!1),Ae(!1),We(""));let e=Object(c.d)(he,V);Ge(e)}),[he]),Object(v.useEffect)((()=>{if(Se){const e=rt(Me);pe(e),ut(Me),Ie(!1)}}),[oe]);const ut=e=>{Object(c.pe)(e,z)},vt=e=>{return t=e,Object(c.jd)(JSON.parse(localStorage.getItem(z))).includes(t);var t},Ot=()=>{pe(""),Ne(!1),We(""),_e(""),Ye(!1)},bt=async(e,t)=>{Ce({lat:t.userLat,lng:t.userLong}),Je(!0);const a=rt(e);pe(a),Ze(t),ut(e),ze(e),i(t)};return Object(y.jsxs)(O.a.Fragment,{children:[Object(y.jsxs)("div",{className:"delivery-module-form","data-testid":"delivery-component",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"login-section",children:[Object(y.jsx)("span",{className:"delivery-member-signin",children:!G&&je(d,o,r)}),Object(y.jsx)("span",{children:Object(y.jsxs)(g.a,{onClickHandler:async()=>{if(Object(C.o)(),await s.b.BindLocation($e),Object(E.m)(),_e([]),s.b.coordinates){const{latitude:e,longitude:t}=s.b.coordinates;s.b.addFeedback("Check coordinates ".concat(JSON.stringify(s.b.coordinates))),s.b.addFeedback("Check assignment ".concat(JSON.stringify({userLat:e,userLong:t}))),s.b.addFeedback("Check address ".concat(s.b.address)),i({userLat:e,userLong:t}),Pe(s.b.address);const a=rt(s.b.address);pe(a),ct(s.b.address),Ie(!0),_e([{description:s.b.address}])}Object(M.s)($,!s.b.coordinates)},className:"delivery-location-link","data-testid":"use-my-location",children:[Object(y.jsx)(N.a,{"data-testid":"",srcFile:P,alt:" ",className:"location-img"}),Object(l.translateWithI18Next)(m)]})})]}),Object(y.jsxs)("div",{className:"delivery-address-section",children:[Object(y.jsx)("div",{className:"search-delivery-address",children:Object(y.jsx)("div",{className:"input-delivery-address",children:Object(y.jsx)(I.a,{value:he,onChange:e=>{Ue(!1),ye(!1);const t=rt(e);pe(t),((e,t,a)=>{(null===e||void 0===e?void 0:e.length)<3&&(t(""),a(!1))})(e,_e,Ge),Je(!1),ze(""),Ye(!1)},onSelect:ct,searchOptions:{componentRestrictions:{country:q}},shouldFetchSuggestions:!0,onError:se,children:e=>{let{getInputProps:t,suggestions:a,getSuggestionItemProps:i,loading:o}=e;return Object(y.jsxs)("div",{children:[Object(y.jsx)(N.a,{"data-testid":"",srcFile:F,alt:" ",className:"google-location-img"}),Object(y.jsx)("input",{"data-testid":"store-search-input","aria-label":"Enter your delivery address",className:"".concat(Object(c.Tc)(Object(c.id)(De,Fe),"store-search-input error-border mt-2","store-search-input mt-2")),...t({placeholder:Object(l.translateWithI18Next)(h),ref:ke})}),he&&Object(y.jsx)("img",{src:H,className:"clearTextIcon",onClick:Ot,alt:"Clear Text Icon"}),Object(c.db)(Object(c.kc)(a),Be)?Object(y.jsx)("div",{className:"suggestion-list",children:a.map(((e,t)=>{var o;if(null!==e&&void 0!==e&&null!==(o=e.types)&&void 0!==o&&o.some((e=>K.includes(e)))){_e(a);const o=Object(c.Tc)(e.active,{backgroundColor:J,opacity:X},{backgroundColor:Q});return Object(y.jsxs)(O.a.Fragment,{children:[0===t&&Object(y.jsx)("div",{className:"suggestion-items suggest-text",children:Object(l.translateWithI18Next)(Y)}),Object(y.jsx)("div",{style:o,children:Object(y.jsx)("div",{...i(e,{className:"suggestion-items"}),children:Object(y.jsxs)("div",{className:"suggested-address-alignment-delivery",children:[Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:Object(c.Tc)(vt(e.description),U,W),alt:"googleMapLocation",className:"suggetion-pin"})}),Object(y.jsx)("div",{className:"suggestion-description",children:e.description})]})},t)})]})}return""}))}):null]})}})})}),Object(y.jsx)("form",{children:ue(ge,lt,(e=>{var t;if(e.preventDefault(),qe)return Ve&&Ne(!1),void bt(he,Qe);if(!(He&&ce({eligibleStoreData:n,suggestedAddress:Re,setNegativeScenarioAlert:We,getNegativeView:nt})||(null===(t=Re[0])||void 0===t||!t.description)&&ce({eligibleStoreData:n,suggestedAddress:Re,setNegativeScenarioAlert:We,getNegativeView:nt}))){if(We(""),!Te){var a,i;const e=null===(a=Re[0])||void 0===a?void 0:a.description;return Le(e),(null===(i=Re[0])||void 0===i?void 0:i.description)&&Ae(!0),Ne(!1),void ct(e,null===Re||void 0===Re?void 0:Re.placeId,Re,!0)}n[0]&&(ye(!1),$({type:T,value:{deliveryAddress:he,showScheduleOrderCatering:!0,selectedStoreInfo:n[0]}}))}}))})]})]}),Ve&&!lt&&Object(y.jsxs)("div",{className:"error-popup-saved-address error-popup-saved-address-map-view1",children:[Object(y.jsx)(N.a,{srcFile:B,className:"location-alert-icon"}),Object(y.jsx)("div",{className:"location-error-address",children:Object(l.translateWithI18Next)(ie)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(x.a,{"data-testid":"btn-searchDifferentAddressClick",className:"button whiteButton blackBorder location-warning-button mr",onClickHandler:e=>Ye(!1),children:Object(l.translateWithI18Next)(ne)}),Object(y.jsx)(x.a,{"data-testid":"btn-orderTakeawayClick",className:"button whiteButton blackBorder location-warning-button ml",onClickHandler:e=>{e.preventDefault(),$({type:D,value:{dispositionType:de}})},children:Object(l.translateWithI18Next)(re)})]})]}),!xe&&Object(y.jsx)("div",{className:"my-3 store-form-separation"}),xe||G||De||Fe?null:me(dt),!De&&G&&!Fe&&!xe&&!Ve&&Object(y.jsx)(A,{userPositionHandler:i,startOrderFormSavedAddress:bt,allowOrderNow:Ve,onMapClickHandler:dt})]}),he.length>0&&Object(c.db)(De,!Fe)?Object(y.jsxs)("div",{"data-testid":"alert-locationid",className:"alert-location-popup",children:[Object(y.jsx)(N.a,{srcFile:B,className:"location-alert-icon"}),Object(y.jsx)("div",{className:"location-error-message",children:Object(l.translateWithI18Next)(ee)}),Object(y.jsx)("div",{className:"location-error-address",children:Object(c.id)(null===(t=Re[0])||void 0===t?void 0:t.description,he)}),Object(y.jsxs)("div",{className:"location-error-button-section",children:[Object(y.jsx)(x.a,{className:"button whiteButton blackBorder location-warning-button mr",onClick:st,children:Object(l.translateWithI18Next)(te)}),Object(y.jsx)(x.a,{className:"button whiteButton blackBorder location-warning-button ml","data-testid":"use-this-address",onClick:async e=>{var t;const a=ce({eligibleStoreData:n,suggestedAddress:Re,setNegativeScenarioAlert:We,getNegativeView:nt});he.length>0&&De&&a||!n[0]&&a||(null!==(t=Re[0])&&void 0!==t&&t.description&&$({type:T,value:{deliveryAddress:we,showScheduleOrderCatering:!0,selectedStoreInfo:Object(c.kd)(n[0])}}),ye(!1))},children:Object(l.translateWithI18Next)(ae)})]})]}):Fe&&nt(),xe?be(De,Ee,(e=>{const t=rt(e);ct(t),pe(t)}),Fe):null]})};function be(e,t,a,i){return Object(y.jsx)("div",{className:"delivery-map deliver-map-zoom ".concat(Object(c.Tc)(e,"pointer-disabled","")),children:Object(y.jsx)("div",{"data-testid":"view-map-div",className:"view-map",children:Object(y.jsx)(f.a,{"data-testid":"map-comp",latLongValue:t,passAddress:a,locationAlertProp:e,negativeScenarioAlertProp:i,locationAlert:e})})})}function me(e){return Object(y.jsx)("div",{className:"map-button-form",children:Object(y.jsxs)("div",{className:"show-map-div","data-testid":"show-map-div",onClick:e,children:[Object(y.jsx)("span",{className:"delivery-map-text",children:Object(l.translateWithI18Next)("pleaseEnterLocation")}),Object(y.jsxs)(g.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:G,alt:" ",className:"map-img"})}),Object(l.translateWithI18Next)("map")]})]})})}function je(e,t,a){return Object(y.jsxs)("div",{"data-id":w.qb.HEADER_SIGN_IN_ATTR_DATA_ID,children:[Object(l.translateWithI18Next)(e),Object(y.jsx)("span",{onClick:t,children:Object(y.jsx)(g.a,{targetType:a.targetType,href:a.linkUrl,className:"delivery-signin-link",children:Object(l.translateWithI18Next)(a.linkText)})})]})}var he=a(121);var pe=e=>{const{handleClose:t,handleGoBack:a,orderModeTypeItem:i,headerText:o,modalTitleId:l="",showLocationError:n}=e;return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(he.a,{"data-testid":"searchStoreCardModal",id:"searchStoreCard",role:"dialog",modalTitleId:l,show:!0,classNames:"search-store-modal extra-small-modal",isNoGrid:n,showCloseBtn:!0,showBackBtn:!0,closeButtonHandler:t,backButtonHandler:a,modalTitle:o,autoFocus:!0,children:i})})},ge=a(61),Ne=a(52),Se=a(30),Ie=a(97),xe=a(921),fe=a(101);const{FavoriteUnfillImage:Ee,FavoriteFillImage:Ce,GreenTickImage:Te}=T.a,ye=(e,t)=>{var a,i;return"INDIA"===(null===t||void 0===t||null===(a=t.country)||void 0===a?void 0:a.toUpperCase())?"".concat((parseFloat(e)/1e3).toFixed(1)," ").concat(null===t||void 0===t||null===(i=t.storeSearch)||void 0===i?void 0:i.distanceMetrics):(parseFloat(e)/1600).toFixed(1)+" mi"};var De=Object(ge.j)((e=>{var t,a,i,o,n;const{storeDistance:d="",addresses:r={},isOpen:s=!1,buttonData:O={},map:m={},storeName:p="",currentMarket:S,storeInfo:I={},channels:f=[],storeStatus:C={},onStoreSelectFinish:T,onClickMapHandler:D,isMapView:A,isMobile:R,isFavoriteStore:_,addToFavoriteHandler:L,removeFromFavoriteHandler:k,loggedIn:M,centerIndex:P,storeLength:F}=e,W=null===I||void 0===I||null===(t=I.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.message,{unavailibilities:H}=(null===I||void 0===I||null===(i=I.summary)||void 0===i||null===(o=i.timings)||void 0===o?void 0:o.scheduled)||{},{buttonText:U=""}=Object(c.kd)(null===O||void 0===O?void 0:O.scheduleOrderButtonData),{buttonText:B="",display:G=!1}=Object(c.kd)(null===O||void 0===O?void 0:O.orderNowButtonData),{userOrderState:V,userOrderStateDispatch:Y}=Object(v.useContext)(u.a),{SCHEDULE_ORDER_DATA:K="",SEARCH_ORDER_DATA:z="",SELECTED_TILE_DATA:q="",SCHEDULE_ORDER_TIME_DATA:J="",MENU_URL:X,SET_DISPOSITION:Q,USER_LOCALIZED:Z,CURRENT_STORE_INFO:$,SCHEDULE_ORDER_TIME_PRESERVE_TIME:ee,SET_FORCERELOAD:te}=j.a,{STORE_STATUS_CLOSED:ae}=h.a,{mapText:ie=""}=m,oe=f&&Object(E.g)(f),{services:le=[]}=Object(c.jd)(oe[0]),{operatingHours:ne=[]}=null!==C&&void 0!==C&&null!==(n=C.timings)&&void 0!==n&&n.operatingHours?C.timings:[],de=Object(E.c)(s,ne,W,H),re=Object(b.b)(),se=Object(b.c)((e=>e.profileReducer)),ce=Object(b.c)((e=>e.tenantReducer)),{dispositionType:ue=localStorage.getItem("dispositionType")}=V.dispositionStateData,{allowScheduleOrder:ve}=ce.componentOptions.ScheduledDeliveryComponent;let Oe=Object(b.c)((e=>e.appStateReducer.userStatus));const be=Object(c.Jd)(V.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):V.dispositionNew,me=async(t,a)=>{var i,o,l,n,d,r,s,u;t.preventDefault(),t.stopPropagation(),Object(E.l)();const{futureDates:v,scheduled:O={},asap:b}=(null===a||void 0===a||null===(i=a.summary)||void 0===i?void 0:i.timings)||{},{interval:m=0,startEndTime:j={}}=Object(c.db)(null===O||void 0===O||null===(o=O.periods)||void 0===o?void 0:o.length,O.periods[0]),{from:h,to:p}=j,{unavailibilities:g,unavailibilityType:N}=O;Object(fe.j)(h,p,m,null===b||void 0===b?void 0:b.isAvailable,1===v.length&&"INDIA"===(null===ce||void 0===ce?void 0:ce.country),g,N);let S={time:"ASAP",interval:null===(l=a.summary.timings.scheduled.periods[0])||void 0===l?void 0:l.interval,date:new Date,selectedTime:"ASAP"};if(null===be||be.type!==ue||be.store.id!==a.id||be.deliveryAddress!==(null===V||void 0===V||null===(n=V.scheduleOrderData)||void 0===n?void 0:n.deliveryAddress)){let e=await Object(c.z)(a,Object(c.Ib)(ue),se.customerId,S);re(Object(Se.m)("")),re(Object(Se.f)({data:e,tenantId:ce.tenantId}))}localStorage.setItem("renderComp",!0),Y({type:Q,value:{oldvalue:be,newValue:{type:ue,store:a,date:S.date,time:S.time,interval:S.interval,selectedTime:S.selectedTime,deliveryAddress:null===V||void 0===V||null===(d=V.scheduleOrderData)||void 0===d?void 0:d.deliveryAddress}}}),localStorage.setItem("dispositionOld",JSON.stringify(be)),localStorage.setItem("dispositionNew",JSON.stringify({type:ue,store:a,date:S.date,time:S.time,selectedTime:S.selectedTime,interval:S.interval,deliveryAddress:null===V||void 0===V||null===(r=V.scheduleOrderData)||void 0===r?void 0:r.deliveryAddress})),Object(c.if)();const I={storeID:null===a||void 0===a?void 0:a.id,disposition:ue,postCode:null===a||void 0===a||null===(s=a.addresses[0])||void 0===s||null===(u=s.address)||void 0===u?void 0:u.pinCode};T(I),Y({type:z,value:{showSearchStore:!1}}),Y({type:Z,value:{isLocalized:!0}}),((t,a)=>{let i=Object(c.Tc)(t,t,null);Y({type:q,value:{selectedData:{}}}),localStorage.setItem("currentStoreInfo",JSON.stringify(i)),Y({type:$,value:i}),re(Object(Ie.a)({...Oe,localized:!0})),Y({type:J,value:{selectedDateTime:a}}),Y({type:ee,value:{selectContentTime:"ASAP"}}),Y({type:te,value:{forceReload:!0}}),localStorage.setItem("tenantReducer",JSON.stringify(ce)),localStorage.setItem("selectedTile",JSON.stringify({})),localStorage.setItem("dispositionType",ue),localStorage.setItem("storeInfo",JSON.stringify(i)),localStorage.setItem("dateTimeOrder",JSON.stringify(a)),localStorage.setItem("savedTimeOrder","ASAP");const o=localStorage.getItem(w.gd.SET_LOCATION);setTimeout((()=>{!V.fromPdpPage&&!o&&e.history.push({pathname:"".concat(X)})}),500)})(a,S)},je=(e,t)=>{var a,i,o;console.log("{{ }} schedule order button click",{event:e,store:t,module:null===t||void 0===t?void 0:t.module}),e.preventDefault(),e.stopPropagation(),Y({type:Z,value:{isLocalized:!0}}),Y({type:K,value:{showScheduleOrderCatering:!0,selectedStoreInfo:t}}),Y({type:z,value:{showSearchStore:!1}});const{futureDates:l,scheduled:n={},asap:d}=(null===t||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.timings)||{},{interval:r=0,startEndTime:s={}}=Object(c.db)(null===n||void 0===n||null===(i=n.periods)||void 0===i?void 0:i.length,null===n||void 0===n||null===(o=n.periods)||void 0===o?void 0:o[0])||{},{from:u,to:v}=s,{unavailibilities:O,unavailibilityType:b}=n;Object(fe.j)(u,v,r,null===d||void 0===d?void 0:d.isAvailable,1===(null===l||void 0===l?void 0:l.length)&&"INDIA"===(null===ce||void 0===ce?void 0:ce.country),O,b),Object(E.k)(),(e=>{let t=Object(c.Tc)(e,e,null);Y({type:q,value:{selectedData:{}}}),localStorage.setItem("currentStoreInfo",JSON.stringify(t)),Y({type:$,value:t})})(t)},he=Object(xe.a)(I),pe=Object(y.jsxs)("div",{className:"store-card ".concat(Object(c.db)(A,!R)?"store-card-map-view":"store-card-mobile-view"),style:(()=>{if(A&&R)return{margin:"0",position:"absolute","max-height":"325px",bottom:"0"}})(),"data-testid":"store-card",id:"map-store-card",children:[Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"store-dist-container ".concat(A&&"map-view"),children:[Object(y.jsx)("div",{className:"store-name-container",children:Object(y.jsx)("span",{className:"card-store-name",children:p})}),Object(y.jsx)("span",{className:"store-distance",children:ye(d,ce)})]}),A&&Object(y.jsx)("span",{className:"store-index",children:"".concat(P+1," of ").concat(F)})]}),Object(y.jsxs)("div",{className:"card-content",children:[Object(y.jsx)("div",{className:"order-items",children:(ge=le,!!Object(c.Kd)(ge)&&ge.map(((e,t)=>{const{PICK_UP:a,TAKE_AWAY:i}=h.a;return Object(y.jsxs)("div",{className:"store-order-options",children:[Object(y.jsx)("span",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:Te,alt:"tick",className:"tick-image"})}),Object(y.jsx)("span",{children:e===a?Object(l.translateWithI18Next)(i):e})]},t)})))}),Object(y.jsxs)("div",{className:"w-100",children:[Object(y.jsx)("span",{className:"store-address",children:Object(c.Wb)(r)}),!A&&Object(y.jsx)("span",{className:"map-link","data-testid":"map-handler",onClick:()=>D(),children:Object(y.jsx)(g.a,{className:"card-map-link",children:ie})})]}),Object(y.jsxs)("div",{className:"info-timing ".concat(!s&&"info-timingClosed"),children:[s?"":Object(y.jsx)("span",{children:Object(l.translateWithI18Next)(ae)}),Object(y.jsx)("span",{className:"".concat(!s&&"list-circle"),children:de})]}),Object(y.jsx)("div",{className:"facilities",children:he&&he.map((e=>Object(y.jsx)(N.a,{"data-testid":"",srcFile:e.image,alt:e.label||"",className:"facility-img",title:e.label},e.key)))})]}),Object(y.jsxs)("div",{className:"w-100 d-flex mt-2 searchstoreBtn",children:[M?_&&Object(y.jsx)(N.a,{"data-testid":"favorite-img",srcFile:Ce,alt:"favorite",className:"favorite-img",onClick:()=>k()})||Object(y.jsx)(N.a,{"data-testid":"unfavorite-img",srcFile:Ee,alt:"favorite",className:"favorite-img",onClick:()=>L()}):"",G&&s&&Object(y.jsx)(x.a,{"data-testid":"order-now",className:"button redButton search-store-card-btn ".concat(A&&!R?"cardMapView":null),onClickHandler:e=>me(e,I),children:B}),ve&&Object(y.jsx)(x.a,{"data-testid":"schedule-order",className:"button whiteButton blackBorder search-store-card-btn schedule-order-btn ".concat(Object(c.db)(A,!R)?"cardMapView":null),onClickHandler:e=>je(e,I),children:U})]})]});var ge;return S!==h.a.COUNTRY_CODE_INDIA||s?pe:null})),Ae=a(11),Re=a(4);const{FavoriteUnfillImage:_e,FavoriteFillImage:we,GreenTickImage:Le}=T.a,{BROWSE_MENU:ke,PICK_UP:Me,TAKE_AWAY:Pe,STORE_STATUS_CLOSED_CAPS:Fe,STORE_STATUS_CLOSED:We,INDIA:He}=h.a,Ue=e=>e===Me?Pe:e,Be=(e,t)=>{if(e&&t)return{"max-height":"325px",margin:"0",position:"absolute",bottom:"0"}};var Ge=Object(ge.j)((e=>{var t,a,i,o,n,d,r,s,O,m,h,p;const{key:S="",storeName:I="",storeDistance:f="",orderTypes:T=[],addresses:D={},storeStatus:A={},onClickMapHandler:R,isMapView:_,isMobile:L,isFavoriteStore:k,addToFavoriteHandler:M,removeFromFavoriteHandler:P,map:F,loggedIn:W,storeInfo:H={},centerIndex:U,storeLength:B,onStoreSelectFinish:G}=e,V=((e,t)=>{var a,i,o,l,n;if((null===e||void 0===e||null===(a=e.timings)||void 0===a||null===(i=a.operatingHours[0])||void 0===i?void 0:i.day)===w.cc)return null===(o=e.timings)||void 0===o||null===(l=o.operatingHours[0])||void 0===l||null===(n=l.availableHours)||void 0===n?void 0:n.from;{var d;const a=null===e||void 0===e||null===(d=e.timings)||void 0===d?void 0:d.operatingHours,i=Object(Ae.E)(null===e||void 0===e?void 0:e.timeZone,t).toLowerCase();let o=0,l=[],n=[];var r,s,u,v;return null===a||void 0===a||a.forEach(((e,t)=>{var a;(null===e||void 0===e||null===(a=e.day)||void 0===a?void 0:a.toLowerCase())===i&&(o=t,n.push(e))})),null!==n&&void 0!==n&&n.length&&(null===n||void 0===n||n.forEach((t=>{var a;const i=Object(c.D)(null===e||void 0===e?void 0:e.timeZone,w.sb.HHmm);Object(c.Ze)(null===t||void 0===t||null===(a=t.availableHours)||void 0===a?void 0:a.from)>i&&l.push(t)}))),null!==l&&void 0!==l&&l.length?null===(r=l[0])||void 0===r||null===(s=r.availableHours)||void 0===s?void 0:s.from:null===(u=a[o<(null===a||void 0===a?void 0:a.length)-1?o+1:o])||void 0===u||null===(v=u.availableHours)||void 0===v?void 0:v.from}})(A,w.Of),Y=V,K=null===A||void 0===A||null===(t=A.timings)||void 0===t||null===(a=t.scheduled)||void 0===a?void 0:a.unavailibilities,z=null===A||void 0===A||null===(i=A.status)||void 0===i?void 0:i.message,{mapText:q=""}=Object(c.kd)(F),{MENU_URL:J,SEARCH_ORDER_DATA:X,CURRENT_STORE_INFO:Q,DISPOSITION_DATA:Z,USER_LOCALIZED:$,SCHEDULE_ORDER_DATA:ee="",SELECTED_TILE_DATA:te=""}=j.a,{userOrderState:ae,userOrderStateDispatch:ie}=Object(v.useContext)(u.a);let oe=Object(b.c)((e=>e.appStateReducer.userStatus));const le=Object(b.c)((e=>e.tenantReducer)),ne=Object(b.b)(),{futureDates:de,scheduled:re,asap:se}=Object(c.kd)(null===H||void 0===H||null===(o=H.summary)||void 0===o?void 0:o.timings),{unavailibilities:ce,unavailibilityType:ue}=Object(c.kd)(re),{interval:ve=0,startEndTime:Oe={}}=Object(c.kd)((null===re||void 0===re||null===(n=re.periods)||void 0===n?void 0:n.length)&&(null===re||void 0===re?void 0:re.periods[0])),{from:be,to:me}=Object(c.kd)(Oe),{dispositionType:je=localStorage.getItem("dispositionType")}=ae.dispositionStateData,he=Object(c.Jd)(ae.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):ae.dispositionNew,pe=()=>{var e;return Object(fe.j)(be,me,ve,null===se||void 0===se?void 0:se.isAvailable,1===de.length&&(null===le||void 0===le||null===(e=le.country)||void 0===e?void 0:e.toUpperCase())===He,ce,ue)},ge=(e,t)=>{var a,i,o,l;e.preventDefault(),e.stopPropagation(),console.log("{{ }} schedule order button click",{event:e,store:t,module:null===t||void 0===t?void 0:t.module}),ie({type:$,value:{isLocalized:!0}}),ie({type:X,value:{showSearchStore:!1}}),ie({type:ee,value:{showScheduleOrderCatering:!0,selectedStoreInfo:t}});const{futureDates:n,scheduled:d,asap:r}=null===t||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.timings,{interval:s=0,startEndTime:c={}}=(null===d||void 0===d||null===(i=d.periods)||void 0===i?void 0:i.length)&&(null===d||void 0===d?void 0:d.periods[0]),{from:u,to:v}=c;Object(fe.j)(u,v,s,null===r||void 0===r?void 0:r.isAvailable,1===n.length&&"INDIA"===(null===le||void 0===le?void 0:le.country),ce,ue),Object(E.k)(),(e=>{let t=e||null;ie({type:te,value:{selectedData:{}}}),localStorage.setItem("currentStoreInfo",JSON.stringify(t)),ie({type:Q,value:t})})(t);const O={storeID:null===t||void 0===t?void 0:t.id,disposition:je,postCode:null===t||void 0===t||null===(o=t.addresses[0])||void 0===o||null===(l=o.address)||void 0===l?void 0:l.pinCode};G(O)},Ne=e=>pe().length?"Today":"Tomorrow",Se=Object(xe.a)(H);return Object(y.jsxs)("div",{className:"store-card ".concat(_&&!L?"store-card-map-view":"store-card-mobile-view"),style:Be(_,L),"data-testid":"closed-card",id:"map-store-card",children:[Object(y.jsxs)("div",{className:"d-flex",children:[Object(y.jsxs)("div",{className:"store-dist-container ".concat(_&&"map-view"),children:[Object(y.jsx)("div",{className:"store-name-container",children:Object(y.jsx)("span",{className:"card-store-name",children:I})}),Object(y.jsx)("span",{className:"store-distance",children:ye(f,le)})]}),_&&Object(y.jsx)("span",{className:"store-index",children:"".concat(U+1," of ").concat(B)})]}),Object(y.jsxs)("div",{className:"card-content",children:[Object(y.jsx)("div",{className:"order-items",children:(Ee=T,Ee.map(((e,t)=>Object(y.jsxs)("div",{className:"store-order-options",children:[Object(y.jsx)("span",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:Le,alt:"tick",className:"tick-image"})}),Object(y.jsx)("span",{children:Ue(e)})]},t))))}),Object(y.jsxs)("div",{className:"w-100",children:[Object(y.jsx)("span",{className:"store-address",children:Object(c.Wb)(D)}),!_&&Object(y.jsx)("span",{className:"map-link","data-testid":"map-handler",onClick:()=>R(),children:Object(y.jsx)(g.a,{className:"card-map-link",children:q})})]}),Object(y.jsx)("div",{className:"info-timingClosed",children:Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:Object(c.fb)((null===(d=A.status)||void 0===d?void 0:d.currentStatus)===Fe,0===(null===A||void 0===A||null===(r=A.timings)||void 0===r||null===(s=r.scheduled)||void 0===s||null===(O=s.periods)||void 0===O?void 0:O.length))?Object(y.jsx)("span",{className:"closed-text",children:We}):""}),Object(y.jsx)("li",{children:(null===K||void 0===K?void 0:K.length)>0&&Object(Ae.R)(null===(m=K[0])||void 0===m?void 0:m.to,"HH MM","HH:MM")<=Object(Ae.R)(me,"HH MM","HH:MM")?(()=>{var e,t,a,i,o,l;return z===w.Hc?"Open Today ".concat((null===(e=K[0])||void 0===e?void 0:e.from)&&Object(Ae.R)(null===(t=K[0])||void 0===t?void 0:t.from,"hh mm","hh:mm a")):z===w.Ic?"Open ".concat(Ne(null===(a=A.timings)||void 0===a||null===(i=a.scheduled)||void 0===i||i.date)," ").concat(Y&&Object(Ae.R)(Y,"hh mm","hh:mm a")):"Open Today ".concat((null===(o=K[0])||void 0===o?void 0:o.to)&&Object(Ae.R)(null===(l=K[0])||void 0===l?void 0:l.to,"hh mm","hh:mm a"))})():"Open ".concat(Ne(null===(h=A.timings)||void 0===h||null===(p=h.scheduled)||void 0===p||p.date)," ").concat(Y&&Object(Ae.R)(Y,"hh mm","hh:mm a"))})]})}),Object(y.jsx)("div",{className:"facilities",children:Se&&Se.map((e=>Object(y.jsx)(N.a,{"data-testid":"",srcFile:e.image,alt:e.label||"",className:"facility-img",title:e.label},e.key)))}),Object(y.jsxs)("div",{className:"w-100 d-flex mt-2",children:[W&&(k?Object(y.jsx)(N.a,{"data-testid":"favorite-img",srcFile:we,alt:"favorite",className:"favorite-img",onClick:()=>P()}):Object(y.jsx)(N.a,{"data-testid":"unfavorite-img",srcFile:_e,alt:"favorite",className:"favorite-img",onClick:()=>M()})),0===pe().length?Object(y.jsx)(x.a,{className:"button whiteButton blackBorder store-card-btn browse-menu-btn","data-testid":"browser-menu-closed-store",onClickHandler:()=>{var t,a;const i={storeID:null===H||void 0===H?void 0:H.id,disposition:null===H||void 0===H?void 0:H.service,postCode:null===H||void 0===H||null===(t=H.addresses[0])||void 0===t||null===(a=t.address)||void 0===a?void 0:a.pinCode};Object(C.y)(i),Object(c.jf)(H,ie,he,je),ne(Object(Ie.a)({...oe,localized:!0})),Object(c.if)(),ie({type:Z,value:{showDisposition:!1}}),ie({type:X,value:{showSearchStore:!1}}),e.history.push({pathname:"".concat(J)})},children:Object(l.translateWithI18Next)(ke)}):Object(y.jsx)(x.a,{className:"button whiteButton blackBorder store-card-btn schedule-btn","data-testid":"schedule-order-closed-store",onClickHandler:e=>ge(e,H),children:Object(l.translateWithI18Next)(Re.a.SCHEDULE_ORDER_BTN)})]})]})]},S);var Ee})),Ve=a(342),Ye=a(55);const{Error:Ke,LocationImage:ze,MapImage:qe,Union:Je,GoogleMapLocationImage:Xe,SuggestionItemSearchPin:Qe,Time_Clock:Ze,SuccessImg:$e}=T.a,et=e=>!0===e?"store-count-title fav-store savedKFC":"store-count-title active-tab fav-store savedKFC",tt=(e,t)=>e&&t?"store-count-title active-tab savedKFC":e&&!t?"store-count-title savedKFC":e?void 0:"store-count-title  guest-color",at=e=>{var t,a,i;return(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.menu)||void 0===a||null===(i=a.catalogs)||void 0===i?void 0:i.length)>0},it=e=>e?Je:qe,ot=e=>{let t=document.querySelector(".searchStore-module-form .store-count a.store-location-link");"ArrowDown"===e.key&&void 0!=typeof t&&null!=t&&t.focus()};var lt=Object(ge.j)((e=>{var t;const{formContent:a={},storeData:i=[],eligibleStoreData:o=[],favoriteStoreData:n=[],userPositionHandler:r,singInClickhandler:m,currentMarket:T,storeCardLimit:D=1/0,onStoreSelectFinish:A,handleGoBack:R,noStoresList:L,favoriteStoreHandler:k}=e,{memberText:P="",singInLink:F={},currentLocationText:W="",addressBoxPlaceHolderForSearchStore:H="",mapText:U=""}=a,{MIN_SEARCH_CHARACTER_LIMIT:B,SUUGESTED_ITEMS_TEXT:G,ALLOWED_SUGGESTION_LIST:V,ALREADY_SERACHED_LOCATIONS:Y,COUNTRY_CODE:K,SUGGESTION_ACTIVE_COLOR:z,SUGGESTION_ACTIVE_OPACITY:q,BRAND_BLACK:J,STORE_STATUS_OPEN:X,LIST_TEXT:Q,TYPE_TAKE_WAY:Z,STORE_STATUS_CLOSED_CAPS:$,BROWSE_MENU:ee,CTA1_SEARCH_DIFF_ADDRESS:te,DINEIN_UNAVAILABLE:ae,CTA2_ORDER_TAKEAWAY:ie,TAKEAWAY_UNAVAILABLE_WITH_CTA:oe,DINE_IN_SERVICE:le,DINE_IN:ne,TYPE_DELIVERY:de,TAKE_AWAY:re}=h.a,{DISPOSITION_METHOD:se}=j.a,{MENU_URL:ce,SEARCH_ORDER_DATA:ue,CURRENT_STORE_INFO:Oe,DISPOSITION_DATA:be,INDIA:me}=j.a,{userOrderState:je}=O.a.useContext(u.a),{searchStoreData:he={},dispositionStateData:pe={},scheduleOrderData:ge={}}=je,{dispositionType:Se=localStorage.getItem("dispositionType")}=pe,[Ie,xe]=O.a.useState(""),[Ee,Ce]=Object(v.useState)({}),[Te,ye]=Object(v.useState)({}),[Ae,Re]=Object(v.useState)(!1),[_e,we]=Object(v.useState)(!1),[Le,ke]=O.a.useState([]),[Me,Pe]=O.a.useState(!1),[Fe,We]=Object(v.useState)(null),[He,Ue]=Object(v.useState)(Object(c.Ud)(window.innerWidth));let Be=0;const[qe,Je]=Object(v.useState)(0),[et,lt]=Object(v.useState)(""),[rt,st]=O.a.useState(!1),[ct,ut]=O.a.useState([]),[vt,Ot]=O.a.useState([]),{userOrderStateDispatch:bt}=Object(v.useContext)(u.a);let mt,jt=0;const ht=Object(b.b)(),pt=Object(b.c)((e=>e.tenantReducer)),{tenantId:gt={},componentOptions:{web:{storeSearch:{postalCodeRemoval:Nt=!1}}},postalcodeRemoveRegex:St=null,specialCharRemoveRegex:It=null}=pt||{};let xt=0;const[ft,Et]=O.a.useState(!1),Ct=Object(b.c)((e=>e.appStateReducer)),{isLoading:Tt}=Object(b.c)((e=>Object(c.kd)(e.LoaderReducer))),{userStatus:yt={}}=Ct,{loggedIn:Dt=!1}=yt,[At,Rt]=O.a.useState([]),[_t,wt]=O.a.useState(!0),{customerId:Lt}=Ye.a.getInstance(),[kt,Mt]=Object(v.useState)(325),[Pt,Ft]=Object(v.useState)(!1),Wt=()=>{const e=Object(c.Ud)(window.innerWidth);Ue(e)};Object(v.useEffect)((()=>(window.addEventListener("resize",Wt),()=>{window.removeEventListener("resize",Wt)})),[He]),Object(v.useEffect)((()=>(window.addEventListener("keydown",ot),()=>{window.removeEventListener("keydown",ot)})));const Ht=null===(t=document.getElementById("map-store-card"))||void 0===t?void 0:t.clientHeight;Object(v.useEffect)((()=>{Ht&&kt!==Ht&&Mt(Ht)}),[Ht]);const Ut=async e=>{const t=await Object(S.geocodeByAddress)(e),a=await Object(S.getLatLng)(t[0]);Ce(a),ye(a),Be=0,Vt(e),xe(e),r({userLat:a.lat,userLong:a.lng}),Pe(!1);const i=Boolean(Object(c.db)(Object(c.id)(Ie,e),Object(c.db)(0===Be,0===jt)));st(i)},Bt=()=>{localStorage.setItem("currentStoreInfo",JSON.stringify(null)),bt({type:Oe,value:null}),bt({type:be,value:{showDisposition:!1}}),bt({type:ue,value:{showSearchStore:!1}}),e.history.push({pathname:"".concat(ce)})},Gt=(e,t,a)=>Object(y.jsx)("div",{className:"store-card",children:Se.toUpperCase()===Z?Object(y.jsxs)("div",{className:"no-store",children:[Object(y.jsx)("div",{className:"no-store-icon",children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:Ke,alt:"no store"})}),Object(y.jsx)("div",{className:"no-store-text",children:e()}),Object(y.jsx)(x.a,{"data-testid":"menupageBtn-id",className:"button whiteButton blackBorder store-card-btn",onClickHandler:Kt,children:Object(l.translateWithI18Next)(a)})]}):Object(y.jsxs)("div",{className:"no-store",children:[Object(y.jsx)("div",{className:"no-store-icon",children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:Ke,alt:"no store"})}),Object(y.jsx)("div",{className:"no-store-text",children:e()}),Object(y.jsx)(x.a,{"data-testid":"menupageBtn-id",className:"button whiteButton blackBorder store-card-btn dine-in-error-btn",onClickHandler:Kt,children:Object(l.translateWithI18Next)(a)}),Object(y.jsx)(x.a,{"data-testid":"orderTakeaway-click-btn",className:"button whiteButton blackBorder location-warning-button ml dine-in-error-btn",onClick:e=>(e=>{e.preventDefault(),bt({type:se,value:{dispositionType:re}}),Ut(Ie)})(e),children:Object(l.translateWithI18Next)(ie)})]})});Object(v.useEffect)((()=>{if(null!==ge&&void 0!==ge&&ge.changeFlow||null===he||void 0===he||!he.searchedPlaceNonLocalized){if(localStorage.getItem("searchStoreByAttribute")){let e=localStorage.getItem("searchStoreByAttribute");xe(e),Ut(e)}}else Ut(he.searchedPlaceNonLocalized)}),[]);Object(v.useEffect)((()=>{if(Ie){let e=o.filter(at);if(e.length>0){let t=e.filter((e=>{var t,a,i,o,l,n;return(null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)===X&&(null===(i=e.summary)||void 0===i||null===(o=i.timings)||void 0===o||null===(l=o.scheduled)||void 0===l||null===(n=l.periods)||void 0===n?void 0:n.length)>0}));if(t.length>=D){let e=t.slice(0,D);ke(e)}else if(t.length<D){let a=D-t.length,i=e.filter((e=>{var t,a,i,o,l,n;return(null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)===$||0===(null===(i=e.summary)||void 0===i||null===(o=i.timings)||void 0===o||null===(l=o.scheduled)||void 0===l||null===(n=l.periods)||void 0===n?void 0:n.length)})).slice(0,a),o=t.concat(i);ke(o)}}else Be=0,ke([])}else ke([]),Rt([]),ut([]),st(!1)}),[o,Ie]),Object(v.useEffect)((()=>{if(o.length>0){k({userLat:Te.lat,userLong:Te.lng});const e=n.sort(((e,t)=>Object(E.d)(e,t))),t=null===e||void 0===e?void 0:e.filter((e=>{var t,a;return null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus}));Rt(t)}}),[o,n.length]),Object(v.useEffect)((()=>{if(Me){const e=Nt?ve(et,St,It):et;xe(e),Vt(et),Pe(!1)}localStorage.getItem("ALREADY_SERACHED_LOCATIONS")!==Ie&&(ke([]),ut([]),We(""),Rt([]));let e=Object(c.d)(Ie,B);Ft(e)}),[he,Ie,Me,et]);const Vt=e=>{Object(c.pe)(e,Y)},Yt=e=>{return t=e,Object(c.jd)(JSON.parse(localStorage.getItem(Y))).includes(t);var t},Kt=()=>{xe(""),Rt([]),ke([]),ut([]),st(!1),We(""),Re(!1)},zt=Object(v.useCallback)((async()=>{const e=await Promise.all(Le.map((async e=>({lat:e.location.latitude,lng:e.location.longitude}))));Ce(e)}),[Le]),qt=Object(v.useCallback)((async()=>{const e=await Promise.all(At.map((async e=>({lat:e.location.latitude,lng:e.location.longitude}))));Ce(e)}),[At]),Jt=()=>{Object(E.i)(Ae,Se),Re(!Ae),we(!Ae)},Xt=(e,t)=>{We(e),Je(t)},Qt=()=>{zt(),we(!0),We(Object(c.kd)(Le[qe]))},Zt=async()=>{await qt(),we(!0),We(Object(c.kd)(At[qe]))};Object(v.useEffect)((()=>{((e,t,a,i)=>{let{TYPE_TAKE_WAY:o,DINE_IN:l,dispositionType:n,callSelectedStore:d,callSelectedFavStore:r}=i;e?t.length&&[o,l].indexOf(n.toUpperCase())>-1&&d():a.length&&[o,l].indexOf(n.toUpperCase())>-1&&r()})(_t,Le,At,{TYPE_TAKE_WAY:Z,DINE_IN:ne,dispositionType:Se,callSelectedStore:Qt,callSelectedFavStore:Zt});let e=Le.filter((e=>{var t,a,i,o,l,n;return(null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a?void 0:a.currentStatus)===$||0===(null===(i=e.summary)||void 0===i||null===(o=i.timings)||void 0===o||null===(l=o.scheduled)||void 0===l||null===(n=l.periods)||void 0===n?void 0:n.length)})),t=Le.filter((e=>{var t,a,i,o,l,n,d,r,s;const c="CLOSED"===e.summary.status.currentStatus,u=-1!==(null===e||void 0===e||null===(t=e.summary)||void 0===t||null===(a=t.status)||void 0===a||null===(i=a.message)||void 0===i?void 0:i.indexOf("EMERGENCY_SHUTDOWN")),v=-1!==(null===e||void 0===e||null===(o=e.summary)||void 0===o||null===(l=o.status)||void 0===l||null===(n=l.message)||void 0===n?void 0:n.indexOf("TECHNICAL_SHUTDOWN")),{futureDates:O,scheduled:b,asap:m}=null===e||void 0===e||null===(d=e.summary)||void 0===d?void 0:d.timings,{unavailibilities:j,unavailibilityType:h}=b,{interval:p=0,startEndTime:g={}}=b&&(null===b||void 0===b||null===(r=b.periods)||void 0===r?void 0:r.length)&&(null===b||void 0===b?void 0:b.periods[0]),{from:N,to:S}=g,I=Object(fe.j)(N,S,p,null===m||void 0===m?void 0:m.isAvailable,1===O.length&&(null===pt||void 0===pt||null===(s=pt.country)||void 0===s?void 0:s.toUpperCase())===me,j,h);return(!I||0===I.length)&&c&&(u||v)}));ut(e),Ot(t)}),[Le,qe,Fe,L,ne,$,Z,Se,zt,_t,At]);const $t=e=>{We("");let t=e?qe+1:qe-1;Je(t),((e,t,a,i,o)=>{t(!0===e?Object(c.kd)(a[o]):null===i||void 0===i?void 0:i[o])})(_t,We,Le,At,t)},ea=e=>{wt(e)},ta=()=>{localStorage.setItem("setFav",!0),localStorage.removeItem("renderComp")},aa=e=>{ta(),ht(Object(d.w)({data:{storeId:e.id},tenantId:gt,customerId:Lt,dispatch:"dispatch"})),Et(!0)},ia=e=>{ta(),ht(Object(d.x)({tenantId:gt,customerId:Lt,storeId:Object(c.kd)(e.id),dispatch:"dispatch"})),Et(!1)};Object(v.useEffect)((()=>{ft&&Ne.b.dark(Object(y.jsxs)("div",{className:"img-text-div",children:[Object(y.jsx)(N.a,{"data-testid":"",srcFile:$e,alt:"success",className:"success-img"}),"Saved to your favorite store"]}),{className:"favorites",bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:Ne.b.POSITION.BOTTOM_CENTER,autoClose:1e3})}),[n.length]),Object(v.useEffect)((()=>{0!==Be||0!==jt||!rt||L||Tt||(Se.toUpperCase()===Z?Object(c.Kb)(Object(l.translateWithI18Next)(p.a.contentData.searchStoreHeaderText),Object(l.translateWithI18Next)(oe)):Object(c.Kb)(Object(l.translateWithI18Next)(p.a.contentData.searchStoreHeaderText),Object(l.translateWithI18Next)(ae)))}),[Be,jt,rt,L,Tt]);const oa=(e,t)=>{var a,o,l,n;const d=(null===e||void 0===e||null===(a=e.summary)||void 0===a||null===(o=a.status)||void 0===o?void 0:o.currentStatus)===X,r=e.availableServicesPerChannel&&Object(E.g)(e.availableServicesPerChannel),{services:s=[]}=r[0],u="".concat(e.name[0].value,"_").concat(t);return Object(y.jsx)(O.a.Fragment,{children:d?Object(y.jsx)(De,{"data-testid":t,storeName:Object(c.md)(e.name[0].value),storeDistance:Object(c.id)(null===e||void 0===e||null===(l=e.distance)||void 0===l?void 0:l.value,null===e||void 0===e?void 0:e.distance),channels:e.availableServicesPerChannel,storeStatus:e.summary,addresses:e.addresses,...i[0],storeInfo:e,currentMarket:T,isOpen:d,isMapView:!0,onStoreSelectFinish:A,isMobile:He,centerIndex:qe,storeLength:Object(c.Tc)(_t,null===Le||void 0===Le?void 0:Le.length,null===At||void 0===At?void 0:At.length)},t):Object(y.jsx)(Ge,{orderTypes:s,storeName:Object(c.md)(e.name[0].value),storeDistance:Object(c.id)(null===e||void 0===e||null===(n=e.distance)||void 0===n?void 0:n.value,null===e||void 0===e?void 0:e.distance),addresses:e.addresses,storeStatus:e.summary,onStoreSelectFinish:A,isMobile:He,isMapView:!0,storeInfo:e,mapText:U,onClick:()=>{Jt(),zt()},...i[0],onPositionChangeHandler:$t,centerIndex:qe,storeLength:Object(c.Tc)(_t,null===Le||void 0===Le?void 0:Le.length,null===At||void 0===At?void 0:At.length)},u)})},la=At.map(((e,t)=>{var a,o,l,n;if((null===(a=e.summary)||void 0===a||null===(o=a.status)||void 0===o?void 0:o.currentStatus)===X){var d,r;const a=(null===(d=e.summary)||void 0===d||null===(r=d.status)||void 0===r?void 0:r.currentStatus)===X;return a&&xt++,Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(De,{"data-testid":t,storeName:Object(c.md)(e.name[0].value),storeDistance:Object(c.md)(e.distance.value),channels:e.availableServicesPerChannel,storeStatus:e.summary,addresses:e.addresses,...i[0],storeInfo:e,currentMarket:T,isOpen:a,onStoreSelectFinish:A,isMobile:He,loggedIn:Dt,onClickMapHandler:()=>{Xt(e,t),Jt()},isFavoriteStore:!0,addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{ia(e)}},t)})}if((null===(l=e.summary)||void 0===l||null===(n=l.status)||void 0===n?void 0:n.currentStatus)===$){xt++;const a=e.availableServicesPerChannel&&Object(E.g)(e.availableServicesPerChannel),{services:o=[]}=a[0],l="".concat(e.name[0].value,"_").concat(t);return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(Ge,{storeName:Object(c.md)(e.name[0].value),storeDistance:Object(c.md)(e.distance.value),orderTypes:o,addresses:e.addresses,storeStatus:e.summary,mapText:U,isMobile:He,loggedIn:Dt,onClickMapHandler:()=>{Xt(e,t),Jt()},isFavoriteStore:!0,addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{ia(e)},onStoreSelectFinish:A,storeInfo:e,...i[0]},l)})}})),na=Le.map(((e,t)=>{var a,o,l,d;if(Ie||ke([]),Be>=D||0===(null===(a=e.summary)||void 0===a||null===(o=a.timings)||void 0===o||null===(l=o.scheduled)||void 0===l||null===(d=l.periods)||void 0===d?void 0:d.length))return null;{var r,s;const a=(null===(r=e.summary)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.currentStatus)===X;return a&&Be++,Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(De,{"data-testid":t,storeName:Object(c.md)(e.name[0].value),storeDistance:Object(c.md)(e.distance),channels:e.availableServicesPerChannel,storeStatus:e.summary,addresses:e.addresses,...i[0],storeInfo:e,currentMarket:T,isOpen:a,onStoreSelectFinish:A,isMobile:He,loggedIn:Dt,onClickMapHandler:()=>{Xt(e,t),Jt()},isFavoriteStore:n.some((t=>t.id===e.id)),addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{ia(e)}},t)})}})),da=()=>{let e=-1!==Se.toLowerCase().indexOf("dine")?le:Se;if(mt=Object(E.a)(e,o),mt)return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(_,{errorMsgToShow:mt,onClearTextHandler:Kt,dispositionType:Se,handleGoBack:R})})},ra=()=>{if(Le.length===vt.length&&vt.length>0){let e=-1!==Se.toLowerCase().indexOf("dine")?le:Se,t=Object(E.a)(e,o);return Object(c.Kb)(Object(l.translateWithI18Next)(p.a.contentData.searchStoreHeaderText),Object(l.translateWithI18Next)(t)),da()}if(Le.length===ct.length&&ct.length)return sa;{let e=-1!==Se.toLowerCase().indexOf("dine")?le:Se;return Le.length&&(mt=Object(E.a)(e,Le),mt)?da():(Be<5&&na.push(sa),na)}},sa=ct.map(((e,t)=>{const a=e.availableServicesPerChannel&&Object(E.g)(e.availableServicesPerChannel),{services:o=[]}=Object(c.jd)(a[0]);if(Ie||ke([]),jt>=D-Be)return null;{jt++;const a="".concat(e.name[0].value,"_").concat(t),l=Le.findIndex((t=>t.id===e.id));return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(Ge,{storeName:Object(c.md)(e.name[0].value),storeDistance:Object(c.md)(e.distance),orderTypes:o,addresses:e.addresses,storeStatus:e.summary,mapText:U,isMobile:He,loggedIn:Dt,onClickMapHandler:()=>{Xt(e,l),Jt()},isFavoriteStore:n.some((t=>t.id===e.id)),addToFavoriteHandler:()=>{aa(e)},removeFromFavoriteHandler:()=>{ia(e)},onStoreSelectFinish:A,storeInfo:e,...i[0]},a)})}})),ca=()=>{switch(Se.split("-").join(" ").toUpperCase()){case Z:return Object(l.translateWithI18Next)(oe);case ne:return Object(l.translateWithI18Next)(ae);default:return null}},ua=()=>{Je(0),Jt(),((e,t,a)=>{!0===e?t():a()})(_t,zt,qt)};return Object(y.jsxs)(O.a.Fragment,{children:[Object(y.jsxs)("div",{className:"searchStore-module-form","data-testid":"searchstore-component",children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"store-count",children:[Object(y.jsx)("span",{className:"member-signin",children:!Dt&&Object(y.jsxs)("div",{"data-id":w.qb.HEADER_SIGN_IN_ATTR_DATA_ID,"data-testid":"memberText",children:[Object(l.translateWithI18Next)(P),Object(y.jsx)("span",{onClick:m,children:Object(y.jsx)(g.a,{className:"store-signin-link",targettype:F.targetType,href:F.linkUrl,"data-testid":"store-signin-link",children:Object(l.translateWithI18Next)(F.linkText)})})]})}),Object(y.jsx)("span",{children:Object(y.jsxs)(g.a,{onClickHandler:async()=>{if(Object(C.o)(),await s.b.BindLocation(),Object(E.m)(),s.b.coordinates){const{latitude:e,longitude:t}=s.b.coordinates;s.b.addFeedback("Check coordinates ".concat(JSON.stringify(s.b.coordinates))),s.b.addFeedback("Check assignment ".concat(JSON.stringify({userLat:e,userLong:t}))),s.b.addFeedback("Check address ".concat(s.b.address)),Be=0,Ce({lat:e,lng:t}),Re(!1),r({userLat:e,userLong:t}),st(!0),xe(s.b.address),lt(s.b.address),Pe(!0)}Object(M.s)(bt,!s.b.coordinates)},className:"store-location-link","data-testid":"useCurrentLocation",children:[Object(y.jsx)(N.a,{"data-testid":"",srcFile:ze,alt:"location",className:"location-img"}),Object(l.translateWithI18Next)(W)]})})]}),Object(y.jsx)("div",{className:"search-address",children:Object(y.jsx)("div",{className:"input-address",children:Object(y.jsx)(I.a,{"data-testid":"handle-select",value:Ie,onChange:e=>{e||Kt(),xe(e),Object(c.kc)(e)<3&&Ft(!1)},onSelect:Ut,searchOptions:{componentRestrictions:{country:K}},shouldFetchSuggestions:!0,onError:(e,t)=>{t()},children:e=>{let{getInputProps:t,suggestions:a,getSuggestionItemProps:i,loading:o}=e;return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"".concat(mt||0===Be&&0===jt&&rt&&L&&!Le.length?"search-container-data error-border":"search-container-data"),children:[Object(y.jsx)(N.a,{"data-testid":"",srcFile:Xe,alt:"googleMapLocation",className:"google-location-img"}),Object(y.jsx)("input",{"data-testid":"store-search-input",className:"store-search-input t-2",...t({placeholder:Object(l.translateWithI18Next)(H)})}),Ie&&Object(y.jsx)("img",{"data-testid":"clear-text-icon",src:Ve.a,className:"clearTextIcon",onClick:()=>Kt(),alt:"Clear Text Icon"})]}),!!Object(c.db)(Object(c.kc)(a),Pt)&&Object(y.jsx)("div",{className:"suggestion-list","data-testid":"suggestionlist-id",children:a.map(((e,t)=>{var a;if(null!==e&&void 0!==e&&null!==(a=e.types)&&void 0!==a&&a.some((e=>V.includes(e)))){const a=e.active?{backgroundColor:z,opacity:q}:{backgroundColor:J};return Object(y.jsxs)(O.a.Fragment,{children:[0===t&&Object(y.jsx)("div",{className:"suggestion-items suggest-text",id:"suggestion-text","data-testid":"suggestion-item-".concat(t),children:Object(l.translateWithI18Next)(G)}),Object(y.jsx)("div",{style:a,children:Object(y.jsx)("div",{"data-testid":"suggestion-item-".concat(t),...i(e,{className:"suggestion-items",id:"suggestion-items"}),children:Object(y.jsxs)("div",{className:"suggested-address-alignment",children:[Object(y.jsx)("div",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:Yt(e.description)?Ze:Qe,alt:"googleMapLocation",className:"suggetion-pin",id:"suggetion-pin"})}),Object(y.jsx)("div",{className:"suggestion-description",children:e.description})]})},t)})]})}return""}))})]})}})})})]}),Object(y.jsx)("div",{className:"my-3 store-form-separation margin-bottom"}),nt(Ie,Ae,Q,Jt,zt),Object(y.jsxs)("form",{className:"form",children:[Object(y.jsxs)("div",{className:"store-count",children:[!!Be&&Object(y.jsx)("span",{"data-testid":"tab-open-store",className:tt(Dt,_t),onClick:()=>{Je(0),ea(!0)},children:Dt?Object(y.jsxs)("span",{children:[" ","".concat(Object(l.translateWithI18Next)("nearYou"))," (",Be+jt,")"]}):Object(y.jsxs)("span",{children:[Be+jt," ","".concat(Object(l.translateWithI18Next)("nearYou"))]})}),!!jt&&Le.length===ct.length&&Le.length!==vt.length&&Object(y.jsx)("span",{"data-testid":"tab-closed-store",className:tt(Dt,_t),onClick:()=>{Je(0),ea(!0)},children:"".concat(Object(l.translateWithI18Next)("nearYou")," (").concat(jt,")")}),0===Be&&0===jt&&rt&&L&&Object(y.jsx)("span",{className:"store-count-title",children:"".concat(Object(l.translateWithI18Next)("nearYou")," (").concat(Be,")")}),dt(Be,jt,Dt,xt,{firstTab:_t,setCenterIndex:Je,handleTabChange:ea}),(!!Be||!!jt)&&Le.length!==vt.length&&Object(y.jsx)("div",{"data-testid":"togglemap-id",onClick:()=>{ua()},children:Object(y.jsxs)(g.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:it(Ae),alt:"map",className:"map-img"})}),Ae?Object(l.translateWithI18Next)(Q):U]})}),0===Be&&0===jt&&rt&&L&&Object(y.jsx)("div",{"data-testid":"show-map-div",onClick:()=>{ua()},children:Object(y.jsxs)(g.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:it(Ae),alt:"map",className:"map-img"})}),Ae?Object(l.translateWithI18Next)(Q):Object(l.translateWithI18Next)(U)]})})]}),Ae?Object(y.jsx)("div",{className:"order-button-section",children:0===Be&&0===jt&&rt&&L&&Object(y.jsx)("div",{className:"store-card store-card-map-view-error",children:Object(y.jsxs)("div",{className:"no-store",children:[Object(y.jsx)("div",{className:"no-store-icon",children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:Ke,alt:"no store"})}),Object(y.jsx)("div",{className:"no-store-text",children:ca()}),Object(y.jsx)(x.a,{className:"button whiteButton blackBorder store-card-btn browse-menu-btn",onClickHandler:Bt,children:Object(l.translateWithI18Next)(ee)})]})})}):Object(y.jsxs)(y.Fragment,{children:[Object(c.db)(!Tt,Object(c.db)(_t,0!==Be||0!==jt||!rt||L||Le.length?ra():Gt(ca,Bt,te))),Dt&&!_t&&Object(y.jsx)("div",{className:"order-button-section",children:la})]}),Object(y.jsx)("div",{className:"clearfix"})]})]}),Ae&&Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"".concat((null===Se||void 0===Se?void 0:Se.toUpperCase())!==de&&"takeawayDineInMap"," delivery-map"),children:[Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(f.a,{latLongValue:Ee,loadingElement:Object(y.jsx)("div",{style:{height:"100%"}}),containerElement:Object(y.jsx)("div",{style:{height:"400px"}}),mapElement:Object(y.jsx)("div",{style:{height:"100%"}}),passAddress:e=>{xe(e)},isVisible:Se.toUpperCase()===Z||Se.toUpperCase()===ne,isMobile:He,centerIndex:qe,onPositionChangeHandler:$t,setShowCard:we,setStoreMarker:Object(c.Tc)(_t,(e=>{const t=Le.findIndex((t=>t.location.latitude===e.lat()&&t.location.longitude===e.lng()));t>-1&&(qe===t&&Qt(),Je(t))}),(e=>{((e,t,a,i,o)=>{const l=e.findIndex((e=>e.location.latitude===i.lat()&&e.location.longitude===i.lng()));l>-1&&(o===l&&t(),a(l))})(At,Zt,Je,e,qe)})),storeCardHeight:kt}),_e&&Fe&&He?!mt&&oa(Fe,"Selected-Card"):null]}),_e&&Fe&&!He?Object(c.db)(Le.length===ct.length,_t)&&!mt&&((e,t)=>{const a=e.availableServicesPerChannel&&Object(E.g)(e.availableServicesPerChannel),{services:o=[]}=Object(c.jd)(a[0]),l="".concat(e.name[0].value,"_").concat(t);return Object(y.jsx)(O.a.Fragment,{children:Object(y.jsx)(Ge,{storeName:Object(c.md)(e.name[0].value),storeDistance:Object(c.md)(e.distance),orderTypes:o,addresses:e.addresses,storeStatus:e.summary,mapText:U,isMobile:He,isMapView:!0,onStoreSelectFinish:A,onClick:()=>{Jt(),zt()},storeInfo:e,...i[0],centerIndex:qe,storeLength:Object(c.Tc)(_t,null===Le||void 0===Le?void 0:Le.length,null===At||void 0===At?void 0:At.length)},l)})})(Fe,"Selected-Card")||oa(Fe,"Selected-Card"):""]})})]})}));function nt(e,t,a,i,o){return Object(y.jsx)(y.Fragment,{children:(null===e||void 0===e?void 0:e.length)<=3&&Object(y.jsxs)("div",{className:"enter-your-address-section",children:[Object(y.jsx)("span",{className:"search-store-text",children:Object(l.translateWithI18Next)("pleaseEnterLocation")}),Object(y.jsx)("div",{"data-testid":"show-list-map",className:Object(c.Tc)(t,"store-count","show-map-div"),onClick:()=>{t&&i(),o()},children:Object(y.jsxs)(g.a,{className:"map-link",children:[Object(y.jsx)("span",{children:Object(y.jsx)(N.a,{"data-testid":"",srcFile:it(t),alt:"map",className:"map-img"})}),Object(c.Tc)(t,Object(l.translateWithI18Next)(a),Object(l.translateWithI18Next)("map"))]})})]})})}function dt(e,t,a,i,o){let{firstTab:n,setCenterIndex:d,handleTabChange:r}=o;return Object(y.jsx)(y.Fragment,{children:(!!e||!!t)&&a&&Object(y.jsx)("span",{"data-testid":"tab-favorite-store",className:et(n),onClick:()=>{d(0),r(!1)},children:"".concat(Object(l.translateWithI18Next)("savedkfc")," (").concat(i,")")})})}var rt=a(956),st=a(77),ct=a(915),ut=a(111);const vt=e=>{var t;const{contentData:a={},onStoreSelectFinish:p}=e,{SEARCH_ORDER_DATA:g,DISPOSITION_DATA:N,ANALYTICS_LOCALISATION_SIGNIN:S}=j.a,I=Object(b.b)(),{COUNTRY_CODE:x,STORE_CARD_LIMIT:f,TYPE_TAKE_WAY:C,PICK_UP:D,TENANT_ID:A,TENATNT_SESSION_ID:R,TYPE_DELIVERY:_}=h.a,{userOrderState:L,userOrderStateDispatch:k}=Object(v.useContext)(u.a),{dispositionStateData:P,searchStoreData:F,showLocationConfirmModal:W}=L,{dispositionType:H=localStorage.getItem("dispositionType")}=Object(c.md)(P),{currentMarket:U=x,storeCardLimit:B=f,storeStatusUrl:G="".concat(Object(o.a)(i.Mb),"v1/stores/{storeid}/{channel}/{service}/status"),tenantID:V=A,tenantSessionID:Y=R}=F,{searchStoreHeaderText:K="",deliveryHeaderText:z="",searchStoreModalContent:q={}}=a,{formContent:J={},locationsContent:{storeData:X=[]}}=q,[Q,Z]=O.a.useState([]),[$,ee]=O.a.useState({}),[te,ae]=O.a.useState([]),[ie,oe]=O.a.useState([]),{storeSearch:le={},tenantId:ne,componentOptions:de}=Object(b.c)((e=>Object(c.kd)(e.tenantReducer))),{storesWithStatus:re=[],isStoreStatusLoading:se=!1}=Object(b.c)((e=>Object(c.kd)(e.storesReducer))),{allStores:ce=[]}=Object(b.c)((e=>e.allStoresReducer))||{},{maxDriveTimeMins:ue,distanceMetrics:ve,maxDeliveryDistanceMtrs:be,maxPickupDistanceMtrs:me,geohashprecision:je,boundingBoxSizeMeters:he}=le,ge=e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem("renderComp",!0),k({type:N,value:{showDisposition:!1}}),k({type:g,value:{showSearchStore:!1}})};Object(v.useEffect)((()=>{const e=e=>{27===e.keyCode&&ge(e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const Ne=e=>{e.stopPropagation(),e.preventDefault(),k({type:N,value:{showDisposition:!0}}),k({type:g,value:{showSearchStore:!1}})},Se=e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem(S,JSON.stringify(!0)),Object(E.j)(),setTimeout((()=>{Object(st.b)()}),500)},Ie=Object(b.c)((e=>{let{profileReducer:{favouriteStores:t}}=e;return t}));Object(v.useEffect)((()=>{Object(M.f)(k,W)}),[]),Object(v.useEffect)((()=>{xe({userLat:$.userLat,userLong:$.userLong})}),[Ie.length]),Object(v.useEffect)((()=>{ce.length>0&&ye(ce)}),[ce]),Object(v.useEffect)((()=>{re.length>0&&Le(re)}),[re]),Object(v.useEffect)((()=>{(null===H||void 0===H?void 0:H.toUpperCase())===_&&De(ie)}),[ie]);const xe=e=>{Object(rt.a)(e.userLat,e.userLong,Ie,fe)},fe=(e,t)=>{const a=Object(c.Tc)((null===H||void 0===H?void 0:H.toUpperCase())===C,D,H),i=G.replace("{channel}",s.b.channel).replace("{service}",a).replace(" ","-"),o=Object(m.a)();Object(E.h)(e,i.toLowerCase(),V,Y||Object(m.a)(),o,Ee)},Ee=e=>{let t=e.map((e=>{const{additionalProperties:t=[],address:a,amenities:i,dname:o,id:l,location:n}=e.storeBasic;return{...e,id:l,location:n,name:o,amenities:i,addresses:a,additionalAttributes:t,storeBasic:{}}}));ae(t)},Ce=e=>{I(Object(n.b)()),ee({userLat:e.userLat,userLong:e.userLong}),Q&&Z([]),Te(e.userLat,e.userLong),setTimeout((()=>{I(Object(n.a)())}),2e3)},Te=(e,t)=>{const a={lat:e,lon:t,distanceFromCurrentLoc:he/1e3,geohashprecision:je},i=r.a.calculateGH(a);I(Object(d.v)(null===i||void 0===i?void 0:i.length))},ye=e=>{const t=Object(c.Ib)(H.toUpperCase()),a=e.filter((e=>{var t,a;return Object(c.he)(e.id)&&Object(c.he)(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&Object(c.he)(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude)})),i={stores:a,disposition:t,distanceMetrics:ve,driveTime:ue,distanceInMtrs:Object(c.Tc)(H.toUpperCase()===_,be,me),noOfStores:Object(c.Tc)(H.toUpperCase()===_,2,a.length),channel:s.b.channel},o=r.a.checkAndProceed(i);oe(o),H.toUpperCase()===_?De(o):we(o,t)},De=e=>{let t=[];null===e||void 0===e||e.forEach((e=>{var a,i;t.push({lat:null===(a=e.location)||void 0===a?void 0:a.latitude,lng:null===(i=e.location)||void 0===i?void 0:i.longitude})})),Object(rt.b)(t,[{lat:$.userLat,lng:$.userLong}],Ae)},Ae=e=>{let{allStoreDistance:t,originAddressText:a}=e;const i=Object(c.Ib)(H.toUpperCase()),o={stores:_e(t,ie),numberOfStores:2,disposition:i,distanceMetrics:ve,driveTime:ue,channel:s.b.channel},l=r.a.getSortedNearbyStores(o);(null===l||void 0===l?void 0:l.length)>0&&we(l,i)},_e=(e,t)=>null===t||void 0===t?void 0:t.map(((t,a)=>({...t,distance:e[a]}))),we=(e,t)=>{const a={data:null===e||void 0===e?void 0:e.map((e=>({storeId:e.id,channel:s.b.channel,service:t}))),store:e,tenantId:ne,setStatusFlag:!1,isFavoritePage:!1};I(Object(d.d)(a,null))},Le=e=>{const t=e.filter((e=>{var t,a,i,o,l,n,d,r,s,c,u,v;return(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude)&&(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(o=i.status)||void 0===o?void 0:o.currentStatus)&&(null===e||void 0===e||null===(l=e.summary)||void 0===l||null===(n=l.menu)||void 0===n||null===(d=n.catalogs)||void 0===d?void 0:d.length)&&(null===e||void 0===e||null===(r=e.summary)||void 0===r||null===(s=r.timings)||void 0===s||null===(c=s.operatingHours)||void 0===c?void 0:c.length)>0&&(null===e||void 0===e||null===(u=e.summary)||void 0===u||null===(v=u.timings)||void 0===v?void 0:v.asap)}));Z(t)},ke=null===de||void 0===de||null===(t=de.web)||void 0===t?void 0:t.dispositionConfig,{CONFIG_SEARCH_SCREEN:Me}=w.gd,{configSearchScreen:Pe=localStorage.getItem(Me)}=F,Fe="".concat(null===H||void 0===H?void 0:H.toUpperCase(),"_").concat(Pe),{shouldShowLocationLink:We}={...null===ut.d||void 0===ut.d?void 0:ut.d[Fe],...null===ke||void 0===ke?void 0:ke[Fe]},{Error_Yellow:He}=T.a||{},{LOCATION_BLOCKED_ERROR:Ue,KFC_URL:Be}=Re.a,Ge=Object(c.xe)(W,We),Ve=Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ct.a,{show:Ge,errorMsg:Object(M.G)(Ue,Be),errImage:He,cssClass:"location-blocked"}),(null===H||void 0===H?void 0:H.toUpperCase())===_?Object(y.jsx)(Oe,{singInClickhandler:Se,formContent:J,storeData:X,onStoreSelectFinish:p,eligibleStoreData:Q,storeCardLimit:B,userPositionHandler:Ce,currentMarket:U}):Object(y.jsx)(lt,{singInClickhandler:Se,formContent:J,storeData:X,eligibleStoreData:Q,noStoresList:se,storeCardLimit:B,userPositionHandler:Ce,currentMarket:U,onStoreSelectFinish:p,handleGoBack:Ne,favoriteStoreData:te,favoriteStoreHandler:xe})]});return Object(y.jsx)(pe,{handleClose:ge,orderModeTypeItem:Ve,showLocationError:Ge,headerText:Object(c.Tc)((null===H||void 0===H?void 0:H.toUpperCase())===_,Object(l.translateWithI18Next)(z),Object(l.translateWithI18Next)(K)),handleGoBack:Ne,modalTitleId:"search-store"})};vt.defaultProps=p.a;t.default=vt},824:function(e,t,a){"use strict";a.r(t),a.d(t,"getDistanceByLatLong",(function(){return O})),a.d(t,"getGeoCodeByAddress",(function(){return b})),a.d(t,"getGeoLatLngByGeoCode",(function(){return m})),a.d(t,"getGeoLatLngByAddress",(function(){return j})),a.d(t,"GoogleMap",(function(){return f}));var i,o,l,n,d=a(3),r=a.n(d),s=a(15),c=a(43),u=a(22),v=a(2);const O=e=>{var t,a;if(null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps){const t=new window.google.maps.DistanceMatrixService;return new Promise(((a,i)=>{t.getDistanceMatrix({origins:[g(null===e||void 0===e?void 0:e.origins)],destinations:[g(null===e||void 0===e?void 0:e.destinations)],travelMode:(null===e||void 0===e?void 0:e.travelMode)||window.google.maps.TravelMode.DRIVING,unitSystem:(null===e||void 0===e?void 0:e.unitSystem)||window.google.maps.UnitSystem.METRIC,avoidHighways:(null===e||void 0===e?void 0:e.avoidHighways)||!1,avoidTolls:(null===e||void 0===e?void 0:e.avoidTolls)||!1},((e,t)=>{var o,l,n,d;t!==(null===(o=window)||void 0===o||null===(l=o.google)||void 0===l||null===(n=l.maps)||void 0===n||null===(d=n.GeocoderStatus)||void 0===d?void 0:d.OK)&&i(t),console.debug(e);const r=[];null===e||void 0===e||e.rows.forEach(((t,a)=>{var i,o,l,n,d;return r.push({destinationAddresses:null===e||void 0===e||null===(i=e.destinationAddresses)||void 0===i?void 0:i[a],originAddresses:null===e||void 0===e||null===(o=e.originAddresses)||void 0===o?void 0:o[a],distance:null===t||void 0===t||null===(l=t.elements)||void 0===l?void 0:l[0].distance,duration:null===t||void 0===t||null===(n=t.elements)||void 0===n?void 0:n[0].duration,status:null===t||void 0===t||null===(d=t.elements)||void 0===d?void 0:d[0].status})})),a(r)}))}))}},b=e=>{var t,a;if(null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps){const t=new window.google.maps.Geocoder;return new Promise(((a,i)=>{t.geocode({address:e},((e,t)=>{var o,l,n,d;t!==(null===(o=window)||void 0===o||null===(l=o.google)||void 0===l||null===(n=l.maps)||void 0===n||null===(d=n.GeocoderStatus)||void 0===d?void 0:d.OK)&&i(t),a(e)}))}))}return null},m=e=>{var t,a;return null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps&&e?new Promise(((t,a)=>{try{var i;const a=Array.isArray(e)?e[0]:e;t(null===a||void 0===a||null===(i=a.geometry)||void 0===i?void 0:i.location)}catch(o){a(o)}})):null},j=async e=>{const t=await b(e);return await m(t)},h=e=>{var t,a,i,o;(null===(t=window)||void 0===t||null===(a=t.google)||void 0===a?void 0:a.maps)&&(null===e||void 0===e||null===(i=e.gMapDetails)||void 0===i||null===(o=i.gMapInstance)||void 0===o||o.setCenter(new window.google.maps.LatLng(null===e||void 0===e?void 0:e.latLng)))},p=(e,t)=>{var a;return null===(a=g(e))||void 0===a?void 0:a.equals(g(t))},g=e=>{var t,a;if(null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps&&e){const t="string"===typeof e?null===e||void 0===e?void 0:e.split(","):e;if(null!==Array&&void 0!==Array&&Array.isArray(t))return new window.google.maps.LatLng(t[0],t[1]);if("object"===typeof t)return null!==t&&void 0!==t&&t.latitude&&null!==t&&void 0!==t&&t.longitude?new window.google.maps.LatLng(null===t||void 0===t?void 0:t.latitude,null===t||void 0===t?void 0:t.longitude):new window.google.maps.LatLng(t)}return e},N=e=>{var t,a,i,o,l,n;const{gMapDetails:d,directionsPolyline:r,origin:s,destination:c,isRaiderTracker:u}=e,{raiderDirectionsService:v}=d;null===v||void 0===v||null===(t=v.route({origin:s,destination:c,travelMode:null===(i=window)||void 0===i||null===(o=i.google)||void 0===o||null===(l=o.maps)||void 0===l||null===(n=l.TravelMode)||void 0===n?void 0:n.DRIVING}))||void 0===t||null===(a=t.then((e=>{var t,a,i,o,l,n;null!==e&&void 0!==e&&null!==(t=e.routes)&&void 0!==t&&t[0]&&(null===r||void 0===r||r.setPath(null===e||void 0===e||null===(a=e.routes)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.overview_path),u&&(null===d||void 0===d||null===(o=d.gMapInstance)||void 0===o||o.fitBounds(null===e||void 0===e||null===(l=e.routes)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.bounds)))})))||void 0===a||a.catch((e=>console.debug("Directions request failed due to "+e)))},S=e=>{var t,a;const{gMapDetails:i,animation:o=null,position:l,icon:n,zIndex:d=1}=e,{gMapInstance:r,isMarkerVisible:s}=i;return null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps&&r?new window.google.maps.Marker({animation:o,position:l,map:r,visible:s,icon:n,zIndex:d}):null},I=e=>{var t,a;const{gMapDetails:i,updateGMapDetails:o}=e,{gMapInstance:l,orderTracking:n,customerLatLng:d,storeLatLng:r,raiderCurrentLatLng:c,raiderCurrentMarker:u,raiderDirectionsPolyline:v,raiderLatLngList:O}=i;if(null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps&&l&&n&&d&&r&&c){var b,m,j,h;if(o({raiderLatLngList:[...O,c]}),p(r,c)||(e=>{var t,a;const{gMapInstance:i,orderTracking:o,raiderPastCurrentLatLng:l,raiderCurrentLatLng:n,raiderPastStrokeColor:d,raiderPastStrokeWeight:r,raiderPastStrokeOpacity:s}=null===e||void 0===e?void 0:e.gMapDetails;if(null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps&&i&&o){const t=new window.google.maps.Polyline({strokeColor:d,strokeWeight:r,strokeOpacity:s,map:i});N({gMapDetails:null===e||void 0===e?void 0:e.gMapDetails,directionsPolyline:t,origin:l,destination:n})}})({gMapDetails:i,updateGMapDetails:o}),N({gMapDetails:i,directionsPolyline:v,origin:c,destination:d,isRaiderTracker:!0}),null!==u)null===u||void 0===u||u.setPosition(c);else o({raiderCurrentMarker:S({gMapDetails:i,position:c,icon:null===s.a||void 0===s.a?void 0:s.a.MarkerRaider,zIndex:5,animation:null===(b=window)||void 0===b||null===(m=b.google)||void 0===m||null===(j=m.maps)||void 0===j||null===(h=j.Animation)||void 0===h?void 0:h.DROP})});o({raiderPastCurrentLatLng:c})}},x=async e=>{if(await(async()=>(await u.b.BindLocation(),u.b.address&&u.b.coordinates))()){const{longitude:t,latitude:a}=u.b.coordinates;h({gMapDetails:e,latLng:{lat:a,lng:t}})}},f=e=>{var t,a;const i=r.a.createRef(),[o,l]=Object(d.useState)(E),n=Object(d.useCallback)((e=>{l&&l((t=>({...t,...e})))}),[]);return Object(d.useEffect)((()=>{var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e.google)&&void 0!==t&&t.maps&&i&&(null===o||void 0===o||!o.gMapInstance)){var a,l,d,r;console.debug("GoogleMap - useEffect Map => ");const e=(e=>{var t,a;const{gMapContainerRef:i,gMapDetails:o}=e;if(null!==(t=window)&&void 0!==t&&null!==(a=t.google)&&void 0!==a&&a.maps&&i){const{center:e,disableDefaultUI:t,fullscreenControl:a,zoomControl:l,gestureHandling:n,zoom:d,minZoom:r,maxZoom:s,mapTypeId:c,panControl:u,rotateControl:v,scaleControl:O,stylers:b}=o;return new window.google.maps.Map(null===i||void 0===i?void 0:i.current,{mapTypeId:c,center:e,disableDefaultUI:t,fullscreenControl:a,zoom:d,zoomControl:l,gestureHandling:n,minZoom:r,maxZoom:s,panControl:u,rotateControl:v,scaleControl:O,styles:b})}})({gMapContainerRef:i,gMapDetails:o});null===(a=window)||void 0===a||null===(l=a.google)||void 0===l||null===(d=l.maps)||void 0===d||null===(r=d.event)||void 0===r||r.addListenerOnce(e,"tilesloaded",(()=>{console.debug("GoogleMap - useEffect Map => tilesloaded"),n({mapRenderCompleted:!0,gMapInstance:e,raiderDirectionsService:new window.google.maps.DirectionsService})}))}}),[null===(t=window)||void 0===t||null===(a=t.google)||void 0===a?void 0:a.maps]),Object(d.useEffect)((()=>{console.debug("GoogleMap - useEffect gMapInstance => "),(null===o||void 0===o?void 0:o.gMapInstance)&&(async(e,t)=>{const{orderTracking:a=!1,storeAddress:i=null,storeLatLng:o=null,customerAddress:l=null,customerLatLng:n=null}=e;let d={orderTracking:a};if(i){const e=await j(i);d={...d,storeLatLng:e,raiderPastCurrentLatLng:e,storeAddress:i}}if(o&&(d={...d,storeLatLng:g(o),raiderPastCurrentLatLng:g(o),storeAddress:i}),l){const e=await j(l);d={...d,customerLatLng:e,customerAddress:l}}n&&(d={...d,customerLatLng:g(n),customerAddress:l}),t(d)})(e,n)}),[null===o||void 0===o?void 0:o.gMapInstance]),Object(d.useEffect)((()=>{console.debug("GoogleMap - useEffect mapTypeId => "),(null===o||void 0===o?void 0:o.gMapInstance)&&(e=>{var t,a,i,o,l,n,d;(null===(t=window)||void 0===t||null===(a=t.google)||void 0===a?void 0:a.maps)&&(null===e||void 0===e||null===(i=e.gMapInstance)||void 0===i||i.setMapTypeId(null===(o=window)||void 0===o||null===(l=o.google)||void 0===l||null===(n=l.maps)||void 0===n||null===(d=n.MapTypeId)||void 0===d?void 0:d[null===e||void 0===e?void 0:e.mapTypeId]))})(o)}),[null===o||void 0===o?void 0:o.mapTypeId]),Object(d.useEffect)((()=>{console.debug("GoogleMap - useEffect props mapTypeId => "),n({mapTypeId:null===e||void 0===e?void 0:e.mapTypeId})}),[null===e||void 0===e?void 0:e.mapTypeId]),Object(d.useEffect)((()=>{const{gMapInstance:e,orderTracking:t,customerLatLng:a,mapRenderCompleted:i}=o;e&&t&&a&&i&&(console.debug("GoogleMap - useEffect customer LatLng => "),S({gMapDetails:o,position:a,icon:null===s.a||void 0===s.a?void 0:s.a.MarkerCustomer}),h({gMapDetails:o,latLng:a}))}),[null===o||void 0===o?void 0:o.customerLatLng]),Object(d.useEffect)((()=>{const{gMapInstance:e,orderTracking:t,storeLatLng:a,mapRenderCompleted:i}=o;e&&t&&a&&i&&(console.debug("GoogleMap - useEffect store LatLng => "),S({gMapDetails:o,position:a,icon:null===s.a||void 0===s.a?void 0:s.a.MarkerKFC}),h({gMapDetails:o,latLng:a}))}),[null===o||void 0===o?void 0:o.storeLatLng]),Object(d.useEffect)((()=>{const{gMapInstance:e,orderTracking:t,customerLatLng:a,storeLatLng:i,mapRenderCompleted:l}=o;console.debug("GoogleMap - useEffect store & customer LatLng => "),e&&t&&a&&i&&l&&(e=>{var t,a,i,o;const{gMapInstance:l,orderTracking:n,customerLatLng:d,storeLatLng:r,raiderStrokeColor:s,raiderStrokeWeight:c,raiderStrokeOpacity:u}=null===e||void 0===e?void 0:e.gMapDetails;if(console.debug("GoogleMap setRaiderDirectionsServicePolyline - ",null===(t=window)||void 0===t||null===(a=t.google)||void 0===a?void 0:a.maps,l,n),null!==(i=window)&&void 0!==i&&null!==(o=i.google)&&void 0!==o&&o.maps&&l&&n){const t=new window.google.maps.Polyline({strokeColor:s,strokeWeight:c,strokeOpacity:u,map:l});null===e||void 0===e||e.updateGMapDetails({raiderDirectionsPolyline:t}),N({gMapDetails:null===e||void 0===e?void 0:e.gMapDetails,directionsPolyline:t,origin:r,destination:d,isRaiderTracker:!1})}})({gMapDetails:o,updateGMapDetails:n})}),[null===o||void 0===o?void 0:o.customerLatLng,null===o||void 0===o?void 0:o.storeLatLng]),Object(d.useEffect)((()=>{const{gMapInstance:t,orderTracking:a,mapRenderCompleted:i}=o;console.debug("GoogleMap - useEffect props raiderCurrentLatLng => ",null===e||void 0===e?void 0:e.raiderCurrentLatLng),t&&a&&(null===e||void 0===e?void 0:e.raiderCurrentLatLng)&&i&&n({raiderCurrentLatLng:g(null===e||void 0===e?void 0:e.raiderCurrentLatLng)})}),[null===o||void 0===o?void 0:o.mapRenderCompleted,null===e||void 0===e?void 0:e.raiderCurrentLatLng]),Object(d.useEffect)((()=>{console.debug("GoogleMap - useEffect raiderCurrentLatLng => ",null===o||void 0===o?void 0:o.raiderCurrentLatLng),(null===o||void 0===o?void 0:o.mapRenderCompleted)&&I({gMapDetails:o,updateGMapDetails:n})}),[null===o||void 0===o?void 0:o.raiderCurrentLatLng]),Object(d.useEffect)((()=>{const{isMobile:t=(null===E||void 0===E?void 0:E.isMobile),isMarkerVisible:a=(null===E||void 0===E?void 0:E.isMarkerVisible),orderTracking:i=(null===E||void 0===E?void 0:E.orderTracking),raiderPastStrokeColor:o=(null===E||void 0===E?void 0:E.raiderPastStrokeColor),raiderPastStrokeWeight:l=(null===E||void 0===E?void 0:E.raiderPastStrokeWeight),raiderPastStrokeOpacity:d=(null===E||void 0===E?void 0:E.raiderPastStrokeOpacity),raiderStrokeColor:r=(null===E||void 0===E?void 0:E.raiderStrokeColor),raiderStrokeWeight:s=(null===E||void 0===E?void 0:E.raiderStrokeWeight),raiderStrokeOpacity:c=(null===E||void 0===E?void 0:E.raiderStrokeOpacity),stylers:u=(null===E||void 0===E?void 0:E.stylers)}=e;console.debug("GoogleMap - useEffect props config => "),n({isMobile:t,isMarkerVisible:a,orderTracking:i,raiderPastStrokeColor:o,raiderPastStrokeWeight:l,raiderPastStrokeOpacity:d,raiderStrokeColor:r,raiderStrokeWeight:s,raiderStrokeOpacity:c,stylers:u})}),[null===e||void 0===e?void 0:e.isMobile,null===e||void 0===e?void 0:e.isMarkerVisible,null===e||void 0===e?void 0:e.orderTracking,null===e||void 0===e?void 0:e.raiderPastStrokeColor,null===e||void 0===e?void 0:e.raiderPastStrokeWeight,null===e||void 0===e?void 0:e.raiderPastStrokeOpacity,null===e||void 0===e?void 0:e.raiderStrokeColor,null===e||void 0===e?void 0:e.raiderStrokeWeight,null===e||void 0===e?void 0:e.raiderStrokeOpacity,null===e||void 0===e?void 0:e.stylers]),Object(d.useEffect)((()=>{var e,t;(null===(e=window)||void 0===e||null===(t=e.google)||void 0===t?void 0:t.maps)&&(null===o||void 0===o?void 0:o.gMapInstance)&&(null===o||void 0===o||o.gMapInstance.setOptions({styles:null===o||void 0===o?void 0:o.stylers}))}),[null===o||void 0===o?void 0:o.gMapInstance,null===o||void 0===o?void 0:o.stylers]),Object(d.useEffect)((()=>{var t,a;const{customerAddress:i=null,customerLatLng:l=null,storeAddress:d=null,storeLatLng:r=null}=e;console.debug("GoogleMap - useEffect Props store & customer LatLng => "),(null===(t=window)||void 0===t||null===(a=t.google)||void 0===a?void 0:a.maps)&&(null===o||void 0===o?void 0:o.mapRenderCompleted)&&(!p(null===o||void 0===o?void 0:o.customerLatLng,l)||!p(null===o||void 0===o?void 0:o.storeLatLng,r))&&n({customerAddress:i,customerLatLng:g(l),storeAddress:d,storeLatLng:g(r)})}),[null===o||void 0===o?void 0:o.mapRenderCompleted,null===e||void 0===e?void 0:e.customerAddress,null===e||void 0===e?void 0:e.customerLatLng,null===e||void 0===e?void 0:e.storeAddress,null===e||void 0===e?void 0:e.storeLatLng]),Object(v.jsxs)("div",{className:"googleMapContPanel",children:[Object(v.jsx)("div",{className:"use-location-icon",children:Object(v.jsx)(c.a,{srcFile:null===s.a||void 0===s.a?void 0:s.a.UseLocationWhiteIcon,alt:"",onClick:()=>x(o),"data-testid":"use-location-icon"})}),Object(v.jsx)("div",{id:"google-map-container",ref:i,className:"googleMapContainer ".concat(null===e||void 0===e?void 0:e.className)})]})};t.default=f;const E={gMapInstance:null,defaultLatLng:[{lat:0,lng:0}],mapRenderCompleted:!1,raiderPastCurrentLatLng:null,raiderCurrentLatLng:null,raiderCurrentMarker:null,raiderDirectionsPolyline:null,raiderDirectionsService:null,raiderLatLngList:[],mapTypeId:null===(i=window)||void 0===i||null===(o=i.google)||void 0===o||null===(l=o.maps)||void 0===l||null===(n=l.MapTypeId)||void 0===n?void 0:n.ROADMAP,center:{lat:0,lng:0},disableDefaultUI:!0,fullscreenControl:!1,zoomControl:!0,zoom:13,gestureHandling:"greedy",minZoom:6,maxZoom:20,panControl:!1,rotateControl:!0,scaleControl:!0,isMobile:!1,isMarkerVisible:!0,orderTracking:!1,customerAddress:null,customerLatLng:null,storeAddress:null,storeLatLng:null,raiderPastStrokeColor:"#202124",raiderPastStrokeWeight:2,raiderPastStrokeOpacity:.8,raiderStrokeColor:"#e4002b",raiderStrokeWeight:4,raiderStrokeOpacity:1,stylers:[]}},825:function(e,t,a){"use strict";a.r(t),a.d(t,"addressTitle",(function(){return ue})),a.d(t,"DeliveryAddressSearchFormModule",(function(){return ve}));var i=a(3),o=a.n(i),l=a(25),n=a(218),d=a(0),r=a(76),s=a(14),c=a(6),u=a(269),v=a(1056),O=a(63),b=a(57),m=a(5),j=a(339),h=a(331);const p=e=>{let{localizationData:t={},address:a={}}=e;const{chome:i="",cityTown:o="",postalCode:l="",prefecture:n=""}=a;return{chome:null===i||void 0===i?void 0:i.replace(/\s+/g,""),cityTown:o,localizationData:t,postalCode:null===l||void 0===l?void 0:l.replace("-",""),prefecture:null===n||void 0===n?void 0:n.replace(/\s+/g,"")}},g=e=>{let{chome:t="",cityTown:a="",localizationData:i={},prefecture:o=""}=e;const{[o]:{[a]:l}={}}=i;return(Object(m.af)(l)||{})[t]},N=e=>{let{chome:t="",localizationData:a={},postalCode:i=""}=e;const{[i]:o={}}=a;return Object(m.af)(o)[t]};var S=a(17),I=a(216),x=a(267),f=a(18),E=a.n(f),C=a(55),T=a(4),y=a(2);const D=e=>{const{loggedIn:t=!1,formContent:a={},storeSelection:i}=e,{signInLink:o}=i,{memberText:l="",singInLink:n={}}=a;return Object(y.jsx)("div",{className:"login-section",children:o&&Object(y.jsx)("span",{className:"delivery-member-signin",children:!t&&Object(h.g)(l,h.h,n)})})},A=o.a.memo(D);var R=a(980);const _=e=>{const{defaultSelectedTabIndex:t,onTabSelection:a,tabsList:o}=e,[l,n]=Object(i.useState)(t);return Object(y.jsx)("div",{className:"toggle-tabs",children:o.map(((e,t)=>Object(y.jsx)("div",{className:"toggle-tabs-container",children:Object(y.jsx)("button",{className:"toggle-tabs-button ".concat(t===l?"selected":""),"aria-pressed":t===l,onClick:()=>(e=>{e!==l&&(n(e),a(e))})(t),children:Object(y.jsx)("span",{className:"toggle-tabs-button-text",children:Object(c.translateWithI18Next)(e.title)})})},e.id)))})};_.defaultProps={defaultSelectedTabIndex:0,onTabSelection:()=>null,tabsList:[]};var w=_,L=a(15);const{SearchIconGrey:k,SingleArrow:M,WhiteCloseButton:P}=L.a,F=e=>{const{cssClass:t,dropdownId:a,dropdownList:o,dropdownTitleText:l,enableSearch:d,onDropdownSelection:r,selectedText:s}=e,[u,v]=Object(i.useState)(o),[O,b]=Object(i.useState)(!1),[m,j]=Object(i.useState)(!1),[h,p]=Object(i.useState)(""),g=Object(i.useRef)(),N=Object(i.useCallback)((e=>{e&&e.focus()}),[]);Object(i.useEffect)((()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&b(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const S=e=>{var t;null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation();const a=(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"";p(a),(e=>{const t=e.toLowerCase();let a=o;t&&(a=null===o||void 0===o?void 0:o.filter((e=>-1!==e.toLowerCase().indexOf(t)))),v(a)})(a)},I=e=>{null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),p(""),v(o)},x=e=>{j(e)},f=()=>{b(!O),I()};return Object(y.jsxs)("div",{className:"searchable-dropdown ".concat(t),ref:g,children:[l&&Object(y.jsx)("div",{className:"searchable-dropdown-title","aria-level":"1",role:"heading",children:s!==l||O?l:""}),Object(y.jsxs)("div",{id:a,className:"searchable-dropdown-value","data-testid":"searchable-dropdown-value-id",role:"listbox",tabIndex:"0",onClick:f,children:[Object(y.jsx)("div",{className:"selected-value",children:s===l&&O?"":s}),Object(y.jsx)("img",{src:M,alt:" ",className:"down-arrow-img ".concat(O?"dropdown-open":"")})]}),O&&Object(y.jsxs)("div",{className:"searchable-dropdown-options-container",children:[d&&Object(y.jsx)("div",{className:"searchable-dropdown-form-container",children:Object(y.jsxs)("form",{className:"searchable-dropdown-form",children:[Object(y.jsx)("img",{src:k,alt:" ",className:"search-icon"}),Object(y.jsx)("input",{className:"searchable-dropdown-input","data-testid":"searchable-dropdown-search-input",type:"text",ref:N,placeholder:Object(c.translateWithI18Next)(n.b.SEARCH),value:h,onChange:e=>S(e),onKeyDown:e=>(e=>{var t;"Enter"===e.key||13===e.keyCode?(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),null===e||void 0===e||null===(t=e.target)||void 0===t||t.blur()):"Escape"!==e.key&&"Esc"!==e.key&&27!==e.keyCode||(null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),f())})(e),onFocus:()=>x(!0),onBlur:()=>x(!1)}),(m||h)&&Object(y.jsx)("button",{className:"clear-text","data-testid":"searchable-dropdown-clear-text",onClick:e=>I(e),children:Object(y.jsx)("img",{src:P,alt:" ",className:"search-icon"})})]})}),Object(y.jsx)("ul",{children:null===u||void 0===u?void 0:u.map((e=>Object(y.jsx)("li",{tabIndex:"0",onClick:t=>((e,t)=>{null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),b(!O),r(t),I()})(t,e),className:"searchable-dropdown-option","data-testid":"searchable-dropdown-option-id",children:e},e)))})]})]})};F.defaultProps={cssClass:"",dropdownId:"",dropdownList:[],dropdownTitleText:"",enableSearch:!1,onDropdownSelection:()=>null,selectedText:""};var W=F,H=a(996);const U=e=>{const{defaultPostalValue:t,verifyPostalCode:a}=e,[o,l]=Object(i.useState)(t),d=Object(i.useRef)(null);Object(i.useEffect)((()=>{t&&l(t)}),[t]),Object(i.useEffect)((()=>{var e;null===d||void 0===d||null===(e=d.current)||void 0===e||e.focus()}),[]);return Object(y.jsx)("div",{className:"delivery-address-section search-store-postal-content",children:Object(y.jsx)(H.a,{maxLength:8,onClearTextHandler:()=>{a(!1,""),l("")},placeholder:Object(c.translateWithI18Next)(n.b.SEARCH),address:o,inputOnChange:e=>{let t=e.replace(/[^\d ]+/g,"");t=t.length>3?t.replace(/(.{3})/,"$1-"):t;const i=t.length>=8;l(t),a(i,t)},inputRef:d})})};U.defaultProps={defaultPostalValue:"",verifyPostalCode:()=>null};var B=U,G=a(103),V=a(43),Y=a(36),K=a(997),z=a(69),q=a(110);const{DISPOSITION_METHOD:J}=s.a,{CONFIRM_LOCATION:X,DELIVERY_SEARCH_TYPE:Q,NO_STORE_WITH_DELIVERY:Z,OTHER_DELIVERY_SERVICES:$,SEARCH_DELIVERY_LOCATION:ee,SPECIAL_NOTES:te,STORES_VARY_MESSAGE:ae,SWITCH_TO_TAKE_AWAY:ie,POSTAL_CODES:oe,PREFECTURES:le}=n.b;var ne=e=>{var t;const{changeFlow:a,deliveryLocalizationData:o,formContent:s,getStoreData:u,deliverySearchType:v,onDeliveryTypeChanged:f,isDeliveryLocalizationLoading:D,storesStatusError:_,saveAddressData:L,selectedAddress:k,setSelectedAddress:M,prefectureAddressScreen:P,addressName:F,isPrimaryAddress:H,closeModal:U,modalType:te,address:ne,isAccount:de,addressNameExist:re=!1,updateSetOrderDetails:se,isAddressFromOrderProcessing:ce}=e,ue=P?d.a:"",ve=Object(l.c)((e=>e.appStateReducer.userStatus)),{postalCodePrefix:Oe,tenantId:be="",scheduleOrderDateFormat:me,fieldAddressMaxLengthFlag:je}=Object(l.c)((e=>e.tenantReducer||{})),{headerData:{footer:he={}}={}}=Object(l.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response)||{}})),pe=Object(m.Ub)(he),{loggedIn:ge}=Object(m.kd)(ve),{userOrderState:Ne,userOrderStateDispatch:Se}=Object(i.useContext)(r.a),Ie=Object(l.b)(),[xe,fe]=Object(i.useState)(!1),[Ee,Ce]=Object(i.useState)(0),[Te,ye]=Object(i.useState)(!1),[De,Ae]=Object(i.useState)(!1),[Re,_e]=Object(i.useState)(0),[we,Le]=Object(i.useState)(k),ke=Object(h.c)(),Me=null===v||void 0===v?void 0:v.id,Pe=null!==ne&&void 0!==ne&&ne.pinCode?null===n.b||void 0===n.b?void 0:n.b.POSTAL_CODE:null===n.b||void 0===n.b?void 0:n.b.ADDRESS,Fe=ne?Pe:null===n.b||void 0===n.b?void 0:n.b.POSTAL_CODE,We=Math.max(0,ke.findIndex((e=>e.id===Fe))),[He,Ue]=Object(i.useState)(!1),Be=Object(h.d)(),[Ge,Ve]=Object(i.useState)(!0),[Ye,Ke]=Object(i.useState)({}),[ze,qe]=Object(i.useState)(!1),Je=Object(l.c)((e=>{var t;return(null===e||void 0===e||null===(t=e.deliveryAggregatorReducer)||void 0===t?void 0:t.isLoading)||!1})),Xe=Object(l.c)((e=>{var t,a;return(null===e||void 0===e||null===(t=e.deliveryAggregatorReducer)||void 0===t||null===(a=t.response)||void 0===a?void 0:a.deliveryAggregators)||{}})),{savedAddresses:Qe}=Object(l.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),Ze=!(null===Qe||void 0===Qe||!Qe.length||!ge),$e=Object(l.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.pwaStoragsReducer)||void 0===t||null===(a=t.pwaStorageState)||void 0===a?void 0:a.selectedFavouriteStoreAddress})),et={text:Z,cta:{label:ie}},tt={header:$,notice:ae},at=Object(q.a)();Object(i.useEffect)((()=>{var e;(Re===(null===v||void 0===v||null===(e=v.fieldOrder)||void 0===e?void 0:e.length)||te)&&Ae(!0)}),[v,De,Re,te]),Object(i.useEffect)((()=>{E()(Xe)&&!Je&&Ie(Object(x.d)())}),[Xe,Ie,Je]),Object(i.useEffect)((()=>{var e;const t=a?JSON.parse(localStorage.getItem(d.gd.SELECTED_ADDRESS)):{},i=(null===Ne||void 0===Ne||null===(e=Ne.scheduleOrderData)||void 0===e?void 0:e.selectedAddress)||t;var o,l;i&&Object.keys(i).length>0&&(M(i),_e(null===v||void 0===v||null===(o=v.fieldOrder)||void 0===o?void 0:o.length),Ce(null===v||void 0===v||null===(l=v.fieldOrder)||void 0===l?void 0:l.length))}),[we]),Object(i.useEffect)((()=>{Me===S.d.address&&Ue(!(!(Ge&&k.prefecture&&k.cityTown&&k.chome&&k.streetDetailAddress)||re)),Me===S.d.postalCode&&Ue(!(!(Ge&&k.postalCode&&k.chome&&k.streetDetailAddress)||re))}),[Me,Ge,k.postalCode,k.prefecture,k.cityTown,k.chome,k.streetDetailAddress,Ue,re]);Object(i.useEffect)((()=>{const e=Me===S.d.postalCode?oe:le,t=o[e];if(!D&&!E()(t)&&Object.keys(t).length>0){var a;const e=Me===S.d.postalCode?S.d.postalCode:S.d.prefecture,o=null===Ne||void 0===Ne||null===(a=Ne.scheduleOrderData)||void 0===a?void 0:a.storeId,n={[e]:t};let d={};if(null!==k&&void 0!==k&&k[e]&&(o||te)){d={...n};const e=(null===v||void 0===v?void 0:v.fieldOrder)||[];for(let t=1;t<e.length+1;t++){var i,l;const a=(null===(i=e[t])||void 0===i?void 0:i.id)||S.d.selectedStore,o=null===(l=e[t-1])||void 0===l?void 0:l.id,n=k[o].replace("-","");o&&n&&d[o]&&(d[a]=d[o][n])}}Ke({...d,...Ye,...n})}te&&(at(Object(z.d)({key:null===d.gd||void 0===d.gd?void 0:d.gd.SELECTED_ADDRESS,value:k})),Le(k))}),[o,te]);const it=e=>{let{localizationData:t={},selectedAddress:a={}}=e;const{postalCode:i}=a,o=Boolean(i),l=o?N:g;return Object(j.a)(l,p)({address:a,localizationData:t[o?oe:le]})},ot=Object(i.useCallback)((async()=>{at(Object(z.d)({key:null===d.gd||void 0===d.gd?void 0:d.gd.SELECTED_ADDRESS,value:k}));const e=Ye[S.d.selectedStore]||it({localizationData:o,selectedAddress:k});if(P&&de||ce){ce&&se({savedAddressSucess:!0});const t=((e,t)=>{const{CITY_CODE:a,CHOME_CODE:i}=n.b,o=F||Object(h.b)(Qe);return{postalCode:null===e||void 0===e?void 0:e.postalCode,addressName:o,isPrimary:H,addressLines:[null===e||void 0===e?void 0:e.prefecture,null===e||void 0===e?void 0:e.cityTown,null===e||void 0===e?void 0:e.chome,null===e||void 0===e?void 0:e.streetDetailAddress,null===e||void 0===e?void 0:e.apartmentName,null===e||void 0===e?void 0:e.roomNumber,null===e||void 0===e?void 0:e.companyName,null===e||void 0===e?void 0:e.specialNote],customProperties:[{key:a,value:null===t||void 0===t?void 0:t[2].toString()},{key:i,value:null===t||void 0===t?void 0:t[1].toString()}]}})(k,e),{customerId:a,phoneNumber:i}=C.a.getInstance(),o=te?{addressId:null===ne||void 0===ne?void 0:ne.id,...t}:t;Ie(Object(b.a)({customerId:a,phoneNumber:i,tenantId:be,data:o}));const l=te?Object(c.translateWithI18Next)(T.a.ADDRESS_UPDATED):Object(c.translateWithI18Next)(T.a.SAVED_DELIVERY_ADDRESS);Object(m.pf)(l,"","favorites-added-toast"),se&&se({isOpenSaveDeliveryAddressModal:!1}),!se&&U()}else{let t="";Me===S.d.postalCode&&(t+="".concat(Oe).concat(null===k||void 0===k?void 0:k.postalCode)),t+="".concat(null===k||void 0===k?void 0:k.prefecture).concat(null===k||void 0===k?void 0:k.cityTown),t+="".concat(null===k||void 0===k?void 0:k.chome).concat(null===k||void 0===k?void 0:k.streetDetailAddress);const a="".concat(null===k||void 0===k?void 0:k.apartmentName," ").concat(null===k||void 0===k?void 0:k.roomNumber," ").concat(null===k||void 0===k?void 0:k.companyName);Object(I.e)(t);const i=Ye[S.d.selectedStore]||e;i?(L(t,a,i),u(i)):Ve(!1)}}),[Ye,k,H,F]);Object(i.useEffect)((()=>{xe&&ot()}),[ot,xe]),Object(i.useEffect)((()=>{Ve(!_)}),[_]),Object(i.useEffect)((()=>{if(te){var e,t,a,i,o,l,n,d;const r=(null===ne||void 0===ne?void 0:ne.pinCode)||"",s=(null===ne||void 0===ne||null===(e=ne.addressLines)||void 0===e?void 0:e[0])||"",c=(null===ne||void 0===ne||null===(t=ne.addressLines)||void 0===t?void 0:t[1])||"",u=(null===ne||void 0===ne||null===(a=ne.addressLines)||void 0===a?void 0:a[2])||"",v=(null===ne||void 0===ne||null===(i=ne.addressLines)||void 0===i?void 0:i[3])||"",O=(null===ne||void 0===ne||null===(o=ne.addressLines)||void 0===o?void 0:o[4])||"",b=(null===ne||void 0===ne||null===(l=ne.addressLines)||void 0===l?void 0:l[5])||"",m=(null===ne||void 0===ne||null===(n=ne.addressLines)||void 0===n?void 0:n[6])||"",j=(null===ne||void 0===ne||null===(d=ne.addressLines)||void 0===d?void 0:d[7])||"";M({...k,apartmentName:O,chome:u,cityTown:c,companyName:m,postalCode:r,prefecture:s,roomNumber:b,streetDetailAddress:v,specialNote:j})}}),[te]);const lt=(e,t,a,i)=>{const l=(e=>e<=1&&Me===S.d.address?Boolean(k[S.d.postalCode]):e<=1&&Me===S.d.postalCode&&Boolean(k[S.d.prefecture]))(a)?{...h.f}:{...k};if(l[t]=e,l[Q]=Me,qe(!1),_e(a),Ce(a),a<v.fieldOrder.length)for(let o=a;o<v.fieldOrder.length;o++){l[v.fieldOrder[o].id]=""}if(Ve(!0),e){var n,d;const i=(null===(n=v.fieldOrder[a])||void 0===n?void 0:n.id)||S.d.selectedStore,r=e.replace("-",""),s=Me===S.d.postalCode?oe:le,c=o[s],u=Object.keys(Ye).length?null===Ye||void 0===Ye||null===(d=Ye[t])||void 0===d?void 0:d[r]:null===c||void 0===c?void 0:c[r];Ke({...Ye,[i]:u}),a===v.fieldOrder.length&&Me===S.d.postalCode&&u.length>4&&(l[S.d.prefecture]=u[3]||k.prefecture,l[S.d.cityTown]=u[4]||k.cityTown),u||Ve(!1)}!i&&M({...k,...l})},nt=()=>Object(y.jsx)("div",{className:"text-field-container",children:Be.map((function(e){return Object(y.jsx)(G.a,{className:"address-text-field",labelClassName:"text-field-title",containerClassName:"text-field-content",name:e.id,placeholder:Object(c.translateWithI18Next)(e.title)||e.title,value:k[e.id],onChange:t=>((e,t)=>{const a=e.target.value,i={...k};i[t]=a,M({...k,...i})})(t,e.id),maxLength:je?e.maxLegth:255},e.id)}))}),dt=(e,t)=>{const a=e;ye(a),a?lt(t,S.d.postalCode,1):lt("",S.d.chome,0)},rt=Object(i.useCallback)((e=>{null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]);return Object(y.jsxs)("div",{className:"delivery-address-form delivery-module-form","data-testid":"delivery-container",children:[Object(y.jsxs)("div",{className:"delivery-address-form-header",children:[Object(y.jsx)(A,{loggedIn:ge,formContent:s,storeSelection:{signInLink:!0,useMyLocation:!1}}),Object(y.jsx)("p",{className:"delivery-address-form-search-text",children:Object(c.translateWithI18Next)(ee)||ee}),Object(y.jsx)(w,{onTabSelection:e=>{const t=ke[e],a=t.id===k.deliverySearchType;f(t),_e(0),ye(Boolean(k[S.d.postalCode])),Ae(!1),Ve(!0),qe(!a),a&&k[t.fieldOrder[0].id]&&_e(Ee)},tabsList:ke,defaultSelectedTabIndex:We})]}),Me===S.d.address?(()=>{const e=Re+(De?2:0);return Object(y.jsxs)("div",{className:"address-search-form",children:[v.fieldOrder.map((function(t,a){if(a<=e){var i;const e=null===(i=v.fieldOrder[a])||void 0===i?void 0:i.id,o=Ye[e];if(!o)return null;const l=Object.keys(o),n=!ze&&(null===k||void 0===k?void 0:k[t.id]);return Object(y.jsx)(W,{dropdownList:l,dropdownTitleText:Object(c.translateWithI18Next)(t.title)||t.title,enableSearch:!0,onDropdownSelection:e=>lt(e,t.id,a+1),selectedText:n?null===k||void 0===k?void 0:k[t.id]:Object(c.translateWithI18Next)(t.title)},t.id)}return null})),De&&nt()]})})():(()=>{const e=Object.keys(Ye[S.d.chome]||[]).sort(),t=e.length>0;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(B,{defaultPostalValue:null===k||void 0===k?void 0:k[S.d.postalCode],verifyPostalCode:dt}),t&&(Te||De)&&Object(y.jsx)("div",{className:"address-search-form",children:Object(y.jsx)(W,{dropdownList:e,dropdownTitleText:Object(c.translateWithI18Next)(v.fieldOrder[1].title)||v.fieldOrder[1].title,enableSearch:!0,onDropdownSelection:e=>lt(e,v.fieldOrder[1].id,2),selectedText:(null===k||void 0===k?void 0:k[v.fieldOrder[1].id])||Object(c.translateWithI18Next)(v.fieldOrder[1].title)},v.fieldOrder[1].id)}),t&&De&&nt()]})})(),Object(y.jsx)(Y.c,{className:"delivery-address-form-confirm-cta ".concat(He?"":"disabled"),disabled:!He,onClick:ot,variant:"secondary","data-testid":"delivery-address-form-confirm-cta",children:Object(y.jsx)("span",{children:Object(c.translateWithI18Next)(X)||X})}),Ge?"":Object(y.jsxs)("div",{className:"undeliverable-address",ref:rt,children:[Object(y.jsx)(R.a,{show:!0,comingFrom:ue,errorObj:{showError:!0,errMsg:Object(c.translateWithI18Next)(et.text),errDesc:null,firstBtnText:Object(c.translateWithI18Next)(et.cta.label),firstBtnCTA:()=>{Se({type:J,value:{dispositionType:d.Jb.PICKUP}}),Ie(Object(O.u)())}}}),!E()(Xe)&&Object(y.jsxs)("div",{className:"third-party-delivery-services",children:[Object(y.jsx)("p",{className:"delivery-address-form-search-text",children:Object(c.translateWithI18Next)(tt.header)}),Object(y.jsx)("div",{className:"third-party-delivery-services__list",children:null===Xe||void 0===Xe||null===(t=Xe.items)||void 0===t?void 0:t.map((e=>{var t,a,i,o,l;const n=null===e||void 0===e?void 0:e.fields;return Object(y.jsxs)("a",{href:null===n||void 0===n?void 0:n.link,target:"_blank",rel:"noreferrer",className:"third-party-delivery-services__service",children:[Object(y.jsx)("span",{className:"third-party-delivery-services__image-container",children:Object(y.jsx)(V.a,{srcFile:"".concat(S.d.https).concat(null===n||void 0===n||null===(t=n.logo)||void 0===t||null===(a=t.fields)||void 0===a||null===(i=a.file)||void 0===i?void 0:i.url),alt:null===n||void 0===n||null===(o=n.logo)||void 0===o||null===(l=o.fields)||void 0===l?void 0:l.title,className:"third-party-delivery-services__images"})}),Object(y.jsx)("span",{className:"third-party-delivery-services__label",children:null===n||void 0===n?void 0:n.name}),Object(y.jsx)(V.a,{srcFile:pe,alt:"",className:"third-party-delivery-services__image"})]},null===n||void 0===n?void 0:n.name)}))}),Object(y.jsx)("p",{className:"third-party-delivery-services__notice",children:Object(c.translateWithI18Next)(tt.notice)})]})]}),Ze&&!P&&Object(y.jsxs)("div",{className:"delivery-saved-addresses",children:[Object(y.jsx)("div",{className:"placesautocomplete-border"}),Object(y.jsx)(K.a,{show:Ze,savedAddresses:Qe,handleSelectAddress:e=>{const t=e||$e;if(t){var a,i,o,l,n,d,r,s;const e=(null===t||void 0===t?void 0:t.name)||"",c=(null===t||void 0===t?void 0:t.pinCode)||"",u=(null===t||void 0===t||null===(a=t.addressLines)||void 0===a?void 0:a[0])||"",v=(null===t||void 0===t||null===(i=t.addressLines)||void 0===i?void 0:i[1])||"",O=(null===t||void 0===t||null===(o=t.addressLines)||void 0===o?void 0:o[2])||"",b=(null===t||void 0===t||null===(l=t.addressLines)||void 0===l?void 0:l[3])||"",m=(null===t||void 0===t||null===(n=t.addressLines)||void 0===n?void 0:n[4])||"",j=(null===t||void 0===t||null===(d=t.addressLines)||void 0===d?void 0:d[5])||"",h=(null===t||void 0===t||null===(r=t.addressLines)||void 0===r?void 0:r[6])||"",p=(null===t||void 0===t||null===(s=t.addressLines)||void 0===s?void 0:s[7])||"";M({...k,addressName:e,apartmentName:m,chome:O,cityTown:v,companyName:h,postalCode:c,prefecture:u,roomNumber:j,streetDetailAddress:b,specialNote:p});const g=it({localizationData:Ye,selectedAddress:k});Ke({...Ye,[S.d.selectedStore]:g}),fe(!0)}},shouldMaintainAddressObject:!0,scheduleOrderDateFormat:me})]})]})},de=a(121);const re=e=>{const{handleClose:t,handleGoBack:a,orderModeTypeItem:i,headerText:l,modalTitleId:n="",className:d,backDataTestId:r}=e;return Object(y.jsx)(o.a.Fragment,{children:Object(y.jsx)(de.a,{"data-testid":"deliveryAddressSearchFormModal",id:"deliveryAddressSearchForm",role:"dialog",modalTitleId:n,show:!0,classNames:"".concat(d," extra-small-modal"),showCloseBtn:!0,showBackBtn:!0,closeButtonHandler:t,backButtonHandler:a,modalTitle:l,autoFocus:!0,backDataTestId:r,children:i})})};var se=a(154),ce=a(46);const ue=(e,t)=>e?Object(c.translateWithI18Next)(null===T.a||void 0===T.a?void 0:T.a.ADD_NEW_ADDRESS):Object(c.translateWithI18Next)(t),ve=e=>{var t;const{contentData:a={},deliverySearchType:O,setDeliverySearchType:b,prefectureAddressScreen:j,closeModal:p=(()=>{}),address:g,modalType:N,updateSetOrderDetails:I,isAddressFromOrderProcessing:f}=e,{CHANGE_SCHEDULE_MODE:E,CURRENT_STORE_INFO:C,DISPOSITION_DATA:D,DISPOSITION_METHOD:A,FAV_STORE_NOT_IN_RADIUS:R,FROM_REORDER_MODAL_OPEN:_,REORDER_MODAL_OPEN:w,REORDER_STORE_CHANGED:k,SCHEDULE_ORDER_DATA:M,SEARCH_ORDER_DATA:P,SET_FIND_A_KFC_VIEW:F,SET_ORDER_NOW:W,SET_REDIRECTION_PATH:H,SET_SCHEDULE_ORDER:U,SCHEDULE_ORDER_CLICKED:B,SHOW_SCHEDULE_DISPOSITION:V}=s.a,{NAME_EXIST_ERROR:Y}=se.b,{CONFIG_SEARCH_SCREEN:K,CURRENT_STORE_INFO_STORAGE:J,DISPOSITION_TYPE:X,RENDER_COMP:Q,SET_CART_CLEAR:Z,SELECTED_ADDRESS:$}=d.gd,{POSTAL_CODE_CONTENTFUL:ee,CHOMES_CONTENTFUL:te,DROPOFF_ADDRESS:ae}=n.b,{ENABLE_ADDRESS_LOCALISATION:ie,SHOW_MAP_VIEW_BUTTON:oe}=ce.a,le=Object(l.b)(),{userOrderState:de,userOrderStateDispatch:ve}=Object(i.useContext)(r.a),{dispositionStateData:Oe,searchStoreData:be,scheduleOrderData:me}=de,{changeFlow:je=!1}=me||{},{dispositionType:he=localStorage.getItem(X)}=Oe||"",{componentOptions:pe,tenantId:ge,isUberServiceableEnabled:Ne}=Object(l.c)((e=>e.tenantReducer||{})),{savedAddresses:Se}=Object(l.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),Ie=null===pe||void 0===pe||null===(t=pe.web)||void 0===t?void 0:t.dispositionConfig,{searchStoreModalContent:xe={}}=a,{formContent:fe={}}=xe,[Ee,Ce]=Object(i.useState)(!1),{configSearchScreen:Te=localStorage.getItem(K)}=be,ye="".concat(null===he||void 0===he?void 0:he.toUpperCase(),"_").concat(Te),De=Object(m.Jd)(null===de||void 0===de?void 0:de.dispositionNew)?JSON.parse(localStorage.getItem(d.gd.DISPOSITION_NEW)):null===de||void 0===de?void 0:de.dispositionNew,[Ae,Re]=o.a.useState(null===g||void 0===g?void 0:g.name),[_e,we]=o.a.useState(!1),[Le,ke]=Object(i.useState)(!1),{modalHeaderTitle:Me,shouldShowDisposition:Pe,shouldShowSearchStore:Fe}={...null===v.b||void 0===v.b?void 0:v.b[ye],...null===Ie||void 0===Ie?void 0:Ie[ye]},We=Me,{storesWithStatus:He=[],deliveryLocalization:Ue=null,isDeliveryLocalizationLoading:Be=!0,isStoreStatusLoading:Ge=!1,storesSatusError:Ve=!1}=Object(l.c)((e=>e.storesReducer||{})),[Ye,Ke]=Object(i.useState)(h.f),ze=Object(q.a)(),qe=Object(i.useCallback)((e=>{var t;Ne&&Object(h.e)(null===e||void 0===e||null===(t=e.summary)||void 0===t?void 0:t.deliveryPartner)?(ve({type:M,value:{showScheduleOrderCatering:!1,store:e}}),ve({type:P,value:{showSearchStore:!0,configSearchScreen:v.a}}),ve({type:F,value:{findAKFC:!1}}),ve({type:V,value:{showSheduleDisposition:!1}}),ve({type:C,value:e}),ve({type:E,value:{changeScheduleModeFlag:!1}}),ve({type:B,value:{scheduleModeClicked:!1}}),ve({type:W,value:{showOrderNow:!1}}),ve({type:U,value:{showScheduleOrder:!1}}),ve({type:R,value:{showNotInRadiusError:!1}}),ve({type:ie,value:!1}),ve({type:oe,value:!0})):(ve({type:M,value:{showScheduleOrderCatering:!0,store:e}}),ve({type:P,value:{showSearchStore:!1}}),ve({type:V,value:{showSheduleDisposition:!0}}),ve({type:C,value:e}),ve({type:E,value:{changeScheduleModeFlag:!1}}),ve({type:B,value:{scheduleModeClicked:!0}}),ve({type:W,value:{showOrderNow:!1}}),ve({type:U,value:{showScheduleOrder:!0}}),ve({type:R,value:{showNotInRadiusError:!1}})),localStorage.setItem(J,JSON.stringify(e))}),[E,C,J,R,B,M,P,W,U,V,ve]);Object(i.useEffect)((()=>{He.length>0&&Ee&&!Ge&&qe(He[0])}),[he,Ee,Ge,qe,He]);const Je=Object(i.useCallback)((e=>{e.stopPropagation(),e.preventDefault(),localStorage.removeItem(Z),localStorage.setItem(Q,!0),je||ve({type:M,value:{selectedAddress:{}}}),I&&I({isOpenSaveDeliveryAddressModal:!1}),ve({type:D,value:{showDisposition:!1}}),ve({type:A,value:{dispositionType:null===De||void 0===De?void 0:De.type}}),ve({type:P,value:{showSearchStore:!1}}),ve({type:H,value:{redirectionOrder:""}}),ve({type:w,value:{reorderModalOpen:!1}}),ve({type:_,value:{fromReorderFlag:!1}}),ve({type:k,value:{storeChanged:!1}}),ve({type:F,value:{findAKFC:window.location.pathname===d.Ae.FIND_STORE}}),p()}),[je,D,A,null===De||void 0===De?void 0:De.type,_,Q,w,k,M,P,Z,F,H,ve]);Object(i.useEffect)((()=>{const e=e=>{27===e.keyCode&&Je(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[Je]);const Xe=Object(y.jsxs)("div",{className:"address-field-container",children:[j&&Object(y.jsx)("div",{className:"name-field",children:Object(y.jsx)(G.a,{className:"address-text-field",labelClassName:"text-field-title",containerClassName:"text-field-content",name:"name",placeholder:Object(c.translateWithI18Next)(null===T.a||void 0===T.a?void 0:T.a.ADDRESS_NICK_NAME),value:Ae,onChange:e=>Re(e.target.value),onBlur:e=>{const t=Se.some((t=>t.name===e.target.value));ke(!!t)},maxlength:10,errorIcon:L.a.Error,errorIconClassName:"flex-div",helperText:Object(c.translateWithI18Next)(Y),helperTextClassName:"error-text",error:Le})}),Object(y.jsx)(ne,{changeFlow:je,formContent:fe,dispositionType:null===he||void 0===he?void 0:he.toUpperCase(),deliveryLocalizationData:Ue,getStoreData:e=>{Ce(!0);const[t]=e,a=Object(m.Ib)(he.toUpperCase()),i=[{id:t}];Object(h.a)(i,a,le,ge)},saveAddressData:(e,t,a)=>{const[i,o,l]=a,n={...Ye,chomeId:o,cityId:String(l)};localStorage.setItem(ae,JSON.stringify(e)),localStorage.setItem($,JSON.stringify(n)),ze(Object(z.d)({key:null===d.qe||void 0===d.qe?void 0:d.qe.SELECTED_ADDRESS,value:n})),ve({type:M,value:{deliveryAddress:e,deliveryAddressLine:t,selectedAddress:n,storeId:i}})},selectedAddress:Ye,setSelectedAddress:Ke,deliverySearchType:O,onDeliveryTypeChanged:e=>{b(e)},isDeliveryLocalizationLoading:Be,storesStatusError:Ve,prefectureAddressScreen:j,addressName:Ae,address:g,modalType:N,isPrimaryAddress:_e,closeModal:p,isAccount:!0,addressNameExist:Le,updateSetOrderDetails:I,isAddressFromOrderProcessing:f}),j&&Object(y.jsxs)("div",{className:"default-address-section",children:[Object(y.jsx)("input",{type:"checkbox",name:"isPrimary","data-testid":"default-testid",id:"default-address",value:_e,defaultChecked:(()=>{const e=!(null!==Se&&void 0!==Se&&Se.length)&&!N;return(null===g||void 0===g?void 0:g.isPrimary)||e})(),onChange:()=>we(!_e),disabled:Se.length<1||N&&Se.length<=1}),Object(y.jsx)("div",{className:"default-label-text",children:Object(y.jsx)("label",{htmlFor:"default-address",children:Object(c.translateWithI18Next)(d.hd)})})]})]});return Object(i.useEffect)((()=>{le(Object(u.b)());const e=(null===O||void 0===O?void 0:O.id)===S.d.postalCode?ee:te;le(Object(x.e)(e))}),[le,null===O||void 0===O?void 0:O.id,ee,te]),Object(i.useEffect)((()=>{!Be&&Ue&&le(Object(u.a)())}),[Be,Ue,le]),Object(y.jsx)(re,{handleClose:Je,orderModeTypeItem:Xe,headerText:ue(j,We),handleGoBack:e=>{e.stopPropagation(),e.preventDefault(),ve({type:D,value:{showDisposition:Pe}}),je||ve({type:M,value:{selectedAddress:{}}}),ve({type:P,value:{showSearchStore:Fe,configSearchScreen:v.a,searchedPlaceNonLocalized:null===be||void 0===be?void 0:be.searchedPlaceNonLocalized}})},modalTitleId:"delivery-address-search-form",className:"search-store-global-container",backDataTestId:"back-btn-global-modal-id"})};ve.defaultProps=n.a;t.default=ve},831:function(e,t,a){"use strict";a.r(t);var i=a(3),o=a(25),l=a(102),n=a(268),d=a(171),r=a(76),s=a(0),c=a(5),u=a(1068),v=a(939),O=a(2);t.default=e=>{var t,a,b;const m=Object(o.b)(),{userOrderState:j,userOrderStateDispatch:h}=Object(i.useContext)(r.a),{tenantReducer:p,orderHistoryReducer:g,orderReducer:N,profileReducer:S,cartReducer:I,paymentsContentReducer:x,appStateReducer:f,contentReducer:E}=Object(o.c)((e=>e)),{flatResponse:{productMapById:C={}}={}}=null!==(t=Object(o.c)((e=>{let{menuReducer:t}=e;return t})))&&void 0!==t?t:{},[T,y]=Object(i.useState)(u.a),[D,A]=Object(i.useState)({height:0,width:0}),{ORDER_HISTORY_ITEM:R}=s.Oc,{ITEM_IMAGE_HEIGHT_MOBILE:_,ITEM_IMAGE_WIDTH_MOBILE:w,ITEM_WIDTH_DESK_PRCNT:L}=R,k=Object(i.useCallback)((e=>{y&&y((t=>({...t,...e})))}),[]),M=()=>{const e=Object(c.Ud)(window.innerWidth);k({isMobileView:e});const t=Object(c.Tc)(e,{height:_,width:w},{height:Object(c.vc)(window.innerWidth,L),width:Object(c.vc)(window.innerWidth,L)});A(t)};return Object(i.useEffect)((()=>(window.scrollTo(0,0),window.addEventListener(s.we,M),M(),()=>{m(Object(n.f)()),localStorage.removeItem(null===s.gd||void 0===s.gd?void 0:s.gd.LOAD_MORE_ORDER_HISTORY)})),[]),Object(i.useEffect)((()=>{Object(v.f)(m)}),[m]),Object(i.useEffect)((()=>{var t;null!==p&&void 0!==p&&p.tenantId&&null!==S&&void 0!==S&&S.customerId&&Object(u.m)({props:e,dispatch:m,tenantReducer:p,profileReducer:S,updateSetOrderHistoryDetails:k,openReorderModal:null===j||void 0===j||null===(t=j.reorderFlag)||void 0===t?void 0:t.reorderModalOpen,userOrderStateDispatch:h})}),[null===p||void 0===p?void 0:p.tenantId,null===S||void 0===S?void 0:S.customerId,null===j||void 0===j||null===(a=j.reorderFlag)||void 0===a?void 0:a.reorderModalOpen,p]),Object(i.useEffect)((()=>{null!==f&&void 0!==f&&f.userStatus&&Object(u.f)({appStateReducer:f,updateSetOrderHistoryDetails:k})}),[null===f||void 0===f?void 0:f.userStatus]),Object(i.useEffect)((()=>{x&&Object(u.l)({paymentsContentReducer:x,updateSetOrderHistoryDetails:k})}),[x]),Object(i.useEffect)((()=>{var e;null!==I&&void 0!==I&&I.cartData&&null!==I&&void 0!==I&&null!==(e=I.cartData)&&void 0!==e&&e.id&&Object(u.g)({cartReducer:I,updateSetOrderHistoryDetails:k})}),[null===I||void 0===I?void 0:I.cartData]),Object(i.useEffect)((()=>{(null===T||void 0===T?void 0:T.tenantId)&&Object(u.b)(T)}),[null===T||void 0===T?void 0:T.tenantId]),Object(i.useEffect)((()=>{(null===g||void 0===g?void 0:g.orderHistory)&&(null===S||void 0===S?void 0:S.customerId)&&(null===T||void 0===T||!T.showFavoriteModal)&&Object(u.j)({orderHistoryReducer:g,orderHistoryDetails:T,profileReducer:S,updateSetOrderHistoryDetails:k,tenantReducer:p})}),[null===g||void 0===g?void 0:g.orderHistory,null===S||void 0===S?void 0:S.favouriteOrders]),Object(i.useEffect)((()=>{k({orderHistoryLoading:null===g||void 0===g?void 0:g.orderHistoryLoading})}),[null===g||void 0===g?void 0:g.orderHistoryLoading]),Object(i.useEffect)((()=>{Object(c.ge)(null===N||void 0===N?void 0:N.response)&&Object(u.k)({orderReducer:N,orderHistoryDetails:T,updateSetOrderHistoryDetails:k,tenantReducer:p})}),[null===N||void 0===N?void 0:N.response]),Object(i.useEffect)((()=>{var e;(null===T||void 0===T||null===(e=T.orderHistory)||void 0===e?void 0:e.length)>0&&Object(u.i)({orderHistoryDetails:T,updateSetOrderHistoryDetails:k})}),[null===T||void 0===T?void 0:T.orderHistory]),Object(i.useEffect)((()=>{null!==T&&void 0!==T&&T.selectedOrderId?Object(u.d)(T):m(Object(l.e)())}),[null===T||void 0===T?void 0:T.selectedOrderId]),Object(i.useEffect)((()=>{var e,t;(null===T||void 0===T||null===(e=T.completedOrderHistory)||void 0===e?void 0:e.length)>0&&k({totalNumOfPages:Math.ceil((null===T||void 0===T||null===(t=T.completedOrderHistory)||void 0===t?void 0:t.length)/(null===T||void 0===T?void 0:T.displayNumOfRecords))})}),[null===T||void 0===T?void 0:T.completedOrderHistory]),Object(i.useEffect)((()=>{Object(u.h)({contentReducer:E,updateSetOrderHistoryDetails:k})}),[null===E||void 0===E||null===(b=E.response)||void 0===b?void 0:b.homeContentfulResp]),Object(c.Tc)(D.height,(P={orderHistoryDetails:T,updateSetOrderHistoryDetails:k,imageOrderContainerSize:D,userParams:null===f||void 0===f?void 0:f.userStatus,tenantReducer:p,contentReducer:E,productMapById:C},Object(O.jsx)(d.a,{...P,testId:"order_history_view",importPath:"ORDER_HISTORY_VIEW"})),Object(O.jsx)(O.Fragment,{}));var P}},876:function(e,t,a){"use strict";a.r(t);var i=a(3),o=a.n(i),l=a(5),n=a(25),d=a(63),r=a(6),s=a(15),c=a(43),u=a(154),v=a(52),O=a(76),b=a(38),m=a(61),j=a(212),h=a(111),p=a(1013),g=a(318),N=a(101),S=a(49),I=a(14),x=a(921),f=a(36),E=(a(977),a(4)),C=a(1019),T=a(2);const{MORE_INFO:y,SCHEDULE_ORDER:D,ORDER_NOW:A}=E.a,R=(e,t,a,i)=>(e=>Boolean(Object(l.Pd)(e)||Object(l.Od)(e)))(e)&&((e,t,a)=>e||t&&a)(t,a,i),_=(e,t,a,i)=>Object(T.jsx)(f.a,{"data-testid":"schedule-order",variant:f.b.tertiary,className:"padding-set wdth-set order-pad ml2 button search-store-card-btn schedule-order",onClickHandler:o=>a?i(o,t,D):e(o,t,D),disabled:!a&&!(null!==t&&void 0!==t&&t.isOpen),children:Object(T.jsxs)("span",{children:[" ",Object(r.translateWithI18Next)(D)]})});var w=e=>{var t,a,i,o,d,u,v,O,j,h,p,N,S,I,D,w,L,k,M,P;const F=Object(n.c)((e=>e.tenantReducer)),W=null===F||void 0===F||null===(t=F.savedAddressPage)||void 0===t?void 0:t.showStateCityAddAddress,{componentOptions:{web:{dispositionConfig:{enableScheduleOrder:H,enableClickCollectScheduleOrder:U,enableAsapOrder:B}={}}={}}={},is24HoursFormatEnabled:G,isViewMenuDisabled:V}=null!==F&&void 0!==F?F:{},Y=null===F||void 0===F||null===(a=F.storeSearch)||void 0===a?void 0:a.shouldNavigateToPickupDisposition,K=null===F||void 0===F||null===(i=F.componentOptions)||void 0===i||null===(o=i.web)||void 0===o||null===(d=o.storeSearch)||void 0===d?void 0:d.enableDateHighlight,{item:z,index:q,classname:J,setStoreInfo:X,showMap:Q,removeFromFavoriteHandler:Z,orderNowButtonClickHandler:$,cardHeading:ee,showAvailableService:te,isMobile:ae,showMoreInfo:ie,setShowCard:oe,showDistance:le,dispositionType:ne,handleOrderNowButtonHandle:de}=e,{ORDER_NOW_CTA_TEXT:re}=b.a,se=localStorage.getItem("serviceType"),ce=Object(m.g)(),ue=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),{localized:ve=!1}=Object(l.kd)(ue);return Object(T.jsxs)("div",{className:"bgv-set store-card flex-dir ".concat(J),children:[Object(T.jsx)("div",{className:"address-block",children:Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"card-store-container",children:[Object(T.jsx)("span",{className:"card-store-name card-store-global",children:null===z||void 0===z||null===(u=z.storeBasic)||void 0===u||null===(v=u.dname[0])||void 0===v?void 0:v.value}),le&&(null===z||void 0===z?void 0:z.distance)&&Object(T.jsx)("span",{className:"store-distance",children:Object(g.r)(null===z||void 0===z||null===(O=z.distance)||void 0===O?void 0:O.value)}),Q&&!ie&&Object(T.jsx)("span",{className:"store-index fl-rgt",children:ee}),!ae&&Q&&ie&&Object(T.jsx)(c.a,{"data-testid":"favorite-img",srcFile:s.a.PopupCloseBtn,alt:"close-btn",className:"close-cross-btn",onClick:()=>oe(!1)}),ae&&Object(T.jsx)(c.a,{"data-testid":"favorite-img",srcFile:s.a.FavoriteFillImage,alt:"favorite",className:"favorite-img fav-img-mobile",onClick:()=>{var e;return Z(null===z||void 0===z||null===(e=z.storeBasic)||void 0===e?void 0:e.id)}})]}),Object(T.jsxs)("div",{className:"card-content",children:[Object(T.jsx)("div",{className:"order-items",children:te(null===z||void 0===z?void 0:z.availableServicesPerChannel)}),Object(T.jsxs)("div",{className:"w-100",children:[Object(T.jsx)("span",{className:"store-address",children:Object(l.Wb)(null===z||void 0===z||null===(j=z.storeBasic)||void 0===j?void 0:j.address,W)}),Object(T.jsxs)("div",{className:"info-timing ".concat(!(null!==z&&void 0!==z&&z.isOpen)&&!Object(l.s)(z)&&"info-timingClosed"),children:[Object(T.jsx)("span",{children:null===(h=Object(g.w)(z,null,null,ne))||void 0===h?void 0:h.storeTimeMessage}),Object(T.jsx)("span",{className:"ml-2 caretIcon store-timing-msg","data-testid":"toggle-hours",onClick:()=>{var e;return Object(g.V)(null===z||void 0===z||null===(e=z.storeBasic)||void 0===e?void 0:e.id)},id:"hours-".concat(null===z||void 0===z||null===(p=z.storeBasic)||void 0===p?void 0:p.id),children:Object(T.jsx)(c.a,{id:"caret-".concat(null===z||void 0===z||null===(N=z.storeBasic)||void 0===N?void 0:N.id),srcFile:s.a.AccordianArrow,alt:"caretIcon"})})]})]}),Object(T.jsxs)("div",{id:"view-".concat(null===z||void 0===z||null===(S=z.storeBasic)||void 0===S?void 0:S.id),className:"hours-view hoursHidden",children:[!(null===(I=Object(g.A)(se,null===z||void 0===z||null===(w=z.summary)||void 0===w?void 0:w.timings))||void 0===I||null===(D=I.storeTimingData)||void 0===D||!D.length)&&Object(T.jsx)("div",{className:"dispotion-hours-text",children:Object(g.B)(se)}),null===(L=Object(g.A)(se,null===z||void 0===z||null===(M=z.summary)||void 0===M?void 0:M.timings))||void 0===L||null===(k=L.storeTimingData)||void 0===k?void 0:k.map((e=>Object(T.jsx)("div",{children:Object(T.jsxs)("div",{className:"hours-text",children:[Object(T.jsx)("span",{className:"day-detail",children:Object(C.c)(e,K)}),Object(T.jsxs)("span",{className:"time-details",children:[Object(C.d)(e,K,G)," "]})]})},null===e||void 0===e?void 0:e.day)))]}),Object(T.jsxs)("div",{className:"more-info-details",children:[Object(T.jsx)("span",{children:Object(T.jsx)(f.a,{variant:f.b.tertiary,"data-testid":"more-info",className:"more-info-link",onClick:()=>Object(l.se)(null===e||void 0===e?void 0:e.item,ce),children:Object(r.translateWithI18Next)(y)})}),!Q&&Object(T.jsxs)("span",{className:"map-link","data-testid":"map-handler",onClick:()=>X(z,q),children:[Object(T.jsx)("img",{src:s.a.Direction,alt:"direction",className:"KfcDirectionIcon"}),Object(T.jsx)("span",{className:"card-map-link",children:Object(r.translateWithI18Next)(E.a.GET_DIRECTION)})]})]}),Object(T.jsx)("div",{className:"facilities",children:(null===(P=Object(x.a)(null===z||void 0===z?void 0:z.storeBasic))||void 0===P?void 0:P.length)>0&&Object(x.a)(null===z||void 0===z?void 0:z.storeBasic).map((e=>Object(T.jsx)(c.a,{"data-testid":"",srcFile:e.image,alt:Object(l.id)(e.label,""),className:"facility-img",title:e.label},e.key)))})]})]})}),Object(T.jsxs)("div",{className:"button-block fullWidth align-center mt-2 ".concat(Q&&ie?"fav-store-block":""),children:[!Q&&!ae&&Object(T.jsx)("span",{className:"flex-dir flex-dir-pos",children:Object(T.jsx)(c.a,{"data-testid":"favorite-img",srcFile:s.a.FavoriteFillImage,alt:"favorite",className:"favorite-img",onClick:()=>{var e;return Z(null===z||void 0===z||null===(e=z.storeBasic)||void 0===e?void 0:e.id)}})}),Object(T.jsxs)(T.Fragment,{children:[!V&&(B?(null===ne||void 0===ne?void 0:ne.toLowerCase())!==b.a.DELIVERY_SERVICE&&Object(T.jsx)(f.a,{"data-testid":"order-now",className:"padding-set wdth-set order-pad ml2 button redButton search-store-card-btn",onClickHandler:e=>Y?de(e,z,A):$(e,z,A),disabled:!(null!==z&&void 0!==z&&z.isOpen),children:Object(r.translateWithI18Next)(re)}):Object(T.jsx)(f.a,{"data-testid":"order-now",className:"padding-set wdth-set order-pad ml2 button redButton search-store-card-btn",onClickHandler:e=>Y?de(e,z,A):$(e,z,A),disabled:!(null!==z&&void 0!==z&&z.isOpen),children:Object(r.translateWithI18Next)(re)})),R(z,H,U,ve)&&_($,z,Y,de)]})]})]})},L=a(0),k=a(943),M=a(216),P=a(92),F=a(84),W=a(46),H=a(981),U=a(69),B=a(110);const{SET_ORDER_NOW:G,SET_SCHEDULE_ORDER:V,CHANGE_SCHEDULE_MODE:Y,SCHEDULE_ORDER_CLICKED:K,SHOW_SCHEDULE_DISPOSITION:z,SET_SCHEDULE_PAGE:q,SET_CURRENT_DISPOSITION:J}=W.a;var X=e=>{var t,a,o,v,x,C,y,D,A,R,_,W,X,Q,Z;const{favouriteStores:$,removeFromFavoriteHandler:ee,showMoreInfo:te,isMobile:ae,savedAddresses:ie}=e,[oe,le]=Object(i.useState)(),[ne,de]=Object(i.useState)({}),[re,se]=Object(i.useState)(!1),[ce,ue]=Object(i.useState)(!1),[ve,Oe]=Object(i.useState)(!1),[be,me]=Object(i.useState)({}),[je,he]=Object(i.useState)(0),[pe,ge]=Object(i.useState)(null),{userOrderState:Ne,userOrderStateDispatch:Se}=Object(i.useContext)(O.a);let Ie=Object(n.c)((e=>e.appStateReducer.userStatus));const xe=Object(n.c)((e=>e.profileReducer)),fe=Object(n.c)((e=>e.tenantReducer)),Ee=null===fe||void 0===fe||null===(t=fe.componentOptions)||void 0===t||null===(a=t.web)||void 0===a||null===(o=a.dispositionConfig)||void 0===o?void 0:o.showLabelOnMapPin,{componentOptions:Ce={}}=Object(l.kd)(null===fe||void 0===fe?void 0:fe.componentOptions),Te=null===fe||void 0===fe?void 0:fe.tenantId,{shouldCheckDropOffAddress:ye=!0}=Object(l.kd)(null===Ce||void 0===Ce||null===(v=Ce.web)||void 0===v?void 0:v.shouldCheckDropOffAddress),De=null===fe||void 0===fe||null===(x=fe.componentOptions)||void 0===x||null===(C=x.web)||void 0===C||null===(y=C.dispositionConfig)||void 0===y?void 0:y.enableClickCollectScheduleOrder,Ae=null===fe||void 0===fe||null===(D=fe.componentOptions)||void 0===D||null===(A=D.web)||void 0===A||null===(R=A.dispositionConfig)||void 0===R?void 0:R.enableScheduleOrder,Re=null===fe||void 0===fe||null===(_=fe.componentOptions)||void 0===_||null===(W=_.web)||void 0===W||null===(X=W.scheduledDelivery)||void 0===X?void 0:X.allowScheduleOrderForDispositions,_e=null===fe||void 0===fe||null===(Q=fe.storeSearch)||void 0===Q?void 0:Q.shouldNavigateToPickupDisposition,{localized:we}=Ie,Le=Object(k.a)(Ne),ke=De&&(null===Re||void 0===Re?void 0:Re.includes(null===Le||void 0===Le||null===(Z=Le.type)||void 0===Z?void 0:Z.toLowerCase())),{allowedServices:Me=[]}=Object(l.kd)(null===fe||void 0===fe?void 0:fe.basic),{pastOrders:Pe=[],favouriteOrders:Fe=[]}=Object(l.kd)(xe),{SEARCH_ORDER_DATA:We,SELECTED_TILE_DATA:He,SCHEDULE_ORDER_TIME_DATA:Ue,CURRENT_STORE_INFO:Be,DISPOSITION_DATA:Ge,SCHEDULE_ORDER_DATA:Ve,FAV_STORE_NOT_IN_RADIUS:Ye,DISPOSITION_METHOD:Ke,SET_DISPOSITION:ze}=I.a,{MY_FAV_STORES:qe}=u.b,Je=Object(n.b)(),Xe={history:Object(m.g)(),dispatch:Je,tenantId:Te,userParams:Ie},Qe=Object(B.b)(U.b);Object(i.useEffect)((()=>{const e=[...Pe,...Fe].find((e=>Object(l.yd)(null===e||void 0===e?void 0:e.service)));((e,t,a)=>{Object(l.yd)(null===e||void 0===e?void 0:e.type)&&a(t)})(Le,e,le)}),[Pe.length,Fe.length]);const Ze=(e,t,a)=>{let i=e;et(),localStorage.setItem(L.gd.CURRENT_STORE_INFO_STORAGE,JSON.stringify(i)),(e=>{Se({type:Be,value:e})})(i),Object(M.e)(Object(l.Lc)(null===i||void 0===i?void 0:i.name)),Se({type:Ue,value:{selectedDateTime:t}}),Se({type:J,value:{currentDisposition:a}}),a=((e,t)=>e?L.ce:t)(_e,a),localStorage.setItem(L.gd.TENANT_REDUCER,JSON.stringify(fe)),localStorage.setItem(L.gd.SELECTED_TILE,JSON.stringify({})),localStorage.setItem(L.gd.DISPOSITION_TYPE,a),localStorage.setItem(L.gd.STORE_INFO,JSON.stringify(i)),localStorage.setItem(L.gd.DATE_TIME_ORDER,JSON.stringify(t))},$e=localStorage.getItem(L.gd.DISPOSITION_TYPE),et=()=>{Se({type:He,value:{selectedData:{}}})},tt=async(e,t,a)=>{localStorage.setItem(L.gd.SET_CART_CLEAR,!0),de(t),e.preventDefault(),e.stopPropagation(),Object(g.P)();const i="FORM";localStorage.setItem(L.kb,JSON.stringify(t)),localStorage.setItem(L.gd.CONFIG_SEARCH_SCREEN,i),Se({type:q,value:{comingFromFavouriteStoreCard:!0}}),localStorage.setItem(L.gd.CONFIG_SEARCH_SCREEN,i),it(t,void 0,a)},at=(e,t,a)=>{var i,o,n,d,r,s;const c=(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(o=i.status)||void 0===o?void 0:o.currentStatus)===L.Nd,u=Object(l.wd)(e),v=Object(H.c)(ke,Ae,c,u);var O;if(((e,t,a)=>{const{enableClickCollectScheduleOrderFlag:i,userOrderState:o,store:l,enableScheduleOrder:n,goToMenuObj:d,isSetASAPOrderStorageData:r}=a;if(e===b.a.ORDER_NOW){const a=n||i;r?(t({type:I.a.SET_ORDER_NOW,value:{showOrderNow:!1}}),t({type:I.a.SET_SCHEDULE_ORDER,value:{showScheduleOrder:!0}}),t({type:I.a.SET_ASAP_SCHEDULING,value:{enableASAPScheduling:!0}}),Boolean(i||n&&e===b.a.BROWSE_MENU)&&Object(H.b)(t,d,o,l,a,i)):(t({type:G,value:{showOrderNow:!0}}),t({type:V,value:{showScheduleOrder:!1}}),t({type:K,value:{scheduleModeClicked:!1}}))}e===b.a.ORDER_SCHEDULE&&(t({type:Y,value:{changeScheduleModeFlag:!1}}),t({type:K,value:{scheduleModeClicked:!0}}),t({type:G,value:{showOrderNow:!1}}),t({type:V,value:{showScheduleOrder:!0}}),t({type:z,value:{showSheduleDisposition:!0}}))})(a,Se,{enableClickCollectScheduleOrderFlag:ke,userOrderState:Ne,store:e,enableScheduleOrder:Ae,goToMenuObj:Xe,isSetASAPOrderStorageData:v}),t===L.cf){if(!we||we&&(null===Le||void 0===Le?void 0:Le.type)===L.M.toUpperCase())return Se({type:Ge,value:{showDisposition:!0}}),void localStorage.setItem(L.gd.RETAIN_ADDRESS,[null===e||void 0===e||null===(O=e.name)||void 0===O?void 0:O[0].value])}else t===L.M&&(Se({type:Ke,value:{dispositionType:L.M}}),Se({type:We,value:{configSearchScreen:h.c}}),localStorage.setItem(L.gd.SERVICE_TYPE,L.M));Se({type:ze,value:{oldvalue:Le}});let m={time:L.t,interval:null===e||void 0===e||null===(n=e.summary)||void 0===n||null===(d=n.timings.scheduled.periods[0])||void 0===d?void 0:d.interval,date:new Date,selectedTime:L.t};const j={storeID:null===e||void 0===e?void 0:e.id,disposition:null===Le||void 0===Le?void 0:Le.type,postCode:null===e||void 0===e||null===(r=e.addresses[0])||void 0===r||null===(s=r.address)||void 0===s?void 0:s.pinCode},p=Object(k.a)(Ne);Ze(e,m,null===p||void 0===p?void 0:p.type),Object(S.y)(j),Se({type:We,value:{showSearchStore:!1}}),v&&a!==b.a.ORDER_SCHEDULE||Se({type:Ve,value:{showScheduleOrderCatering:!0,changeFlow:Object(l.Tc)(Object(l.db)(t,t===L.M),!1,!0)}})},it=async(e,t,a)=>{var i;const o=((e,t,a,i)=>{var o,n;return e?Object(l.Ib)(null===i||void 0===i||null===(o=i.authoredContent)||void 0===o?void 0:o.defaultdisposition):Object(l.Tc)(t===L.M,Object(l.Ib)(L.M),Object(l.db)(a,null===a||void 0===a?void 0:a.type)?Object(l.Ib)(null===a||void 0===a?void 0:a.type):Object(l.Ib)(null===i||void 0===i||null===(n=i.authoredContent)||void 0===n?void 0:n.defaultdisposition))})(_e,t,Le,fe);Je(Object(d.l)({storeId:null===e||void 0===e||null===(i=e.storeBasic)||void 0===i?void 0:i.id,tenantId:null===fe||void 0===fe?void 0:fe.tenantId},(i=>{var n;const r={data:Object(l.B)([{id:null===e||void 0===e||null===(n=e.storeBasic)||void 0===n?void 0:n.id}],o,null,ye,null===Qe||void 0===Qe?void 0:Qe.latLong),store:[{...i,service:o}],tenantId:null===fe||void 0===fe?void 0:fe.tenantId};Je(Object(d.d)(r,(e=>{de(e[0]),at(e[0],t,a)})))})))},ot=async(e,t,a)=>{localStorage.setItem(L.gd.SET_CART_CLEAR,!0),de(t),e.preventDefault(),e.stopPropagation(),Object(g.P)();const{unavailableServiceinfo:i}=ct(null===t||void 0===t?void 0:t.availableServicesPerChannel,!0);if(Object(l.db)(oe,!i.includes(L.M)))return void se(!0);let o;var n;(null===Le||void 0===Le?void 0:Le.type)===L.yb.toUpperCase()&&(o=null===Ne||void 0===Ne||null===(n=Ne.eligibleStore)||void 0===n?void 0:n.find((e=>{var a;return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t||null===(a=t.storeBasic)||void 0===a?void 0:a.id)})));if(we){var d;if(!o&&(null===Le||void 0===Le?void 0:Le.type)===L.yb.toUpperCase())return Se({type:We,value:{showSearchStore:!0,searchedPlaceNonLocalized:localStorage.getItem(L.gd.RETAIN_ADDRESS),configSearchScreen:h.c}}),void Se({type:Ye,value:{showNotInRadiusError:!0,notInRadiusRestaurant:Object(l.Lc)(null===t||void 0===t||null===(d=t.storeBasic)||void 0===d?void 0:d.dname)}});it(t,void 0,a)}else{var r;Se({type:Ge,value:{showDisposition:!0}}),localStorage.setItem(L.gd.RETAIN_ADDRESS,[Object(l.Lc)(null===t||void 0===t||null===(r=t.storeBasic)||void 0===r?void 0:r.dname)])}},lt=()=>{ue(!ce),Oe(!ce)};Object(i.useEffect)((()=>{Oe(!0),nt()}),[je,pe]);const nt=()=>{const e=$.map((e=>({lat:e.storeBasic.location.latitude,lng:e.storeBasic.location.longitude})));me(e)},dt=(e,t)=>{nt(),ge(e),he(t),lt()},rt=e=>{const t=(e=>{var t,a;const{futureDates:i,scheduled:o,asap:n}=Object(l.kd)(null===e||void 0===e||null===(t=e.summary)||void 0===t?void 0:t.timings),{interval:d=0,startEndTime:r={}}=Object(l.kd)((null===o||void 0===o||null===(a=o.periods)||void 0===a?void 0:a.length)&&o.periods[0]),{from:s,to:c}=Object(l.kd)(r),{unavailibilities:u}=Object(l.kd)(o);return Object(N.j)(s,c,d,null===n||void 0===n?void 0:n.isAvailable,Object(l.db)(1===(null===i||void 0===i?void 0:i.length),Object(l.ce)()),u)})(e).length;return Object(l.Tc)(t,Object(r.translateWithI18Next)(E.a.TODAY),Object(r.translateWithI18Next)(E.a.TOMORROW))},st=e=>{var t;const a=e.summary,{operatingHours:i=[]}=Object(l.Tc)(null===a||void 0===a||null===(t=a.timings)||void 0===t?void 0:t.operatingHours,null===a||void 0===a?void 0:a.timings,[]);return Object(g.g)(e.isOpen,i)},ct=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=e&&Object(g.p)(e),{services:i=[]}=Object(l.id)(null===a||void 0===a?void 0:a[0],[]),o=i.filter((e=>Object(l.Ib)(e))),n=null===Me||void 0===Me?void 0:Me.filter((e=>!o.includes(e)));if(t)return{availableServiceinfo:o,unavailableServiceinfo:n};return[...i.map(((e,t)=>Object(T.jsxs)("div",{className:"store-order-options",children:[Object(T.jsx)("span",{children:Object(T.jsx)(c.a,{"data-testid":"",srcFile:s.a.GreenTickImage,alt:"tick",className:"tick-image"})}),Object(T.jsx)("span",{children:Object(l.Tc)(e===L.ee,Object(r.translateWithI18Next)(b.a.PICK_UP),Object(r.translateWithI18Next)(e))})]},t))),...null===n||void 0===n?void 0:n.map(((e,t)=>Object(T.jsxs)("div",{className:"store-order-options",children:[Object(T.jsx)("span",{children:Object(T.jsx)(c.a,{"data-testid":"",srcFile:s.a.WhiteExclamatry,alt:"tick",className:"unavail-tick-image tick-image"})}),Object(l.Tc)(e===L.ee,Object(r.translateWithI18Next)(b.a.PICK_UP),Object(r.translateWithI18Next)(e))]},t)))]},ut=(e,t,a)=>Object(T.jsx)(w,{item:e,isMobile:ae,index:t,classname:a,setStoreInfo:dt,timimgMsg:st,dispositionType:$e,checkToday:rt,showAvailableService:ct,showMap:ce,removeFromFavoriteHandler:ee,orderNowButtonClickHandler:ot,handleOrderNowButtonHandle:tt,cardHeading:"".concat(je+1," of ").concat($.length),showMoreInfo:te,setShowCard:Oe,showDistance:!we&&ie.length>0||we},t),vt=(Ot=$,Ot.sort((function(e,t){var a,i,o,n;return Object(l.Lc)(null===(a=e.storeBasic)||void 0===a?void 0:a.dname)<Object(l.Lc)(null===(i=t.storeBasic)||void 0===i?void 0:i.dname)?-1:Object(l.Lc)(null===(o=e.storeBasic)||void 0===o?void 0:o.dname)>Object(l.Lc)(null===(n=t.storeBasic)||void 0===n?void 0:n.dname)?1:0}))).map(((e,t)=>ut(e,t)));var Ot;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)("div",{className:"favorite-stores-section",children:[$.length>0&&Object(T.jsxs)("div",{className:"header-text",children:[Object(r.translateWithI18Next)(qe)," (",$.length,")",ce&&Object(T.jsx)("span",{"data-testid":"list-handler",onClick:()=>{lt(),nt()},children:Object(T.jsxs)(j.a,{className:"map-link-list",children:[Object(T.jsx)("span",{children:Object(T.jsx)(c.a,{"data-testid":"",srcFile:s.a.Union,alt:"map",className:"map-img"})}),Object(r.translateWithI18Next)(b.a.LIST_TEXT)]})})]}),$.length>0&&!ce>0&&vt,ce&&Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{className:"takeawayDineInMap delivery-map",children:[Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(p.a,{"data-testid":"mymap-id",latLongValue:be,loadingElement:Object(T.jsx)("div",{style:{height:"100%"}}),containerElement:Object(T.jsx)("div",{style:{height:"400px"}}),mapElement:Object(T.jsx)("div",{style:{height:"100%"}}),isVisible:!0,isMobile:ae,centerIndex:je,onPositionChangeHandler:e=>{let t=e?je+1:je-1;he(t),ge(Object(l.kd)($[t]))},setShowCard:Oe,setStoreMarker:e=>{const t=$.findIndex((t=>t.storeBasic.location.latitude===e.lat()&&t.storeBasic.location.longitude===e.lng()));t>-1&&(he(t),ge(Object(l.kd)($[t])))},storeCardHeight:325,showLabelOnMapPin:Ee}),ve&&pe&&ae?ut(pe,"","Selected-mobile-Card"):null]}),ve&&pe&&!ae?ut(pe,"","Selected-desktop-Card"):null]})})]}),re&&Object(T.jsx)(P.a,{handleClose:()=>{se(!1),localStorage.removeItem(L.gd.SET_CART_CLEAR)},classNames:"clear-cart-modal item-unavailable",CartAlertForm:Object(T.jsx)(F.a,{title:Object(r.translateWithI18Next)(E.a.WHICH_MENU),imageSrc:null===s.a||void 0===s.a?void 0:s.a.TakeawayCompleted,altText:"",confirmButtonText:Object(r.translateWithI18Next)(E.a.CATERTING_MENU),confirmHandler:()=>{it(ne,L.M),se(!1)},cancelButtonText:Object(r.translateWithI18Next)(E.a.STORE_MENU),cancelHandler:()=>{it(ne,L.cf),se(!1)},secondaryButtonType:f.b.tertiary})})]})};var Q=e=>{const{savedAddresses:t,addOrEditClickHandler:a,deleteAddressHandler:i,prefectureAddressScreen:n,showDefaultLabelOnNewLine:d}=e,{EDIT:s,DELETE:c,ADD_NEW_ADDRESS:v,ADD:O,DEFAULT:b}=u.b,{APT_SUITE_FLOOR:m,DELIVERY_OPTIONS:j,DELIVERY:h,INSTRUCTIONS:p}=E.a;let g=d?"delivery-store-name-new-line":"delivery-store-name",N=d?"address-mode-global-new-line":"address-mode-global";const S=(I=t,I.sort(((e,t)=>t.isPrimary-e.isPrimary))).map((e=>{var t,d,u,v;const{addressLines:O,city:S,state:I,pinCode:x,country:f,name:E,isPrimary:C,id:y,deliveryOptions:D,deliveryInstructions:A}=e;return Object(T.jsx)(o.a.Fragment,{children:Object(T.jsxs)("div",{className:"delivery-card bgv-set d-flex",children:[Object(T.jsxs)("div",{className:"address-description d-flex",children:[Object(T.jsxs)("p",{className:"address-mode ".concat(N),children:[Object(T.jsx)("span",{className:"text-transform-capitalize ".concat(g),children:Object(T.jsx)("strong",{children:E})})," ",C?Object(T.jsx)("span",{children:"(".concat(Object(r.translateWithI18Next)(b),")")}):""]}),n&&Object(T.jsx)("div",{className:"delivery-details",children:Object(T.jsx)("span",{className:"address-street-text",children:null===O||void 0===O||null===(t=O.filter(Boolean))||void 0===t?void 0:t.join(" ")})}),!n&&Object(T.jsxs)("div",{className:"delivery-details",children:[Object(T.jsxs)("span",{className:"address-street-text",children:[Object(l.od)(O[1])," ",Object(l.od)(S)]}),Object(T.jsx)("span",{children:"".concat(Object(l.od)(I),", ").concat(Object(l.od)(x),", ").concat(Object(l.od)(f))}),O[0]&&Object(T.jsxs)("span",{className:"address-heading",children:[Object(r.translateWithI18Next)(m),Object(T.jsxs)("strong",{children:[": ",O[0]]})]}),D&&Object(T.jsxs)("span",{className:"address-heading",children:[null===(d=Object(r.translateWithI18Next)(j))||void 0===d?void 0:d.toLowerCase(),Object(T.jsxs)("strong",{children:[": ",Object(T.jsx)("span",{className:"address-text",children:Object(r.translateWithI18Next)(D)})]})]}),A&&Object(T.jsxs)("span",{className:"address-heading",children:[null===(u=Object(r.translateWithI18Next)(h))||void 0===u?void 0:u.toLowerCase()," ",null===(v=Object(r.translateWithI18Next)(p))||void 0===v?void 0:v.toLowerCase(),Object(T.jsxs)("strong",{children:[": ",Object(T.jsx)("span",{className:"address-text-Instructions",children:A})]})]})]})]}),Object(T.jsxs)("div",{className:"action-btn d-flex",children:[Object(T.jsx)("div",{onClick:()=>a(s,e),"data-testid":"edit-testid",className:"anchor-info edit-adjust",children:Object(r.translateWithI18Next)(s)}),Object(T.jsx)("div",{onClick:()=>i(y),"data-testid":"delete-testid",className:"anchor-info del-adjust",children:Object(r.translateWithI18Next)(c)})]})]},y)})}));var I;return Object(T.jsxs)("div",{className:"address-section",children:[(null===t||void 0===t?void 0:t.length)>0&&S,Object(T.jsx)("div",{className:"add-address",children:Object(T.jsx)(f.a,{"data-testid":"add-testid",onClickHandler:()=>a(O),className:"mt-10 button font-bold whiteButton blackBorder",children:Object(r.translateWithI18Next)(v)})})]})},Z=a(57),$=a(192),ee=a(1081),te=a(55),ae=a(825),ie=a(331);var oe=e=>{var t,a,o;const d=Object(n.b)(),{userOrderState:c,userOrderStateDispatch:u}=Object(i.useContext)(O.a)||{},{DISPOSITION_METHOD:v,TYPE_DELIVERY:b,DISPOSITION_DATA:m}=I.a,{tenantId:j}=e,{savedAddresses:h}=Object(n.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),{NO_ADDRESS:p,DELETE_CONFIRM_MSG:g,CANCEL:N,YES_DELETE:S,MYDELIVERYADDRESSES:x,DELIVERY_ADD_DELETE:f}=E.a,C=Object(n.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),y=null===C||void 0===C||null===(t=C.savedAddressPage)||void 0===t?void 0:t.showPrefectureAddAddressScreen,D=null===C||void 0===C||null===(a=C.savedAddressPage)||void 0===a?void 0:a.showDefaultLabelOnNewLine,[A,R]=Object(i.useState)(!1),[_,w]=Object(i.useState)(!1),[L,k]=Object(i.useState)({}),[M,P]=Object(i.useState)(!1),[W,H]=Object(i.useState)(null),U=Object(ie.c)(),[B,G]=Object(i.useState)(U[0]);Object(i.useEffect)((()=>{var e;null!==c&&void 0!==c&&null!==(e=c.dispositionStateData)&&void 0!==e&&e.showDisposition&&G(U[null!==L&&void 0!==L&&L.pinCode?0:1])}),[null===c||void 0===c||null===(o=c.dispositionStateData)||void 0===o?void 0:o.showDisposition,L]);return Object(T.jsxs)("div",{className:"delivery-address-section",style:{marginTop:"70px"},children:[Object(T.jsxs)("div",{className:"header-text",children:[Object(r.translateWithI18Next)(x)," ","(".concat(h.length,")")]}),0===h.length&&Object(T.jsx)("div",{className:"no-fav-store",children:Object(T.jsx)("p",{children:Object(r.translateWithI18Next)(p)})}),Object(T.jsx)(Q,{prefectureAddressScreen:y,savedAddresses:h,addOrEditClickHandler:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u({type:v,value:{dispositionType:b}}),y&&u({type:m,value:{showDisposition:!0}});const a="edit"===e;k(a?t:{}),R(!0),w(a)},deleteAddressHandler:e=>{P(!0),H(e)},showDefaultLabelOnNewLine:D}),A&&y&&Object(T.jsx)(ae.default,{deliverySearchType:B,setDeliverySearchType:G,prefectureAddressScreen:y,closeModal:()=>{R(!1),u({type:m,value:{showDisposition:!1}})},modalType:_,address:L}),A&&!y&&Object(T.jsx)(ee.a,{"data-testid":"address-modal",modalType:_,address:L,isOpen:A,toggleModal:R}),M&&Object(T.jsx)($.a,{handleClose:()=>P(!1),classNames:"plp-warning-msg addr-container",CartAlertForm:Object(T.jsx)(F.a,{title:"".concat(Object(r.translateWithI18Next)(g)),imageSrc:s.a.CartError,confirmButtonText:Object(r.translateWithI18Next)(S),confirmHandler:()=>{H(null);const{customerId:e,phoneNumber:t}=te.a.getInstance();d(Object(Z.b)({customerId:e,phoneNumber:t,tenantId:j,addressId:W})),P(!1),Object(l.pf)(Object(r.translateWithI18Next)(f),"","favorites-added-toast")},cancelHandler:()=>P(!1),cancelButtonText:Object(r.translateWithI18Next)(N),buttonContainerClass:"deeplink-alert-btn-container"})})]})},le=a(155),ne=a(266);var de=e=>{const{MY_FAV_STORES:t,UNDEFINED:a}=u.b,{STORE_STATUS_OPEN:o}=b.a,{NO_FAVOURITE_STORE:m,REMOVED_MSG:j}=E.a,h=Object(n.b)(),{userOrderState:p}=Object(i.useContext)(O.a),{storesWithStatus:g}=Object(n.c)((e=>e.storesReducer)),{allStores:N=[]}=Object(n.c)((e=>e.allStoresReducer))||{},{favouriteStores:S,savedAddresses:I}=Object(n.c)((e=>e.profileReducer)),{localized:x=!1}=Object(n.c)((e=>{var t;return null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),f=Object(n.c)((e=>e.cartReducer)),C=Object(n.c)((e=>e.tenantReducer)),{tenantId:y="",storeSearch:D={},driveTime:A,componentOptions:R}=C,{web:_={}}=R||{},{shouldCheckDropOffAddress:w=!1}=_,[M,P]=Object(i.useState)([]),[F,W]=Object(i.useState)([]),[H,G]=Object(i.useState)(!1),{showScheduleOrderCatering:V}=p.scheduleOrderData,Y=Object(B.b)(U.b),K=Object(k.a)(p),z=Object(i.useMemo)((()=>{var e;return{dispositionType:null!==K&&void 0!==K&&K.type?Object(l.Ib)(K.type):Object(l.Ib)(null===C||void 0===C||null===(e=C.authoredContent)||void 0===e?void 0:e.defaultdisposition)}}),[K,C]),{dispositionType:q}=z,J=JSON.stringify(I),Q=localStorage.getItem(L.gd.STORE_INFO),Z=Q&&Q!==a&&JSON.parse(Q),$=null!==I&&void 0!==I&&I.length?I.filter((e=>e.isPrimary)):[],ee=Z&&x?Z:(null===$||void 0===$?void 0:$.length)&&$[0],ae=S.map((e=>{var t;const{latitude:a,longitude:i}=(null===(t=e.storeBasic)||void 0===t?void 0:t.location)||{};return{lat:a,lng:i}}));Object(i.useEffect)((()=>{(async()=>{const e=await(async e=>{var t,a,i,o,n;const{cartReducer:d,originInfo:r,allStoreLocations:s,dispositionNew:c,pwaStorageData:u}=e,v=(null===r||void 0===r||null===(t=r.location)||void 0===t?void 0:t.latitude)||(null===s||void 0===s||null===(a=s[0])||void 0===a?void 0:a.lat),O=(null===r||void 0===r||null===(i=r.location)||void 0===i?void 0:i.longitude)||(null===s||void 0===s||null===(o=s[0])||void 0===o?void 0:o.lng);if(Object(l.Xd)(null===d||void 0===d||null===(n=d.cartData)||void 0===n?void 0:n.service)){var b,m,j,h;if(null!==u&&void 0!==u&&null!==(b=u.latLong)&&void 0!==b&&b.lat&&null!==u&&void 0!==u&&null!==(m=u.latLong)&&void 0!==m&&m.lng)return[{lat:null===u||void 0===u||null===(j=u.latLong)||void 0===j?void 0:j.lat,lng:null===u||void 0===u||null===(h=u.latLong)||void 0===h?void 0:h.lng}];const e=await Object(ne.geocodeByAddress)(null===c||void 0===c?void 0:c.deliveryAddress),{lat:t,lng:a}=await Object(ne.getLatLng)(e[0]);return[{lat:t,lng:a}]}var p,g,N,S,I,x;return[{lat:parseFloat(null===d||void 0===d||null===(p=d.cartData)||void 0===p||null===(g=p.deliveryAddress)||void 0===g||null===(N=g.location)||void 0===N?void 0:N.latitude)||v,lng:parseFloat(null===d||void 0===d||null===(S=d.cartData)||void 0===S||null===(I=S.deliveryAddress)||void 0===I||null===(x=I.location)||void 0===x?void 0:x.longitude)||O}]})({cartReducer:f,originInfo:ee,allStoreLocations:ae,dispositionNew:K,getPWAStorageData:Y});W(e)})()}),[null===K||void 0===K?void 0:K.deliveryAddress,q]);const ie=Object(i.useMemo)((()=>null!==D&&void 0!==D&&D.shouldCallGoogleDistanceApi?[]:null===M||void 0===M?void 0:M.map((e=>{var t,a,i,o,l,n;const d=le.a.calculateDistanceAlgo(null===e||void 0===e||null===(t=e.storeBasic)||void 0===t||null===(a=t.location)||void 0===a?void 0:a.latitude,null===e||void 0===e||null===(i=e.storeBasic)||void 0===i||null===(o=i.location)||void 0===o?void 0:o.longitude,null===F||void 0===F||null===(l=F[0])||void 0===l?void 0:l.lat,null===F||void 0===F||null===(n=F[0])||void 0===n?void 0:n.lng);return{...e,distance:{value:d}}}))),[M,F]);Object(i.useEffect)((()=>{if(null!==S&&void 0!==S&&S.length&&y&&!V){const e=Object(l.B)(S,q,null,w,null===Y||void 0===Y?void 0:Y.latLong),t=!0;localStorage.getItem(L.gd.SET_FAV)||h(Object(d.d)({data:e,tenantId:y,isFavoritePage:t}))}}),[y,null===S||void 0===S?void 0:S.length,null===I||void 0===I?void 0:I.length,V,J]),Object(i.useEffect)((()=>(window.scrollTo(0,0),h(Object(d.u)()),()=>{h(Object(d.u)())})),[]),Object(i.useEffect)((()=>{h(Object(d.u)())}),[S.length,I.length]),Object(i.useEffect)((()=>{null!==M&&void 0!==M&&M.length&&null!==g&&void 0!==g&&g.length&&de()}),[null===g||void 0===g?void 0:g.length,M.length]);const de=()=>{const e=M.map((e=>{let t={...e};const a=g.find((t=>t.storeId===e.storeBasic.id||t.id===e.storeBasic.id));return a&&(t.summary=a.summary,t.isOpen=a.summary.status.currentStatus===o),t}));P(e.filter((e=>e.summary)))};Object(i.useEffect)((()=>{localStorage.getItem(L.gd.RENDER_COMP)&&localStorage.getItem(L.gd.SET_FAV)&&(localStorage.removeItem(L.gd.RENDER_COMP),localStorage.removeItem(L.gd.SET_FAV),h(Object(d.u)()),re())})),Object(i.useEffect)((()=>{re()}),[S.length,H]),Object(i.useEffect)((()=>{if(H){const e=Object(T.jsx)(c.a,{srcFile:s.a.heartIcon_active});Object(l.qf)(Object(r.translateWithI18Next)(j),e),setTimeout((()=>{v.b.dismiss()}),3e3)}return()=>G(!1)}),[H]),Object(i.useEffect)((()=>{re()}),[I.length,JSON.stringify(I)]);const re=()=>{if(null!==D&&void 0!==D&&D.shouldCallGoogleDistanceApi)if(ee){let e=null===D||void 0===D?void 0:D.distanceMetrics;e=e!==(null===u.b||void 0===u.b?void 0:u.b.KM)?window.google.maps.UnitSystem.IMPERIAL:window.google.maps.UnitSystem.METRIC,null!==S&&void 0!==S&&S.length?se(F,ae,e):(P([]),G(!1))}else null!==M&&void 0!==M&&M.length&&null!==g&&void 0!==g&&g.length?de():(P(S),G(!1))};Object(i.useEffect)((()=>{P(S)}),[S.length]);const se=(e,t,a)=>{(new window.google.maps.DistanceMatrixService).getDistanceMatrix({origins:[...e].slice(0,24),destinations:[...t].slice(0,24),travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:a,avoidHighways:!1,avoidTolls:!1},ce)},ce=(e,t)=>{let a=[],i=[];i=e&&e.rows&&e.rows[0].elements.map((e=>e)),a=S.map(((e,t)=>({...e,...i[t]}))),P(a),G(!1)};return Object(T.jsxs)("div",{className:"addresses-and-stores-container",id:"addresses-global",children:[Object(T.jsxs)("div",{className:"my-delivery-addresses-header-mobile",children:[Object(T.jsx)(c.a,{srcFile:s.a.SingleArrowback,className:"backArrow-account-setting","data-testid":"backArrow-account-setting",onClick:()=>e.updateMenu("")}),Object(T.jsx)("span",{className:"account-setting-text-header",children:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.STOREADDRESS)})]}),(null===M||void 0===M?void 0:M.length)>0&&Object(T.jsx)(X,{"data-testid":"favStore-list",removeFromFavoriteHandler:e=>{const{customerId:t}=te.a.getInstance();h(Object(d.x)({tenantId:y,customerId:t,storeId:e,dispatch:"dispatch"})),G(!0)},localized:x,history:e.history,storesReducer:g,favouriteStores:null!==D&&void 0!==D&&D.shouldCallGoogleDistanceApi?M:ie,isMobile:e.isMobile,showMoreInfo:!0,savedAddresses:I}),0===(null===M||void 0===M?void 0:M.length)&&Object(T.jsxs)("div",{className:"favorite-stores-section",children:[Object(T.jsxs)("div",{className:"header-text",children:[Object(r.translateWithI18Next)(t)," (",S.length,")"]}),Object(T.jsx)("div",{className:"no-fav-store",children:Object(T.jsx)("p",{children:Object(r.translateWithI18Next)(m)})})]}),Object(T.jsx)(oe,{storeSearch:D,savedAddresses:I,isMobile:e.isMobile,tenantId:y,driveTime:A,allStores:N})]})},re=a(902),se=a(332);const ce=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null!==a&&void 0!==a&&a.showMrMiss?Object(T.jsxs)(T.Fragment,{children:[Object(r.translateWithI18Next)("".concat(Object(r.translateWithI18Next)(e)," ").concat(Object(l.ac)())),Object(T.jsx)("p",{children:Object(r.translateWithI18Next)("".concat(t.firstName+Object(r.translateWithI18Next)(E.a.MRMISS)||t.phone,"!"))})]}):Object(T.jsx)(T.Fragment,{children:Object(r.translateWithI18Next)("".concat(Object(r.translateWithI18Next)(e)," ").concat(Object(l.ac)(),"  ").concat(t.firstName||t.phone,"!"))})},ue=e=>{const{basicData:t}=e;return Object(T.jsx)("span",{className:"user-name-greeting",children:Object(r.translateWithI18Next)("".concat((null===t||void 0===t?void 0:t.firstName)+Object(r.translateWithI18Next)(E.a.MRMISS)||Object(r.translateWithI18Next)(E.a.KFC_LOVER)))})},ve=e=>{let{handleClose:t,signOutAccount:a}=e;const{SIGN_OUT:i,CANCEL:l,SIGN_OUT_ACCOUNT_MESSAGE:n}=u.a,d={CONFIRM_SIGN_OUT_TEXT:{MSGTXT1:Object(r.translateWithI18Next)(n)}};return Object(T.jsx)(o.a.Fragment,{children:Object(T.jsx)(P.a,{handleClose:t,classNames:"delete-account-modal",CartAlertForm:Object(T.jsx)(F.a,{splitTitle:d.CONFIRM_SIGN_OUT_TEXT,imageSrc:s.a.CartError,altText:"delete-account",cancelButtonText:Object(r.translateWithI18Next)(l),confirmButtonText:Object(r.translateWithI18Next)(i),confirmHandler:a,cancelHandler:t})})})};var Oe=e=>{var t,a,o,d,c;let{currentMenu:u,updateMenu:v,signOutAccount:O,isMobile:b,basicData:m}=e;const[j,h]=Object(i.useState)(!1),[p,g]=Object(i.useState)(0),{ADDRESS:N,ADDRESS_PLACEHOLDER:S,SIGN_OUT:I,GREETING_GOOD:x,KFC_LOVER:C,ORDER_HISTORY_TAG:y,FAVORITE_ORDERS:D,ACCOUNT_SETTING:A,PREFERENCES:R,MESSAGE_TAG:_,MY_PAYMENT_METHODS:w,CHICKEN_MILES:k}=E.a,{greeting:M={}}=Object(n.c)((e=>{var t,a,i;return null!==(t=null===(a=e.tenantReducer)||void 0===a||null===(i=a.componentOptions)||void 0===i?void 0:i.homePage)&&void 0!==t?t:""})),{showContentCards:P=!1}=Object(n.c)((e=>{var t,a,i;return null===(t=e.tenantReducer)||void 0===t||null===(a=t.componentOptions)||void 0===a||null===(i=a.web)||void 0===i?void 0:i.global})),F=Object(n.c)((e=>{var t,a,i,o,l;return null!==(t=null===(a=e.tenantReducer)||void 0===a||null===(i=a.componentOptions)||void 0===i||null===(o=i.web)||void 0===o||null===(l=o.accountPage)||void 0===l?void 0:l.showMyPaymentMethods)&&void 0!==t?t:""})),W=Object(n.c)((e=>{var t,a,i,o,l;return null!==(t=null===(a=e.tenantReducer)||void 0===a||null===(i=a.componentOptions)||void 0===i||null===(o=i.web)||void 0===o||null===(l=o.accountPage)||void 0===l?void 0:l.showChickenMiles)&&void 0!==t?t:""})),H=Object(n.c)((e=>{var t,a,i,o,l;return null!==(t=null===(a=e.tenantReducer)||void 0===a||null===(i=a.componentOptions)||void 0===i||null===(o=i.web)||void 0===o||null===(l=o.accountPage)||void 0===l?void 0:l.showPreferenceCenter)&&void 0!==t&&t})),G=Object(n.c)((e=>{var t,a,i;return null===(t=e.tenantReducer)||void 0===t||null===(a=t.componentOptions)||void 0===a||null===(i=a.accountSettings)||void 0===i?void 0:i.communicationPreferenceComponent})),V=Object(B.b)(U.b),Y=(null===V||void 0===V?void 0:V.brazeInitialized)&&(null===(t=window)||void 0===t||null===(a=t.appboy)||void 0===a||null===(o=a.getCachedContentCards())||void 0===o||null===(d=o.cards)||void 0===d||null===(c=d.filter((e=>!e.isControl&&!e.viewed)))||void 0===c?void 0:c.length),K=()=>{h(!1)};Object(i.useEffect)((()=>{Y&&g(Y)}),[Y]);return b?Object(T.jsxs)("div",{className:"account-mobile-container",children:[Object(T.jsx)("div",{className:"account-mobile-header",children:Object(T.jsxs)("div",{className:"account-header-container",children:[Object(T.jsx)("img",{alt:"arrow",src:s.a.Strips,className:"account-icon"}),Object(T.jsx)("h4",{className:"account-header account-user-name-mobile",children:ce(x,m,M)}),Object(T.jsx)(f.a,{"data-testid":"signout-button1-testid",className:"button transparent-btn white-border sign-out-btn sign-out-btn-au","aria-label":"",onClick:()=>{h(!0)},type:"submit",children:Object(T.jsx)("span",{children:Object(r.translateWithI18Next)(I)})}),j&&Object(T.jsx)(ve,{handleClose:K,signOutAccount:O})]})}),Object(T.jsxs)("div",{className:"account-mobile-menu-option",children:[W&&Object(T.jsx)("section",{"data-testid":"chicken-miles-mobile-testid",onClick:()=>v(k),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(k)}),Object(T.jsx)("img",{alt:"arrow",src:s.a.Arrow,className:"account-icon"})]})})}),P&&Object(T.jsx)("section",{"data-testid":"account-messages-mobile-testid",onClick:()=>v(_),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(_)}),!!p&&Object(T.jsx)("span",{className:"msg-badge",children:p}),Object(T.jsx)("img",{alt:"arrow",src:s.a.Arrow,className:"account-icon"})]})})}),Object(T.jsx)("section",{"data-testid":"order-history-mobile-testid",onClick:()=>v(L.Ae.ORDER_HISTORY),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(y)}),Object(T.jsx)("img",{alt:"arrow",src:s.a.Arrow,className:"account-icon"})]})})}),Object(T.jsx)("section",{"data-testid":"fav-menu-mobile-testid",onClick:()=>v(D),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(D)}),Object(T.jsx)("img",{src:s.a.Arrow,className:"account-icon",alt:"Account Icon"})]})})}),F&&Object(T.jsx)("section",{"data-testid":"my-payment-methods-mobile-testid",onClick:()=>v(w),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(w)}),Object(T.jsx)("img",{src:s.a.Arrow,className:"account-icon",alt:"arrow-icon"})]})})}),Object(T.jsx)("section",{"data-testid":"saved-address-mobile-testid",onClick:()=>v(N),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(S)}),Object(T.jsx)("img",{alt:"arrow",src:s.a.Arrow,className:"account-icon"})]})})}),Object(T.jsx)("section",{"data-testid":"account-settings-mobile-testid",onClick:()=>v(A),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(A)}),Object(T.jsx)("img",{src:s.a.Arrow,className:"account-icon",alt:""})]})})}),H&&Object(T.jsx)("section",{"data-testid":"account-settings-mobile-testid",onClick:()=>v(R),className:"account-accordian",children:Object(T.jsx)("div",{className:"global-accordian-container",children:Object(T.jsxs)("div",{className:"global-accordian-header-container",children:[Object(T.jsx)("span",{className:"global-accordian-header",children:Object(r.translateWithI18Next)(R)}),Object(T.jsx)("img",{src:s.a.Arrow,className:"account-icon",alt:""})]})})})]})]}):Object(T.jsxs)("div",{className:"account-header-container ".concat(Object(l.ac)()===L.l&&"account-header-noon"),children:[Object(T.jsx)("img",{alt:"stripes",src:s.a.Strips,className:"account-icon"}),Object(T.jsx)("h4",{className:"account-header",children:Object(r.translateWithI18Next)("".concat(Object(r.translateWithI18Next)(x)," ").concat(Object(l.ac)()))}),Object(T.jsx)("h4",{className:"account-user-name",children:null!==M&&void 0!==M&&M.showMrMiss?ue({basicData:m}):Object(T.jsx)("span",{className:"user-name-greeting",children:Object(r.translateWithI18Next)("".concat((null===m||void 0===m?void 0:m.firstName)||Object(r.translateWithI18Next)(C)))})}),Object(T.jsxs)("div",{className:"account-menu-container",children:[W&&Object(T.jsx)("div",{"data-testid":"chicken-miles-testid",className:Object(l.Tc)(u===k,"activeMenu account-menu","account-menu"),onClick:()=>v(k),children:Object(r.translateWithI18Next)(k)}),P&&Object(T.jsxs)("div",{"data-testid":"account-messages-testid",className:Object(l.Tc)(u===_,"activeMenu account-menu","account-menu"),onClick:()=>v(_),children:[Object(r.translateWithI18Next)(_),!!p&&Object(T.jsx)("span",{className:"msg-badge",children:p})]}),Object(T.jsx)("div",{"data-testid":"order-history-testid",className:Object(l.Tc)(u===L.Ae.ORDER_HISTORY,"activeMenu account-menu","account-menu"),onClick:()=>v(L.Ae.ORDER_HISTORY),children:Object(r.translateWithI18Next)(y)}),Object(T.jsx)("div",{className:Object(l.Tc)(u===D,"activeMenu account-menu","account-menu"),onClick:()=>v(D),"data-testid":"fav-menu-link",children:Object(r.translateWithI18Next)(D)}),F&&Object(T.jsx)("div",{"data-testid":"my-payment-methods-testid",className:Object(l.Tc)(u===w,"activeMenu account-menu","account-menu"),onClick:()=>v(w),children:Object(r.translateWithI18Next)(w)}),Object(T.jsx)("div",{"data-testid":"saved-address-testid",className:Object(l.Tc)(u===N,"activeMenu account-menu","account-menu"),onClick:()=>v(N),children:Object(r.translateWithI18Next)(S)}),Object(T.jsx)("div",{"data-testid":"account-settings-testid",className:Object(l.Tc)(u===A,"activeMenu account-menu ".concat(!G&&"showAtLast"),"".concat(!G&&"showAtLast"," account-menu")),onClick:()=>v(A),children:Object(r.translateWithI18Next)(A)}),H&&Object(T.jsx)("div",{"data-testid":"header-preferences-testid",className:Object(l.Tc)(u===R,"activeMenu account-menu","account-menu"),onClick:()=>v(R),children:Object(r.translateWithI18Next)(R)})]}),Object(T.jsx)(f.c,{"data-testId":"signout-button1-testid",className:"sign-out-btn ","data-id":L.qb.HEADER_SIGN_IN_ATTR_DATA_ID,variant:f.b.tertiary,inverted:!0,small:!0,"aria-label":"",type:"submit",onClick:()=>{h(!0)},children:Object(T.jsx)("span",{"data-testid":"signout-button-testid",children:Object(r.translateWithI18Next)(I)})}),j&&Object(T.jsx)(ve,{handleClose:K,signOutAccount:O})]})},be=a(129);var me=e=>{const t=Object(n.c)((e=>{var t;return(null===(t=e.profileReducer)||void 0===t?void 0:t.basic)||null})),a=Object(n.b)(),{tenantReducer:{useDeviceDefaultLanguage:o,basic:{allowedLanguages:d=[],defaultLanguage:r}={}}={}}=Object(n.c)((e=>e)),s=o?Object(l.Bb)(d,r):r,c=(null===d||void 0===d?void 0:d.length)>1&&localStorage.getItem(L.gd.USER_LANGUAGE)!==(null===s||void 0===s?void 0:s.key),{userOrderState:u,userOrderStateDispatch:v}=Object(i.useContext)(O.a),b=Object(l.Tc)(Object(l.Jd)(u.dispositionNew),JSON.parse(localStorage.getItem(L.gd.DISPOSITION_NEW)),u.dispositionNew),m=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus}));return Object(T.jsx)(Oe,{...e,signOutAccount:()=>{((e,t,a,i,o,l,n)=>{Object(se.t)(null===t||void 0===t?void 0:t.id),Object(be.a)(null,null,e,a,i,null,o,!0),localStorage.removeItem(L.gd.ADD_TO_ORDER),l&&n&&localStorage.setItem(L.gd.USER_LANGUAGE,l),te.a.getInstance().logout()})(m,t,a,v,b,null===s||void 0===s?void 0:s.key,c)},basicData:t})},je=a(831);const{MESSAGES_TAG:he,ZERO_MESSAGE_COUNT_TEXT:pe}=E.a;var ge=e=>{var t,a,o,l,d,c,u;const{isMobile:v}=e,[O,b]=Object(i.useState)(0),m=Object(n.c)((e=>e.tenantReducer||null)),{loadBrazeData:j=!1,showContentCards:h=!1}=(null===m||void 0===m||null===(t=m.componentOptions)||void 0===t||null===(a=t.web)||void 0===a?void 0:a.global)||{},p=Object(B.b)(U.b),{SingleArrowback:g}=s.a,N=(null===p||void 0===p?void 0:p.brazeInitialized)&&(null===(o=window)||void 0===o||null===(l=o.appboy)||void 0===l||null===(d=l.getCachedContentCards())||void 0===d||null===(c=d.cards)||void 0===c||null===(u=c.filter((e=>!e.isControl)))||void 0===u?void 0:u.length);return Object(i.useEffect)((()=>{(async(e,t,a,i,o)=>{await Object(S.n)();const l=document.getElementById("message-wrapper");N&&b(N),j?(null===p||void 0===p?void 0:p.brazeInitialized)&&(null===(e=window)||void 0===e||null===(t=e.appboy)||void 0===t||t.showContentCards(l)):(null===p||void 0===p?void 0:p.brazeInitialized)&&(null===(a=window)||void 0===a||null===(i=a.appboy)||void 0===i||null===(o=i.display)||void 0===o||o.showContentCards(l))})()}),[null===p||void 0===p?void 0:p.brazeInitialized,N]),Object(T.jsxs)("div",{"data-testid":"account-message-wrapper",className:"account-message-wrapper",children:[v&&Object(T.jsxs)("div",{className:"account-message-header-mobile",children:[Object(T.jsx)("img",{className:"backArrow-account-setting","data-testid":"message-backArrow",onClick:()=>e.updateMenu(""),src:g,alt:"back button"}),Object(T.jsx)("span",{className:"account-message-text-header",children:Object(r.translateWithI18Next)(he)})]}),Object(T.jsxs)("span",{className:"account-message-text-heading",children:[Object(r.translateWithI18Next)(he)," ","(".concat(O,")")]}),h&&Object(T.jsx)("div",{id:"message-wrapper"})]})},Ne=a(1015),Se=a(1120),Ie=(a(18),a(78)),xe=a(51),fe=a(103),Ee=a(225),Ce=a(162),Te=a(913);var ye=e=>{var t,a,o,d,v,O,b,m,j,h,p,g,N,S,I,x;const{isMobile:C,firstName:y,lastName:D,email:A,phone:R,postalCode:_,day:w,month:k,year:M,phonePattern:P,splitPattern:F}=e,W=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.profileReducer)||void 0===t?void 0:t.customerId})),H=Object(n.c)((e=>e.tenantReducer)),U=null===H||void 0===H||null===(t=H.componentOptions)||void 0===t||null===(a=t.web)||void 0===a||null===(o=a.accountPage)||void 0===o?void 0:o.isEmailDisabled,B=null===H||void 0===H||null===(d=H.componentOptions)||void 0===d||null===(v=d.web)||void 0===v||null===(O=v.accountPage)||void 0===O?void 0:O.showDateOfBirthInReverseOrder;let G=(e=>e?"email-border":"email-editable")(U);const V=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.marketConfigReducer)||void 0===t?void 0:t.response})),{headerData:Y={}}=V||{},{minAgeRequirement:K}=Y,{isPostalCodeMandtoryField:z,postalCodesLength:q,allowOtpPopup:J,maxLengthPhoneNumber:X,dateOfBirth:Q,editAccountInfoModal:Z,updateCustomerData:$,isEnablePostalCodeSignUp:ee,postalCodeRegex:te,phoneNumberRegex:ae,postalCodeFormatNumber:ie,validateNameRegex:oe,validateEmailRegex:le,isEmailMandatoryField:ne,isDOBMandatoryField:de,dob:re,validateLastNameRegex:ce,errorMessageForPhoneNumberInUse:ue,setErrorMessageForPhoneNumberInUse:ve,displayErrorForPhoneNumberInUse:Oe,postalCodeSeparator:be}=e,[me,je]=Object(i.useState)({isValidDOB:!0,dobErrorMsg:""}),[he,pe]=Object(i.useState)({firstName:y,lastName:D,email:A,phone:Object(se.g)(R,P,F),dateOfBirth:Q,postalCode:_,day:w,month:k,year:M,allowOtpPopup:J,user_id:W}),[ge,Ne]=Object(i.useState)(!1),[Se,Ie]=Object(i.useState)(!1),[xe,ye]=Object(i.useState)(""),[De,Ae]=Object(i.useState)(""),[Re]=Object(i.useState)(Object(se.e)()),{PERSONAL_INFO_TEXT:_e,SAVE:we,CANCEL:Le,FIRST_NAME_ERROR_TEXT:ke,FIRST_NAME:Me,LAST_NAME:Pe,LAST_NAME_ERROR_TEXT:Fe,EMAIL_ADDRESS:We,EMAIL_ERROR_TEXT:He,MOBILE_NUMBER:Ue,MOBILE_NUMBER_ERROR_TEXT:Be,POSTAL_CODE:Ge,POSTAL_CODE_ERROR_TEXT:Ve,DATE_OF_BIRTH:Ye,PHONE_TOOLTIP_TITLE:Ke,DOB_TOOLTIP_TITLE:ze,EVENT_NAME_POSTAL_CODE:qe,EVENT_NAME_PHONE:Je}=u.a;Object(i.useEffect)((()=>{let e,t=Object(l.ob)(he.day,he.month,he.year);Object(l.db)(he,t)?(e=Object(se.d)(he.day,he.month,he.year,K),je({...e})):je({isValidDOB:!0,dobErrorMsg:""})}),[he]),Object(i.useEffect)((()=>(window.addEventListener(L.De,Xe),()=>{window.removeEventListener(L.De,Xe)}))),Object(i.useEffect)((()=>(window.addEventListener(L.W,Xe),()=>{window.removeEventListener(L.W,Xe)}))),Object(i.useEffect)((()=>{ue&&Ie(!0)}),[ue]);const Xe=e=>{e.preventDefault(),Ae(e.target.id),e.target.className&&(-1!==e.target.className.indexOf("did-floating-select")?xe&&""!==xe?e.target.id!==De?Object(l.Tc)(1==xe,ye(!1),ye(!0)):ye(!1):ye(!0):ye(!1))},Qe=e=>{let t=e.target.value;var a;e.target.name===Je&&(Ie(!1),t=null===(a=e.target.value)||void 0===a?void 0:a.replace(L.ze,""));pe({...he,[e.target.name]:t}),ue&&ve(!1)},Ze=e=>{let{className:t,props:a}=e;const{label:i,optionList:o,flag1:n,flag2:d}=a;return Object(T.jsx)("div",{className:t,children:Object(T.jsxs)("div",{className:"did-floating-label-content did-error-input",children:[Object(T.jsxs)("select",{required:!0,"data-testid":"".concat(null===i||void 0===i?void 0:i.toLowerCase(),"-testid"),id:"".concat(null===i||void 0===i?void 0:i.toLowerCase(),"-list"),className:"did-floating-select ".concat(Object(l.db)(!(null!==me&&void 0!==me&&me.isValidDOB)&&(n||(null===me||void 0===me?void 0:me.isDateNotInRange)),"error-color")," ").concat(Object(l.db)(d,"error-color-disable")," ").concat(Object(l.Tc)(De==="".concat(null===i||void 0===i?void 0:i.toLowerCase(),"-list"),Object(l.Tc)(Object(l.fb)(!xe,""===xe),"dropdown-notfocus","dropdown-focus"),"")),value:he[null===i||void 0===i?void 0:i.toLowerCase()],onClick:e=>{e.preventDefault(),e.stopPropagation(),window.addEventListener("click",Xe)},onChange:e=>{let{target:{value:t}}=e;return pe({...he,[null===i||void 0===i?void 0:i.toLowerCase()]:t})},title:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.PLEASE_SELECT),children:[Object(T.jsx)("option",{value:""},""),null===o||void 0===o?void 0:o.map((e=>Object(T.jsx)("option",{value:e,children:"month"===(null===i||void 0===i?void 0:i.toLowerCase())?Object(r.translateWithI18Next)(e):e},e)))]}),Object(T.jsx)("label",{id:"date-of-birth-label-text",className:"did-floating-label ".concat(Object(l.db)(!(null!==me&&void 0!==me&&me.isValidDOB),"error-color")).concat("year"===i?Object(l.db)(null===me||void 0===me?void 0:me.isDayNotValid,"error-color-disable"):""),children:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a[null===i||void 0===i?void 0:i.toUpperCase()])})]})})};return Object(T.jsxs)(T.Fragment,{children:[ue&&Oe&&Object(T.jsxs)("div",{className:"personal-card-phone_number_in_use",children:[Object(T.jsx)(c.a,{srcFile:s.a.Error,className:"alert-icon"}),Object(T.jsx)("span",{children:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.EXISTING_PHONE_NUMBER_ERROR_MESSAGE)})]}),Object(T.jsxs)("div",{className:"personal-info-card personal-info-card-au",children:[Object(T.jsx)("div",{className:"personal-card-left-side",children:Object(r.translateWithI18Next)(_e)}),Object(T.jsx)("div",{className:"personal-card-right-side",children:Object(T.jsxs)("div",{className:"personal-information-card",children:[Object(T.jsxs)("div",{className:"edit-personal-data-view",children:[Object(l.db)(!C,Object(T.jsxs)("div",{className:"left-side-lables",children:[Object(r.translateWithI18Next)(Me),Object(T.jsx)("span",{children:"*"})]})),Object(T.jsx)("div",{className:"right-side-form",children:Object(T.jsx)(fe.a,{"data-testid":"firstname-testid",name:"firstName",placeholder:Object(l.Tc)(C,"".concat(Object(r.translateWithI18Next)(Me),"*"),""),value:null===he||void 0===he?void 0:he.firstName,inputClassName:"edit-info-input-class",onChange:Qe,onKeyPress:e=>Object(se.q)(e,oe),error:(null===he||void 0===he||null===(b=he.firstName)||void 0===b?void 0:b.length)<=0||Object(l.db)((null===he||void 0===he||null===(m=he.firstName)||void 0===m?void 0:m.length)>0,Object(l.fb)(!Object(se.x)(null===he||void 0===he?void 0:he.firstName,oe),Object(se.b)(Ce.a,null===he||void 0===he?void 0:he.firstName))),helperText:Object(r.translateWithI18Next)(ke),helperTextClassName:"error-text",maxLength:"100",autoComplete:"first-name",errorIcon:s.a.Error,errorIconClassName:"flex-div"})})]}),Object(T.jsxs)("div",{className:"edit-personal-data-view",children:[Object(l.db)(!C,Object(T.jsxs)("div",{className:"left-side-lables",children:[Object(r.translateWithI18Next)(Pe),Object(T.jsx)("span",{children:"*"})]})),Object(T.jsx)("div",{className:"right-side-form",children:Object(T.jsx)(fe.a,{"data-testid":"lastname-testid",name:"lastName",placeholder:Object(l.Tc)(C,"".concat(Object(r.translateWithI18Next)(Pe),"*"),""),value:null===he||void 0===he?void 0:he.lastName,inputClassName:"edit-info-input-class",onChange:Qe,onKeyPress:e=>Object(se.q)(e,oe),error:(null===he||void 0===he||null===(j=he.lastName)||void 0===j?void 0:j.length)<=0||Object(l.db)((null===he||void 0===he||null===(h=he.lastName)||void 0===h?void 0:h.length)>0,Object(l.fb)(!Object(se.w)(null===he||void 0===he?void 0:he.lastName,ce),Object(se.b)(Ce.a,null===he||void 0===he?void 0:he.lastName))),helperText:Object(r.translateWithI18Next)(Fe),helperTextClassName:"error-text",maxLength:"100",autoComplete:"last-name",errorIcon:s.a.Error,errorIconClassName:"flex-div"})})]}),Object(T.jsxs)("div",{className:"edit-personal-data-view",children:[Object(l.db)(!C,Object(T.jsxs)("div",{className:"left-side-lables",children:[Object(r.translateWithI18Next)(We),Object(T.jsx)("span",{children:Object(l.mc)(ne)})]})),Object(T.jsx)("div",{className:"right-side-form ".concat(G),"data-testid":"email-testid",children:Object(T.jsx)(fe.a,{name:"email",placeholder:Object(l.Tc)(C,"".concat(Object(r.translateWithI18Next)(We)," ").concat(Object(l.mc)(ne)),""),"data-testid":"email-input-testid",value:null===he||void 0===he?void 0:he.email,inputClassName:"edit-info-input-class",onChange:Qe,error:(null===he||void 0===he||null===(p=he.email)||void 0===p?void 0:p.length)<=0||Object(l.db)((null===he||void 0===he||null===(g=he.email)||void 0===g?void 0:g.length)>0,Object(l.fb)(!Object(se.v)(null===he||void 0===he?void 0:he.email,le),Object(se.b)(Ce.a,null===he||void 0===he?void 0:he.email))),errorIcon:s.a.Error,helperText:Object(r.translateWithI18Next)(He),helperTextClassName:"error-text",maxLength:"100",autoComplete:"off",readOnly:U,errorIconClassName:"flex-div"})})]}),Object(T.jsxs)("div",{className:"edit-personal-data-view",children:[Object(l.db)(!C,Object(T.jsxs)("div",{className:"left-side-lables",children:[Object(r.translateWithI18Next)(Ue),Object(T.jsx)("span",{children:"*"})]})),Object(T.jsx)("div",{className:"right-side-form",children:Object(T.jsx)(fe.a,{"data-testid":"phone-testid",name:"phone",placeholder:Object(l.Tc)(C,"".concat(Object(r.translateWithI18Next)(Ue),"*"),""),value:null===he||void 0===he?void 0:he.phone,inputClassName:"edit-info-input-class",onChange:Qe,error:(null===he||void 0===he||null===(N=he.phone)||void 0===N?void 0:N.length)<=0||Object(l.db)((null===he||void 0===he||null===(S=he.phone)||void 0===S?void 0:S.length)>0,!Object(se.y)(null===he||void 0===he?void 0:he.phone,ae))||Oe&&ue,helperText:ue&&Oe?Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.PHONE_NUMBER_MAYBE_IN_USE):Object(r.translateWithI18Next)(Be),helperTextClassName:"error-text",autoComplete:"mobile-number",toolTipText:Object(r.translateWithI18Next)(Ke),toolTipSrc:s.a.Tooltip,errorIcon:s.a.Error,errorIconClassName:"flex-div",onBlur:e=>{const t=Object(se.g)(e.target.value,P,F);pe({...he,phone:t})},onFocus:e=>{let t=e.target.value.replace(L.ze,"");pe({...he,phone:t})},type:"tel",maxLength:X})})]}),ee&&Object(T.jsxs)("div",{className:"edit-personal-data-view",children:[Object(l.db)(!C,Object(T.jsxs)("div",{className:"left-side-lables",children:[" ",Object(r.translateWithI18Next)(Ge),Object(T.jsx)("span",{children:Object(l.mc)(z)})]})),Object(T.jsx)("div",{className:"right-side-form",children:Object(T.jsx)(fe.a,{type:"text","data-testid":"postalcode-testid",name:"postalCode",placeholder:Object(l.Tc)(C,"".concat(Object(r.translateWithI18Next)(Ge)).concat(Object(l.mc)(z)),""),value:null===he||void 0===he?void 0:he.postalCode,inputClassName:"edit-info-input-class",onChange:e=>{if(e.target.name===qe&&e.target.value.length<=q){var t,a;const i=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(a=t.value)||void 0===a?void 0:a.replace(L.ye,"");pe({...he,[e.target.name]:i})}},error:(null===he||void 0===he||null===(I=he.postalCode)||void 0===I?void 0:I.length)<=0||Object(l.j)([ge,(null===he||void 0===he||null===(x=he.postalCode)||void 0===x?void 0:x.length)>0,!Object(se.z)(null===he||void 0===he?void 0:he.postalCode,te)]),onBlur:e=>{const t=Object(se.h)(e.target.value,ie,q,be);pe({...he,postalCode:t}),Ne(!0)},onFocus:e=>{const t=e.target.value.replace(L.ue,"");pe({...he,postalCode:t}),Ne(!0)},helperText:Object(r.translateWithI18Next)(Ve),helperTextClassName:"error-text",autoComplete:"postal-code",toolTipSrc:s.a.Tooltip,errorIcon:s.a.Error,errorIconClassName:"flex-div"})})]}),Object(T.jsxs)("div",{className:"edit-personal-data-view",children:[Object(T.jsxs)("div",{className:"left-side-lables",children:[Object(r.translateWithI18Next)(Ye),Object(l.db)(C,Object(T.jsx)("div",{children:Object(T.jsx)(Ee.a,{placement:"top",title:Object(r.translateWithI18Next)(ze),children:Object(T.jsx)("img",{class:"",src:s.a.Tooltip,alt:"tooltip"})})})),Object(l.db)(!C,Object(T.jsx)("span",{className:"tool-tip-position tool-tip-desktop",children:Object(T.jsx)(Ee.a,{placement:"top",title:Object(r.translateWithI18Next)(ze),children:Object(T.jsx)("img",{class:"tooltip-view-desktop",src:s.a.Tooltip,alt:"tooltip"})})}))]}),Object(l.Tc)(Q,Object(T.jsx)("div",{className:"dob-present",children:re}),Object(T.jsx)("div",{className:"right-side-form",children:(e=>{const t={label:"year",optionList:Object(se.f)(K),flag1:!(null!==me&&void 0!==me&&me.isYearSelected),flag2:null===me||void 0===me?void 0:me.isDayNotValid},a={label:"day",optionList:Re,flag1:!(null!==me&&void 0!==me&&me.isDaySelected),flag2:null===me||void 0===me?void 0:me.isDayFromLeapYearMonth};return Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"dis-flex",children:[Object(T.jsx)(Ze,{className:"input-container1",props:e?t:a}),Object(T.jsx)(Ze,{className:"input-container2",props:{label:"month",optionList:se.m,flag1:!(null!==me&&void 0!==me&&me.isMonthSelected),flag2:null===me||void 0===me?void 0:me.isDayFromLeapYearMonth}}),Object(T.jsx)(Ze,{className:"input-container3",props:e?a:t}),Object(l.db)(!C,Object(T.jsx)("span",{className:"tool-tip-position tool-tip-desktop",children:Object(T.jsx)(Ee.a,{placement:"top",title:Object(r.translateWithI18Next)(ze),children:Object(T.jsx)("img",{class:"tooltip-view",src:s.a.Tooltip,alt:"tooltip"})})}))]}),Object(l.db)(!(null!==me&&void 0!==me&&me.isValidDOB),Object(T.jsxs)("div",{className:"dob-error-show flex-div",children:[Object(T.jsx)("div",{children:Object(T.jsx)("img",{src:s.a.Error,alt:"Error visible"})}),Object(T.jsx)("div",{children:Object(r.translateWithI18Next)(null===me||void 0===me?void 0:me.dobErrorMsg)})]}))]})})(B)}))]}),Object(T.jsxs)("div",{className:"global-buttons-container",children:[Object(T.jsx)(f.a,{"data-testid":"edit-account-btn-testid",className:"buttons-group cancel",onClickHandler:()=>Z("fromCancel"),children:Object(r.translateWithI18Next)(Le)}),Object(T.jsx)(f.a,{className:"buttons-group \n                ".concat(!Object(se.l)({firstNameText:he.firstName,lastNameText:he.lastName,phoneNoText:he.phone,postalCode:he.postalCode,isValidDOB:null===me||void 0===me?void 0:me.isValidDOB,email:he.email,phoneNumberRegex:ae,postalCodeRegex:te,isEnablePostalCodeSignUp:ee,postalCodeFormatNumber:ie,validateNameRegex:oe,isPostalCodeMandtoryField:z,validateEmailRegex:le,isEmailDisabled:U,isDOBMandatoryField:de,customerInfo:he,validateLastNameRegex:ce})||Se?"save-disabled":"save","\n                "),disabled:!Object(se.l)({firstNameText:he.firstName,lastNameText:he.lastName,phoneNoText:he.phone,postalCode:he.postalCode,isValidDOB:null===me||void 0===me?void 0:me.isValidDOB,email:he.email,phoneNumberRegex:ae,postalCodeRegex:te,isEnablePostalCodeSignUp:ee,postalCodeFormatNumber:ie,validateNameRegex:oe,isPostalCodeMandtoryField:z,validateEmailRegex:le,isEmailDisabled:U,isDOBMandatoryField:de,customerInfo:he,validateLastNameRegex:ce})||Se,"data-testid":"update-account-button-testid-1",onClickHandler:()=>{Object(Te.c)(he),$(he)},children:Object(r.translateWithI18Next)(we)})]})]})})]})]})},De=a(11);var Ae=e=>{var t;let{profileReducer:a,authReducer:i,tenantReducer:o,editAccountInfoModal:n,updateCustomerData:d,isMobile:s,openEditInfoFlag:c,errorMessageForPhoneNumberInUse:v,setErrorMessageForPhoneNumberInUse:O}=e;const{basic:b={}}=a||{},{firstName:m,lastName:h,email:p,phone:g,dateOfBirth:N,postalCode:S}=b,{PERSONAL_INFO_TEXT:I,EDIT:x,NAME:f,EMAIL_ADDRESS:E,MOBILE_NUMBER:C,POSTAL_CODE:y,DATE_OF_BIRTH_PERSONALINFOCARD:D}=u.a,{isPostalCodeMandtoryField:A,postalCodesLength:R,scheduleOrderDateFormat:_,dateFormat:w}=o,{web:{global:{allowOtpPopup:k=!1,isEnablePostalCodeSignUp:M=!1,maxLengthPhoneNumber:P="",postalCodeRegex:F="",postalCodeFormatNumber:W,postalCodeSeparator:H=" ",minLengthPhoneNumber:U=""}={},accountPage:{validateNameRegex:B="",validateEmailRegex:G="",isEmailMandatoryField:V="",isDOBMandatoryField:Y="",validateLastNameRegex:K="",showErrorForPhoneNumberInUse:z=""}={}}={},checkout:{phoneNumberRegExp:q=""}={}}=null!==(t=null===o||void 0===o?void 0:o.componentOptions)&&void 0!==t?t:{},J=null===N||void 0===N?void 0:N.split("-"),X=Object(r.translateWithI18Next)(null===J||void 0===J?void 0:J[2]),Q=Object(r.translateWithI18Next)(null===J||void 0===J?void 0:J[0]),Z=N?xe.a.format({date:null===J||void 0===J?void 0:J[1],outPutFormat:Object(r.translateWithI18Next)(null===L.sb||void 0===L.sb?void 0:L.sb.MMMM)}):"",$="".concat(X," ").concat(Object(r.translateWithI18Next)(Z),"  ").concat(Q),ee=_?Object(De.h)(N,w):$,te=()=>Object(T.jsx)("div",{className:"edit-input edit-info-link",children:Object(T.jsx)(j.a,{"data-testid":"edit-account-button-testid",onClickHandler:()=>n("fromEditClick"),children:Object(r.translateWithI18Next)(x)})});return c?(()=>{var e,t,a,i;return Object(T.jsx)(ye,{isMobile:s,firstName:m,lastName:h,email:p,phone:g,postalCode:S,dateOfBirth:N,day:X,year:Q,month:Z,dob:ee,editAccountInfoModal:n,updateCustomerData:d,isEnablePostalCodeSignUp:M,phoneNumberRegex:q,postalCodeRegex:F,phonePattern:null===o||void 0===o||null===(e=o.componentOptions)||void 0===e||null===(t=e.phoneNumberConstants)||void 0===t?void 0:t.phoneRegexPattern,splitPattern:null===o||void 0===o||null===(a=o.componentOptions)||void 0===a||null===(i=a.phoneNumberConstants)||void 0===i?void 0:i.splitPattern,postalCodeFormatNumber:W,maxLengthPhoneNumber:P,validateNameRegex:B,validateEmailRegex:G,isEmailMandatoryField:V,isDOBMandatoryField:Y,allowOtpPopup:k,postalCodesLength:R,isPostalCodeMandtoryField:A,validateLastNameRegex:K,errorMessageForPhoneNumberInUse:v,displayErrorForPhoneNumberInUse:z,setErrorMessageForPhoneNumberInUse:O,postalCodeSeparator:H})})():(()=>{var e,t,a,i;return Object(T.jsxs)("div",{className:"personal-info-card",children:[Object(T.jsxs)("div",{className:"personal-card-left-side",children:[Object(r.translateWithI18Next)(I),s&&te()]}),Object(T.jsxs)("div",{className:"personal-card-right-side",children:[!s&&te(),Object(T.jsxs)("div",{className:"personal-info-section",children:[Object(T.jsxs)("div",{className:"personal-data-view",children:[Object(T.jsx)("div",{children:Object(r.translateWithI18Next)(f)}),Object(T.jsxs)("div",{children:[" ",m," ",h]})]}),p&&Object(T.jsxs)("div",{className:"personal-data-view",children:[Object(T.jsx)("div",{children:Object(r.translateWithI18Next)(E)}),Object(T.jsxs)("div",{children:[" ",p]})]}),Object(T.jsxs)("div",{className:"personal-data-view",children:[Object(T.jsx)("div",{children:Object(r.translateWithI18Next)(C)}),Object(T.jsxs)("div",{children:[" ",Object(l.Y)(g,null===o||void 0===o||null===(e=o.componentOptions)||void 0===e||null===(t=e.phoneNumberConstants)||void 0===t?void 0:t.phoneRegexPattern,null===o||void 0===o||null===(a=o.componentOptions)||void 0===a||null===(i=a.phoneNumberConstants)||void 0===i?void 0:i.splitPattern,P,U)]})]}),M&&S&&Object(T.jsxs)("div",{className:"personal-data-view","data-testid":"postal-code-view",children:[Object(T.jsx)("div",{children:Object(r.translateWithI18Next)(y)}),Object(T.jsxs)("div",{children:[" ",S]})]}),N&&Object(T.jsxs)("div",{className:"personal-data-view","data-testid":"dob-view",children:[Object(T.jsx)("div",{children:Object(r.translateWithI18Next)(D)}),Object(T.jsx)("div",{children:ee})]})]})]})]})})()};const Re=e=>{var t,a;let{handleSubscriptionStatus:i,brazeSubscriptionStatus:o,loading:n,tenantReducer:d,brazeCookiesAccperted:s,handleOneTrustBanner:c}=e;const{UNSUBSCRIBE:v,SUBSCRIBE:O,MARKETING_EMAIL:b,MARKETING_SMS:m}=u.c;return Object(T.jsxs)("div",{className:"preferences-card",children:[Object(T.jsx)("div",{className:"preferences-card-left-side preferences-card-left-side-au",children:Object(r.translateWithI18Next)(E.a.PREFERENCES_COMMUNICATION_PREFERENCES)}),Object(T.jsx)("div",{className:"preferences-card-right-side",children:Object(T.jsxs)("div",{className:"preferences-container",children:[Object(T.jsxs)("div",{className:"preferences-item ".concat(s?"":"no-cookies-list"),children:[Object(T.jsxs)("div",{className:"preferences-item-list preferences-item-list-au",children:[Object(T.jsx)("div",{className:"preferences-text",children:Object(T.jsx)("label",{htmlFor:Object(r.translateWithI18Next)(E.a.EMAIL_MARKETING),children:Object(r.translateWithI18Next)(E.a.EMAIL_MARKETING)})}),Object(T.jsx)("div",{children:Object(T.jsx)(j.a,{"data-testid":"handleSubscriptionStatus-testid",onClickHandler:()=>i(o,b),className:"".concat(s?"":"no-cookies-list"),children:!n&&(null!==o&&void 0!==o&&null!==(t=o.email)&&void 0!==t&&t.subscribed?Object(r.translateWithI18Next)(v):Object(r.translateWithI18Next)(O))})})]}),(null===d||void 0===d?void 0:d.brazeSMSMarketingOption)&&!(null!==d&&void 0!==d&&d.brazeSMSAndEmailCommon)&&Object(T.jsxs)("div",{className:"preferences-item-list preferences-item-list-au",children:[Object(l.qe)(),Object(T.jsx)("div",{children:Object(T.jsx)(j.a,{"data-testid":"handleSubscriptionStatus-smstestid",onClickHandler:()=>i(o,m),className:"".concat(s?"":"no-cookies-list"),children:!n&&(null!==o&&void 0!==o&&null!==(a=o.sms)&&void 0!==a&&a.subscribed?Object(r.translateWithI18Next)(v):Object(r.translateWithI18Next)(O))})})]})]}),!s&&Object(T.jsxs)("p",{className:"cookies-text",children:[Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.PLEASE_MODIFY)," ",Object(T.jsx)("span",{className:"cookieslink-text",onClick:c,children:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.COOKIES_SETTINGS)})," ",Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.PREFERENCE_TEXT)]})]})})]})};Re.defaultProps={};var _e=Re,we=a(1071);const Le=(e,t,a,i,o)=>{let l=JSON.parse(JSON.stringify(i));l[t][a]=e.target.value,o(l)},ke=e=>{var t,a;const{index:i,anniversaryData:o,setAnniversaryData:l}=e;let n=null===o||void 0===o||null===(t=o[i])||void 0===t?void 0:t.anniversaryMonth;const d=(""!==n?Object(se.i)(n-1):[]).map(Number),{ANNIVERSARY_NAME:s,ANNIVERSARY_NAME_ERROR_TEXT:c,ANNIVERSARY_DATE:v,ANNIVERSARY_DAY:O,ANNIVERSARY_MONTH:b}=u.a;return Object(T.jsxs)("div",{className:"personal-information-card",children:[Object(T.jsx)("div",{className:"edit-personal-data-view edit-anniversary-view",children:Object(T.jsx)("div",{className:"right-side-form",children:Object(T.jsx)(fe.a,{"data-testid":"anniversaryName-testid",name:"anniversaryName",onChange:e=>Le(e,i,s,o,l),value:null===o||void 0===o||null===(a=o[i])||void 0===a?void 0:a.anniversaryName,placeholder:Object(r.translateWithI18Next)(s),helperText:Object(r.translateWithI18Next)(c),helperTextClassName:"error-text",inputClassName:"edit-info-input-class",maxLength:"100",autoComplete:"anniversaryName",errorIconClassName:"flex-div"})})}),Object(T.jsxs)("div",{className:"anniversary-date-edit",children:[Object(T.jsx)("div",{className:"anniversary-date-title",children:Object(r.translateWithI18Next)(v)}),Object(T.jsx)("div",{className:"right-side-form",children:Object(T.jsx)("div",{children:Object(T.jsxs)("div",{className:"dis-flex",children:[Object(T.jsx)("div",{className:"month-container",children:Object(T.jsx)("div",{className:"did-floating-label-content did-error-input",children:Object(T.jsxs)("select",{required:!0,"data-testid":"anniversary-month-testid",id:"month-list",className:"did-floating-select",value:o[i].anniversaryMonth,onClick:e=>{e.preventDefault()},onChange:e=>Le(e,i,b,o,l),children:[Object(T.jsx)("option",{value:"",disabled:!0,selected:!0,children:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.MONTH)},""),se.m.map(((e,t)=>Object(T.jsx)("option",{value:t+1,children:Object(r.translateWithI18Next)(e)},e)))]})})}),Object(T.jsx)("div",{className:"day-container",children:Object(T.jsx)("div",{className:"did-floating-label-content did-error-input",children:Object(T.jsxs)("select",{required:!0,"data-testid":"anniversary-day-testid",id:"day-list",name:"day",className:"did-floating-select",value:o[i].anniversaryDay,onClick:e=>{e.preventDefault()},onChange:e=>Le(e,i,O,o,l),children:[Object(T.jsx)("option",{value:"",disabled:!0,selected:!0,children:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.DAY)},""),null===d||void 0===d?void 0:d.map((e=>Object(T.jsxs)("option",{value:e,children:[e,Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.DAY)]},e)))]})})})]})})})]})]})};var Me=o.a.memo(ke);const Pe=(e,t)=>{for(let a of e)for(let e in a)if(e===t){if(!a[e].trim())return!0}else if(!a[e])return!0;return!1},Fe=e=>{const{isMobile:t,firstName:a,lastName:o,email:l,phone:n,postalCode:d,updateCustomerData:c,anniversaryDates:v,setAnniversaryEditFlag:O}=e,{editAnniversaryInfoModal:b}=e,[m,j]=Object(i.useState)([]),{SAVE:h,CANCEL:p,ANNIVERSARY_DETAILS:g,ADD_ANNIVERSARY_BTN:N,ANNIVERSARY_NAME:S}=u.a,I={firstName:a,lastName:o,email:l,phone:n,postalCode:d,allowOtpPopup:!1},x=()=>{j((e=>[...e,{anniversaryName:"",anniversaryDay:"",anniversaryMonth:""}]))},E=null===m||void 0===m?void 0:m.map((e=>({anniversaryName:null===e||void 0===e?void 0:e.anniversaryName,anniversaryMonth:null===e||void 0===e?void 0:e.anniversaryMonth,anniversaryDay:parseInt(null===e||void 0===e?void 0:e.anniversaryDay)})));return Object(i.useEffect)((()=>{(null===v||void 0===v?void 0:v.length)>0?j(v):x()}),[]),Object(T.jsxs)("div",{className:"personal-info-card anniversary-detail-card",children:[Object(T.jsx)("div",{className:"personal-card-left-side",children:Object(r.translateWithI18Next)(g)}),Object(T.jsxs)("div",{className:"personal-card-right-side",children:[null===m||void 0===m?void 0:m.map(((e,t)=>Object(T.jsx)("div",{children:Object(T.jsx)(Me,{index:t,anniversaryData:m,setAnniversaryData:j})},t))),Object(T.jsxs)(f.a,{"data-testid":"edit-account-btn-testid",className:"add-anniversary",disabled:3===m.length,onClickHandler:x,children:[Object(T.jsx)("span",{className:"add-image",children:3===m.length?Object(T.jsx)("img",{class:"add-icon",src:s.a.addDisable,alt:"addDisable"}):Object(T.jsx)("img",{class:"add-icon",src:s.a.addEnable,alt:"addEnable"})}),Object(r.translateWithI18Next)(N)]}),Object(T.jsxs)("div",{className:"global-buttons-container",children:[Object(T.jsx)(f.a,{"data-testid":"cancel-anniversary-btn-testid",className:"buttons-group cancel",onClickHandler:()=>b("fromCancel",O),children:Object(r.translateWithI18Next)(p)}),Object(T.jsx)(f.a,{className:"buttons-group save save-button","data-testid":"update-anniversary-btn-testid",disabled:Pe(m,S),onClickHandler:()=>{I.anniversaryDates=[...E],c(I)},children:Object(r.translateWithI18Next)(h)})]})]})]})};var We=o.a.memo(Fe);const He=e=>{let{profileReducer:t,editAnniversaryInfoModal:a,updateCustomerData:i,isMobile:o,anniversaryEditFlag:l,setAnniversaryEditFlag:n}=e;const{basic:d={}}=t||{},{firstName:s,lastName:c,email:v,phone:O,dateOfBirth:b,postalCode:m,anniversaryDates:h}=d,{EDIT:p,ANNIVERSARY_DETAILS:g}=u.a,N=()=>Object(T.jsx)("div",{className:"edit-input edit-info-link",children:Object(T.jsx)(j.a,{"data-testid":"edit-account-button-testid",onClickHandler:()=>a("EditClick",n),children:Object(r.translateWithI18Next)(p)})});return l?Object(T.jsx)(We,{isMobile:o,firstName:s,lastName:c,email:v,phone:O,postalCode:m,dateOfBirth:b,editAnniversaryInfoModal:a,updateCustomerData:i,anniversaryDates:h,setAnniversaryEditFlag:n}):Object(T.jsxs)("div",{className:"personal-info-card anniversary-detail-card",children:[Object(T.jsxs)("div",{className:"personal-card-left-side",children:[Object(r.translateWithI18Next)(g),o&&N()]}),Object(T.jsxs)("div",{className:"personal-card-right-side",children:[!o&&N(),Object(T.jsx)("div",{className:"personal-info-section",children:null===h||void 0===h?void 0:h.map(((e,t)=>{var a,i,o;return Object(T.jsx)("div",{children:Object(T.jsxs)("div",{className:"personal-data-view",children:[Object(T.jsx)("div",{children:null===(a=h[t])||void 0===a?void 0:a.anniversaryName}),Object(T.jsxs)("div",{className:"display-anniversary-dates",children:[Object(T.jsx)("span",{children:Object(r.translateWithI18Next)(Object(se.n)(null===(i=h[t])||void 0===i?void 0:i.anniversaryMonth))}),Object(T.jsxs)("span",{children:[null===(o=h[t])||void 0===o?void 0:o.anniversaryDay,Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.DAY)]})]})]})},t)}))})]})]})};var Ue=o.a.memo(He),Be=a(185),Ge=a(435),Ve=a.n(Ge),Ye=a(37),Ke=a.n(Ye);const ze=e=>{let{handleClose:t,deleteAccountCallback:a,CartError:i}=e;const{DELETE_ACCOUNT_MESSAGE:l,CANCEL:n,DELETE_ACCOUNT_BTN:d}=u.a,s={CONFIRM_DELETE_MSG:{MSGTXT1:Object(r.translateWithI18Next)(l)}};return Object(T.jsx)(o.a.Fragment,{children:Object(T.jsx)(P.a,{handleClose:t,classNames:"delete-account-modal",CartAlertForm:Object(T.jsx)(F.a,{splitTitle:s.CONFIRM_DELETE_MSG,imageSrc:i,altText:"delete-account",cancelButtonText:Object(r.translateWithI18Next)(n),confirmButtonText:Object(r.translateWithI18Next)(d),confirmHandler:a,cancelHandler:t})})})},qe=()=>{var e,t;null===(e=window)||void 0===e||null===(t=e.OneTrust)||void 0===t||t.ToggleInfoDisplay()},Je=(e,t)=>{t("EditClick"===e)},Xe=e=>{var t,a;let{firstName:i,middleName:o,lastName:n,email:d,phone:r,profileInfo:s,otpValidationRequired:c,otp:u,screen:v,successCallBackNotNeeded:O,dispatch:b,callSignInApi:m,errorCallBackOTP:j,basicInfoObj:h,tenantReducer:p,profileReducer:g,anniversaryDates:N}=e;const S={email:d,firstName:i,lastName:n,phone:r,anniversaryDates:N},I={screen:v,otp:u,fName:i,lName:n,email:d,phoneNo:r,profileInfo:s,successCallBackNotNeeded:O,updatedFlag:Object(se.c)(S,h,s),anniversaryDates:N};b(Object(Z.i)({sucessCallback:()=>m(I),errorCallBack:j,tenantId:null===p||void 0===p?void 0:p.tenantId,customerId:null===g||void 0===g||null===(t=g.basic)||void 0===t?void 0:t.id,body:{firstName:i.trim(),middleName:o,lastName:n.trim(),emailId:(null===d||void 0===d||null===(a=d.trim())||void 0===a?void 0:a.length)>0?d:"",phoneNumber:r.replace(/ /g,""),attributes:s,otpValidationRequired:c,otp:u,isSopac:Object(l.ce)(),anniversaryDates:N}}))};var Qe=e=>{var t,a,o,d,c,v,O,b,j,h,p,g,N,S,I,x;let{updateMenu:C,isMobile:y}=e;const{ACCOUNT_SETTINGS_TEXT:D,DELETE_ACCOUNT_TEXT:A,SUBSCRIBTION_MSG_TEXT:R,UNSUBSCRIBTION_MSG_TEXT:_,EXCEEDED_VERIFICATION_ATTEMPTS:w,YOUR_INFO_SAVED:k,EDIT_WITH_OLD_PHONE:M,FROM_OTP_SCREEN:P}=u.a,{MARKETING_EMAIL:F,MARKETING_SMS:W}=u.c,{SingleArrowback:H}=s.a,G=Object(n.b)(),V=Object(m.g)(),[Y,K]=Object(i.useState)(!1),[z,q]=Object(i.useState)(!1),[J,X]=Object(i.useState)(""),Q=Object(n.c)((e=>e.profileReducer||null)),$=Object(n.c)((e=>e.tenantReducer||null)),ee=Object(n.c)((e=>e.authReducer||null)),ae=Object(n.c)((e=>e.brazeSubscriptionReducerV2||null)),[ie,oe]=Object(i.useState)(!1),[le,ne]=Object(i.useState)(),[de,re]=Object(i.useState)(),[ce,ue]=Object(i.useState)(!0),[ve,Oe]=Object(i.useState)(0),{subscriptions:be={}}=Object(B.b)(Be.c),[me,je]=Object(i.useState)(be),[he,pe]=Object(i.useState)(!1),[ge,Ne]=Object(i.useState)("default"),[Se,xe]=Object(i.useState)(!1),{basic:{email:fe,firstName:Ee,lastName:Ce,phone:ye}={}}=null!==Q&&void 0!==Q?Q:{},De={email:fe,firstName:Ee,lastName:Ce,phone:ye},[Re,Le]=Object(i.useState)(!0),ke=null===(t=window)||void 0===t||null===(a=t.appboy)||void 0===a||null===(o=a.User)||void 0===o?void 0:o.NotificationSubscriptionTypes,[Me,Pe]=Object(i.useState)(!1),Fe=null===$||void 0===$||null===(d=$.componentOptions)||void 0===d||null===(c=d.accountSettings)||void 0===c||null===(v=c.anniversaryDetails)||void 0===v?void 0:v.showAnniversarySection,We=null===$||void 0===$||null===(O=$.componentOptions)||void 0===O||null===(b=O.checkout)||void 0===b?void 0:b.numberOfDigitsTobeMasked,He=null===$||void 0===$||null===(j=$.componentOptions)||void 0===j||null===(h=j.checkout)||void 0===h?void 0:h.maskedNumberOfDigit,Ge=null===$||void 0===$||null===(p=$.componentOptions)||void 0===p||null===(g=p.web)||void 0===g||null===(N=g.global)||void 0===N?void 0:N.allowOtpPopup,Ye=Object(B.b)(U.b);Object(i.useEffect)((()=>{var e;null===(e=window)||void 0===e||e.scrollTo(0,0)}),[]),Object(i.useEffect)((()=>(null!==Ye&&void 0!==Ye&&Ye.accoundSetting&&q(!0),()=>{(null===Ye||void 0===Ye?void 0:Ye.accoundSetting)&&G(Object(U.c)({key:null===E.a||void 0===E.a?void 0:E.a.ACCOUNT_SETTING}))})),[]),Object(i.useEffect)((()=>{var e,t;(null===(e=window)||void 0===e?void 0:e.OnetrustActiveGroups)&&Le(JSON.stringify(null===(t=window)||void 0===t?void 0:t.OnetrustActiveGroups).includes(L.A))}),[null===(S=window)||void 0===S?void 0:S.OnetrustActiveGroups]),Object(i.useEffect)((()=>{var e,t,a;const i=null!==$&&void 0!==$&&$.brazeMparticle?null===(e=window)||void 0===e||null===(t=e.mParticle)||void 0===t||null===(a=t.Store)||void 0===a?void 0:a.mpid:null===Q||void 0===Q?void 0:Q.customerId;(fe||ye)&&G(Be.a.fetch({customerId:i}))}),[G,fe,null===Q||void 0===Q?void 0:Q.customerId,null===$||void 0===$?void 0:$.brazeMparticle]),Object(i.useEffect)((()=>{var e,t;if(null!==V&&void 0!==V&&null!==(e=V.location)&&void 0!==e&&null!==(t=e.hash)&&void 0!==t&&t.includes(L.Ae.ACCOUNT_SETTINGS)){var a,i,o;const e=null===(a=window)||void 0===a||null===(i=a.location)||void 0===i||null===(o=i.hash)||void 0===o?void 0:o.split("?")[1],t=new URLSearchParams(e),l=Object.fromEntries(t.entries());e&&u.f.includes(null===l||void 0===l?void 0:l.field)&&q(!0)}}),[V,Q]);const Qe=e=>{var t;const{firstName:a,middleName:i="",lastName:o,email:l,phone:n,postalCode:d=null,day:r,month:s,year:c,allowOtpPopup:u,anniversaryDates:v}=e;u||ne(n),q(!0);const O=null===Q||void 0===Q||null===(t=Q.basic)||void 0===t?void 0:t.phone,b="0"!==String(r).charAt(0)?"0".concat(r):String(r);let m=se.m.indexOf(s)+1;const j={birthYear:c?String(c):null,birthDay:r?String(r<10&&b||r):null,birthMonth:m?String(m<10&&"0".concat(m)||m):null,postalCode:d||null};let h={...e,profileInfo:j};re(h),n.replace(/ /g,"")===O||!0===u?(Xe({firstName:a.trim(),middleName:i,lastName:o.trim(),email:l,phone:n,profileInfo:j,otpValidationRequired:!1,otp:"",screen:"fromEditWithOldPhone",successCallBackNotNeeded:void 0,dispatch:G,callSignInApi:$e,errorCallBackOTP:Ze,basicInfoObj:De,tenantReducer:$,profileReducer:Q,anniversaryDates:v}),q(!1),X(L.sc),Pe(!1),u||Oe(0)):(Xe({firstName:null===a||void 0===a?void 0:a.trim(),middleName:i,lastName:null===o||void 0===o?void 0:o.trim(),email:l,phone:n,profileInfo:j,otpValidationRequired:!0,otp:"",screen:"fromResendOtpScreen",successCallBackNotNeeded:!0,dispatch:G,callSignInApi:$e,errorCallBackOTP:Ze,basicInfoObj:De,tenantReducer:$,profileReducer:Q,anniversaryDates:v}),et(),xe(!0),Oe(0),Pe(!1))},Ze=()=>{ge===L.Zd?(oe(!1),pe(!0)):(ue(!1),Oe(ve+1),ve>=2&&oe(!1))},$e=e=>{const{screen:t,otp:a,fName:i,lName:o,email:n,phoneNo:d,profileInfo:s,successCallBackNotNeeded:c,updatedFlag:u,anniversaryDates:v}=e;if(c)return;const O={firstName:null===i||void 0===i?void 0:i.trim(),lastName:null===o||void 0===o?void 0:o.trim(),emailId:n,phoneNumber:d.replace(/ /g,""),attributes:s,isUpdated:u,anniversaryDates:v};G(Object(Z.d)(O)),(t===M||a)&&Object(l.pf)(Object(r.translateWithI18Next)(k)),t===P&&(oe(!1),q(!1))},et=()=>{ue(!0)};Object(i.useEffect)((()=>{je(be)}),[null===ae||void 0===ae?void 0:ae.loading]),Object(i.useEffect)((()=>{if(Se){var e,t,a,i;if(Ne("default"),null!==Q&&void 0!==Q&&Q.isLoading)return;if((null===Q||void 0===Q||null===(e=Q.response)||void 0===e||null===(t=e.response)||void 0===t?void 0:t.errorMessage)===L.Zd)Ne(null===Q||void 0===Q||null===(a=Q.response)||void 0===a||null===(i=a.response)||void 0===i?void 0:i.errorMessage),oe(!1),pe(!0);else pe(!1),J!==M&&oe(!0)}}),[null===Q||void 0===Q?void 0:Q.response,null===de||void 0===de?void 0:de.phone,J,null===Q||void 0===Q?void 0:Q.isLoading]);const tt=e=>{var t,a,i,o;return null!==(t=null===(a=window)||void 0===a||null===(i=a.appboy)||void 0===i||null===(o=i.getUser())||void 0===o?void 0:o.setEmailNotificationSubscriptionType(e))&&void 0!==t&&t};return Object(T.jsxs)("div",{className:"account-settings-container",children:[Object(T.jsxs)("div",{className:"account-settings-header-mobile",children:[Object(T.jsx)("img",{className:"backArrow-account-setting",onClick:()=>C(""),src:H,alt:"back btn"}),Object(T.jsx)("span",{className:"account-setting-text-header",children:Object(r.translateWithI18Next)(D)})]}),Object(T.jsx)("p",{className:"account-setting-text-heading",children:Object(r.translateWithI18Next)(D)}),z&&3===ve&&Object(T.jsxs)("div",{class:"verification-faild-container",children:[Object(T.jsxs)("div",{children:[" ",Object(T.jsx)("img",{src:s.a.Error,alt:"Error visible"})," "]}),Object(T.jsx)("div",{children:Object(T.jsxs)("span",{children:[" ",Object(r.translateWithI18Next)(w)]})})]}),Object(T.jsx)(Ae,{profileReducer:Q,authReducer:ee,tenantReducer:$,updateCustomerData:Qe,editAccountInfoModal:e=>{ue(!0),oe(!1),"fromEditClick"===e?q(!0):(q(!1),Oe(0)),he&&pe(!1)},isMobile:y,openEditInfoFlag:z,updatedCustomerData:de,errorMessageForPhoneNumberInUse:he,setErrorMessageForPhoneNumberInUse:pe}),Fe&&Object(T.jsx)(Ue,{profileReducer:Q,authReducer:ee,tenantReducer:$,updateCustomerData:Qe,editAnniversaryInfoModal:Je,isMobile:y,anniversaryEditFlag:Me,setAnniversaryEditFlag:Pe}),(null===$||void 0===$||null===(I=$.componentOptions)||void 0===I||null===(x=I.accountSettings)||void 0===x?void 0:x.communicationPreferenceComponent)&&Object(T.jsx)(_e,{brazeSubscriptionStatus:me,handleSubscriptionStatus:(e,t)=>{var a,i,o;const n=((e,t,a)=>{const i=JSON.parse(JSON.stringify(e)),o="".concat(t,".subscribed"),l=Ke()(a,t,{});return Ve()(i,o,(()=>!l.subscribed))})(me,t,e);je(n);const d=Ke()(n,t,{}),s=null!==e&&void 0!==e&&null!==(a=e.email)&&void 0!==a&&a.subscribed?ke.UNSUBSCRIBED:ke.SUBSCRIBED;if(null!==$&&void 0!==$&&$.brazeSMSMarketingOption){const e=t===F?$.brazeEmailGroupId:$.brazeSMSGroupId;(e=>{var t,a,i,o,l,n;let{tenantReducer:d,selectedPrefStatus:r,subscriptionGroupId:s,subscriptionStatus:c,setEmailNotification:u}=e;const v=r.subscribed?null===(t=window)||void 0===t||null===(a=t.appboy)||void 0===a||null===(i=a.getUser())||void 0===i?void 0:i.addToSubscriptionGroup:null===(o=window)||void 0===o||null===(l=o.appboy)||void 0===l||null===(n=l.getUser())||void 0===n?void 0:n.removeFromSubscriptionGroup;null!==d&&void 0!==d&&d.brazeSMSAndEmailCommon?(u(c),v(null===d||void 0===d?void 0:d.brazeEmailGroupId),v(null===d||void 0===d?void 0:d.brazeSMSGroupId)):v(s)})({tenantReducer:$,selectedPrefStatus:d,subscriptionGroupId:e,subscriptionStatus:s,setEmailNotification:tt})}else tt(s);const c=[{subscribe:null===n||void 0===n||null===(i=n.email)||void 0===i?void 0:i.subscribed,key:F},{subscribe:null===n||void 0===n||null===(o=n.sms)||void 0===o?void 0:o.subscribed,key:W}].reduce(((e,t)=>(t.subscribe&&e.push(t.key),e)),[]);Object(se.u)(c);const u=null!==d&&void 0!==d&&d.subscribed?R:_;Object(l.pf)(Object(r.translateWithI18Next)(u))},loading:null===ae||void 0===ae?void 0:ae.loading,tenantReducer:$,brazeCookiesAccperted:Re,handleOneTrustBanner:qe}),Object(T.jsx)(f.a,{"data-testid":"delete-button-testid",className:"delete-account-button delete-account-button-au",onClickHandler:()=>{K(!0),Object(Ie.c)({popupTitle:Object(r.translateWithI18Next)(A)})},children:Object(r.translateWithI18Next)(A)}),Y&&Object(T.jsx)(ze,{handleClose:()=>{K(!1)},deleteAccountCallback:()=>{Object(Te.b)(null===Q||void 0===Q?void 0:Q.customerId),te.a.getInstance().deleteAccount(),K(!1)},CartError:s.a.CartError}),!Ge&&ie&&ve<=2&&Object(T.jsx)(we.a,{closeOtpModalHandler:()=>{oe(!1)},otpSendTo:le,profileReducer:Q,tenantReducer:$,callValidateOtpAPI:e=>{const{firstName:t,middleName:a,lastName:i,email:o,phone:l,profileInfo:n}=de;Xe({firstName:t.trim(),middleName:a,lastName:i.trim(),email:o,phone:l,profileInfo:n,otpValidationRequired:!0,otp:e,screen:"fromOtpScreen",successCallBackNotNeeded:void 0,dispatch:G,callSignInApi:$e,errorCallBackOTP:Ze,basicInfoObj:De,tenantReducer:$,profileReducer:Q})},callResendOtpAPI:()=>{const{firstName:e,middleName:t,lastName:a,email:i,phone:o,profileInfo:l}=de;Xe({firstName:e.trim(),middleName:t.trim(),lastName:a,email:i,phone:o,profileInfo:l,otpValidationRequired:!0,otp:"",screen:"fromResendOtpScreen",successCallBackNotNeeded:!0,dispatch:G,callSignInApi:$e,errorCallBackOTP:Ze,basicInfoObj:De,tenantReducer:$,profileReducer:Q}),et(),Oe(0)},isOtpMatch:ce,hideError:et,invalidOtpCount:ve,numberOfDigitsTobeMasked:We,maskedNumberOfDigit:He})]})},Ze=a(1121),$e=a(267),et=a(455),tt=a(379);const at=e=>{const{updateMenu:t,saveCardsList:a,paymentProvider:o,allCardsTypesList:n,addNewCreditOrDebitCard:d,customerId:c,tenantId:u,dispatch:v,setSaveCardsList:O}=e,[b,m]=Object(i.useState)(!1),[j,h]=Object(i.useState)(""),p=()=>{m(!1)},g={dispatch:v,tenantId:u,customerId:c,paymentProvider:o,cardId:j,setSaveCardsList:O};return Object(T.jsxs)("div",{className:"payment-methods col-12 au",children:[Object(T.jsxs)("div",{className:"my-payment-methods-header-mobile",children:[Object(T.jsx)("img",{className:"backArrow-account-setting","data-testid":"message-backArrow",onClick:()=>t(""),src:s.a.SingleArrowback,alt:"back button"}),Object(T.jsx)("span",{className:"account-setting-text-header",children:Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.MY_PAYMENT_METHODS)})]}),Object(T.jsx)("div",{className:"payment-methods-header col-12","data-testid":"saved-cards-title",children:Object(T.jsxs)("span",{className:"payment-methods-heading",children:[Object(r.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.SAVED_CARDS)," (",null===a||void 0===a?void 0:a.length,")"]})}),Object(l.Tc)((null===a||void 0===a?void 0:a.length)>0,Object(et.b)(a,(e=>{m(!0),h(e)}),n,o),Object(et.d)()),d&&Object(et.c)(e),b&&Object(T.jsx)(et.a,{handleClose:p,deleteCardHandler:()=>{p(),Object(tt.a)(g)},"data-testid":"delete-card-confirm-modal"})]})};var it=o.a.memo(at);var ot=e=>{var t,a,o,l;const d=Object(n.b)();Object(i.useEffect)((()=>{window.scrollTo(0,0),d(Object($e.o)())}),[]);const{profileReducer:r,paymentsContentReducer:s,tenantReducer:c}=Object(n.c)((e=>e)),{customerId:u,savedCards:v}=r,O=s,{tenantId:b,componentOptions:m}=c,j=null===m||void 0===m||null===(t=m.payment)||void 0===t?void 0:t.paymentProvider,{accountPage:{addNewCreditOrDebitCard:h,maxSavedCardLimit:p}={}}=null!==(a=null===c||void 0===c||null===(o=c.componentOptions)||void 0===o?void 0:o.web)&&void 0!==a?a:{},[g,N]=Object(i.useState)(v),S=null===O||void 0===O||null===(l=O.tendersContent)||void 0===l?void 0:l.items,I={saveCardsList:g,paymentProvider:j,tenantId:b,customerId:u,allCardsTypesList:S,addNewCreditOrDebitCard:h,maxSavedCardLimit:p,dispatch:d,setSaveCardsList:N};return Object(i.useEffect)((()=>{if(0===(null===v||void 0===v?void 0:v.length)&&j===(null===L.Sd||void 0===L.Sd?void 0:L.Sd.THAILAND_PAYMENTS)){const e={dispatch:d,tenantId:b,customerId:u,paymentProvider:j,setSaveCardsList:N};Object(tt.b)(e)}}),[]),Object(i.useEffect)((()=>{N(v)}),[v]),Object(T.jsx)(it,{...e,...I})};const lt=e=>e.showCartClearAlert?Object(T.jsx)(re.a,{}):null;var nt=e=>{var t,a,o;let{history:d,setShowKfcHeader:r}=e;const{showContentCards:s=!1}=Object(n.c)((e=>{var t,a,i,o;return null!==(t=null===(a=e.tenantReducer)||void 0===a||null===(i=a.componentOptions)||void 0===i||null===(o=i.web)||void 0===o?void 0:o.global)&&void 0!==t?t:{}})),{ADDRESS:c,FAVORITE_ORDERS:u,ACCOUNT_SETTING:v,MESSAGE_TAG:b,MY_PAYMENT_METHODS:m,PREFERENCES:j,CHICKEN_MILES:h}=E.a,{FAV_ORDER_ITEM:p}=L.Oc,{ITEM_IMAGE_HEIGHT_MOBILE:g,ITEM_IMAGE_WIDTH_MOBILE:N,ITEM_IMAGE_HEIGHT_DESKTOP:S,ITEM_IMAGE_WIDTH_DESKTOP:I}=p,[x,f]=Object(i.useState)(Object(l.Ud)(window.innerWidth)),C=s?b:u,y=(null===d||void 0===d||null===(t=d.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.defaultTab)||C,[D,A]=Object(i.useState)(Object(l.Tc)(x,y===h?y:"",y)),R=Object(B.b)(U.b),[_,w]=Object(i.useState)({width:0,height:0}),{userOrderState:k}=Object(i.useContext)(O.a),M=()=>{const e=Object(l.Ud)(window.innerWidth);f(e);w(e?{height:g,width:N}:{height:S,width:I})};Object(i.useEffect)((()=>{null!==R&&void 0!==R&&R.accoundSetting&&A(v)}),[]),Object(i.useEffect)((()=>{var e,t;null!==d&&void 0!==d&&null!==(e=d.location)&&void 0!==e&&null!==(t=e.hash)&&void 0!==t&&t.includes(L.Ae.ACCOUNT_SETTINGS)&&A(v)}),[d]),Object(i.useEffect)((()=>{var e,t,a;(null===d||void 0===d||null===(e=d.location)||void 0===e||null===(t=e.hash)||void 0===t||null===(a=t.includes)||void 0===a?void 0:a.call(t,u))&&A(u)}),[d]),Object(i.useEffect)((()=>{var e,t;(null===d||void 0===d||null===(e=d.location)||void 0===e?void 0:e.selectOption)&&A(null===d||void 0===d||null===(t=d.location)||void 0===t?void 0:t.selectOption)}),[null===d||void 0===d||null===(o=d.location)||void 0===o?void 0:o.selectOption]),Object(i.useEffect)((()=>{window.addEventListener(L.we,M),Object(se.s)(x)}),[x]),Object(i.useEffect)((()=>{Object(se.s)(x)}),[D]),Object(i.useEffect)((()=>{M();const e=localStorage.getItem(L.gd.LOAD_MORE_ORDER_HISTORY);var t,a;return t=d,a=A,e!==L.zc&&!0!==t.location.isNavigatingFromReorder&&t.location.selectedMenu!==L.zc||a(L.Ae.ORDER_HISTORY),()=>{localStorage.removeItem(L.gd.LOAD_MORE_ORDER_HISTORY),Object(se.s)(x)}}),[]);const P=e=>{switch(e){case h:return r(!1),Object(T.jsx)(Se.a,{});case b:return r(!1),Object(T.jsx)(ge,{history:d,isMobile:x,updateMenu:e=>A(e)});case v:return r(!1),Object(T.jsx)(Qe,{updateMenu:e=>A(e),isMobile:x});case j:return r(!1),Object(T.jsx)(Ze.a,{updateMenu:e=>A(e),isMobile:x});case c:return Object(T.jsx)(de,{history:d,isMobile:x,updateMenu:e=>A(e)});case L.Ae.ORDER_HISTORY:return r(!1),Object(T.jsx)(je.default,{history:d,isMobile:x,updateMenu:e=>A(e)});case m:return r(!1),Object(T.jsx)(ot,{history:d,isMobile:x,updateMenu:e=>A(e)});case u:return r(!1),Object(T.jsx)(Ne.a,{isMobile:x,renderSwitch:P,updateMenu:e=>A(e),imageContainerSize:_});default:return r(!0),x?Object(T.jsx)(me,{isMobile:x,currentMenu:D,updateMenu:e=>A(e),history:d}):null}};return x?Object(T.jsxs)("div",{className:"mobile-order-history",id:"mob-view-account-section",children:[P(D),lt(k)]}):Object(T.jsxs)("div",{className:"account-desktop-container account-gloabal-container mt-5 grid-container",children:[Object(T.jsx)("div",{className:"account-section-left",children:Object(T.jsx)(me,{isMobile:x,currentMenu:D,updateMenu:e=>A(e),history:d})}),Object(T.jsx)("div",{className:"account-section-right account-section-right-au",children:P(D)}),lt(k)]})},dt=a(173);t.default=e=>{const[t,a]=Object(i.useState)(!0),{userOrderState:l,userOrderStateDispatch:n}=Object(i.useContext)(O.a),{dispositionStateData:d={},scheduleOrderData:r={},searchStoreData:s={}}=l;return Object(i.useEffect)((()=>{window.scrollTo(0,0)}),[]),Object(i.useEffect)((()=>{const e=Boolean((null===d||void 0===d?void 0:d.showDisposition)||(null===s||void 0===s?void 0:s.showSearchStore)||r.showScheduleOrderCatering);n({type:dt.a.SET_HIDE_NAV_BARS,value:{flag:!t&&!e}})}),[t,null===d||void 0===d?void 0:d.showDisposition,null===s||void 0===s?void 0:s.showSearchStore,r.showScheduleOrderCatering,n]),Object(i.useEffect)((()=>()=>{n({type:dt.a.SET_HIDE_NAV_BARS,value:{flag:!1}})}),[]),Object(T.jsx)(o.a.Fragment,{children:Object(T.jsx)(nt,{history:e.history,setShowKfcHeader:e=>a(e)})})}},899:function(e,t,a){"use strict";t.a={NINE_TILES:9,FIVE_TILES:5,SIX_TILES:6,SEVEN_TILES:7,BROWSE_CATEGORIES:"browsecategory",VIEW_ALL_MENU:"viewAllMenu",MENU:"/menu",ADD_TO_CART:"addToCart",ITEM_QUANTITY:1}},900:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a(3);var i=a(968),o=a.n(i),l=(a(969),a(970),a(2));const n=e=>{const{settings:t,carousalRef:a}=e;return Object(l.jsx)(o.a,{...t,ref:a,children:e.children})};n.defaultProps={settings:null,carousalRef:null},t.b=n},901:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return v})),a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return m}));var i=a(19),o=a(9),l=a(5),n=a(320),d=a(0);const r=async(e,t)=>{var a;await(null===i.a||void 0===i.a?void 0:i.a.registerEvent(null===o.a||void 0===o.a||null===(a=o.a.upsizeSelectedPwa)||void 0===a?void 0:a.name,{"%event%":"upsizeSelected","%upsizeProduct%":(null===e||void 0===e?void 0:e.name)||"NA","%size%":(null===e||void 0===e?void 0:e.size)||"NA","%upsizeSelectedFrom%":t||"NA"},l.xb))},s=async e=>{var t;await i.a.registerEvent(null===o.a||void 0===o.a||null===(t=o.a.viewOfferDetailsPwa)||void 0===t?void 0:t.name,{"%event%":"viewOfferDetails","%offerName%":null===e||void 0===e?void 0:e.titleValue,"%userType%":null===e||void 0===e?void 0:e.userType,"%promoType%":null===e||void 0===e?void 0:e.couponCode,"%disposition%":null===e||void 0===e?void 0:e.dispositionType},l.xb)},c=async e=>{var t;await i.a.registerEvent(null===o.a||void 0===o.a||null===(t=o.a.signUpClick)||void 0===t?void 0:t.name,{"%event%":"signUpClick","%orderValue%":e.orderValue},l.xb)},u=async e=>{var t,a,n,d,r;const{eventFlag:s,itemsArray:c,userType:u="",totalAmount:v="",couponCode:O="",currencyShortName:b=""}=e,m=await(null===c||void 0===c?void 0:c.length)>0&&((null===c||void 0===c||null===(t=c[0])||void 0===t?void 0:t.item_name)===(null===c||void 0===c||null===(a=c[1])||void 0===a?void 0:a.item_name)?[null===c||void 0===c?void 0:c[0]]:c);await(null===c||void 0===c?void 0:c.length)>0&&i.a.registerEvent(null===o.a||void 0===o.a||null===(n=o.a[s])||void 0===n?void 0:n.name,{data:{event:s,userType:u||"",ecommerce:{items:m,currency:b||"",value:v||(null===m||void 0===m||null===(d=m[0])||void 0===d?void 0:d.price)*(null===m||void 0===m||null===(r=m[0])||void 0===r?void 0:r.quantity)||"",coupon:O||""}}},l.xb)},v=async(e,t)=>{var a;await i.a.registerEvent(null===o.a||void 0===o.a||null===(a=o.a.viewItemList)||void 0===a?void 0:a.name,{data:{event:n.u,disposition:Object(l.h)(t),ecommerce:{items:e||[]}}},l.xb)},O=async()=>{var e;await i.a.registerEvent(null===o.a||void 0===o.a||null===(e=o.a.signUpStart)||void 0===e?void 0:e.name,{data:{event:"signUpStart"}},l.xb)},b=async function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];await(null===i.a||void 0===i.a?void 0:i.a.registerEvent(null===o.a||void 0===o.a||null===(e=o.a.selectRecommenededItem)||void 0===e?void 0:e.name,{data:{event:d.p.SELECT_ITEM_EVENT,userType:t,ecommerce:{checkout_cart:{items:a}}}}))},m=async e=>{var t,a,n;await(null===i.a||void 0===i.a?void 0:i.a.registerEvent(null===o.a||void 0===o.a||null===(t=o.a.selectRecommenededItem)||void 0===t?void 0:t.name,{data:{event:d.p.SELECT_ITEM_EVENT,item_list_name:null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.item_list_name,item_list_id:null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.item_list_id,ecommerce:{items:e||[]}}},l.xb))}},902:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var i=a(3),o=a(25),l=a(84),n=a(92),d=a(76);const r={CLEAR_ALL_MSG:{MSGTXT1:"clearCartAwareText",MSGTXT2:"clearCartActionText",MSGTXT3:"clearCartCompleteText"},CLEAR_ALL:"continue",CANCEL:"cancel",TO_CHANGE_LANGUAGE:"toChangeLanguage"};var s=a(14),c=a(6),u=a(5),v=a(30),O=a(15),b=a(0),m=a(69),j=a(2);const h=e=>{const t=Object(o.c)((e=>e.cartReducer)),{cartData:a={}}=t||{},h=Object(o.c)((e=>e.tenantReducer)),{tenantId:p=""}=h||{},{userOrderState:g,userOrderStateDispatch:N}=Object(i.useContext)(d.a),{modalToOpenOnConfirm:S,modalOpenFrom:I,confirmCallBack:x}=g,{CartError:f}=O.a,E=Object(o.b)(),{CLEAR_ALL_MSG:C,CLEAR_ALL:T,CANCEL:y,TO_CHANGE_LANGUAGE:D}=r;((e,t,a)=>{e.langSelector?t.MSGTXT3=a:t.MSGTXT3})(e,C,D);const{SHOW_CLEAR_CART_ALERT:A,DISPOSITION_DATA:R,SEARCH_ORDER_DATA:_,SCHEDULE_ORDER_DATA:w,clearCartChangeFlag:L,orderTypeAlertTitle:k,searchStoreAlertTitle:M,RESET_DELIVERY_ADDRESS_LINE:P,CLEAR_CART_CONFIRM_CANCEL_MODAL:F,ORDER_CAPACITY_DATA_UPDATED:W}=s.a,H=Object(u.Jd)(g.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):g.dispositionNew,U=()=>{N({type:F,value:{}}),N({type:b.Le,value:{selectedLanguage:""}}),N({type:A,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!1,languageToChange:""}}),I===L&&N({type:w,value:{showScheduleOrderCatering:!0,selectedStoreInfo:H.store,changeFlow:!0}})};return Object(j.jsx)(n.a,{handleClose:U,classNames:"clear-cart-modal",CartAlertForm:Object(j.jsx)(l.a,{splitTitle:C,imageSrc:f,altText:"cart-error",confirmButtonText:Object(c.translateWithI18Next)(T),cancelButtonText:Object(c.translateWithI18Next)(y),cancelHandler:U,confirmHandler:()=>{if(a.discountLines.length>0){let e=a.discountLines.map((e=>e.id));E(Object(v.n)({params:{basketId:a.id},tenantId:p,shouldClearCart:!0},e))}else E(Object(v.o)({basketId:a.id,tenantId:p}));E(Object(m.c)({key:b.gd.VIEW_PRODUCT})),localStorage.removeItem(b.gd.ADD_TO_ORDER),E(Object(v.u)(new Date)),N({type:A,value:{showCartClearAlert:!1,modalOpenFrom:"",cartClearConfirmed:!0}}),x&&x(),S===k?(N({type:P}),N({type:R,value:{showDisposition:!0}}),N({type:w,value:{showScheduleOrderCatering:!1}}),N({type:_,value:{showSearchStore:!1}}),N({type:W,value:{orderCapacityDataUpdated:!1}}),N({type:F,value:{}})):S===M&&N({type:_,value:{showSearchStore:!0}})}})})}},903:function(e,t,a){"use strict";var i=a(812);a.d(t,"a",(function(){return i.default}))},905:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return i}));let i;(async()=>{i=await(async()=>{var t,i,o,l,n;const d=null===(t=e)||void 0===t||null===(i=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_TENANT_CODE:"in",REACT_APP_API_BASE_URL:"https://online.kfc.co.in",REACT_APP_PWA_VERSION_STRING:"pwa-2502-0-3_39e1541f"}))||void 0===i?void 0:i.REACT_APP_TENANT_CODE,r=await Promise.resolve().then(a.bind(null,176));return null===r||void 0===r||null===(o=r.default)||void 0===o||null===(l=o[null===d||void 0===d||null===(n=d.toUpperCase)||void 0===n?void 0:n.call(d)])||void 0===l?void 0:l.MENU_PLP_CONSTANTS})()})()}).call(this,a(112))},907:function(e,t,a){"use strict";a.d(t,"g",(function(){return b})),a.d(t,"j",(function(){return m})),a.d(t,"l",(function(){return j})),a.d(t,"k",(function(){return h})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return g})),a.d(t,"n",(function(){return S})),a.d(t,"e",(function(){return I})),a.d(t,"d",(function(){return x})),a.d(t,"m",(function(){return f})),a.d(t,"f",(function(){return E})),a.d(t,"h",(function(){return C})),a.d(t,"i",(function(){return T})),a.d(t,"a",(function(){return y}));var i=a(19),o=a(5),l=a(9),n=a(123),d=a(6),r=a(327),s=a(320),c=a(18),u=a.n(c),v=a(0),O=a(2);const b=async(e,t)=>{var a;await i.a.registerEvent(null===l.a||void 0===l.a||null===(a=l.a.menuNavigation)||void 0===a?void 0:a.name,{"%event%":"menuNavigation","%menuNavigationLink%":e,"%menuIndex%":t},o.xb)},m=async(e,t)=>{const a=[];a.push({event:e.eventType,[t]:e.selectedData}),await i.a.registerEvent("suggestedSearchClick",{data:a[0]},o.xb)},j=async(e,t,a)=>{const l=[];l.push({event:e.eventType,[t]:e.selectedData[t],[a]:e.selectedData[a]}),await i.a.registerEvent(e.eventType,{data:l[0]},o.xb)},h=async(e,t,a,l)=>{const n=[];n.push({event:e.eventType,[t]:e.selectedData[t],[a]:e.selectedData[a],[l]:e.selectedData[l]}),await i.a.registerEvent(void 0,{data:n[0]},o.xb)},p=(e,t)=>{const a=JSON.parse(JSON.stringify(e));let i=[];return(null===t||void 0===t?void 0:t.length)&&t.forEach((e=>{let t=null===a||void 0===a?void 0:a.find((t=>{let{isHidden:a=!1,items:i}=t;return!a&&(null===i||void 0===i?void 0:i.length)&&i[0].id===e.id}));t&&i.push(t)})),i},g=(e,t,a,i,o,l)=>{var n;let d=[];return d=null!==e&&void 0!==e&&e.categories&&0===(null===e||void 0===e||null===(n=e.products)||void 0===n?void 0:n.length)&&0===Object.keys(t).length?N(e.categories[0],a,i,o):Object.keys(t).length>0?N(t,a,i,o):N(e,a,i,o),d},N=(e,t,a,i)=>{var l;let n={},d=[];return d=null===e||void 0===e||null===(l=e.products)||void 0===l?void 0:l.map((e=>(e.items.forEach(((e,l)=>{let d=e.additionalProperties.find((e=>e.key.toLowerCase()===s.o.PRICE_WITHOUT_TAX.toLowerCase())),r=Object(o.Dc)(d.value,i).toFixed(2);r=r?parseFloat(r):"NA",n={item_name:null===e||void 0===e?void 0:e.name,item_id:null===e||void 0===e?void 0:e.id,price:r,item_category:t,item_list_name:t,item_list_id:a,index:l,quantity:"1",currency:null===v.p||void 0===v.p?void 0:v.p.INR}})),n))),d},S=async e=>{var t,a,n;await i.a.registerEvent(null===l.a||void 0===l.a||null===(t=l.a.viewItemListPlp)||void 0===t?void 0:t.name,{data:{event:"view_item_list",ecommerce:{item_list_id:null===e||void 0===e||null===(a=e[0])||void 0===a?void 0:a.item_list_id,item_list_name:null===e||void 0===e||null===(n=e[0])||void 0===n?void 0:n.item_list_name,items:e}}},o.xb)},I=(e,t)=>{let a={},i=e.find((e=>{var a;return(null===e||void 0===e||null===(a=e.name)||void 0===a?void 0:a.trim())===t}))||{};return 0===Object.keys(i).length&&(i=e.find((e=>{var i;if((null===(i=e.categories)||void 0===i?void 0:i.length)>0)for(const o in e.categories)if(e.categories[o].id===t)return a=e.categories[o],!0;return!1}))),{selectedCategory:i,selectedSubcategory:a}},x=function(e,t,a,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(u()(e))return i(!1),!1;const l=(r=t,null===(d=e)||void 0===d?void 0:d.find((e=>{let{url:t,isHidden:a,categories:i}=e,o=!a&&(null===t||void 0===t?void 0:t.toLowerCase())===(null===r||void 0===r?void 0:r.toLowerCase());return o||(o=i.find((e=>{let{url:t,isHidden:a}=e;return!a&&(null===t||void 0===t?void 0:t.toLowerCase())===(null===r||void 0===r?void 0:r.toLowerCase())}))),o})));var d,r,s;if(u()(l)){if(t&&(a("category"),i(!0)),!u()(e)){var c;const t=null===e||void 0===e?void 0:e.find((e=>{let{isHidden:t}=e;return!t}));t&&n.scroller.scrollTo(null===t||void 0===t||null===(c=t.name)||void 0===c?void 0:c.trim(),{duration:1500,delay:100,smooth:!1,containerId:"",offset:o?-140:-100})}}else n.scroller.scrollTo(null===l||void 0===l||null===(s=l.name)||void 0===s?void 0:s.trim(),{duration:1500,delay:100,smooth:!1,containerId:"",offset:o?-150:-100});return!u()(l)},f=e=>null===e||void 0===e?void 0:e.isStoreClosed,E=e=>{const{ADD_TO_CART_OCCASSION:t,STORE_CLOSED_BUTTON_TEXT:a}=r.d;let i=Object(d.translateWithI18Next)(t),o=Object(d.translateWithI18Next)(a);return null!==e&&void 0!==e&&e.isStoreClosed&&(i=o),{btnText:i}},C=(e,t)=>{0===e.length&&Object(o.Kb)(document.title,Object(d.translateWithI18Next)(s.w)+" \u201c".concat(t,"\u201d ")+Object(d.translateWithI18Next)(s.s))},T=e=>{const t=(null===e||void 0===e?void 0:e.modgrpIds)||[];let a=[];return null===t||void 0===t||t.forEach((e=>{var t;const{modifiers:i=[]}=e;a.push(null===i||void 0===i||null===(t=i[0])||void 0===t?void 0:t.name)})),a},y=e=>{const{searchMode:t,filterList:a,dietaryList:i,products:o,viewUp:l,tenantData:n,getCardCount:d,catalogs:r,storeClosedData:s,setShowTopScrollBtn:c,searchModeElmnt:u,MenuItemList:v,CATEGORY_ID:b}=e;return(t.isSearchedMode||[...a,...i].length)&&null!==o&&void 0!==o&&o.length?Object(O.jsx)("div",{className:l?"small-menu-container":"medium-menu-container",children:Object(O.jsx)(v,{productList:o,cardType:l?"small":"medium",tenantData:n,cardCount:d,catalogs:r,storeClosedData:s,setShowTopScrollBtn:c,categoryId:b})}):t.isSearchedMode&&u()}},913:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return u}));var i=a(19),o=a(9),l=a(5),n=a(11);a(0);const d=async function(e,t,a,n){var d;let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";await i.a.registerEvent(null===o.a||void 0===o.a||null===(d=o.a.add_to_cart)||void 0===d?void 0:d.name,{data:{event:"add_to_cart",userType:t||"",ecommerce:{items:[e],currency:r,value:a||"",coupon:n||""}}},l.xb)},r=e=>{i.a.registerEvent("editPersonalInformation",{"%event%":"editPersonalInformation","%firstName%":e.firstName||"NA","%lastName%":e.lastName||"NA","%email%":e.email||e.emailId||"NA","%phone%":e.phone||e.phoneNumber||"NA","%dateOfBirth%":e.dateOfBirth||e.year&&"".concat(e.year,"-").concat(Object(n.O)(e.month),"-").concat(e.day)||"NA","%postCode%":e.postalCode||"NA","%user_id%":e.user_id||"NA","%braze_dob%":e.year&&"".concat(e.year,", ").concat(Object(n.O)(e.month),", ").concat(e.day)||"NA"},l.xb)},s=e=>{i.a.registerEvent("updateCommunicationPreferences",{"%event%":"updateCommunicationPreferences","%marketingEmails%":e.find((e=>"marketing-emails"===e))?"true":"false","%editorAndCustomerFavourites%":e.find((e=>"editor-pick"===e))?"true":"false","%newsAndAnnouncements%":e.find((e=>"kfc-news"===e))?"true":"false","%doNotSellInformation%":e.find((e=>"do-not-sell"===e))?"true":"false","%receiveSMS%":e.find((e=>"receive-sms"===e))?"true":"false"},l.xb)},c=async e=>{await i.a.registerEvent("deleteAccount",{"%event%":"deleteAccount","%userID%":e||"NA"},l.xb)},u=async e=>{await i.a.registerEvent("signOutSuccess",{"%event%":"signOutSuccess","%userID%":e||"NA"},l.xb)}},918:function(e,t,a){"use strict";var i=a(92),o=a(84),l=a(4),n=a(54),d=a(6),r=a(3),s=a(76),c=a(39),u=a(110),v=a(2);t.a=e=>{const{isAddedPromosCoupon:t=!1,cartItem:a={},setConfirmationModel:O=null,itemRemoveHandler:b=null,isRemoveItemLoading:m=!1,setCouponModal:j=null,setRemoveItem:h=null,flag:p="",quantityAction:g="",updateItemQuantity:N=null,addtoCartClinckHandler:S=null,setAddToClickParms:I=null,addToClickParms:x={},selectedStoreData:f=null,clickHandler:E=null,title:C="",confirmButtonText:T="",removeCouponHandler:y=null,couponCode:D="",couponTitle:A="",itemRemoveWrapper:R=null,giftCardOrVoucherErrMsg:_="",giftCardErrFirstMsg:w=""}=e,{userOrderStateDispatch:L}=Object(r.useContext)(s.a),k=Object(u.a)(),{REMOVE_COUPON:M}=n.a,{CONTINUE:P,CANCEL_BTN_TXT:F,REMOVE_GIFT_CARD_VOUCHER:W,CART_UPDATE_CLEAR_WICODE_FIRST_TEXT:H,CART_UPDATE_CLEAR_WICODE_SECOND_TEXT:U}=l.a;return Object(v.jsx)(i.a,{handleClose:()=>j(!1),classNames:"promos-rewards-warning-msg coupon-modal gift-card-voucher-remove-modal",CartAlertForm:Object(v.jsx)(o.a,{title:p===M?C:Object(d.translateWithI18Next)(W),giftCardOrVoucherErrMsg:p===M?_:Object(d.translateWithI18Next)(U),giftCardErrFirstMsg:p===M?w:Object(d.translateWithI18Next)(H),altText:"",confirmButtonText:p===M?T:Object(d.translateWithI18Next)(P),confirmHandler:e=>(e=>{let{isAddedPromosCoupon:t,cartItem:a,setConfirmationModel:i,itemRemoveHandler:o,isRemoveItemLoading:l,setCouponModal:d,setRemoveItem:r,flag:s,quantityAction:u,updateItemQuantity:v,addtoCartClinckHandler:O,setAddToClickParms:b,addToClickParms:m,selectedStoreData:j,clickHandler:h,events:p,removeCouponHandler:g,couponCode:N,couponTitle:S,itemRemoveWrapper:I,userOrderStateDispatch:x,sliceDispatch:f}=e;const{EDIT_ITEM:E,REMOVE_ITEM:C,QUANTITY_INCREASE_DECREASE:T,STORE_DISPOSITION_UPDATE:y,REMOVE_COUPON:D}=n.a;if(d(!1),s===C&&I({isAddedPromosCoupon:t,item:a,setConfirmationModel:i,itemRemoveHandler:o,isRemoveItemLoading:l,setRemoveItem:r,sliceDispatch:f}),s===T&&(x({type:c.p,value:{couponErrorMessage:"REMOVE"}}),v(a,u,p)),s===E){const{event:e,data:t,miniPDPData:a,totalAmount:i,cartId:o,pdpDataForUpdateFoodLine:l,cartData:n}=m;O(e,t,a,o,i,l,n),b({}),d(!1)}s===y&&h(p,j),s===D&&g(N,S)})({isAddedPromosCoupon:t,cartItem:a,setConfirmationModel:O,itemRemoveHandler:b,isRemoveItemLoading:m,itemRemoveWrapper:R,setCouponModal:j,setRemoveItem:h,flag:p,quantityAction:g,updateItemQuantity:N,addtoCartClinckHandler:S,setAddToClickParms:I,addToClickParms:x,selectedStoreData:f,clickHandler:E,events:e,removeCouponHandler:y,couponCode:D,couponTitle:A,userOrderStateDispatch:L,sliceDispatch:k}),cancelHandler:()=>j(!1),cancelButtonText:Object(d.translateWithI18Next)(F)})})}},926:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var i=a(3),o=a(73),l=a.n(o),n=a(121),d=a(5),r=(a(0),a(903)),s=a(54),c=a(76),u=a(14),v=a(25),O=a(122),b=a(190),m=a(30),j=a(15),h=a(2);const p=e=>{const{basketLineItemId:t,customizableFoodItemsList:a,SetCustomizableFoodItemsList:o,calculateTotalAmountHandler:l,isEditSelection:n}=e,p=Object(v.b)(),{RESET_MODGROUP_IDS_UPDATE:g}=b.a,{userOrderState:N,userOrderStateDispatch:S}=Object(i.useContext)(c.a),{MINI_PDP_DATA:I,FROMFLAGEDIT:x,EDIT_CLICKED:f}=u.a,{QUANTITY_ACTION:E}=s.a,C=a[t],T=Object(v.c)((e=>{let{menuReducer:t}=e;return null===t||void 0===t?void 0:t.currentItemDetails})),[y,D]=Object(i.useState)(!1),{Single_Arrow_Edit:A}=j.a,R=(e,i)=>{C.quantity=i===E.Increase?(null===C||void 0===C?void 0:C.quantity)+1:(null===C||void 0===C?void 0:C.quantity)-1;const n=a;n[t]=C,o(n),l()};Object(i.useEffect)((()=>{var e;let t=!0;null===C||void 0===C||null===(e=C.modGrps)||void 0===e||e.forEach((e=>{t*=e.modifiers[0].isDefault}))}),[C.modGrps]),Object(i.useEffect)((()=>{Object(d.oc)(T,C,N,y,p,m.v),D(!1)}),[T,y]);return Object(h.jsxs)(h.Fragment,{children:[n?Object(h.jsx)("div",{className:"EditItemsCard",onClick:()=>(()=>{var e,a;S({type:I,value:{id:null===C||void 0===C||null===(e=C.foodItems)||void 0===e?void 0:e.id,flag:x,foodLineId:t}}),S({type:g}),S({type:f,value:{cartEditClicked:!1}}),p(Object(O.c)({tenantId:null===C||void 0===C?void 0:C.tenantId,catalogName:null===C||void 0===C?void 0:C.catalog,itemId:null===C||void 0===C||null===(a=C.foodItems)||void 0===a?void 0:a.id})),D(!0)})(),children:Object(h.jsxs)("div",{className:"CustomizeOptionModal",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"DisplayNameFont",children:null===C||void 0===C?void 0:C.displayName}),Object(h.jsx)("div",{className:"customizableProducts-Default",children:Object(d.pc)(C.modGrps)})]}),Object(h.jsx)("img",{className:"arrow-icon","data-testid":"arrow-click-edit",src:A,alt:"Arrow Icon"})]})}):Object(h.jsxs)("div",{className:"CustomizeOptionModal",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"DisplayNameFont",children:null===C||void 0===C?void 0:C.displayName}),Object(h.jsx)("div",{className:"customizableProducts-Default",children:Object(d.pc)(C.modGrps)})]}),Object(h.jsx)("div",{className:"PlusAndMinus",children:Object(h.jsx)(r.a,{itemCount:null===C||void 0===C?void 0:C.quantity,itemQuantity:1,"data-testid":"QuantityModifier_OnClick",updateItemQuantity:R,quantityAction:E,maxItemCountPerLineItem:null===C||void 0===C?void 0:C.maxItemCountPerLineItem,cartItemCount:1,hideChild:!0})})]}),Object(h.jsx)("div",{className:"LineSeparator"})]})},g={ADD_NEW_PRODUCT:"addNewProduct",UPDATE_CART:"updateCart",CUSTOMIZATION_MODAL_DATA:"CUSTOMIZATION_MODAL_DATA"};var N=a(6);const S=e=>{const{addNewProductHandler:t,currencySymbol:a,updateCartHandler:i,customizableFoodItemsList:o,SetCustomizableFoodItemsList:l,totalAmount:n,calculateTotalAmountHandler:d,isEditSelection:r,handleClose:s,checkItemExpiry:c}=e,{ADD_NEW_PRODUCT:u,UPDATE_CART:v}=g,O=Object.keys(o).length;return Object(h.jsxs)("div",{children:[Object.keys(o).map((e=>Object(h.jsx)(p,{"data-testid":"ModalTemplate_QuantityModifier",addNewProductHandler:t,basketLineItemId:e,customizableFoodItemsList:o,SetCustomizableFoodItemsList:l,calculateTotalAmountHandler:d,isEditSelection:r,handleClose:s}))),r?Object(h.jsx)("div",{className:"editSelectionsItem",children:Object(h.jsx)("button",{className:"button whiteButton blackBorder add-new-product","data-testid":"add-new-product-for-edit","aria-label":"Add new product",tabindex:"0",onClick:()=>t(),children:Object(N.translateWithI18Next)(u)})}):Object(h.jsxs)("div",{className:O<2?"FinalButton":"FinalDivButtons",children:[Object(h.jsx)("div",{className:"AddNew",children:Object(h.jsx)("span",{className:"addNewItem",onClick:t,children:Object(N.translateWithI18Next)(u)})}),Object(h.jsx)("div",{className:"ButtonAndPopupLink",children:Object(h.jsxs)("button",{disabled:!1,className:"button activeBtn redButton Update-cart-button ","aria-label":"Update Cart",tabindex:"0",onClick:t=>{c({event:t,cardId:null===e||void 0===e?void 0:e.cardId,productInfo:null===e||void 0===e?void 0:e.productInfo,orderClickHandler:i,props:e})},children:[Object(h.jsx)("span",{className:"TextInButton",children:Object(N.translateWithI18Next)(v)+" "}),Object(h.jsx)("span",{children:a+n})]})})]})]})};var I=a(913),x=a(319);const f=e=>{var t;const{filteredPreviousData:a,tenantData:o,dname:r,cardId:s,categoryId:c,categoryName:u,categoryUrl:O,itemCount:b,availability:j,imageName:p,itemFoodlineId:g,customizable:N,isFavouriteMenu:f=!1,cartData:E,clickHandler:C,handleClose:T,foodId:y,isEditSelection:D,headerText:A,pricewithouttax:R}=e,_=Object(v.b)(),{discountTotal:w="",couponCode:L=""}=Object(d.vb)(E)||{},k=Object(v.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),M=Object(d.gd)(null===k||void 0===k?void 0:k.localized,null===k||void 0===k?void 0:k.loggedIn),{flatResponse:{productMapById:P={}}={}}=null!==(t=Object(d.Lb)(Object(v.c)((e=>{let{menuReducer:t}=e;return t}))))&&void 0!==t?t:{},{tenantId:F}=o,[W,H]=Object(i.useState)({}),[U,B]=Object(i.useState)(0),{currencyConversionFactor:G,currencySymbol:V,componentOptions:Y}=o,{web:{global:{showPriceWithTax:K=!1}={}}={}}=null!==Y&&void 0!==Y?Y:{},z={id:"CustomizedModal",role:"dialog",modalTitleId:"SELECT QUANTITY",show:!0,classNames:"CustomizedModal",showCloseBtn:!0,showBackBtn:!1,closeButtonHandler:T,modalTitle:A},[q,J]=Object(i.useState)(-1),[X,Q]=Object(i.useState)([]),Z=()=>{J(-1),T&&T()},$=()=>{0===X.length&&0===q?Z():X&&null!==X&&void 0!==X&&X.length&&q<=X.length&&((()=>{var e,t,a,i;_(Object(m.x)({params:{basketId:null===E||void 0===E?void 0:E.id,basketLineItemId:null===(e=X[q])||void 0===e?void 0:e.basketLineItemId},tenantId:F},{quantity:null===(t=X[q])||void 0===t?void 0:t.quantity,isBundle:Object(x.e)((null===(a=X[q])||void 0===a?void 0:a.foodItemId)||(null===(i=X[q])||void 0===i?void 0:i.mdmId))}))})(),J(q+1))};Object(i.useEffect)((()=>{$()}),[X]),Object(i.useEffect)((()=>{if(-1===q){var e;const t={...W};null===E||void 0===E||null===(e=E.foodLines)||void 0===e||e.forEach((e=>{var a,i;if(null!==e&&void 0!==e&&null!==(a=e.item)&&void 0!==a&&a.customizable&&(null===e||void 0===e||null===(i=e.item)||void 0===i?void 0:i.id)===y){var l,n;const a=Object(d.Yc)(null===e||void 0===e?void 0:e.amount,null===e||void 0===e?void 0:e.taxAmount,null===e||void 0===e?void 0:e.quantity);t[null===e||void 0===e?void 0:e.id]={tenantId:F,basketLineItemId:null===e||void 0===e?void 0:e.id,quantity:null===e||void 0===e?void 0:e.quantity,unitPrice:null===e||void 0===e?void 0:e.unitPrice,unitPriceWithoutTax:a,displayName:null===e||void 0===e||null===(l=e.item)||void 0===l?void 0:l.displayName,modGrps:null===e||void 0===e||null===(n=e.item)||void 0===n?void 0:n.modGrps,maxItemCountPerLineItem:null===o||void 0===o?void 0:o.maxItemCountPerLineItem,previousQty:null===e||void 0===e?void 0:e.quantity,foodItems:null===e||void 0===e?void 0:e.item,catalog:null===E||void 0===E?void 0:E.catalog,categorySelected:c}}})),H(t),J(0)}else q===X.length?(Z(),_(Object(m.u)(new Date))):$()}),[null===E||void 0===E?void 0:E.foodLines]),Object(i.useEffect)((()=>{ee()}),[W]);const ee=()=>{let e=0;Object.values(W).forEach((t=>{const a=K?t.unitPrice:t.unitPriceWithoutTax;e+=t.quantity*a})),B((e/G).toFixed(2))},te=Object(h.jsx)(n.a,{...z,children:Object(h.jsx)(S,{...e,"data-testid":"ModalTemplate",filteredPreviousData:a,addNewProductHandler:e=>{const t={id:s,itemCount:b,product:{productName:r,productImage:p,productPrice:Object(d.zc)(j[0],R,G,K)},itemFoodlineId:g},a={catId:c,catName:u,catUrl:O};f?C(e,t,N,a):(C(e,t,N,a),T&&T())},currencySymbol:V,currencyConversionFactor:G,updateCartHandler:()=>{if(null!==E&&void 0!==E&&E.id&&F){var e,t;const a=Object.values(W),i=a.filter((e=>(null===e||void 0===e?void 0:e.previousQty)!==(null===e||void 0===e?void 0:e.quantity)&&e));Q(i);const l=null===a||void 0===a?void 0:a[0],{foodItems:n,unitPrice:r,quantity:s,previousQty:c}=null!==l&&void 0!==l?l:{},u=s-c;let v="".concat(Object(d.pc)(null===n||void 0===n?void 0:n.modGrps));const{categoryId:O="NA",categoryName:b="NA"}=null!==(e=null===P||void 0===P?void 0:P[null===n||void 0===n?void 0:n.id])&&void 0!==e?e:{};Object(I.a)({item_name:Object(d.jc)(null===n||void 0===n?void 0:n.name),item_id:Object(d.jc)(null===n||void 0===n?void 0:n.id),item_category:b,price:Object(d.jc)(r/G),item_variant:Object(d.jc)(null===v||void 0===v?void 0:v.trim()),item_list_name:b,item_list_id:O,index:1,quantity:u,coupon:L,discount:w/G,currency:null===o||void 0===o?void 0:o.currencyShortName},M,u*(null===d.jc||void 0===d.jc||null===(t=Object(d.jc)(r/G))||void 0===t?void 0:t.toFixed(2)),L,null===o||void 0===o?void 0:o.currencyShortName)}},customizableFoodItemsList:W,SetCustomizableFoodItemsList:H,totalAmount:U,calculateTotalAmountHandler:ee,isEditSelection:D,handleClose:T})});return l.a.createPortal(te,document.getElementById("modal-popups"))}},928:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(128),n=a(325),d=a(6),r=a(5),s=a(76),c=a(0),u=a(15),v=a(2);t.a=e=>{const{locationAlertProp:t,negativeScenarioAlertProp:a,isMobile:O,onPositionChangeHandler:b,centerIndex:m,isVisible:j,setShowCard:h,locationAlert:p,setStoreMarker:g=r.L,passAddress:N,storeCardHeight:S,latLongValue:I}=e,{PLACE_PIN:x}=l.a,{userOrderState:f}=o.a.useContext(s.a),{dispositionStateData:E={}}=f,{dispositionType:C=localStorage.getItem("dispositionType")}=E;let T,y,D=o.a.createRef();const[A,R]=Object(i.useState)(I),[_,w]=Object(i.useState)(!1),{RedMarker:L,RedMarkerNoText:k,BlackMarker:M,ArrowIcon:P}=u.a;Object(i.useEffect)((()=>{T=F(A),y=W(A)}),[]),Object(i.useEffect)((()=>{R(I),w(!1)}),[I]),Object(i.useEffect)((()=>{F(A),y=W(A)}),[A,m,_]);const F=e=>new window.google.maps.Map(D.current,{zoom:10,center:Array.isArray(e)&&e.length>0?e[m]:e,disableDefaultUI:!0,fullscreenControl:!1,zoomControl:!O,gestureHandling:"greedy"}),W=e=>{const t=new window.google.maps.Geocoder;let a=e;T=F(a),j?_||(T.addListener("zoom_changed",(()=>{h(!1),w(!0)})),T.addListener("drag",(()=>{h(!1),w(!0)}))):(T.addListener("drag",(()=>{a={lat:T.getCenter().lat(),lng:T.getCenter().lng()},y.setPosition(a)})),window.google.maps.event.addListener(T,"dragend",(function(){!function(e,t,a){e.geocode({location:a},((e,t)=>{"OK"===t&&e[0]&&N(e[0].formatted_address)}))}(t,0,a)})));let i=Object(r.Tc)(Array.isArray(a)&&a.length>0,a,[a]).map(((e,t)=>{let a=new window.google.maps.Marker({position:e,map:T,visible:!0,icon:Object(r.id)(!j,!_&&j&&t===m)?(null===C||void 0===C?void 0:C.toUpperCase())===c.Af?k:L:M});return a.addListener("click",(function(e){g(e.latLng)})),a}));return Object(r.Tc)(Array.isArray(a),i,i[0])};return Object(v.jsxs)(o.a.Fragment,{children:[!t&&((null===C||void 0===C?void 0:C.toUpperCase())!==c.Af||""!==a&&a?null:Object(v.jsx)("div",{className:"map-top-note ".concat(Object(r.Tc)(p,"place-pin-off","")),children:Object(v.jsx)("div",{className:"map-top-note-text","data-testid":"map-top-text-test",children:Object(d.translateWithI18Next)(x)})})),O&&!_&&Object(v.jsxs)("div",{className:"arrows",style:{bottom:"".concat(S+15,"px")},children:[Object(v.jsx)("span",{className:"map-arrow-left ".concat(Object(r.db)(0===m,"disableArrow")),"data-testid":"map-arrow-left",onClick:e=>Object(r.Tc)(0===m,e.preventDefault(),b(0)),children:Object(v.jsx)(n.a,{srcFile:P,alt:"map-arrow-left"})}),Object(v.jsx)("span",{className:"map-arrow-right ".concat(m===A.length-1&&"disableArrow"),"data-testid":"map-arrow-right",onClick:e=>m===A.length-1?e.preventDefault():b(1),children:Object(v.jsx)(n.a,{srcFile:P,alt:"map-arrow-right"})})]}),Object(v.jsx)("div",{id:"google-map",ref:D})]})}},933:function(e,t,a){"use strict";var i=a(3),o=a(25),l=a(61),n=a(938),d=a(900),r=a(122),s=a(14),c=a(328),u=a(76),v=a(963),O=a(30),b=a(5),m=a(322),j=a(0),h=a(54),p=a(320),g=a(18),N=a.n(g),S=a(319),I=a(2);const x={dots:!1,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,arrows:!0,adaptiveHeight:!1,autoplay:!1,variableWidth:!0,responsive:j.G},f=(e,t)=>null===e||void 0===e?void 0:e.map((e=>t(e))),E=(e,t,a)=>{var i;return{foodName:null===t||void 0===t||null===(i=t.productName[0])||void 0===i?void 0:i.value,foodItemId:e,cartPrice:null===t||void 0===t?void 0:t.productPrice,modifiers:[],quantity:1,foodLineId:a}};t.a=Object(l.j)((e=>{var t,a;const{productList:l=[],cardType:j="",tenantData:g={},categoryId:C,categoryName:T,categoryUrl:y,catalogs:D,storeClosedData:A,setShowTopScrollBtn:R}=e,{QUANTITY_ACTION:_}=h.a,{ADD_TO_CART_CLICK:w,PLP_PDP_DETAILS:L,MINI_PDP_DATA:k,FROMFLAGPLP:M}=s.a,{PlpProductCard:P={}}=(null===(t=e.tenantData)||void 0===t?void 0:t.componentOptions)||{},{RESET_MODGROUP_IDS_UPDATE:F}=m.a,[W,H]=Object(i.useState)(1),U=Object(o.b)(),B=Object(o.c)((e=>e.cartReducer)),{flatResponse:{productMapById:G={},categoryMapById:V={}}={}}=null!==(a=Object(o.c)((e=>{let{menuReducer:t}=e;return t})))&&void 0!==a?a:{},{cartData:Y={}}=Object(b.kd)(B),K=Object(o.c)((e=>{var t;return null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),[z,q]=Object(i.useState)(e.selectedCat),[J,X]=Object(i.useState)(!1),{userOrderState:Q,userOrderStateDispatch:Z}=Object(i.useContext)(u.a),[$,ee]=Object(i.useState)(null),{showCartAlert:te}=Object(c.a)(void 0,void 0,void 0,void 0,Z,U,void 0);Object(i.useEffect)((()=>{X(!1)}));const{addToCartAnalyticsOnly:ae}=Object(c.a)({cartId:null===Y||void 0===Y?void 0:Y.id},null===g||void 0===g?void 0:g.tenantId,void 0,G,void 0,U,void 0),ie=(e,t,a,i)=>{var o;if(K.localized&&N()(null===B||void 0===B||null===(o=B.cartData)||void 0===o?void 0:o.id)){const{id:e,itemCount:t}=i,a=[{Id:e,categoryId:C,quantity:t+1,modGrps:[]}],o=!0;Object(b.G)(U,O.f,null===g||void 0===g?void 0:g.tenantId,Q,null===B||void 0===B?void 0:B.qrCodeScanTime,o,a)}else((e,t,a,i)=>{var o;const{id:l,itemCount:n,product:d,itemFoodlineId:s}=i,{catId:c}=a,{id:u="",name:v="",url:b=""}=null!==(o=null===V||void 0===V?void 0:V[c])&&void 0!==o?o:{};if(e&&e.stopPropagation(),ee(l),K.localized){if(t)q(c),Z({type:k,value:{id:l,flag:M,foodLineId:""}}),Z({type:F}),U(Object(r.c)({tenantId:g.tenantId,catalogName:D,itemId:l}));else if(0===n){var m;U(Object(O.a)({params:{basketId:null===B||void 0===B||null===(m=B.cartData)||void 0===m?void 0:m.id},tenantId:g.tenantId},[{Id:l,categoryId:u,quantity:n+1,modGrps:[],categoryName:v,categoryUrl:b}])),U(Object(O.u)(new Date)),ae(E(l,d,s),_.Increase,g.currencyConversionFactor)}else if(n>0){var j;U(Object(O.x)({params:{basketId:null===B||void 0===B||null===(j=B.cartData)||void 0===j?void 0:j.id,basketLineItemId:s},tenantId:g.tenantId},{quantity:n+1,isBundle:Object(S.e)(l)})),U(Object(O.u)(new Date)),ae(E(l,d,s),_.Increase)}}else X(!0),Z({type:w,value:{addToCart:!0,productItemId:l,categoryId:C,oldProduct:d,customizable:t,catalogs:D,fromPdpPage:!1}})})(e,t,a,i)},oe=Object(o.c)((e=>{let{menuReducer:t}=e;return null===t||void 0===t?void 0:t.currentItemDetails}));Object(i.useEffect)((()=>{oe&&z&&Q.minipdpData.itemId===oe.id&&U(Object(O.v)({showProductListingModal:!0,categorySelected:z}))}),[oe]);const le=()=>{te(!0)},ne={...x,beforeChange:(e,t)=>{H(Math.round(t+1))},variableWidth:!1},de=(t,a,i,o)=>{const{catId:l,catName:n,catUrl:d}=o,{productId:r,productInfo:s}=a;t.preventDefault(),t.stopPropagation();const c={productId:r,customizable:i,catId:l,catalogName:D,productInfo:s,isFromPlp:!0,categoryName:n,categoryUrl:d};Z({type:L,value:c}),localStorage.setItem(p.p,JSON.stringify(c)),e.history.push({pathname:"/pdp/".concat(C,"/").concat(r)})},re=(e,t,a)=>{U(Object(r.a)({tenantId:e,customerId:a},t))},se=(e,t,a)=>{U(Object(r.b)({tenantId:e,customerId:t,itemId:a}))},ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{items:[t]}=e,a=Object(b.me)(t.additionalProperties);return Object(I.jsx)(n.b,{item:t,activeId:$,cardId:t.id,cardType:j,configureOptions:P,tenantData:g,servingCount:a.servings,button:e.button,categoryId:C,categoryName:T,categoryUrl:y,clickHandler:ie,customizable:t.customizable,onCardClickHandler:de,userParams:K,openAlertModal:le,storeClosedData:A,addFavourite:re,removeFavourite:se,setShowTopScrollBtn:R,"data-testid":"menu-card-component",...a,...t},t.id)};return Object(I.jsxs)("div",{className:"product-container",children:[J&&Object(I.jsx)(v.a,{}),"carousal"===j?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"individual-card-counter",children:[W,"/",l.length]}),Object(I.jsx)(d.b,{settings:ne,children:f(l,ce)})]}):f(l,ce)]})}))},936:function(e,t,a){"use strict";a.d(t,"b",(function(){return J}));var i=a(3),o=a.n(i),l=a(975),n=a.n(l),d=a(317),r=a(326),s=a(212),c=a(76),u=a(14),v=a(101),O=a(25),b=a(63),m=a(11),j=a(5),h=a(61),p=a(97),g=a(128),N=a(43),S=a(6),I=a(4),x=a(30),f=a(22),E=a(93),C=a(0),T=a(318),y=a(335),D=(a(974),a(15)),A=a(49),R=a(2);const{ORDER_TYPE:_,YOUR_KFC_RESTAURANT:w,YOUR_LOCATION:L,EDIT:k,SCHEDULE_FOR_YOUR_ORDER_TEXT:M,DATE:P,TIME:F,CONFIRM_BTN_TEXT:W,DELIVERY_UNAVAILABLE_ERROR:H,SWITCH_TO_TAKEAWAY_TEXT:U,ERROR_MESSAGE_IN_ACTIVE:B,DELIVERY_PICKUP_MESSAGE:G,ERROR_MESSAGE_CLOSED:V,SCHEDULE_ORDER:Y,CHANGE_ORDER_TITLE:K,ASAP_SERVES_Warning_Message:z}=I.a,q=(e,t,a)=>-1!==(null===e||void 0===e?void 0:e.pathname.indexOf(t+"/"))||-1===(null===e||void 0===e?void 0:e.pathname.indexOf(t))&&-1===(null===e||void 0===e?void 0:e.pathname.indexOf(a)),J=e=>"ASAP"!==e&&"-"!==e?e:Object(m.R)(Object(m.o)(),g.a.HHMM,g.a.LT),X=(e,t)=>{let a={};return"-"!==e&&"ASAP"!==e?a={isForNow:!1,futureDateTime:t}:"ASAP"===e&&(a={isForNow:!0,futureDateTime:0}),a},Q=(e,t,a)=>{let i=JSON.parse(localStorage.getItem("dispositionNew"));return e&&i?Object(j.Gb)(i.type):t?C.Mb.PICKUP:Object(j.Gb)(a)};function Z(e,t,a){var i;e?e.find((e=>(null===e||void 0===e?void 0:e.timestr)===t))||a(null===(i=e[0])||void 0===i?void 0:i.timestr):a("-")}t.a=Object(h.j)((e=>{var t,a,l,h,I,ee,te,ae,ie,oe,le,ne,de,re,se,ce,ue;const{SingleArrow:ve,Calendar:Oe,Error:be}=D.a,me=Object(i.useRef)(null),je=Object(i.useRef)(null),{location:he,onStoreSelectFinish:pe}=e,{SEARCH_ORDER_DATA:ge,SCHEDULE_ORDER_DATA:Ne,DISPOSITION_DATA:Se,SCHEDULE_ORDER_TIME_DATA:Ie,CLOSED:xe,SCHEDULE_ORDER_TIME_PRESERVE_TIME:fe,MENU_URL:Ee,PDP_URL:Ce,SELECTED_TILE_DATA:Te,DISPOSITION_METHOD:ye,SET_DISPOSITION:De,USER_LOCALIZED:Ae,SHOW_CLEAR_CART_ALERT:Re,CLEAR_CART_CONFIRM_CANCEL_MODAL:_e,clearCartChangeFlag:we,orderTypeAlertTitle:Le,searchStoreAlertTitle:ke,CURRENT_STORE_INFO:Me,SET_FORCERELOAD:Pe}=u.a,Fe=Object(O.c)((e=>e.profileReducer)),{userOrderState:We,userOrderStateDispatch:He}=Object(i.useContext)(c.a),{dispositionStateData:Ue={},scheduleOrderData:Be={}}=We,{changeFlow:Ge=!1,isAddressFlow:Ve=!1}=Be,Ye=Be&&Object(j.Kd)(Be.storeInfo)?Be.storeInfo:JSON.parse(localStorage.getItem("storeInfo")),{dispositionType:Ke=""}=Ue,ze=Ke||localStorage.getItem("dispositionType"),{value:qe=""}=(null===Be||void 0===Be||null===(t=Be.storeInfo)||void 0===t?void 0:t.name[0])||{value:""},{date:Je=""}=Be&&(null===(a=Be.selectedDateTimeInfo)||void 0===a||null===(l=a.date)||void 0===l?void 0:l.length)>0?Be.selectedDateTimeInfo:JSON.parse(localStorage.getItem("dateTimeOrder"))||{date:""},Xe=Be&&(null===(h=Be.selectContentData)||void 0===h||null===(I=h.savedTime)||void 0===I?void 0:I.length)>0?null===(ee=Be.selectContentData)||void 0===ee?void 0:ee.savedTime:localStorage.getItem("savedTimeOrder"),{futureDates:Qe,scheduled:Ze={},asap:$e}=(null===(te=Be.storeInfo)||void 0===te||null===(ae=te.summary)||void 0===ae?void 0:ae.timings)||{},et=Object(j.Jd)(We.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):We.dispositionNew,{unavailibilities:tt,unavailibilityType:at}=Ze,{interval:it=0,startEndTime:ot={}}=Ze&&(null===Ze||void 0===Ze||null===(ie=Ze.periods)||void 0===ie?void 0:ie.length)&&(null===Ze||void 0===Ze?void 0:Ze.periods[0])||{},{from:lt,to:nt}=ot;let dt=Object(O.c)((e=>e.appStateReducer.userStatus));const rt=Object(O.b)(),st=Object(O.c)((e=>e.tenantReducer)),ct=Object(O.c)((e=>e.storesReducer)),ut=Object(O.c)((e=>e.cartReducer)),{cartData:vt}=ut,{storesAvilableTimeSlots:Ot,storesTimeSlots:bt}=ct,[mt,jt]=Object(i.useState)(!1),[ht,pt]=Object(i.useState)({error:!1,errormessage:""}),[gt,Nt]=Object(i.useState)({from:lt,to:nt,interval:it}),[St,It]=Object(i.useState)({error:!1,openStoreTime:""}),xt=(null===(oe=Be.storeInfo)||void 0===oe||null===(le=oe.summary)||void 0===le||null===(ne=le.status)||void 0===ne?void 0:ne.currentStatus)===xe,ft=()=>{var e;return Ge?(null===(e=JSON.parse(localStorage.getItem("dispositionNew")))||void 0===e?void 0:e.type.toUpperCase())===g.a.TYPE_DELIVERY:!Ve&&(null===ze||void 0===ze?void 0:ze.toUpperCase())===g.a.TYPE_DELIVERY},[Et,Ct]=Object(i.useState)(Ze&&Ze.date?new Date(Ze.date.toString()):new Date),[Tt,yt]=Object(i.useState)($e&&$e.isAvailable?"ASAP":Object(m.R)(null===ot||void 0===ot?void 0:ot.from,"hh:mm","LT")),[Dt,At]=Object(i.useState)([]),[Rt,_t]=Object(i.useState)(!1),[wt,Lt]=Object(i.useState)(!1),[kt,Mt]=Object(i.useState)(Object(j.Ud)(window.innerWidth)),Pt=()=>{Mt(Object(j.Ud)(window.innerWidth))};Object(i.useEffect)((()=>{window.addEventListener("resize",Pt)}),[kt]),Object(i.useEffect)((()=>{if(1===(null===Qe||void 0===Qe?void 0:Qe.length)&&"INDIA"===(null===st||void 0===st?void 0:st.country)){var e;const t={storeid:null===Be||void 0===Be||null===(e=Be.storeInfo)||void 0===e?void 0:e.id,channel:f.b.channel,service:Object(j.Ib)(Zt()).toString().toLowerCase(),date:""};rt(Object(b.c)({data:t,tenantId:st.tenantId}))}let t=Object(v.j)(lt,nt,it,null===$e||void 0===$e?void 0:$e.isAvailable,1===(null===Qe||void 0===Qe?void 0:Qe.length)&&"INDIA"===(null===st||void 0===st?void 0:st.country),tt,at);return At(t),()=>{rt(Object(b.a)())}}),[]);const Ft=e=>{var t,a;if("INDIA"===(null===st||void 0===st?void 0:st.country))return;const i=Object(m.h)(e,"YYYY-MM-DD");if(Ze.date===i){let t=Object(v.j)(lt,nt,it,null===$e||void 0===$e?void 0:$e.isAvailable,1===Qe.length&&"INDIA"===(null===st||void 0===st?void 0:st.country),tt,at);return At(t),yt(t[0].timestr),Nt({from:lt,to:nt,interval:it}),Ct(e),pt({...ht,error:!1,errormessage:""}),_t(!1),void Lt(!1)}const o={storeid:null===Be||void 0===Be||null===(t=Be.storeInfo)||void 0===t?void 0:t.id,channel:f.b.channel,service:Object(j.Ib)(Zt()).toString().toLowerCase(),dateVal:i};if(rt(Object(b.c)({data:o,tenantId:st.tenantId})),Ct(e),(null===Ot||void 0===Ot||null===(a=Ot.periods)||void 0===a?void 0:a.length)>0){const{startEndTime:e,interval:t}=Ot.periods[0],{from:a,to:i}=e;let o=Object(v.j)(a,i,t,null===$e||void 0===$e?void 0:$e.isAvailable,1===Qe.length&&"INDIA"===(null===st||void 0===st?void 0:st.country),tt,at);Nt({from:a,to:i,interval:t}),At(o)}pt({...ht,error:!1,errormessage:""})},Wt=e=>{const t=new Date,a=new Date(e.split("T")[0]);return a.getDate()===t.getDate()&&a.getMonth()===t.getMonth()&&a.getFullYear()===t.getFullYear()},Ht=e=>{var t;yt("ASAP"===e?"ASAP":null!==(t=e)&&void 0!==t&&t.timestr?null===t||void 0===t?void 0:t.timestr:t);let a=Object(v.f)(lt,null!==e&&void 0!==e&&e.selectedDay?e:{timestr:e,selectedDay:Wt(Je)?"Today":"Tomorrow"});Ct(a),_t(!1),Lt(!1),pt({...ht,error:!1,errormessage:""})};Object(i.useEffect)((()=>{const e=Xe;Je&&Ft(new Date(Je)),((e,t,a,i,o,l)=>{if(e&&t){const e=Object(m.R)(t,"h:mm A","HH:mm");new Date(i).setHours(Number(null===e||void 0===e?void 0:e.split(":")[0]),Number(null===e||void 0===e?void 0:e.split(":")[1]),0)<(new Date).setHours(Number(null===a||void 0===a?void 0:a.split(":")[0]),Number(null===a||void 0===a?void 0:a.split(":")[1]),0)?l(o):l(t)}})(Ge,e,lt,Je,Xe,Ht),((e,t,a,i,o)=>{if(1!==(null===e||void 0===e?void 0:e.length)){var l;const e={storeid:null===t||void 0===t||null===(l=t.storeInfo)||void 0===l?void 0:l.id,channel:f.b.channel,service:Object(j.Ib)(a()).toString().toLowerCase(),date:""};i(Object(b.c)({data:e,tenantId:null===o||void 0===o?void 0:o.tenantId}))}})(Qe,Be,Zt,rt,st)}),[]),Object(i.useEffect)((()=>{let e=Object(j.Tc)(Ge,Object(S.translateWithI18Next)(K),Object(S.translateWithI18Next)(Y));var t;if(Object(j.Kd)(bt)&&mt)if((null===bt||void 0===bt||null===(t=bt.status)||void 0===t?void 0:t.currentStatus)===xe)pt({...ht,error:!0,errormessage:Object(S.translateWithI18Next)(V)}),Object(j.Kb)(e,Object(S.translateWithI18Next)(V));else{let t=new Date;if(new Date(Et).setHours(0,0,0,0)===t.setHours(0,0,0,0)){let t=Object(m.o)().add($e.promiseTime,"minutes").format("LT");Object(m.c)(t,Tt,"h:mm A")?(pt({...ht,error:!0,errormessage:Object(S.translateWithI18Next)(B)}),Object(j.Kb)(e,Object(S.translateWithI18Next)(B))):q(he,Ee,Ce)?Ut():Bt()}else q(he,Ee,Ce)?Ut():Bt()}}),[bt,Fe]);const Ut=()=>{He({type:Te,value:{selectedData:{}}}),localStorage.setItem("tenantReducer",JSON.stringify(st)),localStorage.setItem("selectedTile",JSON.stringify({})),Bt(),setTimeout((()=>{e.history.push({pathname:"".concat(Ee)})}),500)},Bt=async()=>{He({type:Ne,value:{showScheduleOrderCatering:!1,selectedStoreInfo:null===Be||void 0===Be?void 0:Be.storeInfo,changeFlow:!0}}),He({type:ye,value:{dispositionType:ze}}),localStorage.setItem("dispositionType",Zt()),localStorage.setItem("storeInfo",null!==Be&&void 0!==Be&&Be.storeInfo?JSON.stringify(Be.storeInfo):JSON.stringify({})),localStorage.setItem("currentStoreInfo",null!==Be&&void 0!==Be&&Be.storeInfo?JSON.stringify(Be.storeInfo):JSON.stringify({})),He({type:Me,value:Object(j.kd)(null===Be||void 0===Be?void 0:Be.storeInfo)}),He({type:ge,value:{showSearchStore:!1}});let e="",t="";"ASAP"===Tt||"-"===Tt?(e="ASAP",t="ASAP"):(e=Tt,t=Tt),He({type:Pe,value:{forceReload:!0}});let a=J(Tt);const i=Object(m.A)(Object(m.h)(Et,"YYYY-MM-DD")+" "+a,"YYYY-MM-DD hh:mm A");let o={time:e,interval:gt.interval,date:Et,epochTime:i,selectedTime:Tt},l=(null===Be||void 0===Be?void 0:Be.deliveryAddress)||(null===et||void 0===et?void 0:et.deliveryAddress);if(null===et||et.type!==Zt()||et.store.id!==Ye.id||et.deliveryAddress!==Be.deliveryAddress){let e=await Object(j.z)(Ye,Object(j.Ib)(ze),null===Fe||void 0===Fe?void 0:Fe.customerId,o,l,null===Be||void 0===Be?void 0:Be.deliveryAddressLine);rt(Object(x.m)("")),rt(Object(x.f)({data:e,tenantId:st.tenantId}))}rt(Object(p.a)({...dt,localized:!0})),He({type:De,value:{oldvalue:et,newValue:{type:Zt(),store:Ye,date:o.date,time:o.time,epochTime:o.epochTime,interval:o.interval,selectedTime:o.selectedTime,deliveryAddress:l}}}),localStorage.setItem("dispositionOld",JSON.stringify(et)),localStorage.setItem("dispositionNew",JSON.stringify({type:Zt(),store:Ye,date:o.date,time:o.time,epochTime:o.epochTime,interval:o.interval,selectedTime:o.selectedTime,deliveryAddress:l})),Object(j.if)(),He({type:Ie,value:{selectedDateTime:o}}),He({type:fe,value:{selectContentTime:t}}),localStorage.setItem("dateTimeOrder",JSON.stringify(o)),localStorage.setItem("savedTimeOrder",t)};Object(i.useEffect)((()=>{var e;let t,a={startEndTime:{from:"",to:""},interval:""};if(2===Object.keys(Ot||{}).length){var i,o,l;const{startEndTime:e,interval:d}=Object(j.id)(null===(i=Ot[0])||void 0===i?void 0:i.periods[0],a),{startEndTime:r}=Object(j.id)(null===(o=Ot[1])||void 0===o?void 0:o.periods[0],a),{from:s}=e,{to:c}=r;var n;if(t=Object(v.j)(s,c,d,null===$e||void 0===$e?void 0:$e.isAvailable,1===Qe.length&&new Date(null===(l=Ot[0])||void 0===l?void 0:l.date).setHours(0,0,0,0)<new Date(null===Qe||void 0===Qe?void 0:Qe[0]).setHours(0,0,0,0)&&"INDIA"===(null===st||void 0===st?void 0:st.country),tt,at),Nt({from:s,to:c,interval:d}),At(t),Z(t,Xe,Ht),!Ot.find((e=>e.date===Je.split("T")[0])))Ct(new Date(null===(n=Ot[0])||void 0===n?void 0:n.date))}else if(Object.keys(Ot||{}).length){var d,r;const{startEndTime:e,interval:i}=Object(j.id)(null===(d=Ot[0])||void 0===d?void 0:d.periods[0],a),{from:o,to:l}=e;var s;if(t=Object(v.j)(o,l,i,null===$e||void 0===$e?void 0:$e.isAvailable,"INDIA"===(null===st||void 0===st?void 0:st.country)&&1===(null===Qe||void 0===Qe?void 0:Qe.length)&&new Date(null===(r=Ot[0])||void 0===r?void 0:r.date).setHours(0,0,0,0)<new Date(null===Qe||void 0===Qe?void 0:Qe[0]).setHours(0,0,0,0),tt,at),Nt({from:o,to:l,interval:i}),At(t),Z(t,Xe,Ht),!Ot.find((e=>e.date===Je.split("T")[0])))Ct(new Date(null===(s=Ot[0])||void 0===s?void 0:s.date))}const c=localStorage.getItem("modalSource");var u;null!==st&&void 0!==st&&st.showASAPServiceWarningMessage&&(null===$e||void 0===$e||!$e.isAvailable)&&xt&&"fromChangeStoreButton"!==c&&(null===(e=t)||void 0===e?void 0:e.length)>0&&It({error:!0,openStoreTime:null===(u=t[0])||void 0===u?void 0:u.timestr});localStorage.removeItem("modalSource")}),[JSON.stringify(Ot)]);const Gt=e=>{var t,a;null!==me&&void 0!==me&&null!==(t=me.current)&&void 0!==t&&t.contains(e.target)||null!==je&&void 0!==je&&null!==(a=je.current)&&void 0!==a&&a.contains(e.target)||(_t(!1),Lt(!1))};Object(i.useEffect)((()=>(document.addEventListener("mousedown",Gt),()=>{document.removeEventListener("mousedown",Gt)})),[]);const Vt=()=>{He({type:ge,value:{showSearchStore:!0}}),He({type:Ne,value:{showDisposition:!1}}),He({type:ye,value:{dispositionType:"Pickup"}})},Yt=null===Be||void 0===Be||null===(de=Be.storeInfo)||void 0===de||null===(re=de.availableServicesPerChannel)||void 0===re||null===(se=re.find((e=>"web"===e.channel)))||void 0===se?void 0:se.services,Kt=null===Yt||void 0===Yt?void 0:Yt.includes("delivery"),zt=Object(j.db)(ft(),!Kt),qt=()=>{let e=Object(S.translateWithI18Next)(G),t=!1;return Kt&&(e=Object(S.translateWithI18Next)(H),t=!0),{showTakeWayButton:t,message:e}},{message:Jt}=qt();Object(i.useEffect)((()=>{Object(E.g)(Ge,Jt)}),[Jt]);const Xt=()=>{const{message:e,showTakeWayButton:t}=qt();return Object(R.jsxs)("div",{className:"alert-delivery-popup w-100 ".concat(t?"":"alert-without-action-button"),children:[Object(R.jsx)(N.a,{srcFile:be,className:"location-alert-icon"}),Object(R.jsx)("div",{className:"location-error-message",children:e}),Object(R.jsx)("div",{className:"location-error-button-section",children:t&&Object(R.jsx)(d.a,{className:"location-warning-button","data-testid":"click-handle-away",onClickHandler:Vt,children:Object(S.translateWithI18Next)(U)})})]})},Qt=e=>{var t;let{orderType:a}=e,i=Object(S.translateWithI18Next)(z),o=null===i||void 0===i?void 0:i.replace("%time%",St.openStoreTime);return o=null===(t=o)||void 0===t?void 0:t.replace("%servesName%",a),Object(R.jsxs)("div",{className:"asap-warning-container",children:[Object(R.jsx)("span",{className:"error-img"}),o]})},Zt=()=>{let e=JSON.parse(localStorage.getItem("dispositionNew"));return Ge&&e?e.type:Ve?"Pickup":ze},$t=Ge?null===(ce=JSON.parse(localStorage.getItem("dispositionNew")))||void 0===ce?void 0:ce.deliveryAddress:Be.deliveryAddress;return Object(R.jsxs)("div",{className:"scheduleOrder-form",children:[Object(R.jsx)("h3",{className:"order-type",children:Object(S.translateWithI18Next)(_)}),Object(R.jsxs)("div",{className:"ordertype-input-div",children:[Object(R.jsx)(r.a,{value:Q(Ge,Ve,ze),className:"w-100"}),Object(R.jsx)("div",{className:"edit-input",children:Object(R.jsx)(s.a,{"aria-label":"Edit order type",onClickHandler:()=>{var e;if(vt&&(null===vt||void 0===vt||null===(e=vt.foodLines)||void 0===e?void 0:e.length)>0){let e={flag:we,onConfirm:Le};Object(j.ue)(He,e,Re,_e)}else He({type:Se,value:{showDisposition:!0}});He({type:Ne,value:{showScheduleOrderCatering:!1}}),He({type:ge,value:{showSearchStore:!1}})},"data-testid":"edit-disposition-test",children:Object(S.translateWithI18Next)(k)})})]}),ht&&ht.error&&Object(R.jsxs)("div",{className:"error-container",children:[Object(R.jsx)("span",{className:"error-img"}),ht.errormessage]}),kt&&zt&&Object(R.jsx)(Xt,{}),Object(R.jsx)("h3",{className:"order-type",children:ft()?Object(S.translateWithI18Next)(L):Object(S.translateWithI18Next)(w)}),Object(R.jsxs)("div",{className:"ordertype-input-div",children:[Object(R.jsx)(r.a,{value:ft()?$t:qe||"",className:"w-100"}),Object(R.jsx)("div",{className:"edit-input",children:ft()?Object(R.jsx)(s.a,{"aria-label":"Edit KFC restaurant",onClickHandler:()=>{var e;if(He({type:ye,value:{dispositionType:Ge?JSON.parse(localStorage.getItem("dispositionNew")).type:ze}}),vt&&(null===vt||void 0===vt||null===(e=vt.foodLines)||void 0===e?void 0:e.length)>0){let e={flag:we,onConfirm:ke};Object(j.ue)(He,e,Re,_e)}else He({type:ge,value:{showSearchStore:!0}});He({type:Ne,value:{showScheduleOrderCatering:!1}})},"data-testid":"edit-location-test",children:Object(S.translateWithI18Next)(k)}):Object(R.jsx)(s.a,{"aria-label":"Edit KFC restaurant",onClickHandler:()=>{var e;if((null===vt||void 0===vt||null===(e=vt.foodLines)||void 0===e?void 0:e.length)>0){let e={flag:we,onConfirm:ke};Object(j.ue)(He,e,Re,_e)}else{let e=Object(j.jd)(JSON.parse(localStorage.getItem("seachedLocations")));if(Ve)He({type:ge,value:{showSearchStore:!0,searchedPlaceNonLocalized:Be.storeInfo.name[0].value}});else if(e){let t=e[e.length-1];He({type:ge,value:{showSearchStore:!0,searchedPlaceNonLocalized:t}})}}He({type:Ne,value:{showScheduleOrderCatering:!1,changeFlow:Boolean(Ge)}}),He({type:ye,value:{dispositionType:Zt()}})},"data-testid":"edit-store-test",children:Object(S.translateWithI18Next)(k)})})]}),!kt&&zt&&Object(R.jsx)(Xt,{}),(null===St||void 0===St?void 0:St.error)&&Object(R.jsx)(Qt,{orderType:Q(Ge,Ve,ze)}),Object(R.jsx)("h3",{className:"order-type",children:Object(S.translateWithI18Next)(M)}),Object(R.jsxs)("div",{className:"schedule-date-time",children:[Object(R.jsxs)("div",{className:"schedule-date",children:[Object(R.jsx)("div",{className:"dateTitleDatePicker",children:Object(S.translateWithI18Next)(P)}),Qe&&Qe.length>0&&Ze&&Ze.date&&"INDIA"!==(null===st||void 0===st?void 0:st.country)?Object(R.jsxs)(o.a.Fragment,{children:[Object(R.jsxs)("div",{ref:me,onClick:()=>Lt(!wt),"data-testid":"click-date-picker-open",className:"date-pick",children:[Object(R.jsx)(n.a,{selected:Et,showPopperArrow:!1,onChange:e=>Ft(e),minDate:new Date(Ze.date.toString()),maxDate:new Date(Qe[Qe.length-1]),dateFormat:"MMMM d, yyyy",className:"custom-class",open:wt,readOnly:!0}),Object(R.jsx)("img",{src:Oe,className:"date-icon",id:"datePickerIcon",alt:"Date Icon"})]}),Object(R.jsx)("span",{className:"dropdown-img"})]}):Object(R.jsx)(o.a.Fragment,{children:Object(R.jsx)("div",{className:"time-input time-input-container",children:Object(m.h)(Et,"YYYYMMDD")===Object(m.e)("YYYYMMDD")&&Object(S.translateWithI18Next)("today")||Object(S.translateWithI18Next)("tomorrow")})})]}),Object(R.jsxs)("div",{className:"schedule-time",children:[Object(R.jsx)("div",{className:"dateTitleDatePicker","aria-level":"1",role:"heading",tabIndex:"0",children:Object(S.translateWithI18Next)(F)}),Object(R.jsxs)("div",{className:$(Dt),"data-testid":"time-input-handler",role:"listbox",tabIndex:"0",onKeyPress:()=>0!==Ze.periods.length&&_t(!Rt),onClick:()=>0!==Ze.periods.length&&_t(!Rt),children:[Object(R.jsx)("div",{className:"time-input asap-default",children:Tt}),Object(R.jsx)("img",{src:ve,alt:" ",className:"downarrow-time-list"})]}),Rt&&Object(R.jsx)("div",{ref:je,className:"schedule-time-list-container",children:Object(R.jsx)("ul",{children:!(null===Dt||void 0===Dt||!Dt.length)&&(null===Dt||void 0===Dt?void 0:Dt.map((e=>Object(R.jsx)("li",{tabIndex:"0",onClick:()=>{It((e=>({...e,error:!1}))),Ht(e)},onKeyPress:()=>Ht(e),children:e.timestr}))))})})]})]}),Object(R.jsx)("div",{className:"text-center schedule-btn-div",children:Object(R.jsx)(d.a,{className:"button blackButton confirm-schedule-btn","aria-label":Object(S.translateWithI18Next)(W),onClickHandler:e=>{var t,a,i,o,l;Object(A.D)(),e.stopPropagation(),e.preventDefault();const n={storeID:null===Ye||void 0===Ye?void 0:Ye.id,disposition:ze,postCode:null===Ye||void 0===Ye||null===(t=Ye.addresses[0])||void 0===t||null===(a=t.address)||void 0===a?void 0:a.pinCode};pe(n),Object(T.J)(n,Tt),Object(y.a)(Be),jt(!0);let d=J(Tt);const r=Object(m.A)(Object(m.h)(Et,"YYYY-MM-DD")+" "+d,"YYYY-MM-DD hh:mm A"),s={storeid:null===Be||void 0===Be||null===(i=Be.storeInfo)||void 0===i?void 0:i.id,channel:f.b.channel,service:null===(o=Object(j.Ib)(Zt()))||void 0===o||null===(l=o.toString())||void 0===l?void 0:l.toLowerCase(),futureDateTimeInEpochFormat:r,asap:Tt===C.s};rt(Object(b.n)({data:s,tenantId:st.tenantId})),null!==vt&&void 0!==vt&&vt.id&&rt(Object(b.q)({params:{basketId:null===vt||void 0===vt?void 0:vt.id},tenantId:st.tenantId,postBody:X(Tt,r)})),He({type:Ae,value:{isLocalized:!0}})},"data-testid":"confirm-button-handler",disabled:0===(null===Ze||void 0===Ze||null===(ue=Ze.periods)||void 0===ue?void 0:ue.length),children:Object(S.translateWithI18Next)(W)})})]})}));const $=e=>"time-input-container time-inputbox ".concat(null!==e&&void 0!==e&&e.length?"":"disable-time-dropdown")},937:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return n}));const i={HOME:"Home",CARD_DETAILS_VIEW:"Card Details View",KFC_FORM:"KFC form",MILE_DETAILS:"mile details",RANKING:"Ranking"},o={KFC:"kfc",PONTA:"ponta",RAKUTEN:"rakuten"},l={PLATINUM:"platinum",REGULAR:"regular",BRONZE:"bronze",SILVER:"silver",GOLD:"gold"},n={milesMemberId:"I",stageNumber:"R",pontaId:"P",kfcCard:"K",rakutenId:"RK",expirationTime:"ED"}},938:function(e,t,a){"use strict";a.d(t,"a",(function(){return W}));var i=a(3),o=a(25),l=a(320),n=a(5),d=a(899),r=a(54),s=a(328),c=a(6),u=a(30),v=a(317),O=a(43),b=a(213),m=a(903),j=a(907),h=a(926),p=a(0),g=a(15),N=a(122),S=a(76),I=a(14),x=a(190),f=a(2);const E=(e,t,a,i,o)=>Object(n.Tc)(e||t||a||i||o,g.a.ribbonRedOutlined,null);var C=function(e){var t,a,s;const{getCardTypeName:C,cardType:T,allowClickOnProductCard:y,discount:D,specials:A,exclusive:R,timer:_,cardId:w,customizable:L,getProductImageClassName:k,tenantData:M,imageName:P,onCardClickHandler:F,categoryId:W,categoryName:H,categoryUrl:U,dname:B,availability:G=[],newitem:V,topseller:Y,customlabelfield:K,getSpecificRibbonBanner:z,userParams:q,favouriteItems:J,item:X,classFavouriteIconActive:Q,getCardName:Z,favouriteButtonClickHandler:$,itemCount:ee,classFavouriteIconInActive:te,getMenuProductHeader:ae,veg:ie,servingCount:oe,getVegNonvegClassName:le,menuProductPriceClassName:ne,checkForBasePriceInMenu:de,baseprice:re,cardCat:se,displayPrice:ce,getPriceClassName:ue,menuProductDescriptionClassName:ve,longDescription:Oe,updateItemQuantity:be,configureOptions:me,storeClosedData:je,classesCardButton:he,classEnableAddToCart:pe,enableAddToCartButton:ge,checkLoading:Ne,menuCardBtnText:Se,clickHandler:Ie,itemFoodlineId:xe,openCostomizedModal:fe,setOpenCostomizedModal:Ee,filteredPreviousData:Ce,cartData:Te,CARD_TYPE:ye,setShowTopScrollBtn:De,pricewithouttax:Ae}=e,Re=Object(o.b)(),{RESET_MODGROUP_IDS_UPDATE:_e}=x.a,{MINI_PDP_DATA:we,FROMFLAGEDIT:Le,EDIT_CLICKED:ke}=I.a,{userOrderStateDispatch:Me}=Object(i.useContext)(S.a),[Pe,Fe]=Object(i.useState)(!1),[We,He]=Object(i.useState)(Object(n.Ud)(window.innerWidth)),{ITEM_QUANTITY:Ue}=d.a,{QUANTITY_ACTION:Be}=r.a,Ge=Object(n.Tc)(null===q||void 0===q?void 0:q.loggedIn,p.Zf,""),{allowAddToCartButton:Ve=!0}=me,{web:{global:{showPriceWithTax:Ye=!1}={}}={}}=null!==(t=null===M||void 0===M?void 0:M.componentOptions)&&void 0!==t?t:{},{Non_veg_dot_Icon:Ke,Veg_dot_Icon:ze,Product_Card_Icon:qe,TimerIcon:Je,FavoriteInActiveWhite:Xe,heartIcon_active:Qe,heartIcon_active_red:Ze,heartIcon_inactive_red:$e}=g.a;Object(i.useEffect)((()=>{window.addEventListener(p.we,et)}),[We]);const et=()=>{He(Object(n.Ud)(window.innerWidth))},tt=()=>Object(f.jsxs)("div",{className:ne(T),children:[Object(n.db)(de(re,se),ce(re,null===M||void 0===M?void 0:M.currencyConversionFactor)),Object(f.jsxs)("span",{className:ue(re,se),children:[l.o.MENU_CARD.CURRENCY,Object(n.zc)(G[0],Ae,null===M||void 0===M?void 0:M.currencyConversionFactor,Ye).toFixed(2)]})]}),at=()=>Object(f.jsxs)("div",{className:le(T),children:[Object(n.db)(We,Object(f.jsx)("img",{className:"menu-vegOrNonVeg-icon",alt:" ",src:Object(n.Tc)(!ie,Ke,ze)})),Object(n.db)(!We,Object(n.Tc)(!ie,Object(c.translateWithI18Next)(l.o.MENU_CARD.NON_VEG),Object(c.translateWithI18Next)(l.o.MENU_CARD.VEG))),Object(n.db)(oe,Object(f.jsx)("div",{className:"Dot"})),l.o.MENU_CARD.SERVES,oe]}),it=()=>{if(null!==q&&void 0!==q&&q.loggedIn)return Object(f.jsxs)("picture",{children:[Object(f.jsx)("source",{media:"(max-width: 1023px)",srcSet:Object(n.Tc)("small-menu-product-card"===Z,Object(n.Tc)(Array.isArray(J)&&J.find((e=>(null===e||void 0===e?void 0:e.id)===(null===X||void 0===X?void 0:X.id))),Q(T),te(T)),Object(n.Tc)(Array.isArray(J)&&J.find((e=>(null===e||void 0===e?void 0:e.id)===(null===X||void 0===X?void 0:X.id))),Ze,$e)),alt:"",className:"menu-product-save ".concat(Ge),"data-testid":"fav-item-source",onClick:()=>$()}),Object(f.jsx)("source",{media:"(min-width: 1023px)",srcSet:Object(n.Tc)(Array.isArray(J)&&J.find((e=>(null===e||void 0===e?void 0:e.id)===(null===X||void 0===X?void 0:X.id))),Qe,Xe),alt:"",className:"menu-product-save ".concat(Ge),"data-testid":"fav-item-largeScreen",onClick:()=>$()}),Object(f.jsx)("img",{src:Object(n.db)(Array.isArray(J),null===J||void 0===J?void 0:J.find((e=>(null===e||void 0===e?void 0:e.id)===(null===X||void 0===X?void 0:X.id))))?Qe:Xe,alt:"",className:"menu-product-save ".concat(Ge),"data-testid":"save-product-".concat(w),onClick:()=>$()})]})},ot=()=>Object(f.jsx)(O.a,{"data-testid":"product-image",className:k(T),defaultPath:Object(n.Xb)(null,M,!0),srcFile:Object(n.Xb)(P,M),onClick:e=>Object(n.zf)(y,F,[e,w,L,W,{productName:B,productImage:P,productPrice:Object(n.zc)(G[0],Ae,null===M||void 0===M?void 0:M.currencyConversionFactor,Ye)}]),alt:""}),lt={productId:w,productInfo:{productName:B,productImage:P,productPrice:Object(n.zc)(G[0],Ae,null===M||void 0===M?void 0:M.currencyConversionFactor,Ye)}},nt={catId:W,catName:H,catUrl:U},dt={id:w,itemCount:ee,product:{productName:B,productImage:P,productPrice:Object(n.yc)(G[0],null===M||void 0===M?void 0:M.currencyConversionFactor)},itemFoodlineId:xe};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:C(T,y,D,A,R,_),"data-testid":"click-allow-on-product-".concat(w),id:w,children:[Object(n.Qd)()&&L&&Object(f.jsx)("div",{className:"position-absolute p-2 m-1 bg-dark text-white rounded-pill",children:"Customizable"}),T!==ye.SMALL&&ot(),Object(f.jsx)(b.a,{src:Object(n.Tc)(A,qe,E(K,D,R,V,Y)),className:Object(n.Tc)(A,"specials-product-ribbon",Object(n.Tc)(Object(n.fb)(R,K),"exclusive-product-ribbon","discount-product-ribbon"))}),Object(f.jsx)("span",{className:Object(n.Tc)(A,"specials-ribbon-text","discount-ribbon-text"),children:_?Object(f.jsxs)("div",{children:[Object(f.jsx)(b.a,{src:Je,className:"product-timer"}),Object(f.jsx)("span",{className:"product-timer-text",children:Object(c.translateWithI18Next)(l.o.MENU_CARD.TIMER)})]}):z(A,D,R,V,Y,K)}),Object(n.db)(!We,it()),Object(f.jsxs)("div",{className:"menu-card-content","data-testid":"menu-card-content-pdp-nav",onClick:e=>{y&&F(e,lt,L,nt)},children:[Object(f.jsx)("div",{className:ae(T,D,A,R,{timer:_,newitem:V,topseller:Y,customlabelfield:K}),children:null===B||void 0===B?void 0:B[0].value}),We?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"description-and-image",children:[Object(f.jsx)("div",{className:ve(T),id:"longDescription",children:Oe[0].value}),T===ye.SMALL&&ot()]}),Object(f.jsxs)("div",{className:"PriceVegNonveg",children:[tt(),at(),Object(f.jsx)("div",{className:"hearticonDiv",children:it()})]})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{className:"menu-vegOrNonVeg-icon",alt:" ",src:Object(n.Tc)(!ie,Ke,ze)}),at(),tt(),Object(f.jsx)("div",{className:ve(T),id:"longDescription",children:Oe[0].value})]})]}),Object(f.jsxs)("div",{className:"quantityAddtocart ".concat(ee?"cardwithQuantity "+Ge:"cardwithNoquantity"),children:[!!ee&&(rt=ee,st=be,ct=null===B||void 0===B?void 0:B[0].value,ut=null===M||void 0===M?void 0:M.maxItemCountPerLineItem,Object(f.jsx)(m.a,{itemCount:rt,itemQuantity:Ue,updateItemQuantity:st,quantityAction:Be,item:void 0,itemName:ct,maxItemCountPerLineItem:ut,cartItemCount:1,hideChild:!0})),Ve&&je&&Object(f.jsx)("div",{className:he(ee,Ge),children:ee<1?Object(f.jsxs)(v.a,{tabIndex:"0",className:pe(ge,T,Ne,je),"data-testid":"add-to-cart-".concat(w),disabled:Object(j.m)(je),onClickHandler:e=>{var t;null!==(t=Se(je))&&void 0!==t&&t.enabled&&ee<=0&&Ie(e,L,nt,dt)},"aria-label":(null===(a=Se(je))||void 0===a?void 0:a.btnText)+(null===B||void 0===B?void 0:B[0].value),children:[null===(s=Se(je))||void 0===s?void 0:s.btnText,Object(n.H)(je.isStoreClosed)]}):L&&Object(f.jsx)("span",{className:"edit-selection","data-testid":"edit-selection",onClick:()=>{1===ee?(Me({type:we,value:{id:null===X||void 0===X?void 0:X.mdmId,flag:Le,foodLineId:xe}}),Me({type:_e}),Me({type:ke,value:{cartEditClicked:!1}}),Re(Object(N.c)({tenantId:null===M||void 0===M?void 0:M.tenantId,catalogName:null===Te||void 0===Te?void 0:Te.catalog,itemId:null===X||void 0===X?void 0:X.mdmId})),Re(Object(u.v)({showProductListingModal:!0,categorySelected:W}))):(Fe(!0),Ee(!0))},children:Object(c.translateWithI18Next)(l.o.EDIT_SELECTIONS)})})]})]}),Object(f.jsx)("div",{children:fe&&(()=>{var t;return Object(f.jsx)(h.a,{handleClose:()=>{Ee(!1),Fe(!1)},filteredPreviousData:Ce,updateItemQuantity:be,tenantData:M,dname:B,clickHandler:Ie,cardId:w,categoryId:W,categoryName:H,categoryUrl:U,itemCount:ee,availability:G,pricewithouttax:Ae,imageName:P,itemFoodlineId:xe,customizable:L,setOpenCostomizedModal:Ee,openCostomizedModal:fe,cartData:Te,setShowTopScrollBtn:De,foodId:null===(t=e.item)||void 0===t?void 0:t.mdmId,isEditSelection:Pe,headerText:Object(n.Tc)(Pe,Object(c.translateWithI18Next)(l.o.EDIT_QUANTITY),Object(c.translateWithI18Next)(l.o.SELECT_QUANTITY))})})()})]});var rt,st,ct,ut};const{CARD_TYPE:T}=l.o,{FavoriteInActiveWhite:y,heartIcon_active:D,heartIcon_activeFavourite:A,heartIcon_inactive_red:R}=g.a,_=(e,t,a,i,o,l)=>e===T.LARGE?t?"menu-product-card product-card-active":"menu-product-card":e===T.MEDIUM?t?"medium-menu-product-card product-card-active":"medium-menu-product-card":e===T.SMALL?((e,t,a,i,o)=>e&&(t||a||i||o)?"small-menu-product-card small-menu-product-card-long product-card-active":e&&!(t||a||i||o)?"small-menu-product-card product-card-active":!e&&(t||a||i||o)?"small-menu-product-card small-menu-product-card-long":"small-menu-product-card")(t,a,i,o,l):e===T.CAROUSAL?"carousal-menu-product-card":void 0,w=e=>e===T.LARGE?"menu-product-image":e===T.MEDIUM?"medium-menu-product-image":e===T.SMALL?"small-menu-product-image":e===T.CAROUSAL?"carousal-menu-product-image":void 0,L=(e,t,a,i,o)=>{let{timer:l,newitem:n,topseller:d,customlabelfield:r}=o;return e===T.LARGE?"menu-product-header":e===T.MEDIUM?"medium-menu-product-header":e===T.SMALL?t||a||i||l||n||d||r?"small-menu-product-header-shift":"small-menu-product-header":e===T.CAROUSAL?"carousal-menu-product-header":void 0},k=e=>e===T.LARGE?"menu-vegOrNonVeg":e===T.MEDIUM?"medium-menu-vegOrNonVeg":e===T.SMALL?"small-menu-vegOrNonVeg":e===T.CAROUSAL?"carousal-menu-vegOrNonVeg":void 0,M=e=>e===T.LARGE?"menu-product-price":e===T.MEDIUM?"medium-menu-product-price":e===T.SMALL?"small-menu-product-price":e===T.CAROUSAL?"carousal-menu-product-price":"",P=(e,t)=>e&&"recommended"!==t?"availableprice-withbaseprice":"",F=e=>e===T.LARGE?"menu-product-description":e===T.MEDIUM?"medium-menu-product-description":e===T.SMALL?"small-menu-product-description":e===T.CAROUSAL?"carousal-menu-product-description":"",W=(e,t)=>e?"cardButton "+t:"cardButtonOnly cardButtonOnly-in "+t,H=e=>{const{ADD_TO_CART:t}=d.a;let a=Object(c.translateWithI18Next)(t),i="",o=!0;return null!==e&&void 0!==e&&e.isStoreNone?(a="Store Closed",i="no-store-selected",o=!1):null!==e&&void 0!==e&&e.isStoreClosed&&(a="Store Closed",i="store-closed",o=!1),{btnText:a,className:i,enabled:o}},U=(e,t,a,i)=>e?"".concat(((e,t)=>{let a,i="button activeBtn";switch(i+=t?" blackButton":" redButton",e){case T.LARGE:a="menu-cart-button";break;case T.MEDIUM:a="medium-menu-cart-button";break;case T.SMALL:a="small-menu-cart-button";break;case T.CAROUSAL:a="carousal-menu-cart-button";break;default:a=""}return"".concat(i," ").concat(a)})(t,a)," ").concat(H(i).className):"button btn-black medium-menu-cart-button",B=(e,t,a,i,o,d)=>{let r;return r=d?Object(f.jsx)("span",{"data-testid":"exclusive-id",children:d}):e||(t||(a?Object(f.jsx)("span",{"data-testid":"exclusive-id",children:Object(c.translateWithI18Next)(l.o.MENU_CARD.EXCLUSIVE_DEAL)}):i?Object(f.jsx)("span",{"data-testid":"new-id",children:Object(c.translateWithI18Next)(l.o.MENU_CARD.NEW)}):Object(n.Tc)(o,Object(f.jsx)("span",{"data-testid":"topseller-id",children:Object(c.translateWithI18Next)(l.o.MENU_CARD.TOP_SELLER)}),null))),r},G=e=>e===T.CAROUSAL?D:A,V=e=>e===T.CAROUSAL?y:R,Y=(e,t)=>Boolean(e)&&"recommended"!==t,K=(e,t)=>{let a;return a=Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("span",{className:"price-display",children:"old price"}),Object(f.jsxs)("span",{className:"base-price-menu",children:[l.o.MENU_CARD.CURRENCY,(parseFloat(e)/t).toFixed(2)]})]}),a};t.b=e=>{var t,a;const{cardId:l,cardType:d,discount:c,specials:v,exclusive:O,timer:b,availability:m=[],tenantData:h,customizable:p,categoryId:g,activeId:N,addFavourite:S,removeFavourite:I,item:x,isHidden:E,cardFor:y,setShowTopScrollBtn:D,userParams:A}=e,{QUANTITY_ACTION:R}=r.a,z=Object(o.b)(),q=null===h||void 0===h?void 0:h.tenantId,{componentOptions:J={}}=h,{PlpProductCard:X={}}=J,{allowClickOnProductCard:Q=!1}=X,Z=Object(o.c)((e=>e.cartReducer)),$=Object(o.c)((e=>{var t;return null===(t=e.profileReducer)||void 0===t?void 0:t.basic})),{cartData:ee={},isAddItemLoading:te=!1}=Object(n.kd)(Z),[ae,ie]=Object(i.useState)(0),[oe,le]=Object(i.useState)(null),[ne,de]=Object(i.useState)(0),re=null===$||void 0===$?void 0:$.id,se=Object(o.c)((e=>{var t;return Object(n.od)(null===(t=e.profileReducer)||void 0===t?void 0:t.favouriteItems)})),[ce,ue]=Object(i.useState)(!0),[ve,Oe]=Object(i.useState)("product"),{flatResponse:{productMapById:be={}}={}}=null!==(t=Object(o.c)((e=>{let{menuReducer:t}=e;return t})))&&void 0!==t?t:{},[me,je]=Object(i.useState)(""),[he,pe]=Object(i.useState)(0),[ge,Ne]=Object(i.useState)([]),[Se,Ie]=Object(i.useState)(!1),[xe,fe]=Object(i.useState)(""),{couponCode:Ee="",amount:Ce=0}=(null===ee||void 0===ee||null===(a=ee.discountLines)||void 0===a?void 0:a[0])||{},{foodLines:Te,total:ye}=ee,De=Number((ye/(null===h||void 0===h?void 0:h.currencyConversionFactor)).toFixed(2)),Ae=[{couponCode:Ee,amount:Number((Ce/(null===h||void 0===h?void 0:h.currencyConversionFactor)).toFixed(2))}];Object(i.useEffect)((()=>{y&&Oe(y)}),[y]),Object(i.useEffect)((()=>{const e=Object(n.Kd)(ee)?Object(n.hc)(l,ee):{},t=Object(n.Tc)(Object(n.Kd)(e),e.count,0),a=Object(n.Tc)(Object(n.Kd)(e),e.matchedItemFoodLineId,""),i=Object(n.Tc)(Object(n.Kd)(e),e.entriesCount,0),o=Object(n.Tc)(Object(n.Kd)(e),e.itemUnitPrice,"");ie(t),le(a),de(i),pe(o)}),[ee,l]);const Re=Object(i.useCallback)((()=>{je(_(d,Q,c,v,O,b))}));Object(i.useEffect)((()=>{Re()}),[Re]);Object(i.useEffect)((()=>{ue(!0)}),[ae]);const _e=e=>{if(null!==ee&&void 0!==ee&&ee.id){let t=null===ee||void 0===ee?void 0:ee.foodLines.filter((t=>{var a;return(null===t||void 0===t||null===(a=t.item)||void 0===a?void 0:a.id)===e}));Ne(t)}fe(e),Ie(!0)},we=Object(n.db)(te,N===l);return!E&&Object(f.jsx)(C,{...e,getCardTypeName:_,"data-testid":"MenuPlpTestId",allowClickOnProductCard:Q,getProductImageClassName:w,getSpecificRibbonBanner:B,favouriteItems:se,classFavouriteIconActive:G,getCardName:me,favouriteButtonClickHandler:()=>{Object(n.db)(Array.isArray(se),null===se||void 0===se?void 0:se.find((e=>(null===e||void 0===e?void 0:e.id)===(null===x||void 0===x?void 0:x.id))))?I(q,re,x.id):((e,t,a,i)=>{var o;const l=Object(n.ld)(null===(o=a[0])||void 0===o?void 0:o.price),d={mdmId:t.mdmId,id:t.id,name:t.name,imageName:t.imageName,description:t.longDescription,quantity:1,isCustomized:t.customizable,price:l/(null===h||void 0===h?void 0:h.currencyConversionFactor),additionalProperties:t.additionalProperties};S(e,d,i),z(Object(u.v)({showProductListingModal:!1,categorySelected:g}))})(q,x,m,re)},itemCount:ae,classFavouriteIconInActive:V,getMenuProductHeader:L,getVegNonvegClassName:k,menuProductPriceClassName:M,checkForBasePriceInMenu:Y,cardCat:ve,displayPrice:K,getPriceClassName:P,menuProductDescriptionClassName:F,updateItemQuantity:(e,t)=>{if(A.localized){const e=Number((he/(null===h||void 0===h?void 0:h.currencyConversionFactor)).toFixed(2));let a={foodName:null===x||void 0===x?void 0:x.name,foodItemId:null===x||void 0===x?void 0:x.mdmId,cartPrice:e,modifiers:Object(j.i)(x),customizable:null===x||void 0===x?void 0:x.customizable,quantity:ae,foodLineId:oe};const{itemQuantityHandler:i}=Object(s.a)({cartId:null===ee||void 0===ee?void 0:ee.id,discountAmounts:Ae,foodLines:Te,totalAmount:De},null===h||void 0===h?void 0:h.tenantId,void 0,be,void 0,z,void 0);t===R.Increase?p&&ae>=1?_e(null===a||void 0===a?void 0:a.foodItemId):(!p&&ue(!1),i(a,R.Increase)):ne>1?_e(null===a||void 0===a?void 0:a.foodItemId):(ue(!1),i(a,R.Decrease))}},classesCardButton:W,classEnableAddToCart:U,enableAddToCartButton:ce,checkLoading:we,menuCardBtnText:H,itemFoodlineId:oe,openCostomizedModal:Se,filteredPreviousData:ge,setOpenCostomizedModal:Ie,cartData:ee,CARD_TYPE:T,setShowTopScrollBtn:D,FoodId:xe})}},939:function(e,t,a){"use strict";a.d(t,"q",(function(){return f})),a.d(t,"b",(function(){return E})),a.d(t,"s",(function(){return C})),a.d(t,"k",(function(){return T})),a.d(t,"o",(function(){return D})),a.d(t,"e",(function(){return R})),a.d(t,"i",(function(){return w})),a.d(t,"j",(function(){return L})),a.d(t,"f",(function(){return M})),a.d(t,"d",(function(){return P})),a.d(t,"c",(function(){return F})),a.d(t,"m",(function(){return W})),a.d(t,"l",(function(){return H})),a.d(t,"n",(function(){return U})),a.d(t,"r",(function(){return B})),a.d(t,"g",(function(){return G})),a.d(t,"h",(function(){return V})),a.d(t,"a",(function(){return Y})),a.d(t,"t",(function(){return K})),a.d(t,"p",(function(){return z}));var i=a(30),o=a(102),l=a(42),n=a(138),d=a(63),r=a(220),s=a(1018),c=a(12),u=a(13),v=a(0),O=a(22),b=a(49),m=a(62),j=a(5),h=a(215),p=a(958),g=a(14),N=a(11);const S=(e,t,a)=>{null!==e&&void 0!==e&&e.isExternalTrackOrder||t||y(a)},I=e=>{let{displayOrderProcessingPage:t,orderDetails:a,service:i,updateSetOrderDetails:o,showOrderSummaryOnSentToPosFailed:l=!1}=e;(l||t&&(!Object(h.ob)(a)&&!Object(h.j)()&&!Object(h.X)()||Object(h.i)(a)||Object(h.W)(a)||Object(j.yd)(i)&&!Object(h.pb)(a)))&&o({displayOrderProcessingPage:!1})},x=(e,t,a)=>{Object(h.p)(e)&&t({retryCountForGetOrderTrackingStatus:a+1})},f=e=>{var t,a;const{orderDetails:i,updateSetOrderDetails:o,userOrderState:l}=e;(null===i||void 0===i||null===(t=i.userStatus)||void 0===t?void 0:t.loggedIn)&&(null===JSON||void 0===JSON?void 0:JSON.parse(null===(a=sessionStorage)||void 0===a?void 0:a.getItem(null===v.gd||void 0===v.gd?void 0:v.gd.ORDER_TRACKING)))||(Object(h.l)(i)&&Object(b.B)({orderDetails:i,userOrderState:l}),!Object(h.ib)(i)&&!Object(h.J)(i)||null!==i&&void 0!==i&&i.isAnalyticsUpdated||(Object(b.B)({orderDetails:i,userOrderState:l}),o({isAnalyticsUpdated:!0})))},E=e=>{localStorage.getItem(v.gd.POST_PAYMENT_TYPE)===v.oe.GIFT_CARD_PURCHASE&&(localStorage.setItem(v.gd.PAYMENT_STATUS,v.Td.SUCCESS),Object(j.Ke)(e))},C=e=>{var t,a;const i=null===JSON||void 0===JSON?void 0:JSON.parse(null===(t=sessionStorage)||void 0===t?void 0:t.getItem(null===v.gd||void 0===v.gd?void 0:v.gd.ORDER_TRACKING));if(i&&null!==Object&&void 0!==Object&&null!==(a=Object.keys(i))&&void 0!==a&&a.length){const{dispatch:t,updateSetOrderDetails:a}=e;null!==i&&void 0!==i&&i.postOrderDetails&&0===Object.keys(null===i||void 0===i?void 0:i.postOrderDetails).length&&A({dispatch:t,orderDetails:i,updateSetOrderDetails:a})}else D(e)},T=e=>{const{dispatch:t,orderDetails:a,updateSetOrderDetails:i,miscPaymentReferenceId:o}=e;if((null===a||void 0===a?void 0:a.tenantId)&&Object(h.p)(a)&&i({displayOrderProcessingPage:!1}),null!==a&&void 0!==a&&a.orderId&&Object(h.db)(a)){const e=setTimeout((()=>{const l=JSON.parse(sessionStorage.getItem(v.gd.ORDER_TRACKING)||"{}").orderId;null!==a&&void 0!==a&&a.orderId&&l&&l!==(null===a||void 0===a?void 0:a.orderId)?clearTimeout(null===a||void 0===a?void 0:a.dispatchDeliveryOrderTrackerTimer):((null===a||void 0===a?void 0:a.dispatchDeliveryOrderTrackerTimer)&&clearTimeout(null===a||void 0===a?void 0:a.dispatchDeliveryOrderTrackerTimer),i({dispatchDeliveryOrderTrackerTimer:e}),A({dispatch:t,orderDetails:a,updateSetOrderDetails:i,miscPaymentReferenceId:o}))}),Object(u.a)(c.E))}},y=e=>{const{dispatch:t,orderDetails:a,cartReducer:o,userOrderState:l,appStateReducer:n,updateSetOrderDetails:d}=e,{service:r}=a,s=(null===O.b||void 0===O.b?void 0:O.b.shouldGoogleSpotIgnoreOloFailure)||Object(h.nb)(a)||Object(h.l)(a);if(Object(j.Dd)(r)&&s){var c;const e=null===n||void 0===n?void 0:n.userStatus;Object(j.l)(s,!(null!==o&&void 0!==o&&o.isBasketLoading),null===o||void 0===o||null===(c=o.cartData)||void 0===c?void 0:c.id,null===e||void 0===e?void 0:e.localized,null===a||void 0===a?void 0:a.tenantId)&&(d({isBasketsCreated:!0}),Object(j.G)(t,i.f,null===a||void 0===a?void 0:a.tenantId,l),Object(j.hf)({key:null===v.gd||void 0===v.gd?void 0:v.gd.SELECTED_NOT_NOW,value:!1},t),Object(j.hf)({key:null===v.gd||void 0===v.gd?void 0:v.gd.SHOW_ADDHOPE_NOTIFICATION,value:!1},t))}},D=e=>{var t;const{dispatch:a,postOrderReducer:i={},orderReducer:o={},orderDetails:l,updateSetOrderDetails:n,userOrderStateDispatch:d}=e,r=Object(p.f)({postOrderReducer:i,orderReducer:o,orderDetails:l,isCheckOrderDetails:!1}),{props:s,orderId:O,retryCountForGetOrderStatus:b,miscPaymentReferenceId:m,wiCodePurchaseId:g,orderTrackingID:N}=l;N||l&&(O||m||g)&&Object(h.sb)(l)?0===b||(Object(h.ob)(r)||Object(h.h)(l)||Object(h.V)(l))&&b<Object(u.a)(c.D)?A({dispatch:a,orderDetails:l,updateSetOrderDetails:n,userOrderStateDispatch:d}):(Object(h.ob)(r)||Object(h.h)(l)||Object(h.V)(l))&&b>=Object(u.a)(c.D)&&(localStorage.setItem(v.Td.STATUS_TEXT,v.Td.FAILED),Object(j.Se)(s)):null!==e&&void 0!==e&&null!==(t=e.orderDetails)&&void 0!==t&&t.orderId&&Object(j.Me)(s)},A=e=>{const{dispatch:t,orderDetails:a,updateSetOrderDetails:i=null,userOrderStateDispatch:o}=e;null!==a&&void 0!==a&&a.isExternalTrackOrder?R({dispatch:t,orderDetails:a,updateSetOrderDetails:i}):Object(h.j)()?w({dispatch:t,orderDetails:a,updateSetOrderDetails:i}):Object(h.X)()?L({dispatch:t,orderDetails:a,updateSetOrderDetails:i}):_({dispatch:t,orderDetails:a,updateSetOrderDetails:i,userOrderStateDispatch:o})},R=e=>{const{dispatch:t,orderDetails:a,updateSetOrderDetails:i=null}=e,l={emailId:null===a||void 0===a?void 0:a.userEmail,phoneNo:null===a||void 0===a?void 0:a.userPhone,orderNo:null===a||void 0===a?void 0:a.posOrderId,tenantId:null===a||void 0===a?void 0:a.tenantId},n=(null===a||void 0===a?void 0:a.retryCountForGetOrderStatus)+1;t(Object(o.d)(l,(()=>k({count:n,updateSetOrderDetails:i}))))},_=e=>{const{dispatch:t,orderDetails:a,updateSetOrderDetails:i=null,userOrderStateDispatch:o}=e;if(null!==a&&void 0!==a&&a.orderTrackingID){const e={orderId:null===a||void 0===a?void 0:a.orderTrackingID,tenantId:null===a||void 0===a?void 0:a.tenantId,Email:null===a||void 0===a?void 0:a.orderTrackingEmail},l=(null===a||void 0===a?void 0:a.retryCountForGetOrderStatus)+1;t(Object(n.g)(e,(e=>{var t;let n=!1;e.errors&&e.errors.length>0&&(n=!0),i({selectedPickupOrderCollectionMethod:null===e||void 0===e||null===(t=e.collectionPoint)||void 0===t?void 0:t.name});let d=localStorage.getItem(v.gd.USER_LANGUAGE);if("true"!==localStorage.getItem(null===v.gd||void 0===v.gd?void 0:v.gd.HAS_LANGUAGE_CHANGED)&&d!==(null===e||void 0===e?void 0:e.lang)){let t=null===e||void 0===e?void 0:e.lang,a={key:t,short_value:null===t||void 0===t?void 0:t.split("-")[1]};localStorage.setItem(v.gd.DEFAULT_LANGUAGE,JSON.stringify(a)),Object(j.bd)({defaultLanguage:t,language:t},o),localStorage.setItem(null===v.gd||void 0===v.gd?void 0:v.gd.HAS_LANGUAGE_CHANGED,!0),setTimeout((()=>window.location.reload()),500)}k({count:l,orderDetails:a,hasError:n,updateSetOrderDetails:i})})))}else{const e={orderId:null===a||void 0===a?void 0:a.orderId,tenantId:null===a||void 0===a?void 0:a.tenantId,customerId:null===a||void 0===a?void 0:a.customerId},o=(null===a||void 0===a?void 0:a.retryCountForGetOrderStatus)+1;t(Object(n.f)(e,(()=>k({count:o,orderDetails:a,updateSetOrderDetails:i}))))}},w=e=>{if(Object(h.j)()){const{dispatch:t,orderDetails:a,updateSetOrderDetails:i}=e,o={tenantId:null===a||void 0===a?void 0:a.tenantId,miscPaymentReferenceId:null===a||void 0===a?void 0:a.miscPaymentReferenceId},l=(null===a||void 0===a?void 0:a.retryCountForGetOrderStatus)+1;t(Object(n.d)(o,(()=>k({count:l,orderDetails:a,updateSetOrderDetails:i}))))}},L=e=>{if(Object(h.X)()){const{dispatch:t,orderDetails:a,updateSetOrderDetails:i}=e,o={tenantId:null===a||void 0===a?void 0:a.tenantId,wiCodePurchaseId:null===a||void 0===a?void 0:a.wiCodePurchaseId},l=(null===a||void 0===a?void 0:a.retryCountForGetOrderStatus)+1;t(Object(n.e)(o,(()=>k({count:l,orderDetails:a,updateSetOrderDetails:i}))))}},k=e=>{const{count:t,orderDetails:a,hasError:i,updateSetOrderDetails:o}=e;if(o){const e=setTimeout((()=>{(null===a||void 0===a?void 0:a.dispatchGetOrderStatusTimer)&&clearTimeout(null===a||void 0===a?void 0:a.dispatchGetOrderStatusTimer),o({retryCountForGetOrderStatus:t,dispatchGetOrderStatusTimer:e,hasError:i})}),Object(u.a)(c.F))}},M=e=>{e(Object(r.a)({object:Object(m.a)(),contentFull:{content_type:"tenders",include:5,select:"sys.id,fields"}}))},P=e=>{e(Object(s.a)({object:Object(m.a)(),contentFull:{content_type:"staticLandingPage","fields.page":"Support Help",include:"5"}}))},F=e=>{var t,a,i,o,l;const{service:n,store:r,tenantId:s,deliveryAddress:c}=null===e||void 0===e?void 0:e.orderDetails;let u=(null===n||void 0===n?void 0:n.toUpperCase())===v.Jb.DELIVERY;const b=[{storeId:null===r||void 0===r?void 0:r.storeId,channel:O.b.channel,service:n,dropoffAddress:{city:null===c||void 0===c?void 0:c.city,state:null===c||void 0===c?void 0:c.state,zipCode:null===c||void 0===c?void 0:c.pinCode,street:null===c||void 0===c||null===(t=c.addressLines)||void 0===t?void 0:t.join(","),...u&&(null===e||void 0===e||null===(a=e.latLong)||void 0===a?void 0:a.lat)&&{latitude:null===e||void 0===e||null===(i=e.latLong)||void 0===i?void 0:i.lat},...u&&(null===e||void 0===e||null===(o=e.latLong)||void 0===o?void 0:o.lng)&&{longitude:null===e||void 0===e||null===(l=e.latLong)||void 0===l?void 0:l.lng}}}];null===e||void 0===e||e.dispatch(Object(d.d)({data:b,tenantId:s,isFavoritePage:!1}))},W=e=>{var t,a,i,d,r,s,c,u,O;const{dispatch:b,beforeUnload:m=!1,orderDetails:j={}}=e,{userStatus:p={}}=j,g=sessionStorage.getItem(v.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT);var N;m&&((null===(t=window)||void 0===t||null===(a=t.location)||void 0===a?void 0:a.pathname)===(null===v.Ae||void 0===v.Ae?void 0:v.Ae.ORDER_SUMMARY)||(null===(i=window)||void 0===i||null===(d=i.location)||void 0===d?void 0:d.pathname)===(null===v.Ae||void 0===v.Ae?void 0:v.Ae.CHECKOUT))||g||(b(Object(l.z)()),(null===(r=localStorage)||void 0===r?void 0:r.getItem(null===v.gd||void 0===v.gd?void 0:v.gd.PAYMENT_STATUS))!==(null===v.Td||void 0===v.Td?void 0:v.Td.FAILED)&&(b(Object(n.h)()),b(Object(o.e)())),b(Object(o.a)({value:[]})),((null===(s=window)||void 0===s||null===(c=s.location)||void 0===c?void 0:c.pathname)!==(null===v.Ae||void 0===v.Ae?void 0:v.Ae.ORDER_SUMMARY)||null!==p&&void 0!==p&&p.loggedIn||(null===p||void 0===p||!p.loggedIn)&&(null===(u=window)||void 0===u||null===(O=u.location)||void 0===O?void 0:O.pathname)===(null===v.Ae||void 0===v.Ae?void 0:v.Ae.ORDER_SUMMARY)&&Object(h.bb)(j))&&(null===(N=sessionStorage)||void 0===N||N.removeItem(null===v.gd||void 0===v.gd?void 0:v.gd.ORDER_TRACKING)))},H=e=>{const{orderDetails:t,updateSetOrderDetails:a}=e,{props:i,service:o,displayOrderProcessingPage:l,retryCountForGetOrderTrackingStatus:n,orderAcceptedLoading:d,isBasketsCreated:r,customer:s,tenantId:c,userStatus:u}=t;if(Object(h.sb)(t)&&!d){if((e=>Object(h.fb)(e)&&!(null!==e&&void 0!==e&&e.enableRetryCountForPickupOrderTracking))(t))sessionStorage.setItem(v.Ke.PICKUP_ORDER_CANCELLED,t.orderId),Object(j.Me)(i);else if((e=>Object(h.S)(e)||Object(h.g)(e)||Object(h.U)(e))(t)){var O;null===(O=localStorage)||void 0===O||O.setItem(null===v.Td||void 0===v.Td?void 0:v.Td.STATUS_TEXT,null===v.Td||void 0===v.Td?void 0:v.Td.FAILED);const d=null===t||void 0===t?void 0:t.showOrderSummaryOnSentToPosFailed;d&&Object(h.mb)(t)?(S(t,r,e),I({displayOrderProcessingPage:l,orderDetails:t,service:o,updateSetOrderDetails:a,showOrderSummaryOnSentToPosFailed:d}),x(t,a,n)):Object(j.Se)(i)}else S(t,r,e),I({displayOrderProcessingPage:l,orderDetails:t,service:o,updateSetOrderDetails:a}),x(t,a,n);(e=>{let{userStatus:t,customer:a,tenantId:i,orderDetails:o}=e;null!==t&&void 0!==t&&t.loggedIn||Object(h.j)()||Object(h.X)()||B({trackDetails:{customer:a,tenantId:i},orderDetails:o})})({userStatus:u,customer:s,tenantId:c,orderDetails:t})}},U=e=>{var t,a;const{orderDetails:i,dispositionPaymentPage:o,userOrderStateDispatch:l}=e,n={deliveryAddress:Object(j.Wb)(null===i||void 0===i?void 0:i.deliveryAddress,null===i||void 0===i?void 0:i.showStateCityAddAddress),store:null===i||void 0===i?void 0:i.store,type:null===i||void 0===i?void 0:i.service},d=(null===JSON||void 0===JSON?void 0:JSON.parse(null===(t=localStorage)||void 0===t?void 0:t.getItem(v.gd.DISPOSITION_NEW)))||{};d.orderDetails=n,null===(a=localStorage)||void 0===a||a.setItem(null===v.gd||void 0===v.gd?void 0:v.gd.DISPOSITION_NEW,null===JSON||void 0===JSON?void 0:JSON.stringify(d)),l({type:null===g.a||void 0===g.a?void 0:g.a.SET_DISPOSITION_NEW,value:{dispositionNew:{...o,orderDetails:n}}})},B=e=>{const{trackDetails:t,orderDetails:a,redirectTo:i,props:o}=e,{customer:l,tenantId:n}=t;if(null!==a&&void 0!==a&&a.id||null!==a&&void 0!==a&&a.orderId){const e=null!==a&&void 0!==a&&a.orderId?{...a,tenantId:n}:{...Object(p.j)({postOrPastOrderDetails:{...a},customer:l}),tenantId:n};e.postOrderDetails={},e.dispatch=null,e.storesReducer=null,e.additionalChargeLines=null,e.additionalCharges=null,e.filteredFoodLines=null,e.foodLines=null,e.operatingTime=null,e.operatingTimeFromStoreReducer=null,e.props=null,sessionStorage.setItem(null===v.gd||void 0===v.gd?void 0:v.gd.ORDER_TRACKING,JSON.stringify(e)),i&&i(o)}else console.error(JSON.stringify(a)),Object(j.Se)(o)},G=e=>{const{dispatch:t,orderDetails:a,updateSetOrderDetails:i}=e,{orderId:o,customerId:l,tenantId:d}=a,r={orderId:o,tenantId:d,customerId:l,paramData:{reason:"default",channel:"web",isRefundable:!1}};t(Object(n.a)(r,(()=>{var e;null===(e=sessionStorage)||void 0===e||e.removeItem(null===v.gd||void 0===v.gd?void 0:v.gd.ORDER_TRACKING),A({dispatch:t,orderDetails:a,updateSetOrderDetails:i})}))),i({isShowPickupOrderCancelModal:!1,pickupCancelOrder:!1,isShowStoreClosePickupOrderCancelModal:!1})},V=e=>{const{dispatch:t,orderDetails:a,updateSetOrderDetails:i}=e,{orderId:o,customerId:l,tenantId:d,selectedPickupOrderCollectionMethod:r,collectionPoint:{carNumber:s=null}={}}=a,c={orderId:o,tenantId:d,customerId:l,paramData:{name:r,bayNumber:0,checkInSummary:"",carNumber:s}};t(Object(n.b)(c,(e=>((e,t)=>{var a;null!==e&&void 0!==e&&e.errors&&(null===e||void 0===e||null===(a=e.errors)||void 0===a?void 0:a.length)>0&&t({isShowStoreClosePickupOrderCancelModal:!0})})(e,i))))},Y=e=>{var t,a;const{orderReducer:i,paymentsContentReducer:o,orderDetails:l,updateSetOrderDetails:n,props:d,tenantReducer:r}=e;var s,c,u;null!==i&&void 0!==i&&null!==(t=i.response)&&void 0!==t&&null!==(a=t.order)&&void 0!==a&&a.id&&(0===(null===i||void 0===i||null===(s=i.response)||void 0===s||null===(c=s.order)||void 0===c||null===(u=c.tenders)||void 0===u?void 0:u.length)?Object(j.Ee)(d):Object(p.s)({orderReducer:i,paymentsContentReducer:o,orderDetails:l,updateSetOrderDetails:n,tenantReducer:r}))},K=(e,t,a)=>{var i,o,l;const n=null!==e&&void 0!==e&&null!==(i=e.storesWithStatus)&&void 0!==i&&i.length?null===e||void 0===e||null===(o=e.storesWithStatus)||void 0===o?void 0:o[0]:{};(null===t||void 0===t||null===(l=t.store)||void 0===l?void 0:l.timings)&&a({store:{...null===t||void 0===t?void 0:t.store,...null===n||void 0===n?void 0:n.summary}})},z=e=>{var t,a,i,o,l,n,d,r,s,c;Object(b.z)({userType:null!==e&&void 0!==e&&null!==(t=e.userStatus)&&void 0!==t&&t.loggedIn?"lo-member":"lo-guest",tip_amount:null===e||void 0===e?void 0:e.tipCharge,bottle_deposit:null===e||void 0===e?void 0:e.bottleDepositChargeTotal,storeID:null===e||void 0===e||null===(a=e.postOrderDetails)||void 0===a||null===(i=a.store)||void 0===i?void 0:i.storeId,payment_type:null===e||void 0===e||null===(o=e.paymentReferences)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.paymentType,state:null===e||void 0===e||null===(n=e.store)||void 0===n||null===(d=n.address)||void 0===d?void 0:d.state,orderTime:Object(N.R)(null===e||void 0===e?void 0:e.displayFormatOrderTime,v.sb.H_MM_A,v.sb.HH_mm),CheckInTime:Object(N.e)(v.sb.HH_mm),checkInlocation:null===e||void 0===e||null===(r=e.collectionPoint)||void 0===r?void 0:r.name,eventType:2,disposition:null===e||void 0===e?void 0:e.service,purchase_day:Object(N.e)(v.sb.DDDD),transaction_id:null===e||void 0===e||null===(s=e.paymentReferences)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.transactionId})}},943:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(6),a(92),a(84);var i=a(5),o=(a(960),a(933),a(18),a(320)),l=(a(36),a(123),a(15));a(2);const{CARD_TYPE:{CAROUSAL:n,MEDIUM:d}}=o.o,{CartError:r}=l.a,s=e=>Object(i.Jd)(null===e||void 0===e?void 0:e.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):null===e||void 0===e?void 0:e.dispositionNew},944:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var i=a(3),o=a.n(i),l=a(61),n=a(25),d=a(63),r=a(5),s=a(30),c=a(6),u=a(36),v=a(2);var O=e=>{const{modalContent:t,onDispositionMethodSubmit:a,setRef:i=null}=e,{contentText:l="",infoObject:n=null,orderTypes:d=[]}=t,r=d.map((e=>Object(v.jsx)(u.c,{variant:e.selectDefault?u.b.secondary:u.b.tertiary,className:"christmas_ordering"!==e.dispositionType?"disposition-button":"disposition-button-christmas",onClickHandler:t=>{a(t,e.type,!1,e.dispositionType)},id:"DispositionModuleFormSubmit",type:"submit","data-testid":"disposition-order-click-handler-".concat(e.type),"aria-label":"order type ".concat(e.buttonText),children:e.buttonText},e.type)));return Object(v.jsx)(o.a.Fragment,{children:Object(v.jsxs)("div",{ref:i,className:"disposition-module-form","data-testid":"disposition-component",children:[Object(v.jsx)("h3",{className:"content-text","data-testid":"contenttext-component",children:l}),n&&Object(v.jsx)("div",{role:"alert",className:"info-text","data-testid":"info-component",children:Object(v.jsx)("span",{children:n.infoText})}),Object(v.jsx)("form",{className:"form",onSubmit:a,"data-testid":"form-component",children:r})]})})},b=a(121),m=a(49);var j=e=>{Object(i.useEffect)((()=>{Object(m.o)()}),[]);const{handleClose:t,DispositionModuleForm:a,headerText:l,modalTitleId:n=""}=e;return Object(v.jsx)(o.a.Fragment,{children:Object(v.jsx)(b.a,{id:"DispositionModulePopup",role:"dialog",modalTitleId:n,show:!0,classNames:"disposition-module-modal extra-small-modal",showCloseBtn:!0,closeDataTestId:"disposition-close-handler",closeButtonHandler:t,modalTitle:l,autoFocus:!0,children:a})})},h=a(19),p=a(9),g=a(0),N=a(334),S=a(14);const I=(e,t)=>{const a=[];for(const l of e){var i,o;const e=null===l||void 0===l||null===(i=l.fields)||void 0===i||null===(o=i.name)||void 0===o?void 0:o.split("-"),n=e[e.length-1].trim().toUpperCase();if(t&&null!==n&&void 0!==n&&n.includes(N.a.DISPOSITION_TYPE.TYPE_DELIVERY))continue;const{buttonText:d="",selectDefault:r=!1,name:s,showOption:c=!0,id:u="",dispositionType:v}=l.fields;a.push({buttonText:d,selectDefault:r,type:s,showOption:c,id:u,dispositionType:v})}return a},x=e=>{const{headline:t="",subHeadline:a="",subHeadlineType:i="",title:o=""}=e[0].fields||{};return{modalHeaderText:o,contentText:t,infoObject:{type:i,infoText:a}}},f=(e,t,a,i)=>{var o;const{CLEAR_CART_CONFIRM_CANCEL_MODAL:l,SHOW_CLEAR_CART_ALERT:n}=S.a;null!==e&&void 0!==e&&null!==(o=e.foodLines)&&void 0!==o&&o.length&&!i?Object(r.ue)(t,{},n,l,a):a()};var E=a(76),C=a(22),T=a(97),y=a(84),D=a(192),A=a(905),R=a(128),_=a(111),w=a(46);var L=e=>{const{CURRENTLY_CLOSED:t,SORRY:a}=A.a,{userOrderState:o,userOrderStateDispatch:u}=Object(i.useContext)(E.a),{contentData:b={}}=o.dispositionStateData,L=Object(n.c)((e=>e.tenantReducer)),{tenantId:k,disableOrderTypeAnalytic:M,isSpecialEventEnabled:P,enableDeliveryMenuOption:F}=L,{deeplinkSelectedStoreId:W,deepLinkStoreMode:H,isDeepLinkURL:U}=o,B=Object(r.Kd)(b)&&function(){let{dispositionData:e,deepLinkStoreMode:t=!1,isSpecialEventEnabled:a=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=e.disposition&&e.disposition.fields||{},{headline:o=[],supportedDispositions:l=[]}=i,n={modalHeaderText:"",modalContent:{}},d=a?l:l.filter((e=>{var t,a;return(null===e||void 0===e||null===(t=e.fields)||void 0===t||null===(a=t.dispositionType)||void 0===a?void 0:a.toUpperCase())!==g.zf}));n.modalContent.orderTypes=I(d,t);const{modalHeaderText:r,contentText:s,infoObject:c}=x(o);return n.modalHeaderText=r,n.modalContent.contentText=s,n.modalContent.infoObject=c,n}({dispositionData:b,deepLinkStoreMode:H,isSpecialEventEnabled:P,enableDeliveryMenuOption:F});let{modalContent:G={},modalHeaderText:V=""}=B;const{SEARCH_ORDER_DATA:Y,MENU_URL:K,DISPOSITION_DATA:z,CURRENT_STORE_INFO:q,SCHEDULE_ORDER_TIME_DATA:J,SELECTED_TILE_DATA:X,DISPOSITION_METHOD:Q,ADD_TO_CART_CLICK:Z,SET_DISPOSITION:$,USER_LOCALIZED:ee,SCHEDULE_ORDER_TIME_PRESERVE_TIME:te,SET_FIND_A_KFC_VIEW:ae,SET_REDIRECTION_PATH:ie}=S.a,{DISPOSITION_TYPE:{TYPE_DINE_IN:oe,TYPE_TAKE_WAY:le,TYPE_DELIVERY:ne,TYPE_CHRISTMAS_ORDERING:de},FIND_OPEN_KFC_TEXT:re,INVALID_QR_TEXT:se,CLOSED_STORE_MODAL_SUBTITLE:ce,TAKEAWAY_STORE_CLOSED_TEXT:ue,DINE_IN_STORE_CLOSED_TEXT:ve,SWITCH_TO_TAKEAWAY_TEXT:Oe,SWITCH_TO_DINEIN_TEXT:be}=N.a,{ENABLE_ADDRESS_LOCALISATION:me,SHOW_MAP_VIEW_BUTTON:je}=w.a,he=o&&o.dispositionStateData&&o.dispositionStateData.dispositionType?o.dispositionStateData.dispositionType:null;let pe="";const ge=Object(r.Jd)(o.dispositionNew)?JSON.parse(localStorage.getItem("dispositionNew")):o.dispositionNew,Ne=Object(n.b)(),Se=Object(l.g)(),[Ie,xe]=Object(i.useState)(""),[fe,Ee]=Object(i.useState)({showError:!1,errMsg:"",errDesc:null,buttonText:"",buttonCTA:null}),{cartData:Ce={},qrCodeScanTime:Te}=Object(n.c)((e=>e.cartReducer)),{customerId:ye=""}=Object(n.c)((e=>e.profileReducer));let De=Object(n.c)((e=>e.appStateReducer.userStatus));const{storesWithStatus:Ae=[],isStoreStatusLoading:Re,selectedStoreDetailsDL:_e={}}=Object(n.c)((e=>Object(r.kd)(e.storesReducer))),{DISPOSITION_ACTION:{SET_QR_DEEPLINK_MODE:we}}=N.a;Object(i.useEffect)((()=>{Ne(Object(d.u)()),Ne(Object(d.t)()),Ne(Object(d.r)()),((e,t)=>{e&&(null===t||void 0===t||t.push({pathname:g.Ae.HOME_PAGE}))})(H,Se)}),[Ne]);const Le=Object(i.useCallback)(((e,t)=>{e.stopPropagation();f(Ce,u,(()=>{Ee({showError:!1,errMsg:"",errDesc:null,buttonText:"",buttonCTA:null}),u({type:we,value:{deepLinkStoreMode:!1,deeplinkSelectedStoreId:""}})}),t)}),[we,u,Ce]);Object(i.useEffect)((()=>{H&&Ne(Object(d.l)({storeId:W,tenantId:k},null,(()=>{Ee({showError:!0,errMsg:Object(c.translateWithI18Next)(se),errDesc:null,buttonText:Object(c.translateWithI18Next)(re),buttonCTA:e=>Le(e,!1)})})))}),[re,se,H,W,Ne,k]);const ke=(e,t,a,i)=>{e.stopPropagation(),e.preventDefault();const o=t.split("-");if(pe=o[o.length-1].trim(),-1!==pe.toLowerCase().indexOf("dine")&&(pe=oe),i&&(pe=i),(async e=>{const t=[];t.push({event:"orderType",dispositionSelected:Object(r.h)(e.selectedDispositionType)}),await h.a.registerEvent(void 0,{data:t[0]},r.xb)})({selectedDispositionType:pe}),H){const e={data:[{storeId:W,channel:C.b.channel,service:g.ee},{storeId:W,channel:C.b.channel,service:g.Eb}],store:[{..._e,service:g.ee},{..._e,service:g.Eb}],tenantId:k,setStatusFlag:!1,isFavoritePage:!1},t=()=>{xe(pe),Ne(Object(d.d)(e)),u({type:Q,value:{dispositionType:pe}})};f(Ce,u,t,a)}else[oe,le,ne,de].includes(pe.toUpperCase())&&(u({type:ae,value:{findAKFC:!1}}),u({type:Y,value:{showSearchStore:!0,configSearchScreen:_.a}}),localStorage.setItem(g.gd.CONFIG_SEARCH_SCREEN,_.a),u({type:z,value:{showDisposition:!1}}),u({type:Q,value:{dispositionType:pe}}),u({type:me,value:void 0}),u({type:je,value:void 0}),localStorage.removeItem(null===g.gd||void 0===g.gd?void 0:g.gd.FROM_SCHEDULE_ORDER_CONTAINER));const{localized:l=!1,loggedIn:n=!1}=De,s=Object(r.gd)(l,n);((e,t)=>{var a;t||Object(m.p)(null===p.a||void 0===p.a||null===(a=p.a.selectOrderType)||void 0===a?void 0:a.name,{...e})})({"%event%":"selectOrderType","%disposition%":Object(r.h)(pe),"%userType%":s},M)},Me=async(e,t)=>{const a=e.filter((e=>(null===e||void 0===e?void 0:e.service)===Object(r.Ib)(t)));if(null!==a&&void 0!==a&&a.length){var i,l,n,d,v,O,b,j,h,p,N,S,I;const e={time:"ASAP",interval:null===a||void 0===a||null===(i=a[0].summary.timings.scheduled.periods[0])||void 0===i?void 0:i.interval,date:new Date,selectedTime:"ASAP"},c=await Object(r.jb)(Ne,!0,Te,null===a||void 0===a?void 0:a[0],Object(r.Ib)(t),ye,e);Ne(Object(s.f)({data:c,tenantId:k})),u({type:$,value:{oldvalue:ge,newValue:{store:null===a||void 0===a?void 0:a[0],time:e.time,date:e.date,type:t,interval:e.interval,deliveryAddress:null===o||void 0===o||null===(l=o.scheduleOrderData)||void 0===l?void 0:l.deliveryAddress,selectedTime:e.selectedTime}}}),localStorage.setItem("dispositionOld",JSON.stringify(ge)),localStorage.setItem("dispositionNew",JSON.stringify({type:t,store:null===a||void 0===a?void 0:a[0],date:e.date,time:e.time,selectedTime:e.selectedTime,interval:e.interval,deliveryAddress:null===o||void 0===o||null===(n=o.scheduleOrderData)||void 0===n?void 0:n.deliveryAddress})),Object(r.pe)(null===a||void 0===a||null===(d=a[0])||void 0===d||null===(v=d.addresses)||void 0===v||null===(O=v[0])||void 0===O||null===(b=O.address)||void 0===b||null===(j=b.addressLines)||void 0===j?void 0:j[0],R.a.ALREADY_SERACHED_LOCATIONS),Object(r.if)();const g={storeID:null===a||void 0===a||null===(h=a[0])||void 0===h?void 0:h.id,disposition:t,postCode:null===a||void 0===a||null===(p=a[0])||void 0===p||null===(N=p.addresses)||void 0===N||null===(S=N[0])||void 0===S||null===(I=S.address)||void 0===I?void 0:I.pinCode};Object(m.y)(g),u({type:z,value:{showSearchStore:!1}}),u({type:ee,value:{isLocalized:!0}}),((e,t)=>{let a=e||null;u({value:{selectedData:{}},type:X}),localStorage.setItem("currentStoreInfo",JSON.stringify(a)),u({value:a,type:q}),Ne(Object(T.a)({...De,localized:!0})),u({value:{selectedDateTime:t},type:J}),u({type:te,value:{selectContentTime:"ASAP"}}),u({type:we,value:{deepLinkStoreMode:!1,deeplinkSelectedStoreId:""}}),localStorage.setItem("selectedTile",JSON.stringify({})),localStorage.setItem("dispositionType",he),localStorage.setItem("tenantReducer",JSON.stringify(L)),localStorage.setItem("dateTimeOrder",JSON.stringify(t)),localStorage.setItem("storeInfo",JSON.stringify(a)),localStorage.setItem("savedTimeOrder","ASAP"),Se.push({pathname:"".concat(K)})})(null===a||void 0===a?void 0:a[0],e)}else(e=>{(null===e||void 0===e?void 0:e.toUpperCase())===oe?Ee({showError:!0,errMsg:Object(c.translateWithI18Next)(ve),errDesc:null,buttonText:Object(c.translateWithI18Next)(Oe),buttonCTA:e=>ke(e,g.kf,!0)}):(null===e||void 0===e?void 0:e.toUpperCase())===le&&Ee({showError:!0,errMsg:Object(c.translateWithI18Next)(ue),errDesc:null,buttonText:Object(c.translateWithI18Next)(be),buttonCTA:e=>ke(e,g.Fb,!0)})})(t)};Object(i.useEffect)((()=>{if(Ae.length>0&&!Re&&Ie&&H){var e,i,o;((e,i)=>{null!==e&&void 0!==e&&e.length?Me(e,he):Ee({showError:!0,errMsg:"".concat(Object(c.translateWithI18Next)(a)," ").concat(i," ").concat(Object(c.translateWithI18Next)(t)),errDesc:Object(c.translateWithI18Next)(ce),buttonText:Object(c.translateWithI18Next)(re),buttonCTA:e=>Le(e,!0)})})(null===Ae||void 0===Ae?void 0:Ae.filter((e=>{var t,a,i,o,l,n,d,r,s,c,u,v,O;return(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.longitude)&&"OPEN"===(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(o=i.status)||void 0===o?void 0:o.currentStatus)&&(null===e||void 0===e||null===(l=e.summary)||void 0===l||null===(n=l.menu)||void 0===n||null===(d=n.catalogs)||void 0===d?void 0:d.length)&&(null===e||void 0===e||null===(r=e.summary)||void 0===r||null===(s=r.timings)||void 0===s||null===(c=s.operatingHours)||void 0===c?void 0:c.length)>0&&(null===e||void 0===e||null===(u=e.summary)||void 0===u||null===(v=u.timings)||void 0===v||null===(O=v.asap)||void 0===O?void 0:O.isAvailable)})),null===Ae||void 0===Ae||null===(e=Ae[0])||void 0===e||null===(i=e.name)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.value)}}),[Ae,Re,H]);const Pe=e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem("renderComp",!0),u({type:z,value:{showDisposition:!1}}),u({type:Z,value:{addToCart:!1}}),u({type:we,value:{deepLinkStoreMode:!1,deeplinkSelectedStoreId:""}}),u({type:ie,value:{redirectionOrder:""}}),u({type:ae,value:{findAKFC:window.location.pathname===g.Ae.FIND_STORE}}),U&&Object(r.td)(Se)};Object(i.useEffect)((()=>{const e=e=>{27===e.keyCode&&Pe(e)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const Fe=Object(v.jsx)(O,{modalContent:G,onDispositionMethodSubmit:ke}),We=Object(v.jsx)(j,{handleClose:Pe,DispositionModuleForm:Fe,headerText:V,modalTitleId:"dispostion_selector"});return Object(v.jsxs)(v.Fragment,{children:[(null===fe||void 0===fe?void 0:fe.showError)&&Object(v.jsx)(D.a,{handleClose:null,CartAlertForm:Object(v.jsx)(y.a,{title:null===fe||void 0===fe?void 0:fe.errMsg,contentMsg:null===fe||void 0===fe?void 0:fe.errDesc,confirmButtonText:null===fe||void 0===fe?void 0:fe.buttonText,confirmHandler:null===fe||void 0===fe?void 0:fe.buttonCTA,buttonContainerClass:"deeplink-alert-btn-container"})}),We]})}},945:function(e,t,a){"use strict";var i=a(813);a.d(t,"a",(function(){return i.default}))},946:function(e,t,a){"use strict";t.a={PRODUCT_LISTING_DATA:"productListingData",SEARCHOURMENU:"searchMenu",GENERAL_ROUTING:"General Routing/Communication",HOME_PAGE_OFFERS:"Home Page Offers",MARKETING_HERO_3:"Marketing Hero 3",CRM_SIGNUP:"CRM SignUP",BROWSER_CATEGORIES:"Browser Categories",OFFERS_DEALS:"Offers and Deals",DISPOSITION:"disposition",CAROUSAL:"carousalComponent",ORDERSERV:"orderServComponent",ROUTING:"routingComponent",CRM:"crmSignUp",ORDER_IT_AGAIN:"Order it again",WELCOME_MESSAGE:"Welcome Message"}},956:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return v}));var i=a(128);let o,l,n,d,r=[],s="";const c=(e,t,a,i)=>{if(o=e,l=t,r=a,d=i,r.length>0){let a=r.map((e=>{const{latitude:t,longitude:a}=e&&e.storeBasic.location;return{lat:t,lng:a}})),i=[{lat:e,lng:t}];(new window.google.maps.DistanceMatrixService).getDistanceMatrix({origins:[...i].slice(0,24),destinations:[...a].slice(0,24),travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},u)}else d([],"")},u=(e,t)=>{let a=[],i=[];i=e&&e.rows&&e.rows[0].elements.map((e=>e));let o=e&&e.originAddresses&&e.originAddresses[0]||"";a=r.map(((e,t)=>({...e,...i[t]}))),d(a,o)},v=(e,t,a)=>{(new window.google.maps.DistanceMatrixService).getDistanceMatrix({origins:[...e].slice(0,24),destinations:[...t].slice(0,24),travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},O),n=a},O=(e,t)=>{if(t===i.a.OK_STATUS){let t=[],a=e&&e.rows&&e.rows.map((e=>e));t=null===a||void 0===a?void 0:a.map((e=>e.elements[0])),s=e&&e.originAddresses||[],n({allStoreDistance:t,originAddressText:s})}}},958:function(e,t,a){"use strict";a.d(t,"n",(function(){return m})),a.d(t,"e",(function(){return j})),a.d(t,"f",(function(){return S})),a.d(t,"w",(function(){return I})),a.d(t,"t",(function(){return x})),a.d(t,"q",(function(){return f})),a.d(t,"u",(function(){return E})),a.d(t,"m",(function(){return C})),a.d(t,"v",(function(){return T})),a.d(t,"s",(function(){return y})),a.d(t,"j",(function(){return D})),a.d(t,"o",(function(){return L})),a.d(t,"g",(function(){return k})),a.d(t,"h",(function(){return M})),a.d(t,"i",(function(){return P})),a.d(t,"p",(function(){return F})),a.d(t,"d",(function(){return U})),a.d(t,"k",(function(){return B})),a.d(t,"l",(function(){return G})),a.d(t,"a",(function(){return V})),a.d(t,"b",(function(){return Y})),a.d(t,"c",(function(){return K})),a.d(t,"r",(function(){return z}));var i=a(0),o=a(378),l=a(5),n=a(11),d=a(215),r=a(18),s=a.n(r),c=a(6),u=a(51),v=a(4),O=a(939),b=a(1073);const m={tenantId:null,currencyCode:null,currencySymbol:null,currencyShortName:null,showCarryBagInLineItem:null,addHope:null,carryBag:null,currencyConversionFactor:null,pastOrderDateformat:"",pastOrderTimeFormat:"",storeSearch:null,driveTime:null,buffertimepmpickup:null,buffertimepmdelivery:null,favouriteOrderRegex:"",hideCancelOrderPanel:null,enableCancelOrderCallsupportModal:null,hidePickupCheckin:null,operatingTime:null,userStatus:null,helpContantData:null,allStoresDetails:null,currentStoresDetails:{},operatingTimeFromStoreReducer:"",pickupOrderAvailableCollectionPoints:[],savedAddresses:null,paymentType:null,additionalChargeLines:null,customer:null,customerId:null,deliveryAddress:null,deliveryDetails:null,deliveryPartner:null,foodLines:null,orderId:null,displayOrderId:null,fulfillmentDateTime:null,orderDateOn:null,orderTime:null,displayOrderTime:null,displayFormatOrderTime:null,displayTodayDate:null,posOrderId:null,miscPaymentReferenceId:null,wiCodePurchaseId:null,userEmail:null,userPhone:null,service:null,status:null,orderStatus:null,orderStatusChangedAt:null,sameOrderStatusMaintainLast30Mins:null,store:null,storeName:null,phoneNumber:"",phoneNumberFormat:null,storeTimeZoneIANA:null,isContactless:!1,filteredFoodLines:null,orderedItemDetails:null,orderingDateTime:null,orderingDate:"",orderingTime:"",fullAddressDetails:"",instruction:"",addressLines:"",taxLines:[],additionalCharges:[],subTotal:0,discountTotal:0,total:null,inclusiveTaxTotal:"",tenders:null,paymentReferences:null,taxTotal:null,orderAcceptedLoading:!1,requestedTimeStamp:null,requestedDateTime:null,orderDateTimeInEpoch:null,oldOrderId:null,postOrderDetails:{},enableOrderNoteForCheckout:!1,deliveryOrEstimatedOrCollectAtTime:null,pickupOrderEstimatedOrCollectAtTime:null,storeOperatingTime:null,isExternalTrackOrder:!1,dispatch:null,isMobileView:Object(l.Ud)(window.innerWidth),discountLines:[],paymentDiscountLines:[],paymentDiscountTotal:0,dispatchDeliveryOrderTrackerTimer:null,dispatchGetOrderStatusTimer:null,displayOrderProcessingPage:!0,displayDeliveryOrderTrackerPage:!1,retryCountForGetOrderStatus:0,retryCountForGetOrderTrackingStatus:0,isAnalyticsUpdated:!1,isDeliveryOrderSentPOSCompleted:!1,orderSummaryInfoDetailsShowInAccordion:!1,orderSummaryInfoDetailsOpenAccordion:!1,isOpenOrderSummaryDirectionMap:!1,isOpenOrderSummarySaveYourOrderCheckoutFaster:!1,isOpenSaveDeliveryAddressModal:!1,deliverySearchType:"",savedAddressSucess:!1,saveFavoriteSummarySucess:!1,orderSummarySaveYourOrderCompleted:!1,orderSummarySaveOrderDetails:{value:"",errorMessage:"",error:!1},isBasketsCreated:!1,isGetStoreStatus:!1,isShowPickupOrderCancelModal:!1,pickupCancelOrder:!1,isShowPickupOrderCheckReadyToPrepareModal:!1,isPickupOrderUserConfirmedToCheckIn:!1,isShowPickupOrderStoreClosedModal:!1,isShowPickupOrderAlreadyCheckInModal:!1,selectedPickupOrderCollectionMethod:null,showStoreDirectinPanelInOrderSummaryInfoDetails:!1,showStoreHoursPanelInOrderSummaryInfoDetails:!1,isShowStoreClosePickupOrderCancelModal:!1,item:[],addHopeDataExistsId:"",carryBagDataExistsId:"",addHopeDataPrice:"",carryBagDataPrice:"",pickupClosedInfoModal:!1,pickupClosingSoonModal:!1,showCombinedDiscount:!0,orderSummarycontentData:{},openCallSupportModal:!1,showGiftCardOrVoucherSummary:!1,showPromosSummary:!1,showOrderingTime:"",isPostorderStoreShutdownPopupModal:!1,showOrderSummaryOnSentToPosFailed:!1,isUberServiceableEnabled:!1},j=e=>null!==e&&void 0!==e&&e.enableGlobalOrderTracking?0===parseInt(null===e||void 0===e?void 0:e.referenceNumber)?"":null===e||void 0===e?void 0:e.referenceNumber:0===parseInt(null===e||void 0===e?void 0:e.posOrderId)?"":null===e||void 0===e?void 0:e.posOrderId,h=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(l.db)(null===e||void 0===e?void 0:e.length,null===t||void 0===t?void 0:t.length)?null===e||void 0===e?void 0:e.find((e=>{var o,l,n,d,r,s,c,u,v,O,b,m,j,h,p,g,N,S,I;return(null===a||void 0===a?void 0:a.length)>0&&(null===i.Ud||void 0===i.Ud||null===(o=i.Ud.CREDIT_CARD)||void 0===o?void 0:o.toLowerCase())===(null===t||void 0===t||null===(l=t[0])||void 0===l||null===(n=l.type)||void 0===n?void 0:n.toLowerCase())?(null===e||void 0===e||null===(d=e.fields)||void 0===d||null===(r=d.title)||void 0===r?void 0:r.toLowerCase())===(null===a||void 0===a||null===(s=a[0])||void 0===s||null===(c=s.paymentInstrumentType)||void 0===c?void 0:c.toLowerCase())||(null===e||void 0===e||null===(u=e.fields)||void 0===u||null===(v=u.orderServName)||void 0===v?void 0:v.toLowerCase())===(null===a||void 0===a||null===(O=a[0])||void 0===O||null===(b=O.paymentInstrumentType)||void 0===b?void 0:b.toLowerCase()):(null===e||void 0===e||null===(m=e.fields)||void 0===m||null===(j=m.title)||void 0===j?void 0:j.toLowerCase())===(null===t||void 0===t||null===(h=t[0])||void 0===h||null===(p=h.type)||void 0===p?void 0:p.toLowerCase())||(null===e||void 0===e||null===(g=e.fields)||void 0===g||null===(N=g.orderServName)||void 0===N?void 0:N.toLowerCase())===(null===t||void 0===t||null===(S=t[0])||void 0===S||null===(I=S.type)||void 0===I?void 0:I.toLowerCase())})):{}},p=e=>{var t,a;return(null===e||void 0===e?void 0:e.orderAccepted)&&(null===Object||void 0===Object||null===(t=Object.keys(null===e||void 0===e?void 0:e.orderAccepted))||void 0===t?void 0:t.length)>0&&Object(l.he)(null===e||void 0===e||null===(a=e.orderAccepted)||void 0===a?void 0:a.id)},g=e=>{var t,a,i;return(null===e||void 0===e||null===(t=e.pastOrderResponse)||void 0===t?void 0:t.length)>0&&(null===e||void 0===e||null===(a=e.pastOrderResponse)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.id)},N=e=>{var t;return(e=>{var t,a,i,o,l;return(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.order)&&(null===Object||void 0===Object||null===(a=Object.keys(null===e||void 0===e||null===(i=e.response)||void 0===i?void 0:i.order))||void 0===a?void 0:a.length)&&(null===e||void 0===e||null===(o=e.response)||void 0===o||null===(l=o.order)||void 0===l?void 0:l.id)})(e)?null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.order:null},S=e=>{const{postOrderReducer:t={},orderReducer:a={},orderDetails:i={},isCheckOrderDetails:o=!0}=e;let l=(e=>p(e)?null===e||void 0===e?void 0:e.orderAccepted:null)(t);var n;null===l&&(l=(e=>{var t;return g(e)?null===e||void 0===e||null===(t=e.pastOrderResponse)||void 0===t?void 0:t[0]:null})(a),null===l&&(l=N(a),o&&null===l&&(l=null!==i&&void 0!==i&&i.postOrderDetails&&null!==(n=Object.keys(null===i||void 0===i?void 0:i.postOrderDetails))&&void 0!==n&&n.length?null===i||void 0===i?void 0:i.postOrderDetails:{})));return l||{}},I=e=>{var t,a,i,o,l,n,d,r,s,c,u,v,O,b,m,j,h,p,g,N,S,I,x,f,E,C,T,y,D,A,R,_,w,L,k,M,P,F,W,H,U,B,G,V,Y,K,z,q,J,X,Q,Z,$,ee,te,ae,ie,oe,le,ne,de,re,se,ce,ue,ve,Oe,be,me,je,he,pe,ge,Ne,Se,Ie,xe,fe,Ee,Ce,Te,ye,De;const{props:Ae,dispatch:Re,tenantReducer:_e={},isExternalTrackOrder:we=!1,dispositionPaymentPage:Le,updateSetOrderDetails:ke}=e,{tenantId:Me,currencyCode:Pe,currencySymbol:Fe,currencyShortName:We,showCarryBagInLineItem:He,addHope:Ue,carryBag:Be,currencyConversionFactor:Ge,pastOrderDateformat:Ve,pastOrderTimeFormat:Ye,storeSearch:Ke={},driveTime:ze,buffertimepmpickup:qe,buffertimepmdelivery:Je,favouriteOrderRegex:Xe,componentOptions:Qe,enablePickupMethodChangePostOrder:Ze,scheduleOrderDateFormat:$e,dateFormat:et,timeFormat:tt,postorderStoreShutdownPopup:at}=_e;ke({props:Ae,dispatch:Re,tenantId:Me,enablePickupMethodChangePostOrder:Ze,postorderStoreShutdownPopup:at,currencyCode:Pe,currencySymbol:Fe,currencyShortName:We,showCarryBagInLineItem:He,addHope:Ue,carryBag:Be,currencyConversionFactor:Ge,pastOrderDateformat:Ve,pastOrderTimeFormat:Ye,isExternalTrackOrder:we,storeSearch:Ke,driveTime:ze,scheduleOrderDateFormat:$e,dateFormat:et,timeFormat:tt,buffertimepmpickup:qe,buffertimepmdelivery:Je,favouriteOrderRegex:Xe,operatingTime:null===Le||void 0===Le||null===(t=Le.store)||void 0===t||null===(a=t.summary)||void 0===a?void 0:a.timings,hideCancelOrderPanel:null===Qe||void 0===Qe||null===(i=Qe.web)||void 0===i||null===(o=i.orderPages)||void 0===o?void 0:o.hideCancelOrderPanel,enableOrderNoteForCheckout:null===Qe||void 0===Qe||null===(l=Qe.checkout)||void 0===l?void 0:l.enableOrderNoteForCheckout,hidePickupCheckin:null===Qe||void 0===Qe||null===(n=Qe.web)||void 0===n||null===(d=n.orderPages)||void 0===d?void 0:d.orderSummaryShowPickupOrderCollectionMethodPanel,showTaxLines:null===Qe||void 0===Qe||null===(r=Qe.web)||void 0===r||null===(s=r.cartPage)||void 0===s?void 0:s.showTaxLines,showTaxExcluded:null===Qe||void 0===Qe||null===(c=Qe.web)||void 0===c||null===(u=c.checkout)||void 0===u?void 0:u.showTaxExcluded,enableGlobalOrderTracking:null===Qe||void 0===Qe||null===(v=Qe.web)||void 0===v||null===(O=v.orderPages)||void 0===O?void 0:O.enableGlobalOrderTracking,enableRetryCountForPickupOrderTracking:null===Qe||void 0===Qe||null===(b=Qe.web)||void 0===b||null===(m=b.orderPages)||void 0===m?void 0:m.enableRetryCountForPickupOrderTracking,enableCancelOrderCallsupportModal:null===Qe||void 0===Qe||null===(j=Qe.web)||void 0===j||null===(h=j.orderPages)||void 0===h?void 0:h.enableCancelOrderCallsupportModal,showOrderTrackingIFrame:null===Qe||void 0===Qe||null===(p=Qe.web)||void 0===p||null===(g=p.orderPages)||void 0===g?void 0:g.showOrderTrackingIFrame,orderTrackingProgressBarCount:null===Qe||void 0===Qe||null===(N=Qe.web)||void 0===N||null===(S=N.orderPages)||void 0===S?void 0:S.orderTrackingProgressBarCount,showDeliveryDriverDetails:null===Qe||void 0===Qe||null===(I=Qe.web)||void 0===I||null===(x=I.orderPages)||void 0===x?void 0:x.showDeliveryDriverDetails,showDeliveryTrackingMap:null===Qe||void 0===Qe||null===(f=Qe.web)||void 0===f||null===(E=f.orderPages)||void 0===E?void 0:E.showDeliveryTrackingMap,orderTrackingProgressBarScheduleOrdersCount:null===Qe||void 0===Qe||null===(C=Qe.web)||void 0===C||null===(T=C.orderPages)||void 0===T?void 0:T.orderTrackingProgressBarScheduleOrdersCount,showOrderSummaryInfoDetails:null===Qe||void 0===Qe||null===(y=Qe.web)||void 0===y||null===(D=y.orderPages)||void 0===D?void 0:D.showOrderSummaryInfoDetails,deliveryProgressBarAsapOrder:null===Qe||void 0===Qe||null===(A=Qe.web)||void 0===A||null===(R=A.orderPages)||void 0===R?void 0:R.deliveryProgressBarAsapOrder,deliveryProgressBarScheduleOrders:null===Qe||void 0===Qe||null===(_=Qe.web)||void 0===_||null===(w=_.orderPages)||void 0===w?void 0:w.deliveryProgressBarScheduleOrders,hideEstimatedDeliveryTime:null===Qe||void 0===Qe||null===(L=Qe.web)||void 0===L||null===(k=L.orderPages)||void 0===k?void 0:k.hideEstimatedDeliveryTime,getDeliveryActualPickupTime:null===Qe||void 0===Qe||null===(M=Qe.web)||void 0===M||null===(P=M.orderPages)||void 0===P?void 0:P.getDeliveryActualPickupTime,hideProgressBar:null===Qe||void 0===Qe||null===(F=Qe.web)||void 0===F||null===(W=F.orderPages)||void 0===W?void 0:W.hideProgressBar,enableScheduleOrder:null===Qe||void 0===Qe||null===(H=Qe.web)||void 0===H||null===(U=H.dispositionConfig)||void 0===U?void 0:U.enableScheduleOrder,enableClickCollectScheduleOrder:null===Qe||void 0===Qe||null===(B=Qe.web)||void 0===B||null===(G=B.dispositionConfig)||void 0===G?void 0:G.enableClickCollectScheduleOrder,allowScheduleOrderForDispositions:null===Qe||void 0===Qe||null===(V=Qe.web)||void 0===V||null===(Y=V.scheduledDelivery)||void 0===Y?void 0:Y.allowScheduleOrderForDispositions,showGiftCardOrVoucherSummary:null===_e||void 0===_e||null===(K=_e.componentOptions)||void 0===K||null===(z=K.web)||void 0===z||null===(q=z.orderPages)||void 0===q?void 0:q.showGiftCardOrVoucherSummary,showPromosSummary:null===_e||void 0===_e||null===(J=_e.componentOptions)||void 0===J||null===(X=J.web)||void 0===X||null===(Q=X.orderPages)||void 0===Q?void 0:Q.showPromosSummary,showStoreRegistrationNumber:null===Qe||void 0===Qe||null===(Z=Qe.web)||void 0===Z||null===($=Z.orderPages)||void 0===$?void 0:$.showStoreRegistrationNumber,showStoreOrderNumber:null===Qe||void 0===Qe||null===(ee=Qe.web)||void 0===ee||null===(te=ee.orderPages)||void 0===te?void 0:te.showStoreOrderNumber,showOrderDateTime:null===Qe||void 0===Qe||null===(ae=Qe.web)||void 0===ae||null===(ie=ae.orderPages)||void 0===ie?void 0:ie.showOrderDateTime,showOrderMode:null===Qe||void 0===Qe||null===(oe=Qe.web)||void 0===oe||null===(le=oe.orderPages)||void 0===le?void 0:le.showOrderMode,showOrderStatus:null===Qe||void 0===Qe||null===(ne=Qe.web)||void 0===ne||null===(de=ne.orderPages)||void 0===de?void 0:de.showOrderStatus,showPickupOrDeliveryTime:null===Qe||void 0===Qe||null===(re=Qe.web)||void 0===re||null===(se=re.orderPages)||void 0===se?void 0:se.showPickupOrDeliveryTime,hidePostOrderCollectionForAsap:null===Qe||void 0===Qe||null===(ce=Qe.web)||void 0===ce||null===(ue=ce.orderPages)||void 0===ue?void 0:ue.hidePostOrderCollectionForAsap,allowedPickupCollectionMethods:null===Qe||void 0===Qe||null===(ve=Qe.checkout)||void 0===ve?void 0:ve.allowedPickupCollectionMethods,geoLocationCheckForCheckin:null===Qe||void 0===Qe||null===(Oe=Qe.web)||void 0===Oe||null===(be=Oe.orderPages)||void 0===be?void 0:be.geoLocationCheckForCheckin,orderStatusFlag:null===_e||void 0===_e||null===(me=_e.componentOptions)||void 0===me||null===(je=me.web)||void 0===je||null===(he=je.orderPages)||void 0===he?void 0:he.getDeliveryOrderStatusMessageFlag,tenantSpecificDateFormat:null===_e||void 0===_e||null===(pe=_e.componentOptions)||void 0===pe||null===(ge=pe.web)||void 0===ge||null===(Ne=ge.orderPages)||void 0===Ne?void 0:Ne.displayOrderDeliveryDateFormat,showCancelOrderNumber:null===Qe||void 0===Qe||null===(Se=Qe.web)||void 0===Se||null===(Ie=Se.dispositionConfig)||void 0===Ie?void 0:Ie.showCancelOrderNumber,showStateCityAddAddress:null===_e||void 0===_e||null===(xe=_e.savedAddressPage)||void 0===xe?void 0:xe.showStateCityAddAddress,hideCustomerName:null===Qe||void 0===Qe||null===(fe=Qe.web)||void 0===fe||null===(Ee=fe.orderPages)||void 0===Ee?void 0:Ee.hideCustomerName,hideCreateAccountPanel:null===Qe||void 0===Qe||null===(Ce=Qe.web)||void 0===Ce||null===(Te=Ce.orderPages)||void 0===Te?void 0:Te.hideCreateAccountPanel,showPinCode:null===Qe||void 0===Qe||null===(ye=Qe.web)||void 0===ye||null===(De=ye.orderPages)||void 0===De?void 0:De.showOrderPinCode,showOrderSummaryOnSentToPosFailed:null===_e||void 0===_e?void 0:_e.showOrderSummaryOnSentToPosFailed,isUberServiceableEnabled:null===_e||void 0===_e?void 0:_e.isUberServiceableEnabled,useTradingHoursForStoreCloseCalculation:null===_e||void 0===_e?void 0:_e.useTradingHoursForStoreCloseCalculation})},x=e=>{const{helpReducer:t,updateSetOrderDetails:a}=e;a({helpContantData:Object(l.ec)((null===t||void 0===t?void 0:t.helpResponse)||null)})},f=e=>{const{appStateReducer:t,updateSetOrderDetails:a}=e;a({userStatus:null===t||void 0===t?void 0:t.userStatus})},E=e=>{const{profileReducer:t,orderDetails:a,updateSetOrderDetails:i}=e;i({favouriteOrders:null===t||void 0===t?void 0:t.favouriteOrders,savedAddresses:null===t||void 0===t?void 0:t.savedAddresses,orderSummarySaveYourOrderCompleted:C(a,null===t||void 0===t?void 0:t.favouriteOrders)})},C=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=a||(null===e||void 0===e?void 0:e.favouriteOrders);return(null===e||void 0===e||null===(t=e.userStatus)||void 0===t?void 0:t.loggedIn)&&-1!==(null===i||void 0===i?void 0:i.findIndex((t=>(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.orderId))))},T=e=>{var t,a,i,o,l,n,d,r;const{storesReducer:s={},updateSetOrderDetails:c}=e,u=null!==s&&void 0!==s&&null!==(t=s.storesWithStatus)&&void 0!==t&&t.length?null===s||void 0===s||null===(a=s.storesWithStatus)||void 0===a?void 0:a[0]:{};c({allStoresDetails:null!==s&&void 0!==s&&null!==(i=s.allStores)&&void 0!==i&&i.length?null===s||void 0===s?void 0:s.allStores:[],currentStoresDetails:u,operatingTimeFromStoreReducer:null!==(o=Object.keys(u))&&void 0!==o&&o.length?null===u||void 0===u||null===(l=u.summary)||void 0===l||null===(n=l.timings)||void 0===n?void 0:n.operatingHours:"",pickupOrderAvailableCollectionPoints:null!==(d=Object.keys(u))&&void 0!==d&&d.length?null===u||void 0===u||null===(r=u.summary)||void 0===r?void 0:r.availableCollectionPoints:null})},y=e=>{var t;const{orderReducer:a={},paymentsContentReducer:i={},orderDetails:o,updateSetOrderDetails:l,tenantReducer:n}=e,d=null===a||void 0===a||null===(t=a.response)||void 0===t?void 0:t.order;l({...D({orderReducerCreateOrderResponse:d,paymentsContentReducer:i,orderDetails:o,tenantReducer:n})})},D=e=>{var t;const{postOrPastOrderDetails:a={},orderReducerCreateOrderResponse:i={},paymentsContentReducer:o={},orderDetails:n,tenantReducer:d}=e,r=Object(l.ge)(a)?a:i,s=_({orderDetailsFromReducer:r,orderDetails:n,tenantReducer:d});return s.postOrderDetails=a,s.paymentType=h(null===o||void 0===o||null===(t=o.tendersContent)||void 0===t?void 0:t.items,null===r||void 0===r?void 0:r.tenders,null===r||void 0===r?void 0:r.paymentReferences),s},A=e=>{const{storeTimeZoneIANA:t,estimatedDeliveryTime:a,orderTime:o,format:l=(null===i.sb||void 0===i.sb?void 0:i.sb.H_MM_A)}=e;return t?Object(n.D)(a||o,t,l):Object(n.C)(a||o,l)},R=e=>{const{storeTimeZoneIANA:t,statusUpdatedDate:a,pastOrderDateformat:i}=e;return t?Object(n.D)(a,t,i):Object(n.C)(a,i)},_=e=>{var t,a,o,r,s,c,v,O,b,m,h,p,g,N,S,I,x,f,E,C,T,y,D,_,L,k,M,P;const{orderDetailsFromReducer:F,orderDetails:W={},tenantReducer:H}=e,U={additionalChargeLines:null===F||void 0===F?void 0:F.additionalChargeLines,customerId:null===F||void 0===F||null===(t=F.customer)||void 0===t?void 0:t.id,customer:null===F||void 0===F?void 0:F.customer,deliveryAddress:null===F||void 0===F?void 0:F.deliveryAddress,deliveryDetails:null===F||void 0===F?void 0:F.deliveryDetails,deliveryPartner:null===F||void 0===F?void 0:F.deliveryPartner,foodLines:null===F||void 0===F?void 0:F.foodLines,orderId:null===F||void 0===F?void 0:F.id,displayOrderId:j({...W,...F}),fulfillmentDateTime:null===F||void 0===F?void 0:F.fulfillmentDateTime,fulfillmentDateTimeFormatted:Object(n.D)(null===F||void 0===F?void 0:F.fulfillmentDateTime,null===F||void 0===F||null===(a=F.store)||void 0===a?void 0:a.timeZoneIANA),orderTime:Object(n.M)(null===F||void 0===F?void 0:F.fulfillmentDateTime),displayOrderTime:Object(l.Uc)(null===F||void 0===F?void 0:F.fulfillmentDateTime),displayFormatOrderTime:u.a.formatValue(u.a.tz(Object(n.L)(null===F||void 0===F?void 0:F.statusUpdatedDate),null===F||void 0===F||null===(o=F.store)||void 0===o?void 0:o.timeZoneIANA)," h:mma"),displayTodayDate:Object(n.h)(new Date,null===W||void 0===W?void 0:W.pastOrderDateformat),posOrderId:null===F||void 0===F?void 0:F.posOrderId,userEmail:null===F||void 0===F||null===(r=F.customer)||void 0===r?void 0:r.email,userPhone:(null===F||void 0===F||null===(s=F.customer)||void 0===s?void 0:s.phoneNumber)||(null===F||void 0===F||null===(c=F.customer)||void 0===c?void 0:c.phone),service:null===F||void 0===F?void 0:F.service,status:null===F||void 0===F?void 0:F.status,orderStatus:Object(d.c)({...W,...F}),orderStatusChangedAt:Object(d.b)({orderDetails:W,orderDetailsFromReducer:F}),sameOrderStatusMaintainLast30Mins:Object(d.q)({orderDetails:W,orderDetailsFromReducer:F}),store:null===F||void 0===F?void 0:F.store,storeName:null===F||void 0===F||null===(v=F.store)||void 0===v?void 0:v.name,phoneNumber:null===F||void 0===F||null===(O=F.store)||void 0===O?void 0:O.phoneNumber,phoneNumberFormat:Object(l.Y)(null===F||void 0===F||null===(b=F.store)||void 0===b?void 0:b.phoneNumber),storeTimeZoneIANA:null===F||void 0===F||null===(m=F.store)||void 0===m?void 0:m.timeZoneIANA,storeOperatingTime:null===F||void 0===F||null===(h=F.store)||void 0===h?void 0:h.timings,deliveryOrEstimatedOrCollectAtMonthDate:A({estimatedDeliveryTime:null===F||void 0===F||null===(p=F.deliveryDetails)||void 0===p?void 0:p.estimatedDeliveryTime,orderTime:null===F||void 0===F?void 0:F.fulfillmentDateTime,storeTimeZoneIANA:null===F||void 0===F||null===(g=F.store)||void 0===g?void 0:g.timeZoneIANA,format:null!==W&&void 0!==W&&W.scheduleOrderDateFormat?null===i.sb||void 0===i.sb?void 0:i.sb.YYYY_MM_dd:i.sb.MMMM_D}),deliveryOrEstimatedOrCollectAtDateFullMonthNameTime:A({estimatedDeliveryTime:null===F||void 0===F||null===(N=F.deliveryDetails)||void 0===N?void 0:N.estimatedDeliveryTime,orderTime:null===F||void 0===F?void 0:F.fulfillmentDateTime,storeTimeZoneIANA:null===F||void 0===F||null===(S=F.store)||void 0===S?void 0:S.timeZoneIANA,format:null!==W&&void 0!==W&&W.scheduleOrderDateFormat?null===i.sb||void 0===i.sb?void 0:i.sb.YYYY_MM_dd_AA:i.sb.D_MMMM_AA}),deliveryOrEstimatedOrCollectAtTime:A({estimatedDeliveryTime:null===F||void 0===F||null===(I=F.deliveryDetails)||void 0===I?void 0:I.estimatedDeliveryTime,orderTime:null===F||void 0===F?void 0:F.fulfillmentDateTime,storeTimeZoneIANA:null===F||void 0===F||null===(x=F.store)||void 0===x?void 0:x.timeZoneIANA,format:null!==W&&void 0!==W&&W.scheduleOrderDateFormat?null===i.sb||void 0===i.sb?void 0:i.sb.HH_mm:i.sb.H_MM_A}),deliveryOrActualOrCollectAtTime:A({estimatedDeliveryTime:null===F||void 0===F||null===(f=F.deliveryDetails)||void 0===f?void 0:f.actualDeliveryTime,orderTime:null===F||void 0===F?void 0:F.fulfillmentDateTime,storeTimeZoneIANA:null===F||void 0===F||null===(E=F.store)||void 0===E?void 0:E.timeZoneIANA,format:null!==W&&void 0!==W&&W.scheduleOrderDateFormat?null===i.sb||void 0===i.sb?void 0:i.sb.HH_mm:i.sb.H_MM_A}),pickupOrderEstimatedOrCollectAtTime:A({estimatedDeliveryTime:null===F||void 0===F||null===(C=F.deliveryDetails)||void 0===C?void 0:C.actualPickupTime,orderTime:null===F||void 0===F?void 0:F.fulfillmentDateTime,storeTimeZoneIANA:null===F||void 0===F||null===(T=F.store)||void 0===T?void 0:T.timeZoneIANA,format:null!==W&&void 0!==W&&W.scheduleOrderDateFormat?null===i.sb||void 0===i.sb?void 0:i.sb.HH_mm:i.sb.H_MM_A}),pickupOrderEstimatedOrCollectAtDateFullMonthNameTime:A({estimatedDeliveryTime:null===F||void 0===F||null===(y=F.deliveryDetails)||void 0===y?void 0:y.actualPickupTime,orderTime:null===F||void 0===F?void 0:F.fulfillmentDateTime,storeTimeZoneIANA:null===F||void 0===F||null===(D=F.store)||void 0===D?void 0:D.timeZoneIANA,format:null!==W&&void 0!==W&&W.scheduleOrderDateFormat?null===i.sb||void 0===i.sb?void 0:i.sb.YYYY_MM_dd_AA:i.sb.H_MM_A}),orderDateOn:R({statusUpdatedDate:null===F||void 0===F?void 0:F.statusUpdatedDate,storeTimeZoneIANA:null===F||void 0===F||null===(_=F.store)||void 0===_?void 0:_.timeZoneIANA,pastOrderDateformat:null===W||void 0===W?void 0:W.pastOrderDateformat}),statusUpdatedDate:null===F||void 0===F?void 0:F.statusUpdatedDate,isContactless:null===F||void 0===F?void 0:F.isContactless,filteredFoodLines:Object(l.Pb)(null===F||void 0===F?void 0:F.foodLines,null===W||void 0===W?void 0:W.addHope,null===W||void 0===W?void 0:W.carryBag,null===H||void 0===H?void 0:H.showCarryBagInLineItem),orderedItemDetails:null===F||void 0===F?void 0:F.orderedItemDetails,orderingDateTime:null===F||void 0===F?void 0:F.orderingDateTime,orderingDateTimeFormatted:Object(n.D)(null===F||void 0===F?void 0:F.orderingDateTime,null===F||void 0===F||null===(L=F.store)||void 0===L?void 0:L.timeZoneIANA),orderingDate:Object(l.yb)(null===F||void 0===F?void 0:F.orderingDateTime),orderingDayAndMonthName:Object(l.zb)(null===F||void 0===F?void 0:F.orderingDateTime,null===W||void 0===W?void 0:W.dateFormat),orderingTime:Object(l.Uc)(null===F||void 0===F?void 0:F.orderingDateTime,null===W||void 0===W?void 0:W.timeFormat),fullAddressDetails:w(null===F||void 0===F?void 0:F.deliveryAddress,null===H||void 0===H||null===(k=H.savedAddressPage)||void 0===k?void 0:k.showStateCityAddAddress),instruction:null===F||void 0===F?void 0:F.instruction,addressLines:null===F||void 0===F||null===(M=F.store)||void 0===M||null===(P=M.address)||void 0===P?void 0:P.addressLines,taxLines:null===F||void 0===F?void 0:F.taxLines,additionalCharges:null===F||void 0===F?void 0:F.additionalChargeLines,checkInSummary:null===F||void 0===F?void 0:F.checkInSummary,subTotal:null===F||void 0===F?void 0:F.subTotal,discountLines:null===F||void 0===F?void 0:F.discountLines,paymentDiscountLines:(null===F||void 0===F?void 0:F.paymentDiscountLines)||[],paymentDiscountTotal:(null===F||void 0===F?void 0:F.paymentDiscountTotal)||0,discountTotal:null===F||void 0===F?void 0:F.discountTotal,total:(null===F||void 0===F?void 0:F.total)||(null===F||void 0===F?void 0:F.amount),inclusiveTaxTotal:null===F||void 0===F?void 0:F.inclusiveTaxTotal,tenders:null===F||void 0===F?void 0:F.tenders,paymentReferences:null===F||void 0===F?void 0:F.paymentReferences,taxTotal:null===F||void 0===F?void 0:F.taxTotal,orderAcceptedLoading:(null===F||void 0===F?void 0:F.orderAcceptedLoading)||!1,requestedTimeStamp:null===F||void 0===F?void 0:F.requestedTimeStamp,requestedDateTime:null===F||void 0===F?void 0:F.requestedDateTime,orderDateTimeInEpoch:null===F||void 0===F?void 0:F.orderDateTimeInEpoch,isOrderSavedAsFavorite:!1,favoriteOrderName:null,bottleDepositChargeTotal:(null===F||void 0===F?void 0:F.bottleDepositChargeTotal)||0,tipCharge:null===F||void 0===F?void 0:F.driverTippingCharge,tipChargeType:null===F||void 0===F?void 0:F.driverTippingChargeType,driverTippingChargeOption:null===F||void 0===F?void 0:F.driverTippingChargeOption,showOrderingTime:Object(n.h)(Object(n.M)(null===F||void 0===F?void 0:F.statusUpdatedDate),null===W||void 0===W?void 0:W.pastOrderTimeFormat),deliveryPinDetails:null===F||void 0===F?void 0:F.deliveryPinDetails};return null!==(null===W||void 0===W?void 0:W.orderId)&&null!==(null===F||void 0===F?void 0:F.id)&&(null===W||void 0===W?void 0:W.orderId)!==(null===F||void 0===F?void 0:F.id)&&(U.oldOrderId=null===F||void 0===F?void 0:F.id),U},w=(e,t)=>{if(Object(l.ge)(e)){const{addressLines:a,city:i,state:o,country:n,pinCode:d}=e,r=Object(l.nd)(d),s=Object(l.nd)(i),c=Object(l.nd)(o),u=Object(l.nd)(n),v=null===a||void 0===a?void 0:a.filter((e=>e)).join(", ");if(t){const e=o&&"".concat(o)||"",t=i&&"".concat(i)||"";return"".concat(e).concat(t).concat(null===a||void 0===a?void 0:a.filter((e=>e)).join(" "))}return"".concat(v).concat(s).concat(c).concat(r).concat(u)}return null},L=(e,t,a,i)=>{var o,l;!s()(e)&&((null===t||void 0===t?void 0:t.enableRetryCountForPickupOrderTracking)||i)&&a({orderSummarycontentData:W(null===(o=e.items)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.fields,t)})},k=e=>{var t,a;const{orderSummarycontentData:o}=e;return null===o||void 0===o||null===(t=o.headline)||void 0===t?void 0:t.replace(i.nb,null===e||void 0===e||null===(a=e.customer)||void 0===a?void 0:a.firstName.replace(/(.{7})..+/,"$1..."))},M=e=>{const{orderSummarycontentData:t,enableClickCollectScheduleOrder:a,allowScheduleOrderForDispositions:o,service:l}=e,n=a&&(null===o||void 0===o?void 0:o.includes(l));var r;return Object(d.x)(e)||Object(d.B)(e)?(null===e||void 0===e||null===(r=e.paymentReferences[0])||void 0===r?void 0:r.paymentType)===(null===i.Ud||void 0===i.Ud?void 0:i.Ud.PAY_BY_CASH)&&null!==t&&void 0!==t&&t.payOnArrival?Object(b.a)(e):null===t||void 0===t?void 0:t.subHeadline:null!==t&&void 0!==t&&t.scheduleOrders||n?F(t,e):null===t||void 0===t?void 0:t.subHeadline},P=e=>{(e=>Object(l.Ad)(null===e||void 0===e?void 0:e.service)?Object(d.rb)(e)||Object(d.qb)(e):Object(d.t)(e)||Object(d.s)(e))(e)&&Object(o.a)(Object(c.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.ORDER_UPDATE_TEXT),4e3)},F=(e,t)=>{var a,o,r,s,u,O,b;const{enableClickCollectScheduleOrder:m,allowScheduleOrderForDispositions:j,service:h}=t,p=m&&(null===j||void 0===j?void 0:j.includes(h)),g=null===e||void 0===e||null===(a=e.subHeadline)||void 0===a?void 0:a.includes(i.tb),N=null===t||void 0===t?void 0:t.fulfillmentDateTime,S=Object(n.D)(N,null===t||void 0===t||null===(o=t.store)||void 0===o?void 0:o.timeZoneIANA,g?null===i.sb||void 0===i.sb?void 0:i.sb.DDDD_D_MMMM_A:null===i.sb||void 0===i.sb?void 0:i.sb.hh_mm_A),I=Object(n.D)(N,null===t||void 0===t||null===(r=t.store)||void 0===r?void 0:r.timeZoneIANA,null===i.sb||void 0===i.sb?void 0:i.sb.MMMM_D),x=Object(n.D)(N,null===t||void 0===t||null===(s=t.store)||void 0===s?void 0:s.timeZoneIANA,null===i.sb||void 0===i.sb?void 0:i.sb.YYYY_MM_DD),f=p&&g?S.replace(/^\w+/,Object(l.Xc)(I,null===t||void 0===t||null===(u=t.store)||void 0===u?void 0:u.timeZoneIANA)):S,E=null===f||void 0===f?void 0:f.split(" "),C=Object(l.Xc)(x,null===t||void 0===t||null===(O=t.store)||void 0===O?void 0:O.timeZoneIANA),T=null===e||void 0===e||null===(b=e.subHeadline)||void 0===b?void 0:b.replace(g?i.tb:i.Ld,'<span class="red">'.concat((e=>{const{timeStamp:t,dayInAWeek:a,dateTimeArray:o,orderReadyDateTime:l,orderDetails:n}=e;if(!t)return l;switch(null===n||void 0===n?void 0:n.tenantSpecificDateFormat){case null===i.sb||void 0===i.sb?void 0:i.sb.DDDD_MMMM_D_HH_MM_A:return(a===i.rf?Object(c.translateWithI18Next)(v.a.TODAY):'<span class="atTextColor">'.concat(Object(c.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.ON),"</span> ")+Object(c.translateWithI18Next)(o[0]))+" "+Object(c.translateWithI18Next)(o[2])+" "+o[1]+" "+'<span class="atTextColor">'.concat(Object(c.translateWithI18Next)(null===v.a||void 0===v.a?void 0:v.a.AT),"</span> ")+" "+(Object(d.A)(n)?null===n||void 0===n?void 0:n.deliveryOrActualOrCollectAtTime:o[4]+o[5]);case null===i.sb||void 0===i.sb?void 0:i.sb.D_MMMM_A:return Object(c.translateWithI18Next)(o[0])+" "+o[1]+" "+Object(c.translateWithI18Next)(o[2])+" "+o[3]+" "+o[4]+" "+o[5];default:return l}})({timeStamp:g,dayInAWeek:C,dateTimeArray:E,orderReadyDateTime:S,orderDetails:t}),"</span>"));return T?"<div class='subheadline-content ".concat(((e,t)=>(null===e||void 0===e?void 0:e.tenantSpecificDateFormat)===(null===i.sb||void 0===i.sb?void 0:i.sb.DDDD_MMMM_D_HH_MM_A)&&t?"subheadline-content-two":"")(t,g),"'>").concat(T,"</div>"):""},W=(e,t)=>{var a;const{showOrderSummaryOnSentToPosFailed:i}=t,o=null===e||void 0===e||null===(a=e.content)||void 0===a?void 0:a.find((e=>{var a,o,n,r,s,c,u,v,O,b,m,j,h,p,g,N;return null!==t&&void 0!==t&&null!==(a=t.requestedDateTime)&&void 0!==a&&a.isForNow||!(Object(d.nb)(t)||Object(d.v)(t)||Object(d.C)(t)||Object(d.Q)(t)||Object(d.mb)(t))?i&&!Object(l.Ad)(null===t||void 0===t?void 0:t.service)?!(null!==e&&void 0!==e&&null!==(o=e.fields)&&void 0!==o&&o.scheduleOrders)&&(null===e||void 0===e||null===(n=e.fields)||void 0===n?void 0:n.orderStatus.toLowerCase())===(null===t||void 0===t||null===(r=t.orderStatus)||void 0===r?void 0:r.toLowerCase()):(null===e||void 0===e||null===(s=e.fields)||void 0===s?void 0:s.orderStatus.toLowerCase())===(null===t||void 0===t||null===(c=t.orderStatus)||void 0===c?void 0:c.toLowerCase()):(null===e||void 0===e||null===(u=e.fields)||void 0===u?void 0:u.scheduleOrders)&&(!(null!==t&&void 0!==t&&t.hidePostOrderCollectionForAsap)&&(null===e||void 0===e||null===(v=e.fields)||void 0===v||null===(O=v.orderStatus)||void 0===O?void 0:O.toLowerCase())===(null===t||void 0===t||null===(b=t.orderStatus)||void 0===b?void 0:b.toLowerCase())||(null===t||void 0===t?void 0:t.hidePostOrderCollectionForAsap)&&(null===e||void 0===e||null===(m=e.fields)||void 0===m||null===(j=m.collectionPoint)||void 0===j?void 0:j.toLowerCase())===(null===t||void 0===t||null===(h=t.selectedPickupOrderCollectionMethod)||void 0===h?void 0:h.toLowerCase())&&(null===e||void 0===e||null===(p=e.fields)||void 0===p||null===(g=p.orderStatus)||void 0===g?void 0:g.toLowerCase())===(null===t||void 0===t||null===(N=t.orderStatus)||void 0===N?void 0:N.toLowerCase()))}));return null===o||void 0===o?void 0:o.fields},H=(e,t)=>{var a,i,o;return null===Object||void 0===Object||null===(a=Object.keys)||void 0===a||null===(i=a.call(Object,e))||void 0===i||null===(o=i.filter)||void 0===o?void 0:o.call(i,(e=>{var a,i;return null===d.tb||void 0===d.tb||null===(a=Object(d.tb)())||void 0===a||null===(i=a[e])||void 0===i?void 0:i.call(a,t)}))},U=e=>{var t;const a=null!==e&&void 0!==e&&e.enableClickCollectScheduleOrder||null===e||void 0===e||null===(t=e.requestedDateTime)||void 0===t||!t.isForNow?null===e||void 0===e?void 0:e.deliveryProgressBarScheduleOrders:null===e||void 0===e?void 0:e.deliveryProgressBarAsapOrder;if(a){let t=H(a,e);if(Array.isArray(t)&&t.length>0){var i,o;if(1===t.length)return null!==(o=null===a||void 0===a?void 0:a[t[0]])&&void 0!==o?o:void 0;const e=null===(i=t.map((e=>null===a||void 0===a?void 0:a[e])))||void 0===i?void 0:i.filter((e=>void 0!==e));return e.length>0?Math.max(...e):void 0}}else;},B=e=>{var t,a;return null!==(t=null===e||void 0===e||null===(a=e.hideEstimatedDeliveryTime)||void 0===a?void 0:a[H(null===e||void 0===e?void 0:e.hideEstimatedDeliveryTime,e)])&&void 0!==t&&t},G=e=>{var t,a,i;return null!==(t=null===e||void 0===e||null===(a=e.hideProgressBar)||void 0===a?void 0:a[H(null===e||void 0===e?void 0:e.hideProgressBar,e)])&&void 0!==t&&t&&!(null!==e&&void 0!==e&&null!==(i=e.requestedDateTime)&&void 0!==i&&i.isForNow)},V=e=>{let{orderDetails:t,orderReducer:a,postOrderReducer:o,paymentsContentReducer:l,updateSetOrderDetails:n,dispatch:r,tenantReducer:s,userOrderState:c}=e;if(null!==t&&void 0!==t&&t.tenantId){!sessionStorage.getItem(i.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT)&&(e=>{let{orderReducer:t,postOrderReducer:a}=e;return p(a)||g(t)})({orderReducer:a,postOrderReducer:o})&&((e=>{const{postOrderReducer:t={},orderReducer:a={},paymentsContentReducer:i={},isCheckOrderDetails:o=!0,orderDetails:l,updateSetOrderDetails:n,tenantReducer:r}=e,s=S({postOrderReducer:t,orderReducer:a,isCheckOrderDetails:o}),{orderStatus:c,retryCountForGetOrderTrackingStatus:u,tenders:v,paymentReferences:O,displayOrderId:b}=l;if(Object(d.c)({...l,...s})!==c||j({...l,...s})!==b)n({...D({postOrPastOrderDetails:s,paymentsContentReducer:i,orderDetails:l,tenantReducer:r})});else if(Object(d.p)(l,s)){var m;n({deliveryPartner:null===s||void 0===s?void 0:s.deliveryPartner,deliveryDetails:null===s||void 0===s?void 0:s.deliveryDetails,retryCountForGetOrderTrackingStatus:u+1,fullAddressDetails:w(null===s||void 0===s?void 0:s.deliveryAddress,null===r||void 0===r||null===(m=r.savedAddressPage)||void 0===m?void 0:m.showStateCityAddAddress)})}var p;v===(null===s||void 0===s?void 0:s.tenders)&&O===(null===s||void 0===s?void 0:s.paymentReferences)||n({tenders:null===s||void 0===s?void 0:s.tenders,paymentReferences:null===s||void 0===s?void 0:s.paymentReferences,paymentType:h(null===i||void 0===i||null===(p=i.tendersContent)||void 0===p?void 0:p.items,null===s||void 0===s?void 0:s.tenders,null===s||void 0===s?void 0:s.paymentReferences)})})({postOrderReducer:o,orderReducer:a,paymentsContentReducer:l,isCheckOrderDetails:!1,orderDetails:t,updateSetOrderDetails:n,tenantReducer:s}),null!==t&&void 0!==t&&t.tenantId&&Object(O.q)({dispatch:r,orderDetails:t,updateSetOrderDetails:n,userOrderState:c}))}Object(d.f)()&&(e=>{const{postOrderReducer:t,orderDetails:a,updateSetOrderDetails:i}=e;if((null===t||void 0===t||!t.addHopeOrderLoading)&&Object(d.j)()){const{miscPaymentReferenceId:e,status:o}=null===t||void 0===t?void 0:t.addHopeOrderResponse,l={status:o,orderStatus:o};(null===a||void 0===a?void 0:a.miscPaymentReferenceId)!==e&&(l.miscPaymentReferenceId=e),i(l)}if((null===t||void 0===t||!t.giftCardPurchaseLoading)&&Object(d.X)()){const{miscPaymentReferenceId:e,status:o}=null===t||void 0===t?void 0:t.giftCardPurchaseResponse,l={status:o,orderStatus:o};(null===a||void 0===a?void 0:a.wiCodePurchaseId)!==e&&(l.wiCodePurchaseId=e),i(l)}})({postOrderReducer:o,orderDetails:t,updateSetOrderDetails:n})},Y=e=>{const{enableClickCollectScheduleOrder:t,allowScheduleOrderForDispositions:a,service:i,orderStatusFlag:o}=e,n=t&&(null===a||void 0===a?void 0:a.includes(i));return Object(l.Ad)(i)?!(Object(d.K)(e)&&!o||Object(d.rb)(e)||Object(d.Q)(e)||Object(d.qb)(e))&&(Object(d.O)(e)||Object(d.C)(e)||Object(d.B)(e),!0):n?Boolean(Object(d.lb)(e)||Object(d.u)(e)||Object(d.w)(e)):Object(d.lb)(e)||Object(d.mb)(e)},K=e=>{var t;return(null===e||void 0===e||null===(t=e.paymentReferences[0])||void 0===t?void 0:t.paymentType)!==(null===i.Ud||void 0===i.Ud?void 0:i.Ud.PAY_BY_CASH)?M(e):""},z=e=>{const{contentReducer:t,updateSetOrderDetails:a}=e;a({StoreRegistrationNumber:Object(l.Nc)(t),...Object(l.Mc)(t)})}},960:function(e,t,a){"use strict";a(3);var i=a(933),o=a(5),l=a(2);t.a=e=>Object(o.R)(e.subCategory).map(((t,a)=>{let{categories:o="",products:n=[],id:d="",dname:r}=t;return Object(l.jsxs)("div",{id:d,children:[Object(l.jsxs)("div",{className:"large"===e.cardType?"large-subcategory-name":("medium"===e.cardType?"medium-subcategory-name":"carousal"===e.cardType&&"carousal-subcategory-name")||"small"===e.cardType&&"small-subcategory-name"||null,children:[Object(l.jsx)("div",{children:r[0].value}),o]}),Object(l.jsx)(i.a,{productList:n,cardType:e.cardType,tenantData:e.tenantData,categoryId:d,catalogs:e.catalogs,storeClosedData:e.storeClosedData})]},a)}))},963:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(25),n=a(944),d=a(814),r=a(49),s=a(14),c=a(76),u=a(945),v=a(2);var O=e=>{const{DISPOSITION_DATA:t=""}=s.a,{userOrderState:a,userOrderStateDispatch:l}=Object(i.useContext)(c.a)||{};return Object(i.useEffect)((()=>{l({type:t,value:{showDisposition:!0}})}),[]),Object(v.jsx)(o.a.Fragment,{children:Object(v.jsxs)("div",{id:"startorder-container","data-testid":"UserLocalizationComponent-component",children:[(null===a||void 0===a?void 0:a.dispositionStateData.showDisposition)&&Object(v.jsx)(n.a,{}),(null===a||void 0===a?void 0:a.searchStoreData.showSearchStore)&&Object(v.jsx)(d.default,{onStoreSelectFinish:r.y}),(null===a||void 0===a?void 0:a.scheduleOrderData.showScheduleOrderCatering)&&Object(v.jsx)(u.a,{onStoreSelectFinish:r.y})]})})},b=a(5),m=a(946);t.a=()=>{var e,t,a,i;const{DISPOSITION:o}=m.a;let n=null,d=null,r=Object(l.c)((e=>e.appStateReducer.userStatus));const s=Object(l.c)((e=>({homePageContent:e.contentReducer.response||null,tenantReducerContent:e.tenantReducer||null,marketPageContent:e.marketConfigReducer.response||null})));if(s.marketPageContent&&s.tenantReducerContent&&s.homePageContent){const{tenant:e=[]}=s.marketPageContent.headerData||{};n=Object(b.bc)(s.homePageContent)||null,d=Object(b.Rc)(e)}return Object(v.jsx)(O,{contentData:{segmentedHomePageData:null!==(e=null===(t=n)||void 0===t?void 0:t[o])&&void 0!==e?e:{},dispositionData:d,contentDispositionData:null!==(a=null===(i=n)||void 0===i?void 0:i[o])&&void 0!==a?a:{}},userParams:r,tenantReducerData:s.tenantReducerContent})}},964:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var i=a(1);function o(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:i.ik,payload:{data:e,tenantId:t},successCallback:a,errorCallback:o}}function l(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:i.dk,menuPayload:e,exclusionPayload:t,successCallback:a}}},976:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l}));t.d={questionForUs:"questionForUs",loveToHearFromYou:"loveToHearFromYou",wantToKnow:"wantToKnow",wantToKnowPlaceholder:"wantToKnowPlaceholder",letUsKnow:"letUsKnow",contactInfoTitle:"contactInfoTitle",firstNamePlaceholder:"firstNamePlaceholder",lastNamePlaceHolder:"lastNamePlaceHolder",phonePlaceholder:"phonePlaceholder",emailPlaceholder:"emailPlaceholder",cancelButtonText:"cancelButtonText",submitButtonText:"submitButtonText",recaptchaLabel:"recaptchaLabel",haveQuestion:"haveQuestion",enterQuestionPlaceholder:"enterQuestionPlaceholder",refineItemsHeader:"refineItemsHeader",searchResultHeader:"searchResultHeader",selectATopic:"selectATopic",pleaseSelect:"pleaseSelect",popoverDoneButton:"popoverDoneButton",feedbackSuccess:"feedbackSuccess",feedbackSuccessMessage:"feedbackSuccessMessage",feedbackSuccessOk:"feedbackSuccessOk",feedbackHelpText:"feedbackHelpText",firstNameHelpText:"firstNameHelpText",lastNameHelpText:"lastNameHelpText",phoneHelpText:"phoneHelpText",emailHelpText:"emailHelpText",mandatorynote:"mandatorynote",Australia:"Australia"};const i={MEDIA_ENQUIRY:"Media Enquiry",POSTCODE:"postcode",ORDER_NUMBER:"ordernumber",SORTVISIT:"sortvisit",SORTMEAL:"sortmeal",ORDER_DATE:"orderdate",ORDER_TIME:"ordertime",VISITEDDATE:"visiteddate",VISITEDTIME:"visitedtime",DETAILSAREA:"detailsArea",PHONENUMBER:"phonenumber",EMAIL:"emailaddress",HELPDD:"helpDDOptions",ENQUIRYDD:"enquiryDDOptions",SPECIFICDD:"specificDDOptions",ADDRESSNAME:"addressName",FULLNAME:"fullname",ENQUIRY_DETAILS:"enquirydetails",PUBLICATION_DETAILS:"publicationdetails",PUBLICATION_DETAILS_MAXLENGTH:250,PHONE:"phone",EMAILID:"email",MESSAGE:"message",CONFIRMATION:"confirmation",THANKSMESSAGE:"thanksMessage",NO:"No",SUCCESSRESPONSE:201,DDSELECTONE:"- Select One -",APPENQUIRY:"KFC App Enquiry"},o={FIRSTNAME:"firstName",LASTNAME:"lastName",CALLNATURE:"callNature",CATEGORY:"category",SUBCODE:"subcode",DESCRIPTION:"description",PHONE:"phone",EMAIL:"email",STOREID:"storeID",TYPEOFVISIT:"typeOfVisit",TYPEOFMEAL:"typeOfMeal",ORDER_NUMBER:"orderNumber",VISITDATE:"visitDate",VISITTIME:"visitTime",LANGUAGE:"language"},l="subpremise"},980:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(36),n=a(43),d=a(15),r=a(25),s=a(0),c=a(2);const{Error:u}=d.a,v=e=>{const{show:t,errorObj:a,isInProgress:i,comingFrom:d}=e,{firstBtnCTA:v,secondBtnCTA:O,firstBtnText:b,secondBtnText:m,errMsg:j,firstBtnClassName:h=""}=a,p=Object(r.c)((e=>{var t;return null!==(t=(e=>{var t;return null===(t=e.LoaderReducer)||void 0===t?void 0:t.isLoading})(e))&&void 0!==t?t:i}));return Object(c.jsx)(o.a.Fragment,{children:!p&&(t?Object(c.jsx)("div",{className:"err-container",children:Object(c.jsxs)("div",{"data-testid":"search-error-container",className:"alert-location-popup",children:[Object(c.jsx)(n.a,{srcFile:u,className:"location-alert-icon"}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"location-error-message",children:j}),Object(c.jsxs)("div",{className:"location-error-button-section",children:[d!==s.a&&v&&Object(c.jsx)(l.a,{"data-testid":"first-btn-click",className:"button whiteButton blackBorder location-warning-button ".concat(h),onClickHandler:e=>v(e),children:b}),O&&Object(c.jsx)(l.a,{"data-testid":"second-btn-click",className:"button whiteButton blackBorder location-warning-button ml",onClickHandler:e=>O(e),children:m})]})]})]})}):null)})};v.defaultProps={comingFrom:""};const O=o.a.memo(v);t.a=O},990:function(e,t,a){"use strict";a.d(t,"h",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"i",(function(){return u})),a.d(t,"d",(function(){return O})),a.d(t,"c",(function(){return b})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return j})),a.d(t,"e",(function(){return h}));var i=a(5),o=a(976),l=a(0),n=a(130),d=a(11);const r=e=>l.wd.test(String(e).toLowerCase()),s=e=>l.uc.test(String(e).toLowerCase()),c=e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase()),u=e=>/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test(String(e)),v=e=>{if(void 0!==e){const t=e.getMonth()+1>9?e.getMonth()+1:"0"+(e.getMonth()+1),a=e.getDate()>9?e.getDate():"0"+e.getDate();return e.getFullYear()+"/"+t+"/"+a}},O=(e,t)=>{const{wantToKnowText:a,selectedLetUsKnow:o,firstNameText:l,lastNameText:n,phoneNoText:d,emailText:v}=e;return!(0===(null===a||void 0===a?void 0:a.length)||(null===a||void 0===a?void 0:a.length)>200)&&(!!r(l)&&(!!r(n)&&(!!s("".concat(l).concat(n))&&(!!u(d)&&(!!c(v)&&(!!Object(i.Kd)(o)&&!!t))))))},b=e=>{const{firstNameText:t,lastNameText:a,phoneNoText:i,emailText:o}=e;return!!s(t)&&(!!s(a)&&(!!u(i)&&!!c(o)))},m=(e,t,a)=>({tenantId:t,payload:{data:[{key:"message",value:e.wantToKnowText},{key:"category",value:e.selectedLetUsKnow.key},{key:"firstName",value:e.firstNameText},{key:"lastName",value:e.lastNameText},{key:"email",value:e.emailText},{key:"phone",value:e.phoneNoText},{key:"language",value:"en-US"},{key:"captchaResponse",value:a}],attachments:[]}}),j=(e,t)=>{var a;var i;return{tenantId:t,payload:{data:[{key:o.b.FIRSTNAME,value:e.fullname},{key:o.b.CALLNATURE,value:e.helpDDOptions},{key:o.b.CATEGORY,value:e.enquiryDDOptions},{key:o.b.SUBCODE,value:e.specificDDOptions},{key:o.b.DESCRIPTION,value:e.detailsArea},{key:o.b.LASTNAME,value:e.publicationdetails},{key:o.b.PHONE,value:e.phonenumber},{key:o.b.EMAIL,value:e.emailaddress},{key:o.b.STOREID,value:null!==e&&void 0!==e&&e.sugPinCode?null===e||void 0===e?void 0:e.sugPinCode:""},{key:o.b.TYPEOFVISIT,value:null!==e&&void 0!==e&&e.sortvisit?null===e||void 0===e?void 0:e.sortvisit:""},{key:o.b.TYPEOFMEAL,value:null!==e&&void 0!==e&&e.sortmeal?null===e||void 0===e?void 0:e.sortmeal:""},{key:o.b.ORDER_NUMBER,value:null!==e&&void 0!==e&&e.ordernumber?null===e||void 0===e?void 0:e.ordernumber:""},{key:o.b.VISITDATE,value:null!==e&&void 0!==e&&e.visitedDate?v(e.visitedDate):""},{key:o.b.VISITTIME,value:null!==(i=e.visitedTime,a=!!i&&Object(d.d)(i.getHours(),i.getMinutes(),l.sb.hh_mm_A))&&void 0!==a?a:""},{key:o.b.LANGUAGE,value:"en-US"}],attachments:[]}}},h=(e,t,a,i,d,r,s,c,u,v)=>{let O=JSON.parse(localStorage.getItem(l.nf));""===(null===O||void 0===O?void 0:O.addressLine0)&&O&&(O.addressLine0=o.c);const{addressLines:b=[],country:m="",city:j="",pinCode:h="",state:p="",placeId:g=""}=Object(n.b)(t.address_components,O);var N;e===l.rc?(N=h,l.Id.test(String(N).toLowerCase())?(s(!1),c(!1),a(h)):s(!0),r({...u,sugPinCode:h})):(a(null===b||void 0===b?void 0:b[1]),r()),i((e=>({...e,country:m,addressLines:b,city:j,state:p,pinCode:h,placeId:null===t||void 0===t?void 0:t.place_id,isAddressSelected:v}))),setTimeout((()=>{d()}),800)}},991:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(6),n=a(212),d=a(43),r=a(15),s=a(5),c=a(4),u=a(2);const v=e=>{const{isAlert:t,show:a,sectionHeader:i,subSectionValue:o,orderTypeChange:v,onClickHandler:O,description:b,storeUnavailableError:m,showChangeButton:j=!0,scheduleTimeWarning:h=!1,scheduleErrMsg:p="",cssSubsection:g,specialNote:N="",dataTestid:S="",elementUniqueLocator:I}=e;return a?Object(u.jsxs)("div",{className:"schedule-order-form-sections",children:[Object(u.jsx)("h3",{className:"schedule-form-subsection-header",children:Object(l.translateWithI18Next)(i)}),Boolean(m)&&Object(u.jsxs)("div",{className:"store-cannot-deliver-error ".concat(Object(s.Tc)(!t,"store-error-msg-container","")),children:[Object(u.jsx)(d.a,{srcFile:t&&r.a.Error_Yellow||r.a.Error,className:"store-cannot-deliver-icon"}),Object(u.jsx)("div",{className:"storeErrorMessage",dangerouslySetInnerHTML:{__html:Object(l.translateWithI18Next)(m)}})]}),Boolean(h)&&Object(u.jsxs)("div",{className:"store-cannot-schedule-error timebased-inline-message",children:[Object(u.jsx)(d.a,{srcFile:r.a.Error,className:"store-cannot-deliver-icon"}),Object(u.jsx)("div",{className:"storeErrorMessage",children:p})]}),Object(u.jsxs)("div",{className:"schedule-form-subsection ".concat(g),children:[Object(u.jsx)("div",{className:"schedule-order-subsection-value","data-testid":"store-store-name",children:o}),b&&Object(u.jsx)("div",{className:"schedule-order-subsection-value flat-num schedule-order-subsection-secondary",children:b}),N&&Object(u.jsxs)("div",{className:"schedule-order-subsection-value schedule-order-subsection-secondary special-note",children:[Object(l.translateWithI18Next)(null===c.a||void 0===c.a?void 0:c.a.SPECIAL_NOTE)," ",N]}),Object(u.jsx)("div",{className:"border-bottom"}),j&&Object(u.jsx)("div",{className:"changeOrEditOrderType","data-testid":"store-changelink",children:Object(u.jsx)(n.a,{"aria-label":"Edit order type",onClickHandler:O,"data-testid":I?S:"dynamic-click-test",children:Object(l.translateWithI18Next)(v)})})]})]}):null},O=o.a.memo(v);t.a=O},995:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(6),n=a(15),d=a(4),r=a(43),s=a(2);const{SingleArrowBlackExpand:c,SingleArrowBlack:u}=n.a,{TIME_NOT_AVAILABLE:v}=d.a;var O=e=>{const{cssClass:t,dropdownTitle:a,setSelectedItem:o,selectedItem:d,options:O,dropdownId:b,changeTimeObj:m={},changeDateObj:j={},dateTimeArr:h=[],placeholderText:p,disableOptions:g=!1,enableOrderCapacityManagement:N=!1,shouldDisplayDropdownError:S=!1,errorMessage:I="",dataTestid:x="",elementUniqueLocator:f}=e,E=(null===d||void 0===d?void 0:d.value)||p,[C,T]=Object(i.useState)(!1),{setSelectedTime:y=null,setErrorObj:D={}}=m,{setSelectedDate:A=null,dispositionType:R=""}=j;return Object(i.useEffect)((()=>{const e=e=>{var t,a;null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.matches("#".concat(b))||null!==e&&void 0!==e&&null!==(a=e.target)&&void 0!==a&&a.closest("#".concat(b))||T(!1)};return window.addEventListener("click",e),()=>{window.removeEventListener("click",e)}}),[b]),Object(s.jsxs)("div",{className:"custom-dropdown ".concat(t," ").concat(S?"custom-dropdown-error":""),children:[a&&Object(s.jsx)("div",{className:"dropdown-title","aria-level":"1",role:"heading",tabIndex:"0",children:a}),Object(s.jsxs)("div",{id:b,className:"dropdown-value","data-testid":f?x:"dropdown-value-id",role:"listbox",tabIndex:"0",onClick:()=>T(!C),children:[Object(s.jsx)("div",{className:"selected-value",children:E}),!g&&Object(s.jsx)("img",{src:C?c:u,alt:" ",className:"downarrow-imgs"})]}),!g&&C&&Object(s.jsx)("div",{className:"options-container",children:Object(s.jsx)("ul",{children:null===O||void 0===O?void 0:O.map((e=>{let t=null===e||void 0===e?void 0:e.value,a=null!==e&&void 0!==e&&e.disabled||null!==e&&void 0!==e&&e.storeClosed?"disabledOption":"";return"time-id"!==b||!N||null!==e&&void 0!==e&&e.isOrderCapacityAvailable||(t+=" ".concat(Object(l.translateWithI18Next)(v)),a+=" unavailableOption"),Object(s.jsx)("li",{tabIndex:"0",onClick:t=>((e,t)=>{null===e||void 0===e||e.preventDefault(),null===e||void 0===e||e.stopPropagation(),T(!1),"time-id"===b?(!N||N&&null!==t&&void 0!==t&&t.isOrderCapacityAvailable)&&o(t,y,D):o(t,h,A,y,D,R,j,N)})(t,e),className:a,"data-testid":"option-id",children:t},null===e||void 0===e?void 0:e.key)}))})}),S&&Object(s.jsxs)("div",{className:"dropdown-error",children:[Object(s.jsx)(r.a,{srcFile:n.a.Error,className:"store-cannot-deliver-icon"}),Object(s.jsx)("div",{className:"dropdown-error-message",children:I})]})]})},b=a(101),m=a(915),j=a(14);const h=e=>{const{show:t,sectionHeader:a,selectedDate:i,selectedTime:o,changeDateValue:c,changeTimeValue:u,dateTimeArr:v,showCateringWarning:h=!1,scheduleTimeWarning:p=!1,scheduleErrMsg:g="",scheduleErrorType:N="",scheduleWarningMsg:S="",changeTimeObj:I={},changeDateObj:x={},placeholderText:f,disableDateOption:E=!1,disableTimeOption:C=!1,enableScheduleOrderFlag:T=!1,enableOrderCapacityManagement:y=!1,orderCapacity:D={},storeId:A="",elementUniqueLocator:R}=e,{SingleArrow:_}=n.a,{DATE:w,TIME:L}=d.a,k=T?"date-time-section date-time-section-ca":"date-time-section date-time-section-au",M=y?Object(b.n)(D,A,i,v):[],P=y?M:null===i||void 0===i?void 0:i.timeSlots;return t?Object(s.jsxs)("div",{className:"schedule-order-form-sections",children:[Object(s.jsx)("h3",{className:"schedule-form-subsection-header",children:Object(l.translateWithI18Next)(a)}),Object(s.jsx)(m.a,{show:null===h||void 0===h?void 0:h.show,errorMsg:null===h||void 0===h?void 0:h.warning,errImage:null===h||void 0===h?void 0:h.image,cssClass:null===h||void 0===h?void 0:h.cssClass}),p&&Object(s.jsxs)("div",{className:"store-cannot-schedule-error timebased-inline-message",children:[Object(s.jsx)(r.a,{srcFile:n.a.Error,className:"store-cannot-deliver-icon"}),Object(s.jsx)("div",{className:"storeErrorMessage",children:g})]}),Object(s.jsxs)("div",{className:k,children:[Object(s.jsx)(O,{cssClass:"date-time-dropdown",dropdownTitle:Object(l.translateWithI18Next)(w),setSelectedItem:c,changeDateObj:x,changeTimeObj:I,dateTimeArr:v,selectedItem:null===i||void 0===i?void 0:i.date,imgSrc:_,options:Object(b.o)(v),dropdownId:"date-id",disableOptions:E,enableOrderCapacityManagement:y,shouldDisplayDropdownError:p&&S&&N===j.a.ORDER_CAPACITY_DAY_ERROR,errorMessage:S,dataTestid:"schedule-date",elementUniqueLocator:R}),Object(s.jsx)(O,{cssClass:"date-time-dropdown ".concat(y?"date-time-dropdown--order-capacity":""),dropdownTitle:Object(l.translateWithI18Next)(L),setSelectedItem:u,changeDateObj:x,changeTimeObj:I,dateTimeArr:v,selectedItem:o,imgSrc:_,options:P,dropdownId:"time-id",placeholderText:f,disableOptions:C,enableOrderCapacityManagement:y,shouldDisplayDropdownError:p&&S&&N===j.a.ORDER_CAPACITY_TIME_ERROR,errorMessage:S,dataTestid:"schedule-time",elementUniqueLocator:R})]})]}):null},p=o.a.memo(h);t.a=p},996:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var i=a(3),o=a.n(i),l=a(6),n=a(266),d=a.n(n),r=a(43),s=a(38),c=a(5),u=a(15),v=a(216),O=a(2);const{GoogleMapLocationImage:b,SuggestionItemSearchPin:m,clearTextIcon:j,Time_Clock:h}=u.a,{SUUGESTED_ITEMS_TEXT:p,ALLOWED_SUGGESTION_LIST:g,SUGGESTION_ACTIVE_COLOR:N,SUGGESTION_ACTIVE_OPACITY:S,BRAND_BLACK:I}=s.a,x=e=>{const{currentMarket:t,placeholder:a,storeSelection:i={},address:n,inputOnChange:s,handleSelectAddress:u,onSearchError:g,locationAlert:N,negativeScenarioAlert:S,inputRef:I,keyPress:x,onClearTextHandler:f,showAutoSuggestion:E,alreadySearched:C,setSuggestedAddress:T,filteredTypes:y,maxLength:D,filterConditions:A,isAddressNotChangable:R}=e,{placesSearchInput:_=!0}=i;return Object(O.jsx)("div",{className:"search-delivery-address",children:Object(O.jsx)("div",{className:"input-delivery-address",children:Object(O.jsx)(d.a,{value:n,onChange:s,onSelect:u,searchOptions:{componentRestrictions:{country:t},types:y},shouldFetchSuggestions:!0,onError:g,children:e=>{let{getInputProps:t,suggestions:i,getSuggestionItemProps:d,loading:s}=e;return Object(O.jsx)("div",{children:_&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(r.a,{"data-testid":"",srcFile:b,alt:" ",className:"google-location-img"}),Object(O.jsx)("input",{"data-testid":"store-search-input","aria-label":"Enter your delivery address",maxLength:D,className:"".concat(Object(c.Tc)(Object(c.id)(N,S),"store-search-input error-border mt-2","store-search-input mt-2")),...t({placeholder:a,ref:I}),onKeyUp:x,disabled:R}),n&&!R&&Object(O.jsx)("img",{src:j,alt:"clear-text-btn","data-testid":"clear-text-btn",className:"clearTextIcon",onClick:f}),Object(c.db)(Object(c.kc)(i),E)?Object(O.jsx)("div",{className:"suggestion-list",children:Object(v.d)(i,A).map(((e,t)=>(null===T||void 0===T||T(i),Object(O.jsxs)(o.a.Fragment,{children:[0===t&&Object(O.jsx)("div",{className:"suggestion-items suggest-text",children:Object(l.translateWithI18Next)(p)}),Object(O.jsx)("div",{className:"suggestion-item-container",children:Object(O.jsx)("div",{...d(e,{className:"suggestion-items"}),children:Object(O.jsxs)("div",{className:"suggested-address-alignment-delivery",children:[Object(O.jsx)("div",{children:Object(O.jsx)(r.a,{"data-testid":"",srcFile:Object(c.Tc)(C(e.description),h,m),alt:"googleMapLocation",className:"suggetion-pin"})}),Object(O.jsx)("div",{className:"suggestion-description",children:e.description})]})},t)})]},null===e||void 0===e?void 0:e.id))))}):null]})})}})})})},f=o.a.memo(x)},997:function(e,t,a){"use strict";var i=a(3),o=a.n(i),l=a(25),n=a(36),d=a(6),r=a(4),s=a(318),c=a(76),u=a(38),v=a(69),O=a(110),b=a(2);const{SAVED_ADDRESS:m,START_ORDER:j,SAVED_ADDRESSES:h}=r.a,{SAVED_ADDRESS_LIMIT:p}=u.a,g=e=>{var t;const a=Object(O.a)(),{handleSelectAddress:o,savedAddresses:r=[],show:u,scheduleOrderDateFormat:g}=e,N=Object(l.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),S=null===N||void 0===N||null===(t=N.savedAddressPage)||void 0===t?void 0:t.showPrefectureAddAddressScreen,{userOrderStateDispatch:I}=Object(i.useContext)(c.a),x=null===r||void 0===r?void 0:r.sort(((e,t)=>(null===t||void 0===t?void 0:t.isPrimary)-(null===e||void 0===e?void 0:e.isPrimary))).slice(0,p),f=(null===r||void 0===r?void 0:r.length)>1?Object(d.translateWithI18Next)(h):Object(d.translateWithI18Next)(m),E=(null===r||void 0===r?void 0:r.length)>p?p:r.length;return u&&Object(b.jsxs)("div",{"data-testid":"saved-address-container",children:[Object(b.jsx)("div",{className:"savedAddress-store-count",children:Object(b.jsx)("span",{className:"saved-address-count-title",children:"".concat(f," (").concat(E,")")})}),null===x||void 0===x?void 0:x.map(((e,t)=>{var i,l;return Object(b.jsx)("div",{className:"savedAddress-module-card",children:Object(b.jsxs)("div",{className:"inside-card",children:[Object(b.jsxs)("div",{className:"address-section",children:[Object(b.jsxs)("div",{className:"address-type",children:[null===e||void 0===e?void 0:e.name,": "]}),S&&Object(b.jsx)("div",{className:"address",children:(null===e||void 0===e?void 0:e.addressLines)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e||null===(i=e.addressLines)||void 0===i||null===(l=i.filter(Boolean))||void 0===l?void 0:l.join(" ")," "]})}),!S&&Object(b.jsxs)("div",{className:"address",children:[(null===e||void 0===e?void 0:e.addressLines[0])&&Object(b.jsxs)("span",{children:[" ",Object(s.F)(null===e||void 0===e?void 0:e.addressLines[0]),", "]}),(null===e||void 0===e?void 0:e.addressLines[1])&&Object(b.jsxs)("span",{children:[" ",Object(s.F)(null===e||void 0===e?void 0:e.addressLines[1]),", "]}),(null===e||void 0===e?void 0:e.city)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.city,", "]}),(null===e||void 0===e?void 0:e.state)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.state," - "]}),(null===e||void 0===e?void 0:e.pinCode)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.pinCode,", "]}),(null===e||void 0===e?void 0:e.country)&&Object(b.jsxs)("span",{children:[" ",null===e||void 0===e?void 0:e.country," "]})]})]}),Object(b.jsx)("div",{children:Object(b.jsx)(n.a,{className:"button redButton search-store-card-btn",onClickHandler:()=>Object(s.U)(e,I,o,a,v.d,g),"data-testid":"saved-start-order-click-test",children:Object(d.translateWithI18Next)(j)})})]})},"".concat(null===e||void 0===e?void 0:e.name,"-").concat(t))}))]})||null},N=o.a.memo(g);t.a=N}}]);