(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[68],{1022:function(e,t,a){"use strict";var l=a(3),c=a.n(l),n=a(28),i=a(4),s=a(92),r=a(84),d=a(15),o=a(2);t.a=e=>{let{confirmationMsg:t,handleClose:a,handleConfirmBtn:l,imageSrc:j}=e;const{CONFIRM_BTN_TEXT:b,CANCEL:u}=i.a;return Object(o.jsx)(c.a.Fragment,{children:Object(o.jsx)(s.a,{handleClose:a,classNames:"delete-account-modal unlink-confirmation-modal",CartAlertForm:Object(o.jsx)(r.a,{title:t,cancelButtonText:Object(n.translateWithI18Next)(u),confirmButtonText:Object(n.translateWithI18Next)(b),confirmHandler:l,cancelHandler:a,imageSrc:d.a.PictogramAlertIcon})})})}},1055:function(e,t,a){"use strict";var l=a(3),c=a.n(l),n=a(25),i=a(13),s=a(12),r=a(44),d=a(1022),o=a(6),j=a(4),b=a(937),u=a(15),v=a(2);t.a=e=>{let{setStep:t,cardType:a,setShowConfirmationModal:O,handleUnlinkedAction:m,showConfirmationModal:h}=e;const x=Object(n.b)(),[N,g]=Object(l.useState)(!1),{ID:I,UNLINK:y,EXPIRATION_DATE:A,BALANCE:k,UNLINK_CONFIRMATION_MESSAGE:p,ABOUT_KFC_CARD:f,TRANSFER_BALANCE:_,AVAILABLE_POINTS:T,PONTA_CARD_NUMBER:C,RAKUTEN_CARD_NUMBER:E,LINKING:R}=j.a,M=a===b.a.KFC,S=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),{KFC_Card:L,PontaId:D,RakutenId:W}=S||{},w=Object(n.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.rakutenBalanceInquiry)||void 0===a?void 0:a.AvailablePoints})),K=Object(n.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.pontaBalanceInquiry)||void 0===a?void 0:a.AvailablePoints})),P="-1"===(null===S||void 0===S?void 0:S.RakutenId),U=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t?void 0:t.hideRakutenIdInDetails})),F=Object(n.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.kfcLinkingData})),{BalanceAfter:B,ExpirationDate:H}=F||{};let G="";if(H){const e=H.slice(0,4),t=H.slice(4,6),a=H.slice(6,8);G="".concat(e,"/").concat(t,"/").concat(a)}return Object(l.useEffect)((()=>{x(Object(r.j)({memberId:W}))}),[W]),Object(l.useEffect)((()=>{x(Object(r.i)({memberId:D}))}),[D]),Object(v.jsx)("div",{className:"kfc-card-details align-items-center flex-column d-flex",children:Object(v.jsxs)("div",{className:"col-12 col-lg-8 p-0",children:[h&&Object(v.jsx)(d.a,{confirmationMsg:Object(o.translateWithI18Next)(p),handleClose:()=>O(!1),handleConfirmBtn:()=>m(a),imageSrc:u.a.PictogramAlertIcon}),Object(v.jsx)("button",{onClick:()=>t(b.d.Home),className:"btn-back",children:"\u2794"}),Object(v.jsxs)("div",{className:"kfc-card-details_wrapper",children:[M&&Object(v.jsxs)(c.a.Fragment,{children:[Object(v.jsxs)("div",{className:"info-wraper",children:[Object(v.jsx)("p",{className:"lbl-note-dark",children:Object(o.translateWithI18Next)(k)}),Object(v.jsx)("p",{className:"detail-value",children:B})]}),Object(v.jsxs)("div",{className:"info-wraper",children:[Object(v.jsx)("p",{className:"lbl-note-dark",children:Object(o.translateWithI18Next)(I)}),Object(v.jsx)("p",{className:"detail-value",children:L})]}),Object(v.jsxs)("div",{className:"info-wraper",children:[Object(v.jsx)("p",{className:"lbl-note-dark",children:Object(o.translateWithI18Next)(A)}),Object(v.jsx)("p",{className:"detail-value",children:G})]}),Object(v.jsx)("div",{className:"linking-wraper",children:Object(v.jsx)("a",{href:Object(i.a)(s.gb),target:"_blank",className:"linking-text",rel:"noopener noreferrer",children:Object(o.translateWithI18Next)(_)})})]}),a===b.a.PONTA&&Object(v.jsxs)(c.a.Fragment,{children:[Object(v.jsxs)("div",{className:"info-wraper",children:[Object(v.jsx)("p",{className:"lbl-note-dark",children:Object(o.translateWithI18Next)(T)}),Object(v.jsx)("p",{className:"detail-value",children:K||Object(v.jsx)("div",{className:"loader"})})]}),Object(v.jsxs)("div",{className:"info-wraper",children:[Object(v.jsx)("p",{className:"lbl-note-dark",children:Object(o.translateWithI18Next)(C)}),Object(v.jsx)("p",{className:"detail-value",children:D.slice(-15)})]})]}),a===b.a.RAKUTEN&&Object(v.jsxs)(c.a.Fragment,{children:[!P&&Object(v.jsxs)("div",{className:"info-wraper",children:[Object(v.jsx)("p",{className:"lbl-note-dark",children:Object(o.translateWithI18Next)(T)}),Object(v.jsx)("p",{className:"detail-value",children:w||Object(v.jsx)("div",{className:"loader"})})]}),!U&&Object(v.jsxs)("div",{className:"info-wraper",children:[Object(v.jsx)("p",{className:"lbl-note-dark",children:Object(o.translateWithI18Next)(E)}),Object(v.jsx)("p",{className:"detail-value",children:W})]})]})]}),Object(v.jsx)("div",{className:"loyalty-fields loyalty-fields-btns",children:Object(v.jsx)("button",{"data-loading":N,"data-type":"primary",className:"button-contained kfc-button kfc-unlink-btn ".concat(N?"loading":""),onClick:()=>{x(Object(r.b)()),g(!0),O(!0)},children:Object(o.translateWithI18Next)(y)})}),M&&Object(v.jsx)("p",{style:{textAlign:"center",textDecoration:"underline"},children:Object(v.jsx)("a",{className:"btn-kfc-card btn-link btn-sm",href:"".concat(Object(i.a)(s.a)),children:"".concat(Object(o.translateWithI18Next)(f))})})]})})}},1078:function(e,t,a){"use strict";var l=a(3),c=a(15),n=a(213),i=a(44),s=a(85),r=a(25),d=a(1281),o=a(1282),j=a(6),b=a(2);t.a=e=>{let{success:t,msg:a,infinit:u=!1}=e;const{Error_Yellow:v,GreenCheck:O}=c.a,[m,h]=Object(l.useState)(!0),x=Object(r.b)();Object(l.useEffect)((()=>{if(!u){const e=setTimeout((()=>{h(!1)}),5e3);return m?()=>{x(Object(i.g)({})),clearTimeout(e)}:(x(Object(i.g)({})),null)}}),[x,u,m]);const N=Object(j.translateWithI18Next)(s.a.mapMessageInJP(a));return Object(b.jsx)(d.a,{className:"info-notification_wrapper",children:Object(b.jsxs)(o.a,{xs:"12",className:"info-notification_container ".concat(t&&"greenbg"),children:[Object(b.jsx)("div",{className:"info-notification_icon ",children:t?Object(b.jsx)(n.a,{src:O,className:"info-notification_image green-icon",alt:""}):Object(b.jsx)(n.a,{src:v,className:"info-notification_image",alt:""})}),Object(b.jsx)("div",{className:"info-notification_text-container",children:Object(b.jsx)("div",{className:"info-notification_text",children:N||a})})]})})}},1120:function(e,t,a){"use strict";var l=a(3),c=a.n(l),n=a(1146),i=a.n(n),s=a(368),r=a(2);var d=e=>{let{timer:t,setTimer:a,restartTimer:c,setRestartTimer:n}=e;const i=Object(l.useRef)(null),s=Object(l.useCallback)((e=>{const t=e=>{let{total:t,minutes:l,seconds:c}=(e=>{const t=Date.parse(e)-Date.parse(new Date),a=Math.floor(t/1e3%60);return{total:t,minutes:Math.floor(t/1e3/60%60),seconds:a}})(e);t>=0&&a((l>9?l:"0"+l)+":"+(c>9?c:"0"+c))};a("15:00"),i.current&&clearInterval(i.current);const l=setInterval((()=>{t(e)}),1e3);i.current=l}),[a]),d=()=>{let e=new Date;return e.setSeconds(e.getSeconds()+900),e};return Object(l.useEffect)((()=>{s(d())}),[s]),Object(l.useEffect)((()=>{c&&(s(d()),n(!1))}),[s,c,n]),Object(r.jsx)("div",{className:"",children:Object(r.jsx)("span",{children:t})})},o=a(25),j=a(144),b=a.n(j),u=a(44),v=a(937),O=a(12),m=a(13),h=a(156);var x=e=>{var t,a,n;const[j,x]=Object(l.useState)(!1),[N,g]=Object(l.useState)(""),[I,y]=Object(l.useState)(!1),A=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),k=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),p=Object(o.b)(),[f,_]=Object(l.useState)("00:00");let T;switch(null===k||void 0===k||null===(t=k.stage)||void 0===t||null===(a=t.code)||void 0===a||null===(n=a.toString())||void 0===n?void 0:n.toLowerCase()){case v.c.REGULAR:T="10";break;case v.c.BRONZE:T="20";break;case v.c.SILVER:T="30";break;case v.c.GOLD:T="40";break;case v.c.PLATINUM:T="50";break;default:T="01"}Object(l.useEffect)((()=>{if(A&&k){let t="";var e;if(T&&(t=t.concat(v.b.stageNumber,T)),null!==A&&void 0!==A&&A.MilesMemberId&&(t=t.concat(v.b.milesMemberId,h.g,"4",null===A||void 0===A?void 0:A.MilesMemberId)),t=t.concat(v.b.expirationTime,E()),null!==A&&void 0!==A&&A.PontaId)t=t.concat(v.b.pontaId,null===A||void 0===A||null===(e=A.PontaId)||void 0===e?void 0:e.slice(-15));null!==A&&void 0!==A&&A.KFC_Card&&(t=t.concat(v.b.kfcCard,null===A||void 0===A?void 0:A.KFC_Card,null===A||void 0===A?void 0:A.KFC_PIN)),null!==A&&void 0!==A&&A.RakutenId&&"-1"!==(null===A||void 0===A?void 0:A.RakutenId)&&(t=t.concat(v.b.rakutenId,null===A||void 0===A?void 0:A.RakutenId));const a=C(t);g(a)}}),[A,k]);const C=e=>{const t=b.a.enc.Utf8.parse(Object(m.a)(O.lb)),a=b.a.AES.encrypt(e,t,{keySize:16,BlockSize:128,mode:b.a.mode.ECB,padding:b.a.pad.Pkcs7}).toString();var l="";return l=l.concat("K|",a,"|")},E=()=>{function e(e){return e<10?"0".concat(e):e}const t=new Date,a=new Date(t.getTime()+9e5),l=a.getFullYear().toString().slice(-2),c=e(a.getMonth()+1),n=e(a.getDate()),i=e(a.getHours()),s=e(a.getMinutes()),r=e(a.getSeconds());return"".concat(l).concat(c).concat(n).concat(i).concat(s).concat(r)};return Object(r.jsx)(r.Fragment,{children:A&&Object(r.jsx)("div",{className:"loyalty-qr",children:Object(r.jsxs)("div",{className:"loyalty-qr-wrap",children:[null!==A&&void 0!==A&&A.MilesUUID&&null!==k&&void 0!==k&&k.stage?(M=f,S=N,"00:00"!==M?S&&Object(r.jsx)(i.a,{size:192,value:S}):Object(r.jsx)("div",{className:"qr-placeholder"})):Object(r.jsx)("div",{className:"placeholder",children:Object(r.jsx)("div",{className:"qr-placeholder loading"})}),Object(r.jsx)("div",{className:"pnl-refresh",children:null!==A&&void 0!==A&&A.MilesUUID&&null!==k&&void 0!==k&&k.stage?Object(r.jsxs)(c.a.Fragment,{children:[Object(r.jsx)("div",{id:"qr-timer",children:Object(r.jsx)(d,{timer:f,setTimer:_,restartTimer:I,setRestartTimer:y})}),Object(r.jsx)("button",{id:"btn-refresh-qr",className:"kfc-button btn-black",onClick:()=>{p(Object(u.e)()),x(!0),setTimeout((()=>{x(!1),y(!0)}),1e3)},children:Object(r.jsx)("img",{src:s.a,alt:"refresh",className:(R=j,R?"rotate":"")})})]}):Object(r.jsx)("div",{className:"placeholder",children:Object(r.jsx)("div",{className:"qr-timer-placeholder loading"})})})]})})});var R,M,S},N=a(6),g=a(4);var I=e=>{var t,a,l,c,n,i,s,d;let{setStep:j}=e;const{LEARN_MORE:b,CUMULATIVE_MILES:u,CONGRATULATIONS_TOP_STAGE:O,TO:m,LEVEL:h,CUMULATIVE_CHICKEN_MILES:x,AFTER:I,IN_MILE:y,MEMBER:A}=g.a,k=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),p=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.isLoading})),f=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userOverAllRankingData})),_=(null===f||void 0===f||f.mile,Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData}))),{user:T}=_||{},{total_mile:C}=T||{},E=null===k||void 0===k||null===(t=k.next_stage)||void 0===t?void 0:t.lower,R=null===k||void 0===k?void 0:k.current_mile,M=R/E*100,S=E-R,L=(null===k||void 0===k||null===(a=k.stage)||void 0===a||null===(l=a.code)||void 0===l||null===(c=l.toString())||void 0===c?void 0:c.toLowerCase())===v.c.PLATINUM;return Object(r.jsxs)("div",{className:"loyalty-status px-0",children:[Object(r.jsx)("div",{className:"loyalty-heading",children:null!==k&&void 0!==k&&null!==(n=k.stage)&&void 0!==n&&n.name?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsxs)("h3",{className:"current-mile",children:[null===k||void 0===k||null===(i=k.stage)||void 0===i?void 0:i.name," ",Object(N.translateWithI18Next)(h)]}),Object(r.jsx)("div",{className:"current-mile-value",children:null===k||void 0===k?void 0:k.current_mile})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})}),Object(r.jsx)("div",{className:"meter",children:null!==k&&void 0!==k&&k.current_mile?Object(r.jsx)("span",{style:{width:"".concat(L?"100":M,"%")}}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"status loading"})})}),Object(r.jsx)("div",{className:"lbl-note-light",children:null!==k&&void 0!==k&&null!==(s=k.next_stage)&&void 0!==s&&s.name||L?Object(r.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(r.jsxs)("div",{className:"cumulative-container w-50",children:[Object(r.jsx)("div",{className:"status-miles-value",children:C}),Object(r.jsx)("div",{className:"status-miles-text",children:Object(N.translateWithI18Next)(u)})]}),Object(r.jsx)("div",{className:"w-50",children:L?Object(N.translateWithI18Next)(O):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"status-miles-value",children:[Object(r.jsx)("span",{className:"status-miles-text",children:Object(N.translateWithI18Next)(I)}),S,Object(r.jsx)("span",{className:"status-miles-text",children:Object(N.translateWithI18Next)(y)})]}),Object(r.jsxs)("div",{className:"status-miles-text",children:[null===k||void 0===k||null===(d=k.next_stage)||void 0===d?void 0:d.name," ",Object(N.translateWithI18Next)(A)]})]})})]}):Object(r.jsx)("div",{className:"placeholder justify-content-start m-0",children:Object(r.jsx)("div",{className:"line md loading"})})}),Object(r.jsx)("button",{disabled:p,onClick:()=>{j(v.d.MILE_DETAILS)},className:"btn-loyalty-details btn-sm p-0",children:"".concat(Object(N.translateWithI18Next)(b))})]})},y=a(43),A=a(15),k=a(5);var p=e=>{let{cardImg:t,disabled:a,cardTitle:l="",isLinked:c=!1,cardRedirect:n,setStep:i,onClick:s,isLinkingStatue:d,availablePoints:j,cardType:b}=e;const{LINKED:u,NOT_LINKED:O,DETAILS:m,LINKING:h,LINKING_IN_PROGRESS:x,WORK_TOGETHER:I,ALREADY_LINKED:k,COMING_SOON:p}=g.a,f=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),_=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t?void 0:t.rakutenComingSoon}));let T=!1;const C=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.isLoading}));let E=Object(N.translateWithI18Next)(O);return b===v.a.RAKUTEN?(T=_,d?E=Object(N.translateWithI18Next)(x):c&&(E=Object(N.translateWithI18Next)(k))):c&&(E=Object(N.translateWithI18Next)(u)),Object(r.jsxs)("div",{className:"linkage-card",children:[Object(r.jsx)("img",{src:t,alt:l}),Object(r.jsxs)("span",{className:"linkage-title",children:[Object(r.jsx)("span",{className:"linkage-title-text",children:l}),null!==f&&void 0!==f&&f.MilesUUID||c?Object(r.jsx)("span",{className:"linkage-status",children:E}):Object(r.jsx)("span",{className:"linkage-status",children:Object(N.translateWithI18Next)(O)})]}),!d&&Object(r.jsxs)("button",{disabled:a||C||T,className:"linkage-btn btn-link",onClick:s,children:[!c&&!C&&!T&&Object(r.jsx)(y.a,{srcFile:A.a.External_url,alt:"External url",className:"details-icon"})," ",T?Object(N.translateWithI18Next)(p):c?Object(N.translateWithI18Next)(m):Object(N.translateWithI18Next)(I)]})]})},f=a(61),_=a(0),T=a(1022);var C=e=>{let{setStep:t,setCartType:a,showConfirmationModal:c,setShowConfirmationModal:n,handleUnlinkedAction:i}=e;const{KFC_CARD:s,PONTA_POINTS:d,RAKUTEN_POINTS:j,LINKED_TO_CARD_MESSAGE:b,UNLINK_CONFIRMATION_MESSAGE:O}=g.a,m=Object(o.b)(),h=Object(f.g)(),x=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),I=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pontaAccountID})),y=(null===x||void 0===x?void 0:x.KFC_Card)&&(null===x||void 0===x?void 0:x.KFC_PIN),C=null===x||void 0===x?void 0:x.PontaId,E=null===x||void 0===x?void 0:x.RakutenId,R=Object(o.c)((e=>e.profileReducer)),M=Object(k.Vb)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===R||void 0===R?void 0:R.customerId)),S=(null===M||void 0===M?void 0:M.isUserBlocked)||!1,[L,D]=Object(l.useState)(S),[W,w]=Object(l.useState)(""),K="-1"===E,P=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.kfcLinkingData})),{BalanceAfter:U}=P||{},F=Object(o.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.rakutenBalanceInquiry)||void 0===a?void 0:a.AvailablePoints})),B=Object(o.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.pontaBalanceInquiry)||void 0===a?void 0:a.AvailablePoints}));Object(l.useEffect)((()=>{H()}),[]);const H=()=>{var e;const t=null===(e=Object(k.Vb)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===R||void 0===R?void 0:R.customerId)))||void 0===e?void 0:e.lastAttemptDate,a=new Date;a.setHours(0,0,0,0),t!==a.toDateString()&&(Object(k.kf)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===R||void 0===R?void 0:R.customerId),{isUserBlocked:!1,attemptsCount:0,lastAttemptDate:a.toDateString()}),D(!1))};return Object(l.useEffect)((()=>{E&&m(Object(u.j)({memberId:E}))}),[E]),Object(l.useEffect)((()=>{C&&m(Object(u.i)({memberId:C}))}),[C]),Object(r.jsxs)("div",{className:"linkage-cards",children:[Object(r.jsx)(p,{cardImg:A.a.HeaderLogo,isLinked:y,cardTitle:Object(N.translateWithI18Next)(s),setStep:t,disabled:L,onClick:()=>{y?(t(v.d.CARD_DETAILS_VIEW),a(v.a.KFC)):t(v.d.KFC_FORM)},availablePoints:U,cardType:v.a.KFC}),Object(r.jsx)(p,{cardImg:A.a.PontaLogo,isLinked:C,cardTitle:Object(N.translateWithI18Next)(d),onClick:()=>{E?(w(v.a.RAKUTEN),n(!0)):(C?(t(v.d.CARD_DETAILS_VIEW),a(v.a.PONTA)):m(Object(u.h)(I)),w(""),n(!1))},availablePoints:B,cardType:v.a.PONTA}),Object(r.jsx)(p,{isLinked:E,isLinkingStatue:K,cardImg:A.a.RakutenLogo,cardTitle:Object(N.translateWithI18Next)(j),onClick:()=>{C?(w(v.a.PONTA),n(!0)):(E?(t(v.d.CARD_DETAILS_VIEW),a(v.a.RAKUTEN)):h.push({pathname:"/rakuten-tc"}),w(""),n(!1))},availablePoints:F,cardType:v.a.RAKUTEN}),c&&Object(r.jsx)(T.a,{confirmationMsg:Object(N.translateWithI18Next)(b),handleClose:()=>n(!1),handleConfirmBtn:()=>i(W)})]})};var E=e=>{let{setStep:t,setCartType:a,showConfirmationModal:l,setShowConfirmationModal:c,handleUnlinkedAction:n}=e;return Object(r.jsx)("div",{className:"loyalty-linkage",children:Object(r.jsx)(C,{setStep:t,setCartType:a,setShowConfirmationModal:c,handleUnlinkedAction:n,showConfirmationModal:l})})};var R=e=>{var t,a,l,c,n,i,s;let{totalMile:d,expDate:j}=e;const{CHICKEN_MILES:b,CONGRATULATIONS_TOP_STAGE:u,STAGE_WITH:h,LEVEL:x,EXPIRATION_DATE:I,WHAT_IS_CHICKEN_MILE:y,CUMULATIVE_MILES:A,AFTER:k,MEMBER:p,IN_MILE:f}=g.a,_=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),T=null===_||void 0===_||null===(t=_.next_stage)||void 0===t?void 0:t.lower,C=null===_||void 0===_?void 0:_.current_mile,E=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userOverAllRankingData})),R=(null===E||void 0===E||E.mile,Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData}))),{user:M}=R||{},{total_mile:S}=M||{},L=C/T*100,D=T-C,W=(null===_||void 0===_||null===(a=_.stage)||void 0===a||null===(l=a.code)||void 0===l?void 0:l.toLowerCase())===v.c.PLATINUM,w=new Date(j),K=w.getFullYear(),P=String(w.getMonth()+1).padStart(2,"0"),U=String(w.getDate()).padStart(2,"0"),F="".concat(K,"/").concat(P,"/").concat(U);return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"loyalty-heading",children:null!==_&&void 0!==_&&null!==(c=_.stage)&&void 0!==c&&c.name?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsxs)("h3",{className:"current-mile",children:[null===_||void 0===_||null===(n=_.stage)||void 0===n?void 0:n.name," ",Object(N.translateWithI18Next)(x)]}),Object(r.jsx)("div",{className:"current-mile-value",children:null===_||void 0===_?void 0:_.current_mile})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})}),Object(r.jsx)("div",{className:"meter",children:Object(r.jsx)("span",{style:{width:"".concat(L,"%")}})}),Object(r.jsx)("div",{className:"lbl-note-light",children:null!==_&&void 0!==_&&null!==(i=_.next_stage)&&void 0!==i&&i.name||W?Object(r.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(r.jsxs)("div",{className:"cumulative-container w-50",children:[Object(r.jsx)("div",{className:"status-miles-value",children:S}),Object(r.jsx)("div",{className:"status-miles-text",children:Object(N.translateWithI18Next)(A)})]}),Object(r.jsx)("div",{className:"w-50",children:W?Object(N.translateWithI18Next)(u):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"status-miles-value",children:[Object(r.jsx)("span",{className:"status-miles-text",children:Object(N.translateWithI18Next)(k)}),D,Object(r.jsx)("span",{className:"status-miles-text",children:Object(N.translateWithI18Next)(f)})]}),Object(r.jsxs)("div",{className:"status-miles-text",children:[null===_||void 0===_||null===(s=_.next_stage)||void 0===s?void 0:s.name," ",Object(N.translateWithI18Next)(p)]})]})})]}):Object(r.jsx)("div",{className:"placeholder justify-content-start m-0",children:Object(r.jsx)("div",{className:"line md loading"})})}),Object(r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-4",children:[Object(r.jsx)("div",{className:"lbl-mileage-expiration",children:"".concat(Object(N.translateWithI18Next)(I)," ").concat(F)}),Object(r.jsx)("div",{className:"lbl-mileage-link",children:Object(r.jsx)("a",{className:"lbl-mileage-link-item",href:"".concat(Object(m.a)(O.Ob)),children:"".concat(Object(N.translateWithI18Next)(y))})})]})]})},M=a(1086),S=a(1077),L=a(1281),D=a(1282);var W=e=>{let{Date:t,Title:a,Points:l}=e;const{CHICKEN_MILES:c}=g.a;return Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsxs)("div",{className:"loyalty-history-date",children:[Object(r.jsx)("label",{children:t}),Object(r.jsx)("p",{children:a})]}),Object(r.jsx)("div",{className:"loyalty-history-point d-flex align-items-end",children:Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[l," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(N.translateWithI18Next)(c)})]})})]})};const w=(e,t)=>{var a;return"".concat(null===(a=e[0])||void 0===a?void 0:a.rank," ").concat(Object(N.translateWithI18Next)(t))};var K=e=>{var t,a,l;let{setStep:c}=e;const n=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData})),{user:i,ranking:s}=n||{},{total_mile:d,ends_at:j}=i||{},b=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.currentMilesHisory})),u=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pastMilesHisory})),O=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData})),m=(null===O||void 0===O||null===(t=O.stage)||void 0===t||null===(a=t.code)||void 0===a?void 0:a.toLowerCase())||v.c.REGULAR.toLowerCase(),h=Object(o.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),{showAllRanking:x}=h,{CHICKEN_MILE_DETAILS:I,RANKING_OF_MONTH:y,PLACE:k,VIEW_ALL:p,PAST_TAB_TITLE:f,THE_CURRENT_TAB_TITLE:_}=g.a,T=e=>e&&e.length?e.map((e=>{return Object(r.jsx)(W,{Date:(t=e.issue_date,new Date(t).toLocaleDateString()),Title:e.rule_name,Points:e.mile});var t})):Object(r.jsx)("div",{children:"No Data"});return Object(r.jsx)("div",{className:"loyalty-miles w-100",children:Object(r.jsxs)(L.a,{className:"justify-content-center w-100 m-0",children:[Object(r.jsxs)(D.a,{xs:"12",className:"d-lg-none",children:[Object(r.jsx)("button",{onClick:()=>c(v.d.Home),className:"btn-back",children:"\u2794"}),Object(r.jsx)("h2",{children:Object(N.translateWithI18Next)(I)})]}),Object(r.jsx)(D.a,{lg:"5",xs:"12",className:"loyalty-mile-details ".concat(m),children:Object(r.jsx)(R,{totalMile:d,expDate:j})}),Object(r.jsxs)(D.a,{lg:"7",xs:"12",children:[Object(r.jsx)("div",{className:"loyalty-ranking",children:Object(r.jsxs)("div",{className:"loyalty-heading",children:[Object(r.jsxs)("h3",{children:[Object(r.jsx)("img",{src:A.a.CrownRankLogo,alt:"Ranking of the month"}),Object(r.jsx)("span",{className:"ranking-crown-heading",children:Object(N.translateWithI18Next)(y)})]}),x?Object(r.jsx)("button",{className:"btn-link btn-sm",onClick:()=>c(v.d.RANKING),children:"".concat(s&&null!==(l=s[0])&&void 0!==l&&l.rank?w(s,k):Object(N.translateWithI18Next)(p))}):null]})}),Object(r.jsx)("div",{className:"ranking-tabs",style:{paddingTop:"1.5rem"},children:Object(r.jsxs)(M.a,{defaultActiveKey:"current",id:"uncontrolled-tab-example",className:"loyalty-tabs",children:[Object(r.jsx)(S.a,{eventKey:"current",title:Object(N.translateWithI18Next)(_),children:T(b)}),Object(r.jsx)(S.a,{eventKey:"past",title:Object(N.translateWithI18Next)(f),children:T(u)})]})})]})]})})},P=a(1017);var U=e=>{let{Rank:t,Points:a,Img:l,hasImg:c=!1}=e;const{CHICKEN_MILES:n}=g.a;return Object(r.jsxs)("div",{className:"loyalty-history-item  d-flex align-items-center",children:[Object(r.jsx)("div",{className:"loyalty-history-rank",children:c?Object(r.jsx)("img",{src:l,alt:"Rank"}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("p",{children:t})})}),Object(r.jsxs)("div",{className:"loyalty-history-point d-flex align-items-center",children:[Object(r.jsx)("span",{children:a})," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(N.translateWithI18Next)(n)})]})]},t)};var F=e=>{let{Date:t,Rank:a}=e;return Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsx)("div",{className:"loyalty-history-rank",children:t}),Object(r.jsx)("div",{className:"loyalty-history-rank",children:a})]},a)},B=a(349),H=a(36),G=a(28);var V=e=>{let{title:t,handleConfirmBtn:a,handleClose:l,content:c}=e;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(B.a,{id:"PastRanking",show:!0,classNames:"ranking-modal",showCloseBtn:!0,closeButtonHandler:l,closeDataTestId:"handler-close",autoFocus:!0,handleClose:!0,buttonVariant:H.b.primary,footerBtnText:Object(G.translateWithI18Next)(g.a.BACK_BUTTON),footerBtnHandler:a,showFooterSection:!0,modalTitle:t,children:c})})};const q=e=>{if(e>=11&&e<=13)return e+"th";switch(e%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}},Y=e=>{switch(e){case 1:return A.a.IconGold;case 2:return A.a.IconSilver;case 3:return A.a.IconBronze;default:return""}};var z=e=>{var t,a,n;let{setStep:i,stageColor:s}=e;const{CHICKEN_MILES:d,CUMULATIVE_CHICKEN_MILES:j,ALL_RANKING:b,PAST_MONTH_RESULT:u,YOUR_RANKING:O,PAST_MONTHLY_PERFORMANCE:m,MONTHLY_CHICKEN_MILES:h,NO_PAST_DATA:x,NO_DATA:I,PLACE:y,CHICKEN_MILE_DETAILS:k,RANKING_TAB_TITLE:p,COMPREHENSIVE_TAB_TITLE:f}=g.a,[_,T]=Object(l.useState)(!1),C=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.rankingViewData})),E={},R=(null===C||void 0===C?void 0:C.filter((e=>{const t="".concat(e.rank,"-").concat(e.value);return!E[t]&&(E[t]=!0,!0)})))||[],L=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.overAllRankingData})),D=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userOverAllRankingData})),W=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.monthlyRankingData})),{ranking:w}=W||{},K=null!==(t=w[0])&&void 0!==t&&t.rank?"".concat(q(Number(null===(a=w[0])||void 0===a?void 0:a.rank))," ").concat(Object(N.translateWithI18Next)(y)):"-",B=null!==D&&void 0!==D&&D.rank?"".concat(q(null===D||void 0===D?void 0:D.rank)," ").concat(Object(N.translateWithI18Next)(y)):"-",{user:H}=(null===D||void 0===D||D.mile,W||{}),{total_mile:G}=H||{},z=null===(n=w[0])||void 0===n?void 0:n.mile,$=new Date,J=$.getFullYear(),X=($.getMonth()+1).toString().padStart(2,"0"),Z=("1/".concat(X,"/").concat(J),Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pastMonthlyRankingData}))),Q=null===Z||void 0===Z?void 0:Z.ranking,ee=((e,t)=>e?Object(r.jsxs)(c.a.Fragment,{children:[e," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(N.translateWithI18Next)(t)})]}):"-")(z,d);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(P.a,{lg:"5",xs:"12",children:[Object(r.jsx)("div",{children:Object(r.jsxs)("button",{onClick:()=>{_?T(!1):i(v.d.MILE_DETAILS)},className:"d-flex back-to-mileage-loyalty-details show-qr-btn btn-back align-items-center",children:[Object(r.jsx)("img",{className:"back-CTA-Arrow",src:A.a.CTA_Arrow,alt:"back-btn"})," ",Object(r.jsx)("h2",{children:Object(N.translateWithI18Next)(k)})]})}),Object(r.jsxs)("div",{className:"mb-lg-0 mb-4 mileage-loyalty-status ".concat(s),children:[Object(r.jsx)("div",{className:"loyalty-status px-0",children:Object(r.jsx)("div",{className:"loyalty-heading",children:K?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("h3",{className:"current-mile",children:Object(N.translateWithI18Next)(O)}),Object(r.jsx)("div",{className:"current-mile-value",children:K})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})})}),Object(r.jsx)("div",{className:"loyalty-status px-0",children:Object(r.jsx)("div",{className:"loyalty-heading",children:ee?Object(r.jsxs)("div",{className:"text-center",children:[Object(r.jsx)("h3",{className:"current-mile",children:Object(N.translateWithI18Next)(h)}),Object(r.jsx)("div",{className:"current-mile-value",children:ee})]}):Object(r.jsx)("div",{className:"placeholder m-0",children:Object(r.jsx)("div",{className:"line sm loading"})})})})]})]}),Object(r.jsx)(P.a,{lg:"7",xs:"12",children:Object(r.jsxs)("div",{className:"loyalty-ranking-history w-100",children:[Object(r.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(r.jsx)("h2",{children:Object(N.translateWithI18Next)(b)}),Object(r.jsx)("button",{className:"btn-link btn-sm",id:"btn-viewpastranking",onClick:()=>T(!0),children:"\u27a4 ".concat(Object(N.translateWithI18Next)(m))})]}),_?Object(r.jsx)(V,{title:Object(N.translateWithI18Next)(u),content:Object(r.jsx)(c.a.Fragment,{children:Object(r.jsx)("div",{style:{padding:"1rem"},children:Object(r.jsx)("div",{id:"ranking-pastranking",children:Q&&Q.length?Q.map((e=>Object(r.jsx)(F,{Date:e.target_date,Rank:e.rank}))):Object(r.jsx)("div",{className:"loyalty-history-item no-data",children:Object(N.translateWithI18Next)(x)})})})}),handleClose:()=>T(!1),handleConfirmBtn:()=>T(!1)}):Object(r.jsx)("div",{className:"py-4",children:Object(r.jsxs)(M.a,{defaultActiveKey:"month",id:"uncontrolled-tab-example",className:"loyalty-tabs",children:[Object(r.jsx)(S.a,{eventKey:"month",title:Object(N.translateWithI18Next)(p),children:Object(r.jsx)("div",{id:"list-rankingthismonth",children:R&&R.length?R.map((e=>{const t=q(null===e||void 0===e?void 0:e.rank),a=1===(null===e||void 0===e?void 0:e.rank)||2===(null===e||void 0===e?void 0:e.rank)||3===(null===e||void 0===e?void 0:e.rank),l=Y(null===e||void 0===e?void 0:e.rank);return Object(r.jsx)(U,{Rank:t,Points:e.mile,hasImg:a,Img:l})})):Object(r.jsx)("div",{className:"loyalty-history-item no-data",children:Object(N.translateWithI18Next)(I)})})}),Object(r.jsxs)(S.a,{eventKey:"comprehensive",title:Object(N.translateWithI18Next)(f),children:[Object(r.jsx)("div",{className:"loyalty-ranking",children:Object(r.jsxs)("div",{className:"loyalty-heading",children:[Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsxs)("h3",{children:[Object(r.jsx)("img",{src:A.a.CrownRankLogo,alt:"your ranking"}),Object(N.translateWithI18Next)(O)]}),Object(r.jsx)("div",{children:B})]}),Object(r.jsxs)("div",{className:"loyalty-history-item",children:[Object(r.jsx)("div",{children:Object(N.translateWithI18Next)(j)}),Object(r.jsxs)("div",{className:"loyalty-history-point",children:[G," ",Object(r.jsx)("span",{className:"lbl-point",children:Object(N.translateWithI18Next)(d)})]})]})]})}),Object(r.jsx)("div",{id:"list-rankingthismonth",children:L&&L.length?L.map((e=>{const t=q(null===e||void 0===e?void 0:e.rank),a=1===(null===e||void 0===e?void 0:e.rank)||2===(null===e||void 0===e?void 0:e.rank)||3===(null===e||void 0===e?void 0:e.rank),l=Y(null===e||void 0===e?void 0:e.rank);return Object(r.jsx)(U,{Rank:t,Points:e.mile,hasImg:a,Img:l})})):Object(r.jsx)("div",{className:"loyalty-history-item no-data",children:Object(N.translateWithI18Next)(I)})})]})]})})]})})]})};var $=e=>{let{inputId:t,placeholder:a,type:l,minLength:c,maxLength:n,labelTxt:i,value:s,errorMsg:d,errorIcon:o="",handleOnChange:j}=e;return Object(r.jsxs)("div",{className:"loyalty-fields",children:[Object(r.jsxs)("div",{className:"field material-input",children:[Object(r.jsx)("input",{id:t,placeholder:a,maxLength:n,type:l,value:s,onChange:j}),Object(r.jsx)("label",{for:t,children:i})]}),d&&Object(r.jsxs)("div",{className:"kfc-link-form-error",children:[Object(r.jsx)(y.a,{srcFile:A.a.Error,className:"location-alert-icon mr-1"}),Object(r.jsx)("div",{className:"error-msg",children:d})]})]})};var J=e=>{let{setStep:t}=e;const[a,c]=Object(l.useState)(!1),n=Object(o.b)(),i=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.loading})),s=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.errorMsg})),d=Object(o.c)((e=>{var t,a;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t||null===(a=t.kfcLinkingData)||void 0===a?void 0:a.BalanceAfter})),j=Object(o.c)((e=>e.profileReducer)),b=Object(k.Vb)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===j||void 0===j?void 0:j.customerId)),h=(null===b||void 0===b?void 0:b.isUserBlocked)||!1,x=(null===b||void 0===b?void 0:b.attemptsCount)||0,[I,p]=Object(l.useState)(""),[f,T]=Object(l.useState)(""),[C,E]=Object(l.useState)(""),[R,M]=Object(l.useState)(h?"Block error msg":""),[S,L]=Object(l.useState)(""),[D,W]=Object(l.useState)(!1),{KFC_CARD_COOPERATION:w,ENTER_ID_AND_PIN:K,WRONG_PIN_LIMIT:P,ABOUT_KFC_CARD:U,RETURN:F,SUBMIT:B,KFC_CARD_HAS_NO_BALANCE:G,BLOCK_ERROR_MESSAGE:V,CARD_NUMBER_VALIDATION_MESSAGE:q,PIN_NUMBER_VALIDATION_MESSAGE:Y,CARD_NUMBER_LABEL:z,PIN_NUMBER_LABEL:J,LINK_CARD:X}=g.a;Object(l.useEffect)((()=>{a&&(i||s||t(v.d.Home))}),[i,s,t,a]),Object(l.useEffect)((()=>{n(Object(u.b)())}),[]),Object(l.useEffect)((()=>{Z()}),[d]);const Z=async()=>{n(Object(u.l)(!1)),d<=0?(n(Object(u.k)(Object(N.translateWithI18Next)(G))),Q(),n(Object(u.b)())):d>0&&Object(k.kf)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===j||void 0===j?void 0:j.customerId),{isUserBlocked:!1,attemptsCount:0})},Q=()=>{(()=>{var e;const t=null===(e=Object(k.Vb)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===j||void 0===j?void 0:j.customerId)))||void 0===e?void 0:e.lastAttemptDate,a=new Date;a.setHours(0,0,0,0),t!==a.toDateString()&&Object(k.kf)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===j||void 0===j?void 0:j.customerId),{isUserBlocked:!1,attemptsCount:0,lastAttemptDate:a.toDateString()})})();const e=new Date;e.setHours(0,0,0,0),x<5&&!h?Object(k.kf)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===j||void 0===j?void 0:j.customerId),{isUserBlocked:!1,attemptsCount:Number(x)+1,lastAttemptDate:e.toDateString()}):(5===x||x>5)&&(Object(k.kf)("".concat(_.gd.CARD_ATTEMPT_DATA,"-").concat(null===j||void 0===j?void 0:j.customerId),{isUserBlocked:!0,attemptsCount:Number(x),lastAttemptDate:e.toDateString()}),M(Object(N.translateWithI18Next)(V)))};return Object(r.jsxs)("div",{className:"kfc-card-form align-items-center flex-column d-flex",children:[Object(r.jsx)(H.c,{onClick:()=>t(v.d.Home),className:"btn-back",children:"\u2794"}),Object(r.jsx)("h2",{className:"form-title",children:Object(N.translateWithI18Next)(w)}),Object(r.jsxs)("div",{className:"col-12 col-lg-8 p-0",children:[Object(r.jsx)("p",{children:Object(N.translateWithI18Next)(K)}),R&&Object(r.jsx)("div",{children:R}),s&&Object(r.jsxs)("div",{className:"kfc-link-form-error general-error",children:[Object(r.jsx)(y.a,{srcFile:A.a.Error,className:"location-alert-icon mr-1"}),Object(r.jsx)("div",{className:"error-msg",children:s})]}),Object(r.jsx)($,{type:"number",labelTxt:Object(N.translateWithI18Next)(z),inputId:"txt-kfccard",placeholder:Object(N.translateWithI18Next)(z),maxLength:50,value:I,errorMsg:C,handleOnChange:e=>{if(h)return;const t=e.target.value;p(t),/^\d{16}$/.test(t)&&/^\d{4}$/.test(f)?W(!0):W(!1)}}),Object(r.jsx)($,{type:"password",labelTxt:Object(N.translateWithI18Next)(J),inputId:"txt-kfcpin",placeholder:Object(N.translateWithI18Next)(J),maxLength:4,value:f,errorMsg:S,handleOnChange:e=>{if(h)return;const t=e.target.value;T(t),/^\d{16}$/.test(I)&&/^\d{4}$/.test(t)?W(!0):W(!1)}}),Object(r.jsx)("div",{className:"loyalty-fields loyalty-fields-btns",children:Object(r.jsx)(H.c,{"data-type":"primary",className:"button-contained kfc-button ".concat(f&&I?"filled-fields":"empty-fields"," ").concat(i?"loading":""),"data-loading":i,disabled:h||i,onClick:e=>{e.preventDefault(),h||(/^\d{16}$/.test(I)?E(""):E(Object(N.translateWithI18Next)(q)),/^\d{4}$/.test(f)?L(""):L(Object(N.translateWithI18Next)(Y)),D?(c(!0),n(Object(u.a)({translateCallback:N.translateWithI18Next,KFC_Card:I,KFC_PIN:f,linking:!0})),n(Object(u.l)(!0))):Q())},children:Object(N.translateWithI18Next)(X)})}),Object(r.jsx)("p",{style:{textAlign:"center",textDecoration:"underline"},children:Object(r.jsx)("a",{className:"btn-kfc-card btn-link btn-sm",href:"".concat(Object(m.a)(O.a)),children:"".concat(Object(N.translateWithI18Next)(U))})})]})]})},X=a(1055),Z=a(1078),Q=a(55);const{getInstance:ee}=Q.a;t.a=e=>{const[t,a]=Object(l.useState)(v.d.Home),[c,n]=Object(l.useState)(v.a.KFC),i=Object(o.b)(),s=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.userMiles})),{KFC_Card:d,KFC_PIN:j}=s||{},b=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus})),[O,m]=Object(l.useState)(!1),h=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.linkingStatus})),N=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.loading})),{MY_CHICKEN_MILES:y,SHOW_CODE:k,KFC_DETAILS:p,KFC_CARD_LINKING:f,PONTA_DETAILS:_,RAKUTEN_DETAILS:T}=g.a,C=Object(o.c)((e=>{var t;return null===e||void 0===e||null===(t=e.loyaltyMileageReducer)||void 0===t?void 0:t.pickedData}));Object(l.useEffect)((()=>{s&&s.MilesUUID||(!ee().isValidAccessToken&&null!==b&&void 0!==b&&b.loggedIn&&Q.a.getInstance().refreshAuthentication(),i(Object(u.e)())),d&&j&&i(Object(u.a)({translateCallback:G.translateWithI18Next,KFC_Card:d,KFC_PIN:j,linking:!1}))}),[i,d,j,s]),Object(l.useEffect)((()=>{const e=()=>{const t=document.documentElement.scrollTop||document.body.scrollTop;t>0&&(window.requestAnimationFrame(e),window.scrollTo(0,t-t/8))};t&&e()}),[t]);const R=e=>{i(Object(u.b)()),i(Object(u.o)(e)),m(!1),a(v.d.Home)};let M=Object(r.jsx)(J,{setStep:a}),S=Object(G.translateWithI18Next)(f);if(t===v.d.Home){var W,w;const e=(null===C||void 0===C||null===(W=C.stage)||void 0===W||null===(w=W.code)||void 0===w?void 0:w.toLowerCase())||v.c.REGULAR.toLowerCase();S=Object(G.translateWithI18Next)(y),M=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(D.a,{lg:"5",xs:"12",className:"mb-lg-0 mb-4 mileage-loyalty-status ".concat(e),children:[Object(r.jsx)("div",{className:"membership-id d-flex justify-content-center text-white",children:null===s||void 0===s?void 0:s.MilesMemberId}),Object(r.jsx)(x,{}),Object(r.jsx)(I,{setStep:a})]}),Object(r.jsx)(D.a,{lg:"7",xs:"12",className:"p-0",children:Object(r.jsx)(E,{setStep:a,setCartType:n,setShowConfirmationModal:m,handleUnlinkedAction:R,showConfirmationModal:O})})]})}else if(t===v.d.MILE_DETAILS)S=Object(G.translateWithI18Next)(y),M=Object(r.jsx)(K,{setStep:a});else if(t===v.d.RANKING){var P,U;S=Object(G.translateWithI18Next)(y);const e=(null===C||void 0===C||null===(P=C.stage)||void 0===P||null===(U=P.code)||void 0===U?void 0:U.toLowerCase())||v.c.REGULAR.toLowerCase();M=Object(r.jsx)(z,{setStep:a,stageColor:e})}else t===v.d.CARD_DETAILS_VIEW&&(c===v.a.KFC?S=Object(G.translateWithI18Next)(p):c===v.a.PONTA?S=Object(G.translateWithI18Next)(_):c===v.a.RAKUTEN&&(S=Object(G.translateWithI18Next)(T)),M=Object(r.jsx)(D.a,{lg:"9",xs:"12",children:Object(r.jsx)(X.a,{setStep:a,cardType:c,setShowConfirmationModal:m,handleUnlinkedAction:R,showConfirmationModal:O})}));return Object(r.jsxs)("div",{className:"chicken-mile container",children:[(null===h||void 0===h?void 0:h.message)&&Object(r.jsx)(Z.a,{success:null===h||void 0===h?void 0:h.success,msg:null===h||void 0===h?void 0:h.message}),N&&t===v.d.Home&&Object(r.jsx)("div",{className:"overlay-Loader"}),Object(r.jsxs)(L.a,{children:[Object(r.jsxs)(D.a,{lg:"11",xs:"12",className:"d-flex justify-content-center justify-content-lg-between my-5 chicken-mile_heading pl-0",children:[Object(r.jsx)("h4",{className:"chicken-mile_heading4",children:S}),t!==v.d.Home&&Object(r.jsxs)("button",{onClick:()=>a(v.d.Home),className:"d-none d-lg-flex show-qr-btn",children:[Object(G.translateWithI18Next)(k)," ",Object(r.jsx)("img",{className:"back-CTA-Arrow",src:A.a.CTA_Arrow,alt:"back-btn"})]})]}),Object(r.jsx)(D.a,{lg:"12",xs:"12",className:"d-lg-flex justify-content-lg-center px-lg-0 ".concat(t!==v.d.Home&&t!==v.d.MILE_DETAILS&&t!==v.d.RANKING?"sub-chicken-mile-view":""),children:M})]})]})}},1304:function(e,t,a){"use strict";a.r(t);var l=a(3),c=a.n(l),n=a(1120),i=a(1078),s=a(28),r=a(4),d=a(5),o=a(25),j=a(2);var b=e=>{const t=Object(o.c)((e=>e.appStateReducer.userStatus)),a=null===t||void 0===t?void 0:t.loggedIn,{LOGGED_IN_MSG:b}=r.a,{tenantReducer:u}=Object(o.c)((e=>e));return Object(l.useEffect)((()=>{((e,t)=>{var a;const l=null===t||void 0===t||null===(a=t.deeplink)||void 0===a?void 0:a.pontaRedirectUri;if(null!==d.zd&&void 0!==d.zd&&Object(d.zd)(null===e||void 0===e?void 0:e.location)&&l){var c,n,i;const t=null===(c=new URLSearchParams(e.location.search))||void 0===c?void 0:c.get("w"),a=null===(n=new URLSearchParams(e.location.search))||void 0===n?void 0:n.get("e"),s=t?"?w=".concat(t):"?e=".concat(a);null===e||void 0===e||null===(i=e.location)||void 0===i||i.assign("".concat(l).concat(s))}})(window,u)}),[]),Object(j.jsx)(c.a.Fragment,{children:a?Object(j.jsx)(n.a,{}):Object(j.jsx)(i.a,{success:!1,msg:Object(s.translateWithI18Next)(b),infinit:!0})})};t.default=b},937:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i}));const l={HOME:"Home",CARD_DETAILS_VIEW:"Card Details View",KFC_FORM:"KFC form",MILE_DETAILS:"mile details",RANKING:"Ranking"},c={KFC:"kfc",PONTA:"ponta",RAKUTEN:"rakuten"},n={PLATINUM:"platinum",REGULAR:"regular",BRONZE:"bronze",SILVER:"silver",GOLD:"gold"},i={milesMemberId:"I",stageNumber:"R",pontaId:"P",kfcCard:"K",rakutenId:"RK",expirationTime:"ED"}}}]);