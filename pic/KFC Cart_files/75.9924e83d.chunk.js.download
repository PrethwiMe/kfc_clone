(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[75,145],{1005:function(e,t,o){"use strict";var l=o(24),n=o(50),i=o(174),a=o.n(i),s=o(3),r=o.n(s),d=o(191),c=["bsPrefix","className","noGutters","as"],u=["xl","lg","md","sm","xs"],v=r.a.forwardRef((function(e,t){var o=e.bsPrefix,i=e.className,s=e.noGutters,v=e.as,b=void 0===v?"div":v,O=Object(n.a)(e,c),j=Object(d.a)(o,"row"),h=j+"-cols",S=[];return u.forEach((function(e){var t,o=O[e];delete O[e];var l="xs"!==e?"-"+e:"";null!=(t=null!=o&&"object"===typeof o?o.cols:o)&&S.push(""+h+l+"-"+t)})),r.a.createElement(b,Object(l.a)({ref:t},O,{className:a.a.apply(void 0,[i,j,s&&"no-gutters"].concat(S))}))}));v.displayName="Row",v.defaultProps={noGutters:!1},t.a=v},1303:function(e,t,o){"use strict";o.r(t);var l=o(3),n=o.n(l),i=o(61),a=o(37),s=o.n(a),r=o(18),d=o.n(r),c=o(111),u=o(25),v=o(822),b=o(318),O=o(63),j=o(267),h=o(908),S=o(335),g=o(14),p=o(76),E=o(1005),f=o(15),m=o(43),C=o(0),A=o(5),D=o(49),I=o(2);const{DISPOSITION_METHOD:N,SET_FIND_A_KFC_VIEW:x,SEARCH_ORDER_DATA:T}=g.a;var R=e=>{var t;const{userOrderState:o,userOrderStateDispatch:a}=Object(l.useContext)(p.a)||{},r=Object(u.b)(),[g,R]=Object(l.useState)(Object(A.Vd)(window.innerWidth)),[y,L]=Object(l.useState)({page:"",seoObj:{}}),w=Object(i.g)(),[_,k]=Object(l.useState)({}),F=Object(u.c)((e=>({homePageContent:s()(e,"contentReducer.response",null),findAKFCContent:s()(e,"contentReducer.findAKFCContentData",null)})));Object(l.useEffect)((()=>{window.scrollTo(0,0)}),[]),Object(l.useEffect)((()=>(r(Object(O.u)()),()=>{r(Object(O.u)())})),[o.findAKFC,r]);const B=()=>{const e=Object(A.Vd)(window.innerWidth);R(e)};Object(l.useEffect)((()=>{window.addEventListener(C.we,B)}),[g]),Object(l.useEffect)((()=>{a({type:x,value:{findAKFC:!0}})}),[a]),Object(l.useEffect)((()=>{if(o.findAKFC){const e=setInterval((()=>{window.google&&(clearInterval(e),M())}),100)}}),[o.findAKFC]),Object(l.useEffect)((()=>{r(Object(j.g)())}),[r]),Object(l.useEffect)((()=>{if(!d()(F.findAKFCContent)&&!d()(F.homePageContent)){var e,t,o,l,n,i,a;const s=null!==(e=Object(b.m)(null===F||void 0===F||null===(t=F.homePageContent)||void 0===t||null===(o=t.seoStructureData)||void 0===o?void 0:o.seo))&&void 0!==e?e:{};L({page:C.jc,seoObj:s}),k(Object(b.q)(null===(l=F.findAKFCContent)||void 0===l||null===(n=l.findAKFCResp)||void 0===n||null===(i=n.items)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.fields))}}),[null===F||void 0===F?void 0:F.homePageContent,F.findAKFCContent,w]);const M=()=>{Object(S.c)();const e=Object(A.Jd)(o.dispositionNew)?JSON.parse(localStorage.getItem(C.gd.DISPOSITION_NEW)):o.dispositionNew,t=(null===e||void 0===e?void 0:e.type)||C.Jb.PICKUP;a({type:N,value:{dispositionType:t}}),a({type:T,value:{showSearchStore:!0,configSearchScreen:c.a}}),localStorage.setItem(C.gd.CONFIG_SEARCH_SCREEN,c.a)};return Object(I.jsx)(n.a.Fragment,{children:Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(h.a,{...y}),Object(I.jsx)("div",{className:"findkfc-container","data-testid":"findkfc-container-test",children:Object(I.jsxs)("div",{className:"findkfc-container-content",children:[Object(I.jsxs)("div",{className:"findkfc-header-container",children:[Object(I.jsx)(E.a,{className:"findkfc-stripes-section",children:Object(I.jsx)(m.a,{srcFile:(P=g,P?f.a.StripsIconMobile:f.a.StripesIcon),className:"stripes-img"})}),Object(I.jsx)("h2",{className:"findkfc-header-title",children:_.headLine}),Object(I.jsx)("span",{className:"findnearkfc-text",children:_.subHeadLine})]}),Object(I.jsx)("div",{className:"findkfc-search-module","data-testid":"findkfc-search-module-test",children:o.findAKFC&&(null===o||void 0===o||null===(t=o.searchStoreData)||void 0===t?void 0:t.showSearchStore)&&Object(I.jsx)(v.SearchStoreModule,{finAKFCContentData:_,onStoreSelectFinish:D.y,isMobile:g})})]})})]})});var P};t.default=R},822:function(e,t,o){"use strict";o.r(t),o.d(t,"filterStores",(function(){return we})),o.d(t,"SearchStoreModule",(function(){return _e}));var l=o(3),n=o.n(l),i=o(76),a=o(121),s=o(2);const r=e=>{const{handleClose:t,handleGoBack:o,orderModeTypeItem:l,headerText:i,modalTitleId:r="",className:d,backDataTestId:c}=e;return Object(s.jsx)(n.a.Fragment,{children:Object(s.jsx)(a.a,{"data-testid":"searchStoreCardModal",id:"searchStoreCard",role:"dialog",modalTitleId:r,show:!0,classNames:"".concat(d," extra-small-modal"),showCloseBtn:!0,showBackBtn:!0,closeButtonHandler:t,backButtonHandler:o,modalTitle:i,autoFocus:!0,backDataTestId:c,children:l})})};var d=n.a.memo(r),c=o(14),u=o(38),v=o(354),b=o(155),O=o(63),j=o(318),h=o(25),S=o(269),g=o(6),p=o(5),E=o(22),f=o(77),m=o(351),C=o(43),A=o(212),D=o(1006),I=o(1007),N=o(49),x=o(216),T=o(266),R=o(36),y=o(15),L=o(4),w=o(69),_=o(110);const{Error:k}=y.a,F=e=>{var t,o;const{show:l,address:n,suggestedAddress:i,onRetryClickHandler:a,onUseThisAddressHandler:r,changeAddressErrorMsgStyle:d}=e,{LOCATION_WARNING_MESSAGE:c,RETRY_BTN_TEXT:u,USE_THIS_ADDRESS_TEXT:v}=L.a,b=Object(_.b)(w.b);return l?Object(s.jsx)("div",{className:"err-container",children:Object(s.jsxs)("div",{"data-testid":"alert-locationid",className:"alert-location-popup",children:[!d&&Object(s.jsx)(C.a,{srcFile:k,className:"location-alert-icon"}),Object(s.jsx)("div",{className:(O=d,O?"location-error-message location-error-message-change-style":"location-error-message"),children:Object(g.translateWithI18Next)(c)}),Object(s.jsxs)("div",{className:"location-error-address",children:[Object(p.id)(null===i||void 0===i||null===(t=i[0])||void 0===t?void 0:t.description,null!==(o=Object(j.M)(b))&&void 0!==o?o:n),";"]}),Object(s.jsxs)("div",{className:"location-error-button-section",children:[Object(s.jsx)(R.a,{className:"button whiteButton blackBorder location-warning-button mr one-line-text",onClick:a,"data-testid":"location-retry-btn",children:Object(g.translateWithI18Next)(u)}),Object(s.jsx)(R.a,{className:"button whiteButton blackBorder location-warning-button ml one-line-text","data-testid":"use-this-address",onClick:r,children:Object(g.translateWithI18Next)(v)})]})]})}):null;var O},B=n.a.memo(F),{GoogleMapLocationImage:M}=y.a,P=e=>{const{show:t=!1,suggestedAddress:o="",confirmDeliveryAddressLineHandler:i,onChangeDeliveryAddressLine:a,deliveryAddressLineVal:r,shouldEnableConfirmButton:d,apartmentDetailsRegex:c}=e,{DELIVERY_ADDRESS_LINE_LABEL:v,CONFIRM_BTN_TEXT:b,PLEASE_FILL_OUT_THIS_FIELD:O}=L.a,j=Object(_.a)(),h=Object(l.useCallback)((e=>{var t;c.test(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)&&(a(e.target.value),j(Object(w.d)({key:null===u.a||void 0===u.a?void 0:u.a.SELECTED_LINE_ADDRESS_VAL,value:e.target.value})))}),[a]);return Object(s.jsx)(n.a.Fragment,{children:t?Object(s.jsxs)("div",{"data-testid":"delivery-address-line-container",className:"err-container",children:[Object(s.jsxs)("div",{className:"alert-location-popup unit-number-container",children:[Object(s.jsxs)("div",{className:"icon-with-address",children:[Object(s.jsx)(C.a,{srcFile:M,alt:" ",className:"google-location-img"}),Object(s.jsx)("span",{className:"suggested-address-unit",children:o})]}),Object(s.jsxs)("div",{className:"unit-number-input-div",children:[Object(s.jsx)("input",{"data-testid":"delivery-address-line-input",type:"text",value:r,onChange:h,required:!0,title:Object(g.translateWithI18Next)(O)}),Object(s.jsx)("label",{children:Object(g.translateWithI18Next)(v)})]})]}),Object(s.jsx)("div",{className:"text-center",children:Object(s.jsx)(R.a,{className:"button blackButton blackBorder delivery-confirm-button","data-testid":"delivery-address-line-confirm",onClick:()=>i(r),disabled:d&&!(null!==r&&void 0!==r&&r.length),children:Object(g.translateWithI18Next)(b)})})]}):null})};var U=n.a.memo(P),V=o(915),H=o(980),K=o(0),W=o(997);const J=e=>{var t;const{showKfcCount:o,showMapLink:l,typeOfView:i,toggleView:a,kfcStoresCountText:r,kfcCount:d}=e,c=Object(h.c)((e=>{var t,o,l;return(null===(t=e.allStoresReducer)||void 0===t?void 0:t.isNearByStoresLoading)||(null===(o=e.storesReducer)||void 0===o?void 0:o.isStoreStatusLoading)||(null===(l=e.storesReducer)||void 0===l?void 0:l.isFavoriteStoreStatusLoading)}));return Object(s.jsxs)(n.a.Fragment,{children:[Object(s.jsxs)("div",{className:"kfc-near-you-section",children:[o?Object(s.jsx)("div",{className:"kfc-count",children:null===(t=Object(g.translateWithI18Next)(r))||void 0===t?void 0:t.replace("%storeCount%",d)}):null,l?Object(s.jsx)("div",{className:"list-map-link-section","data-testid":"toggle-view-test",onClick:()=>a(),children:Object(s.jsxs)(A.a,{className:"list-map-link",children:[Object(s.jsx)("span",{children:Object(s.jsx)(C.a,{"data-testid":"",srcFile:null===i||void 0===i?void 0:i.imageSrc,alt:"map",className:"map-img"})}),Object(g.translateWithI18Next)(null===i||void 0===i?void 0:i.text)]})}):null]}),c&&Object(s.jsx)("div",{className:"placeholder",children:Array(8).fill().map((()=>Object(s.jsx)(Y,{})))})]})},Y=()=>Object(s.jsxs)("div",{className:"table store-card-container",children:[Object(s.jsx)("div",{className:"loading card-title shorter-s"}),Object(s.jsx)("div",{className:"loading table-content"}),Object(s.jsx)("div",{className:"loading table-content"})]});var G=n.a.memo(J),q=o(981),z=o(111),X=o(61),Q=o(1008),Z=o(46),$=o(331);const{Error_Yellow:ee,MapImage:te}=y.a||{},{RETAIN_ADDRESS:oe,CONFIG_SEARCH_SCREEN:le,FROM_SCHEDULE_ORDER_CONTAINER:ne,ADDRESS_COORDS:ie}=K.gd||{},{SEARCH_ORDER_DATA:ae,DISPOSITION_METHOD:se,REORDER_MODAL_OPEN:re,REORDER_STORE_CHANGED:de,SCHEDULE_ORDER_DATA:ce}=c.a||{},{MIN_SEARCH_CHARACTER_LIMIT:ue,SET_LOCATION_BUTTON_FLAG:ve,SELECTED_FAV_ADDRESS:be,FORMATTED_DELIVERY_ADDRESS:Oe,SELECTED_LINE_ADDRESS_VAL:je,IS_FAV_ADDRESS_SELECTED:he,STREET_NUMBER:Se,NON_FORMATTED_ADDRESS:ge,TYPE_DELIVERY:pe}=u.a,{RETRY_BTN_TEXT:Ee,VIEW_MAP_BTN_TEXT:fe,ADDRESS_NOT_FOUND_ERROR:me,GOOGLE_API_ERROR:Ce,LOCATION_BLOCKED_ERROR:Ae,KFC_URL:De,PLEASE_ENTER_YOUR_LOCATION:Ie,MAP:Ne}=L.a,{ENTER:xe}=K.Xf.KEY_CHAR_CODE||{},{SET_LOCATION_INFO:Te}=Z.a;let Re=!1;const ye=e=>{let{orderSummaryModalClose:t,eligibleStoresForList:o,loggedIn:l,onClickMapHandler:n,storeOpenBtnText:i,findAKFC:a,storeNumberFormat:r}=e;return Object(s.jsx)(s.Fragment,{children:t&&(null===o||void 0===o?void 0:o.map((e=>Object(s.jsx)(q.a,{store:e,loggedIn:l,onClickMapHandler:n,storeOpenBtnText:i,findAKFC:a,storeNumberFormat:r},null===e||void 0===e?void 0:e.id))))})};var Le=e=>{var t,o,n,a,r,d,c,v,b,O,S,f,m,R,L;const{userPositionHandler:k,eligibleStoreData:F,dispositionType:M,seteligibleStoreData:P,storeSelection:J,formContent:Y,eligibleFavoriteStoreData:Z,findAKFC:re,finAKFCContentData:de={},isMobile:Le,setShowStores:we=null,showStores:_e=null,currentMarket:ke}=e,Fe=Object(l.useRef)(null),Be=Object(X.g)(),Me=Object(_.a)(),{userOrderState:Pe,userOrderStateDispatch:Ue}=Object(l.useContext)(i.a),{searchStoreData:Ve,scheduleOrderData:He,setLocationClicked:Ke,showLocationConfirmModal:We,showNotInRadiusError:Je,notInRadiusRestaurant:Ye,orderSummaryModalClose:Ge}=Pe,{configSearchScreen:qe=localStorage.getItem(le)}=Ve,ze=JSON.parse(localStorage.getItem(ne)),[Xe,Qe]=Object(l.useState)(!1),[Ze,$e]=Object(l.useState)(!1),[et,tt]=Object(l.useState)(!1),[ot,lt]=Object(l.useState)(!1),[nt,it]=Object(l.useState)(!1),[at,st]=Object(l.useState)([]),[rt,dt]=Object(l.useState)(!1),[ct,ut]=Object(l.useState)({}),[vt,bt]=Object(l.useState)(""),[Ot,jt]=Object(l.useState)(!1),[ht,St]=Object(l.useState)(""),[gt,pt]=Object(l.useState)(""),[Et,ft]=Object(l.useState)({}),mt=Object(h.c)((e=>{var t,o;return null===e||void 0===e||null===(t=e.tenantReducer)||void 0===t||null===(o=t.savedAddressPage)||void 0===o?void 0:o.showStateCityAddAddress})),[Ct,At]=Object(l.useState)({}),[Dt,It]=Object(l.useState)(null),[Nt,xt]=Object(l.useState)(!1),Tt=Object(h.c)((e=>e.appStateReducer.userStatus)),{loggedIn:Rt}=Object(p.kd)(Tt),{savedAddresses:yt,favouriteStores:Lt}=Object(h.c)((e=>null===e||void 0===e?void 0:e.profileReducer)),{componentOptions:wt,savedAddressPage:_t,useLatLngForReverseGeocode:kt,isShowDefulteMapForDelivery:Ft,isUberServiceableEnabled:Bt,enableDeliveryMenuOption:Mt}=Object(h.c)((e=>null===e||void 0===e?void 0:e.tenantReducer)),Pt=K.Ye,Ut=null!==(t=null===_t||void 0===_t?void 0:_t.showAddressWithApartment)&&void 0!==t&&t,Vt=null===wt||void 0===wt||null===(o=wt.web)||void 0===o?void 0:o.dispositionConfig,Ht=null===wt||void 0===wt||null===(n=wt.web)||void 0===n||null===(a=n.restaurantDetailPage)||void 0===a?void 0:a.storeNumberFormat,Kt=null===wt||void 0===wt||null===(r=wt.web)||void 0===r||null===(d=r.dispositionConfig)||void 0===d?void 0:d.autoSelectDeliveryStore,Wt=null===wt||void 0===wt||null===(c=wt.web)||void 0===c||null===(v=c.dispositionConfig)||void 0===v||null===(b=v.deliveryStores)||void 0===b?void 0:b.shouldEnableConfirmButton,Jt=null===wt||void 0===wt||null===(O=wt.web)||void 0===O||null===(S=O.dispositionConfig)||void 0===S?void 0:S.apartmentDetailsRegex,Yt=null===wt||void 0===wt||null===(f=wt.web)||void 0===f||null===(m=f.storeSearch)||void 0===m?void 0:m.changeAddressErrorMsgStyle,Gt=void 0!==Pe.isMapViewConfirmBtnFlow&&(null===M||void 0===M?void 0:M.toUpperCase())===pe?Pe.isMapViewConfirmBtnFlow:null===wt||void 0===wt||null===(R=wt.web)||void 0===R||null===(L=R.storeSearch)||void 0===L?void 0:L.isMapViewConfirmBtnFlow,{enableScheduleOrder:qt=!1}=Vt,zt="".concat(M,"_").concat(qe),Xt=Gt&&M===pe,{placeholder:Qt,shouldShowLocationWarning:Zt,shouldShowDeliveryAddressLine:$t,shouldHandleKeyPress:eo,serviceUnavailableError:to,shouldShowSingleStore:oo,shouldShowStoresList:lo,shouldShowKfcStoresCount:no,shouldShowMapListToggleLink:io,kfcStoresCountText:ao,shouldShowLocationLink:so,shouldPopulateFirstSuggestion:ro,storeOpenBtnText:co,filteredTypes:uo,filterConditions:vo}={...null===z.d||void 0===z.d?void 0:z.d[zt],...null===Vt||void 0===Vt?void 0:Vt[zt]},{shouldShowSavedAddress:bo}=(!Bt||(null===M||void 0===M?void 0:M.toUpperCase())!==K.Jb.DELIVERY)&&{...null===z.d||void 0===z.d?void 0:z.d[zt],...null===Vt||void 0===Vt?void 0:Vt[zt]},Oo=Object(_.b)(w.b),{errMsg:jo,firstBtnText:ho,firstBtnHandler:So,secondBtnHandler:go,secondBtnText:po,firstBtnClassName:Eo}=to||{},fo=!!(re||qt||Xt)||oo,mo=Object(h.c)((e=>{var t,o,l,n;return Object(p.ye)(null===(t=e.storesReducer)||void 0===t?void 0:t.isGoogleDistanceLoading,null===(o=e.storesReducer)||void 0===o?void 0:o.isStoreStatusLoading,null===(l=e.storesReducer)||void 0===l?void 0:l.isFavoriteStoreStatusLoading,null===(n=e.allStoresReducer)||void 0===n?void 0:n.isNearByStoresLoading)}));Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY&&localStorage.removeItem(oe);const Co=()=>{ut({}),Xt&&dt(!1),we(!1),$e(!0)},Ao=Object(l.useCallback)((()=>{var e;Qe(!1),ut({}),ft({}),it(!1),null===Fe||void 0===Fe||null===(e=Fe.current)||void 0===e||e.select()}),[]);Object(l.useEffect)((()=>{(null===Oo||void 0===Oo?void 0:Oo.selectedLineValueAddress)&&pt(null===Oo||void 0===Oo?void 0:Oo.selectedLineValueAddress)}),[Oo]);const Do=Object(l.useCallback)((e=>{Object(j.I)(eo,(null===e||void 0===e?void 0:e.keyCode)===xe,Fe,Ue);const t=Object(p.xe)(eo,(null===e||void 0===e?void 0:e.keyCode)===xe,!(null!==at&&void 0!==at&&at.length));Object(j.K)(ro,(null===e||void 0===e?void 0:e.keyCode)===xe,at,bt,vt);let o={showError:t,errMsg:Object(g.translateWithI18Next)(me),errDesc:null,firstBtnText:Object(g.translateWithI18Next)(Ee),secondBtnText:Object(g.translateWithI18Next)(fe),firstBtnCTA:Ao,secondBtnCTA:Co},l={showError:t,errMsg:Object(g.translateWithI18Next)(jo),errDesc:null,firstBtnText:Object(g.translateWithI18Next)(ho),secondBtnText:Object(g.translateWithI18Next)(po),firstBtnCTA:null===_o||void 0===_o?void 0:_o[So],secondBtnCTA:null===_o||void 0===_o?void 0:_o[go],firstBtnClassName:Eo},n=Object(p.Tc)((null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY,o,l);(null===ct||void 0===ct||!ct.showError)&&ut(n),null!==o&&void 0!==o&&o.showError?(null===Et||void 0===Et||!Et.showError)&&ft(o):ft({}),$e(!1)}),[null===ct||void 0===ct?void 0:ct.showError,null===Et||void 0===Et?void 0:Et.showError,Ao,eo,null===at||void 0===at?void 0:at.length]),Io=async function(e,t){var o;let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];St(e),xt(!0),bt(e),Object(x.e)(e);const n=await Object(T.geocodeByAddress)(e),i=null===K.jf||void 0===K.jf?void 0:K.jf.some((t=>e.includes(t)));let a;if(Object(p.gf)(M,n,Bt),Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY&&!l){var s;a=Ct;const e={longitude:a.lng.toString(),latitude:null===(s=a)||void 0===s?void 0:s.lat.toString()};localStorage.setItem(ie,JSON.stringify(e)),$e(!1)}else a=await Object(T.getLatLng)(n[0]);var r;null!==Vt&&void 0!==Vt&&Vt.clearDliveryTextFilter&&M===pe?null!==(r=Object(j.x)(n))&&void 0!==r&&r.long_name?(k({userLat:a.lat,userLong:a.lng}),At(a)):it(!1):(k({userLat:a.lat,userLong:a.lng}),At(a));i&&(Me(Object(w.d)({key:null===u.a||void 0===u.a?void 0:u.a.SELECTED_LINE_ADDRESS_VAL,value:Object(j.y)(e)})),pt(Object(j.y)(e)),Me(Object(w.d)({key:Oe,value:t.replace("".concat(Object(j.y)(e),","),"")}))),Me(Object(w.d)({key:ge,value:t})),Me(Object(w.d)({key:Se,value:null===(o=Object(j.x)(n))||void 0===o?void 0:o.long_name}))},No=Object(l.useCallback)((async e=>{if(e.preventDefault(),P([]),Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY&&!et){var t;ze&&localStorage.setItem(ne,!1);const e=null===Pe||void 0===Pe||null===(t=Pe.scheduleOrderData)||void 0===t?void 0:t.deliveryAddress;Ho(e,Ct),Io(e,e)}else Io(et,ot)}),[eo,at,k,M,ot,et]);Object(l.useEffect)((()=>{ke===K.fb.TH&&null!==uo&&void 0!==uo&&uo.includes("address")&&Io(et,ot)}),[uo]);const xo=Object(l.useCallback)((async(e,t,o)=>{const l=!ze&&Object(j.o)(t,eo,at,e,M);if(tt(l),lt(e),Boolean(!(null!==He&&void 0!==He&&He.changeFlow)||Xt)&&bt(e),Boolean(!Xt||Boolean(Xt&&(null===He||void 0===He?void 0:He.changeFlow)))&&Io(l,e),M===K.Jb.DELIVERY&&Ft&&t){const e=await Object(T.geocodeByAddress)(l),t=await Object(T.getLatLng)(e[0]);At(t),$e(o!==z.b)}}),[eo,at,k,M,Xt,null===He||void 0===He?void 0:He.changeFlow]),To=Object(l.useCallback)((()=>{Xt&&$e(!1),it(!1),dt($t),bt(ht),Ut&&pt(ht.includes("/")?ht.split("/")[0]:""),Ut&&Me(Object(w.c)({key:je}))}),[ht,$t,Xt]),Ro=Object(l.useCallback)((e=>{Object(j.z)(e,fo,vt,gt,we,Ze,Ue,Pe,Kt,M)}),[vt,Ze,fo,gt,Ue]),yo=Object(l.useCallback)((()=>{Qe(!1),dt(!1),Ue({type:ae,value:{showSearchStore:!0,configSearchScreen:z.c}}),localStorage.setItem(le,z.c),Ro(F),Boolean(re||Ze||qt)&&Ko(Fe),Boolean(re||Ze||qt)&&Ko(Fe),Ue({type:Te,value:{selectedDeliveryAddress:vt,deliveryAddressLineVal:gt}}),Me(Object(w.d)({key:null===K.qe||void 0===K.qe?void 0:K.qe.REORDER_FLAG,value:{isReorderFlow:!1}}))}),[F,Ro,Ue,Xt]),Lo=Object(l.useCallback)((()=>{var e;Ue({type:ae,value:{showSearchStore:!0,configSearchScreen:z.a}}),localStorage.setItem(K.gd.CONFIG_SEARCH_SCREEN,z.a),bt(""),it(!1),dt(!1),ut({}),Qe(!1),ft({}),we(!1),(!Xt||Ft)&&$e(!1),null===Fe||void 0===Fe||null===(e=Fe.current)||void 0===e||e.focus(),It(null),xt(!1),Me(Object(w.c)({key:Oe})),Me(Object(w.c)({key:be})),Me(Object(w.c)({key:je})),Me(Object(w.c)({key:he})),pt(""),P([])}),[P,Xt]),wo=Object(l.useCallback)((e=>{ut({}),ft({}),it(!1),dt(!1),Xt&&e.trim()&&(lt(e),tt(e)),(null===Vt||void 0===Vt?void 0:Vt.clearDliveryTextFilter)&&Ue({type:ce,value:{showScheduleOrderCatering:!1,changeFlow:!1}}),e.trim()?bt(e):Lo(),It(null)}),[Lo,Xt]),_o=Object(l.useMemo)((()=>({focusInputBox:()=>{Fe.current.select(),ut({}),ft({})},gotoMenuPage:()=>{Be.push({pathname:Object(p.nc)(M,Mt)}),Ue({type:ae,value:{showSearchStore:!1}})},switchToPickup:()=>{Ue({type:se,value:{dispositionType:K.Jb.PICKUP}}),Ue({type:ae,value:{showSearchStore:!0,configSearchScreen:z.a}}),localStorage.setItem(le,z.a),Lo()},openDeliveryAddressScreen:()=>{Ue({type:ae,value:{showSearchStore:!0,configSearchScreen:z.a}}),localStorage.setItem(le,z.a),Ue({type:se,value:{dispositionType:K.Jb.DELIVERY}}),Fe.current.select(),ut({}),ft({})}})),[Be,Lo,Ue]),ko=Object(l.useCallback)((e=>{Zt||Ro(e)}),[Zt,Ro]),Fo=Object(l.useCallback)(((e,t,o,l)=>{if((null===e||void 0===e?void 0:e.length)>0)ut({}),ft({}),it(Zt),ko(e);else if(Object(p.xe)(null===l||void 0===l?void 0:l.length,vt,(null===M||void 0===M?void 0:M.toUpperCase())!==K.Jb.DELIVERY))ut({}),ft({}),P(l);else{let e=Object(p.xe)(vt!==ht,eo,(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY),l={showError:eo,errMsg:Object(g.translateWithI18Next)(me),errDesc:null,firstBtnText:Object(g.translateWithI18Next)(Ee),secondBtnText:Object(g.translateWithI18Next)(fe),firstBtnCTA:Ao,secondBtnCTA:Co},n={showError:Object(p.xe)(!t,o),errMsg:Object(g.translateWithI18Next)(jo),errDesc:null,firstBtnText:Object(g.translateWithI18Next)(ho),secondBtnText:Object(g.translateWithI18Next)(po),firstBtnCTA:null===_o||void 0===_o?void 0:_o[So],secondBtnCTA:null===_o||void 0===_o?void 0:_o[go],firstBtnClassName:Eo};Object(j.W)(e,l,n,ut)}}),[ko,_o,to,Zt,vt,M]),{handleSelectAddress:Bo,onUseThisAddressHandler:Mo,callOnAddressConfirmHandler:Po}=Object(x.a)({handleSelectAddressGlobal:xo,onUseThisAddressHandlerGlobal:To,onAddressSelectionGlobal:Fo}),Uo=Object(l.useCallback)((async()=>{Object(j.Q)(),Object(N.o)();const e=await Object(x.b)(Ue,mt);if(e){St(E.b.address),bt(E.b.address),Object(x.e)(E.b.address),st([{description:E.b.address}]);const{longitude:e,latitude:t}=E.b.coordinates;let o=await Object(T.geocodeByAddress)(E.b.address);Object(p.gf)(M,o),k({userLat:t,userLong:e}),At({lat:t,lng:e}),xt(!0)}Object(j.s)(Ue,!e)}),[Ue,k,M]),Vo=Object(l.useCallback)((e=>{Object(j.e)(e,K.Rf,st);const t=K.fe.includes(e);ut({showError:t,errMsg:Object(g.translateWithI18Next)(Ce),errDesc:null,firstBtnText:Object(g.translateWithI18Next)(Ee),secondBtnText:null,firstBtnCTA:Ao,secondBtnCTA:null})}),[Ao]);Object(l.useEffect)((()=>{if(Ke){(async()=>{await Uo()})(),Ue({type:ve,value:{setLocationClicked:!1}})}}),[Ke]),Object(l.useEffect)((()=>{const e=(null===ct||void 0===ct?void 0:ct.errMsg)===Object(g.translateWithI18Next)(Ce);Object(j.D)(e,Re),e&&(Re=!0)}),[null===ct||void 0===ct?void 0:ct.showError]),Object(l.useEffect)((()=>{const e=(null===vt||void 0===vt?void 0:vt.length)>2&&Xt;Qe(e);const t=Object(p.d)(vt,ue);jt(t)}),[vt,Xt]),Object(l.useEffect)((()=>{if(!re){var e,t;null===Fe||void 0===Fe||null===(e=Fe.current)||void 0===e||e.focus();const o=null===(t=localStorage)||void 0===t?void 0:t.getItem(oe);Object(j.c)(He,Ve,at,st,Bo,o,vt)}$e(!1)}),[qe,re]),Object(l.useEffect)((()=>{var e,t,o;Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY&&($e(!0),It(null===Pe||void 0===Pe||null===(e=Pe.scheduleOrderData)||void 0===e?void 0:e.storeId),Io(null===Pe||void 0===Pe||null===(t=Pe.scheduleOrderData)||void 0===t?void 0:t.deliveryAddress,null===Pe||void 0===Pe||null===(o=Pe.scheduleOrderData)||void 0===o?void 0:o.deliveryAddress,!0))}),[]),Object(l.useEffect)((()=>{Object(j.f)(Ue,We)}),[Ue]),Object(l.useEffect)((()=>{Xt?ht&&Po(F,mo,ht,Z):Po(F,mo,ht,Z)}),[F,mo,ht,Z]);const Ho=(e,t)=>{const o=Object(p.Ud)(window.innerWidth);var l,n,i,a;Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY?(wo(null===Pe||void 0===Pe||null===(l=Pe.scheduleOrderData)||void 0===l?void 0:l.deliveryAddress),st([{description:null===Pe||void 0===Pe||null===(n=Pe.scheduleOrderData)||void 0===n?void 0:n.deliveryAddress}])):(wo(e),st([{description:e}]));(At(t),o)?null===Fe||void 0===Fe||null===(i=Fe.current)||void 0===i||i.blur():null===Fe||void 0===Fe||null===(a=Fe.current)||void 0===a||a.focus();Ze&&Ko(Fe)},Ko=e=>{var t;let o=new KeyboardEvent("keydown",{altKey:!1,bubbles:!0,cancelBubble:!1,cancelable:!0,charCode:0,code:"Enter",composed:!0,ctrlKey:!1,currentTarget:null,defaultPrevented:!0,detail:0,eventPhase:0,isComposing:!1,isTrusted:!0,key:"Enter",keyCode:13,location:0,metaKey:!1,repeat:!1,returnValue:!1,shiftKey:!1,type:"keydown",which:13});null===e||void 0===e||null===(t=e.current)||void 0===t||t.dispatchEvent(o)},Wo=Object(l.useCallback)((e=>{$e(!0),we(!1),It(e)}),[]),Jo=Object(l.useCallback)((()=>{we(Ze),$e(!Ze),Object(j.E)(Ze,M)}),[Ze]),Yo=Object(p.xe)(null===yt||void 0===yt?void 0:yt.length,Rt,bo,!nt,!rt,!(null!==ct&&void 0!==ct&&ct.showError)),Go=!JSON.parse(ze)&&Object(p.xe)(nt,null===at||void 0===at?void 0:at.length,null===F||void 0===F?void 0:F.length);Object(l.useEffect)((()=>{Go&&Xt&&(null!==He&&void 0!==He&&He.changeFlow||Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY?yo():Mo())}),[Go,Xt,null===He||void 0===He?void 0:He.changeFlow]);const qo=Object(p.xe)(null===ct||void 0===ct?void 0:ct.showError,!mo,vt),zo=Object(p.xe)(We,so,!Ze),Xo=Object(j.T)(F,Lt,Pt,!Object(p.xe)(_e,!(null!==ct&&void 0!==ct&&ct.showError)),lo),Qo=Object(p.ye)(null===ct||void 0===ct?void 0:ct.showError,zo,Je,Go,qo,rt),Zo=Object(p.xe)(no,(null===F||void 0===F?void 0:F.length)>0,!mo,Nt,!Qo),$o=Object(p.xe)(vt,(null===F||void 0===F?void 0:F.length)>0,io,!mo,Nt,!Qo),el=Object(j.T)(F,Lt,Pt,Object(p.xe)(_e,!(null!==ct&&void 0!==ct&&ct.showError)),lo),tl=null!==Et&&void 0!==Et&&Et.showError?[]:Xo,ol=Ze?null===Xo||void 0===Xo?void 0:Xo.length:null===el||void 0===el?void 0:el.length,ll=Object(p.ye)(Ze,!so),nl=Object(p.xe)(ol,!Ze,Nt),il=Object(p.ye)(Qo,Zo,Ze),al=Object(p.xe)(re,!il,!nl);return Object(s.jsx)("div",{className:re?"".concat(Object(p.Tc)(il,"findkfc-delivery-show-container","findkfc-delivery-hide-container")," ").concat(Qo&&"findkfc-delivery-error-container"," ").concat(Object(p.Tc)(Ze,"mapview","listview")):"selectkfc-delivery-container","data-testid":"delivery-container",children:Object(s.jsxs)("div",{className:"delivery-module-form search-store-global","data-testid":"delivery-component",children:[Object(s.jsxs)("div",{id:"search-store-global-content",className:Object(j.u)(We),children:[Object(s.jsx)(V.a,{show:zo,errorMsg:Object(j.G)(Ae,De),errImage:ee,cssClass:"location-blocked"}),Object(s.jsxs)("div",{className:Object(p.Tc)(re,"findkfc-search-store-container","selectkfc-search-store-container"),children:[Object(s.jsx)(I.a,{loggedIn:Rt,formContent:Y,storeSelection:J,useCurrentLocation:Uo,hideLocationLink:ll,showLocationConfirmModal:We}),Object(s.jsx)(D.a,{...e,storeSelection:J,history:Be,inputOnChange:wo,address:vt,showAutoSuggestion:Ot,setSuggestedAddress:st,handleSelectAddress:Bo,alreadySearched:x.c,onClearTextHandler:Lo,keyPress:Do,inputRef:Fe,onSearchError:Vo,placeholder:Object(g.translateWithI18Next)(Qt),filteredTypes:uo,filterConditions:vo,showConfirmBtn:Xt,onClickHandler:No,confirm:Xe,isAddressNotChangable:Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY}),Object(s.jsx)("div",{className:"".concat(Object(p.Tc)(Je,"error-can-not-deliver","hide-error-container")),children:Object(s.jsx)(V.a,{show:Je,errorMsg:[Object(s.jsxs)("span",{className:"store-name",children:[Ye," "]}),Object(g.translateWithI18Next)(u.a.CAN_NOT_DELIVER_ERROR_MSG)],errImage:y.a.Error,cssClass:"error-sub-container"})}),!Xt||Ze||Go||_e||qo?null:Object(s.jsx)("div",{className:"map-button-form",children:Object(s.jsxs)("div",{className:"show-map-div","data-testid":"show-map-div",onClick:Co,children:[Object(s.jsx)("span",{className:"delivery-map-text",children:Object(g.translateWithI18Next)(Ie)}),Object(s.jsxs)(A.a,{className:"map-link",children:[Object(s.jsx)("span",{children:Object(s.jsx)(C.a,{"data-testid":"",srcFile:te,alt:" ",className:"map-img"})}),Object(g.translateWithI18Next)(Ne)]})]})}),!Xt&&Object(s.jsx)(B,{show:Go,onRetryClickHandler:Ao,address:ht,onUseThisAddressHandler:Mo,changeAddressErrorMsgStyle:Yt}),Object(s.jsx)(U,{show:rt,suggestedAddress:vt,confirmDeliveryAddressLineHandler:yo,onChangeDeliveryAddressLine:pt,deliveryAddressLineVal:gt,shouldEnableConfirmButton:Wt,apartmentDetailsRegex:Jt}),Object(s.jsx)(H.a,{show:qo,errorObj:ct}),Object(s.jsx)(W.a,{show:Yo,savedAddresses:yt,handleSelectAddress:Bo}),Object(s.jsx)(G,{showKfcCount:Zo,kfcCount:ol,showMapLink:$o,typeOfView:Object(j.X)(Ze),toggleView:Jo,kfcStoresCountText:ao})]}),Object(s.jsxs)("div",{className:re?"".concat(Object(p.Tc)(nl,"store-dynamic-card-container","store-no-card-container")):"selectkfc-card-container",children:[al&&Object(s.jsx)(C.a,{srcFile:Le?de.mobileImage:de.desktopImage,className:"findkfc-img"}),Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY?(e=>{var t;let{orderSummaryModalClose:o,eligibleStoresForList:l,loggedIn:n,onClickMapHandler:i,storeOpenBtnText:a,findAKFC:r,storeNumberFormat:d}=e;return Object(s.jsx)(s.Fragment,{children:o&&Bt&&(null===M||void 0===M?void 0:M.toUpperCase())===K.Jb.DELIVERY&&(null===l||void 0===l||null===(t=l.filter((e=>{var t;return Object($.e)(null===e||void 0===e||null===(t=e.summary)||void 0===t?void 0:t.deliveryPartner)})))||void 0===t?void 0:t.map((e=>Object(s.jsx)(q.a,{store:e,loggedIn:n,onClickMapHandler:i,storeOpenBtnText:a,findAKFC:r,storeNumberFormat:d},null===e||void 0===e?void 0:e.id))))})})({orderSummaryModalClose:Ge,eligibleStoresForList:el,loggedIn:Rt,onClickMapHandler:Wo,storeOpenBtnText:co,findAKFC:re,storeNumberFormat:Ht}):ye({orderSummaryModalClose:Ge,eligibleStoresForList:el,loggedIn:Rt,onClickMapHandler:Wo,storeOpenBtnText:co,findAKFC:re,storeNumberFormat:Ht})]})]}),Ze?Object(s.jsx)(Q.a,{eligibleStores:tl,defaultStoreId:Dt,loggedIn:Rt,selectedCoords:Ct,passAddress:Ho,configSearchKey:zt,useCurrentLocation:Uo,showLocationConfirmModal:We,findAKFC:re,favouriteStores:Lt,useLatLngForReverseGeocode:kt,markerDragValue:!0,...Bt&&{zoomLevel:19}}):null]})})};const we=function(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=e.filter((e=>{var t,o,l,n,i,a,s,r,d,c,u,v;return(null===e||void 0===e?void 0:e.id)&&(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&(null===e||void 0===e||null===(o=e.location)||void 0===o?void 0:o.longitude)&&(null===e||void 0===e||null===(l=e.summary)||void 0===l||null===(n=l.status)||void 0===n?void 0:n.currentStatus)&&(null===e||void 0===e||null===(i=e.summary)||void 0===i||null===(a=i.menu)||void 0===a||null===(s=a.catalogs)||void 0===s?void 0:s.length)&&(null===e||void 0===e||null===(r=e.summary)||void 0===r||null===(d=r.timings)||void 0===d||null===(c=d.operatingHours)||void 0===c?void 0:c.length)>0&&(null===e||void 0===e||null===(u=e.summary)||void 0===u||null===(v=u.timings)||void 0===v?void 0:v.asap)}));if(t){return o.filter((e=>e.summary.status.currentStatus===(null===c.a||void 0===c.a?void 0:c.a.CLOSED))).length===(null===e||void 0===e?void 0:e.length)?[]:o}return o},_e=e=>{var t,o,a,r,m,C,A,D;const{contentData:I={},onStoreSelectFinish:N,finAKFCContentData:x={},isMobile:T=!1}=e,{SEARCH_ORDER_DATA:R,DISPOSITION_DATA:y,ANALYTICS_LOCALISATION_SIGNIN:L,SET_ELIGIBLE_STORE:k,SET_FIND_A_KFC_VIEW:F,SET_REDIRECTION_PATH:B,REORDER_MODAL_OPEN:M,FROM_REORDER_MODAL_OPEN:P,REORDER_STORE_CHANGED:U,FAV_STORE_NOT_IN_RADIUS:V}=c.a,{DELIVERY:H,PICKUP:W}=K.Jb,J=Object(h.b)(),Y=Object(_.a)(),{FORMATTED_DELIVERY_ADDRESS:G,SELECTED_LINE_ADDRESS_VAL:q,SELECTED_FAV_ADDRESS:X,IS_FAV_ADDRESS_SELECTED:Q,STREET_NUMBER:$,TYPE_DELIVERY:ee}=u.a,{userOrderState:te,userOrderStateDispatch:oe}=Object(l.useContext)(i.a),{dispositionStateData:le,searchStoreData:ne,findAKFC:ie}=te,{dispositionType:ae=localStorage.getItem(K.gd.DISPOSITION_TYPE)}=Object(p.md)(le),{storeSearch:se={},tenantId:re,countryCode:de=[],componentOptions:ce,storelocatormaxreturncount:ue=10,ispolygonrequired:ve,savedAddressPage:be,isUberServiceableEnabled:Oe}=Object(h.c)((e=>Object(p.kd)(e.tenantReducer))),je=null===ce||void 0===ce||null===(t=ce.web)||void 0===t||null===(o=t.storeSearch)||void 0===o?void 0:o.addPickupAndDropoffLatLngInStatusApi,{isSendEntireStoreAsPayloadInStatusApi:he=!1}=(null===ce||void 0===ce||null===(a=ce.web)||void 0===a?void 0:a.storeSearch)||{},Se=Object(_.b)(w.b),ge=null!==(r=null===be||void 0===be?void 0:be.showAddressWithApartment)&&void 0!==r&&r,{storeSelection:pe,web:Ee={}}=ce,{shouldCheckDropOffAddress:fe=!1}=Ee,me=null===ce||void 0===ce||null===(m=ce.web)||void 0===m?void 0:m.dispositionConfig,Ce=null===ce||void 0===ce||null===(C=ce.web)||void 0===C||null===(A=C.dispositionConfig)||void 0===A?void 0:A.enableClickCollectScheduleOrder,{currentMarket:Ae=(null===de||void 0===de||null===(D=de[0])||void 0===D?void 0:D.toUpperCase()),storeCardLimit:De=ue,configSearchScreen:Ie=localStorage.getItem(K.gd.CONFIG_SEARCH_SCREEN)}=ne,Ne="".concat(null===ae||void 0===ae?void 0:ae.toUpperCase(),"_").concat(Ie),{modalHeaderTitle:xe,shouldShowDisposition:Te,shouldShowSearchStore:Re,shouldShowClosedStore:ye}={...null===z.d||void 0===z.d?void 0:z.d[Ne],...null===me||void 0===me?void 0:me[Ne]},{searchStoreModalContent:_e={}}=I,ke=xe,{formContent:Fe={},locationsContent:{storeData:Be=[]}}=_e,[Me,Pe]=n.a.useState(!1),[Ue,Ve]=n.a.useState({}),[He,Ke]=n.a.useState([]),[We,Je]=n.a.useState([]),[Ye,Ge]=n.a.useState([]),{maxDriveTimeMins:qe,distanceMetrics:ze,maxDeliveryDistanceMtrs:Xe,maxPickupDistanceMtrs:Qe,maxCateringDistanceMtrs:Ze,geohashprecision:$e,boundingBoxSizeMeters:et,shouldCallGoogleDistanceApi:tt,numOfStoresToShowDelivery:ot,boundingBoxSizeDivider:lt}=se,{allStores:nt=[],storesUpdated:it}=Object(h.c)((e=>e.allStoresReducer))||{},{storesWithStatus:at=[],favoriteStoresWithStatus:st}=Object(h.c)((e=>Object(p.kd)(e.storesReducer))),rt=e=>{e.stopPropagation(),e.preventDefault(),localStorage.removeItem(K.gd.SET_CART_CLEAR),localStorage.setItem(K.gd.RENDER_COMP,!0),oe({type:y,value:{showDisposition:!1}}),oe({type:R,value:{showSearchStore:!1}}),oe({type:B,value:{redirectionOrder:""}}),oe({type:M,value:{reorderModalOpen:!1}}),oe({type:P,value:{fromReorderFlag:!1}}),oe({type:U,value:{storeChanged:!1}}),oe({type:F,value:{findAKFC:window.location.pathname===K.Ae.FIND_STORE}}),Y(Object(w.c)({key:G})),Y(Object(w.c)({key:X})),!ge&&Y(Object(w.c)({key:q})),Y(Object(w.c)({key:Q})),Y(Object(w.c)({key:$})),oe({type:V,value:{showNotInRadiusError:!1,notInRadiusRestaurant:""}})};Object(l.useEffect)((()=>{const e=e=>{27===e.keyCode&&rt(e)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[]);const{favouriteStores:dt,savedAddresses:ct}=Object(h.c)((e=>e.profileReducer)),{localized:ut=!1}=Object(h.c)((e=>{var t;return null===(t=e.appStateReducer)||void 0===t?void 0:t.userStatus}));Object(l.useEffect)((()=>{Object(p.xe)(nt.length>0,it)&&bt(nt)}),[nt,it,null===dt||void 0===dt?void 0:dt.length,Ue]),Object(l.useEffect)((()=>{at.length>0&&ae!==K.T&&Et(at)}),[ae,at]),Object(l.useEffect)((()=>{const e=null===st||void 0===st?void 0:st.sort(((e,t)=>{var o,l,n,i;return(null===e||void 0===e||null===(o=e.distance)||void 0===o||null===(l=o.distance)||void 0===l?void 0:l.value)-(null===t||void 0===t||null===(n=t.distance)||void 0===n||null===(i=n.distance)||void 0===i?void 0:i.value)}));Ge(e)}),[st]),Object(l.useEffect)((()=>{Object(p.xe)((null===ae||void 0===ae?void 0:ae.toUpperCase())===H,tt)&&Ot(We)}),[We]),Object(l.useEffect)((()=>()=>{J(Object(O.u)())}),[ie,J]);const vt=(e,t)=>{const o={lat:e,lon:t,distanceFromCurrentLoc:et/lt,geohashprecision:$e},l=b.a.calculateGH(o);J(Object(O.v)(null===l||void 0===l?void 0:l.length))},bt=e=>{const t=Object(p.Ib)(null===ae||void 0===ae?void 0:ae.toUpperCase());let o=e.filter((e=>{var t,o;return Object(p.he)(e.id)&&Object(p.he)(null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.latitude)&&Object(p.he)(null===e||void 0===e||null===(o=e.location)||void 0===o?void 0:o.longitude)}));Object(p.Ad)(ae)&&ve&&(o=Object(j.S)(o,Ue));const l={stores:o,disposition:t,distanceMetrics:ze,driveTime:qe,distanceInMtrs:Object(p.Tc)((null===ae||void 0===ae?void 0:ae.toUpperCase())===H,Xe,Object(p.Tc)((null===ae||void 0===ae?void 0:ae.toUpperCase())===K.Jb.PICKUP,Qe,Ze)),noOfStores:Object(p.Tc)((null===ae||void 0===ae?void 0:ae.toUpperCase())===H,ot,o.length),channel:E.b.channel},n=b.a.checkAndProceed(l);Je(n),n&&((null===ae||void 0===ae?void 0:ae.toUpperCase())===H&&tt?Ot(n):(he&&(null===n||void 0===n?void 0:n.length)>ue&&n.splice(ue),St(n,t)))},Ot=e=>{let t=[];null===e||void 0===e||e.forEach((e=>{var o,l;t.push({lat:null===(o=e.location)||void 0===o?void 0:o.latitude,lng:null===(l=e.location)||void 0===l?void 0:l.longitude})})),Object(v.c)(t,[{lat:Ue.userLat,lng:Ue.userLong}],jt)},jt=e=>{let{allStoreDistance:t,originAddressText:o}=e;const l=Object(p.Ib)(ae.toUpperCase()),n={stores:ht(t,We),numberOfStores:Object(p.Tc)((null===ae||void 0===ae?void 0:ae.toUpperCase())===K.Jb.DELIVERY,ot,ue),disposition:l,distanceMetrics:ze,driveTime:qe,distanceInMtrs:Object(p.Tc)((null===ae||void 0===ae?void 0:ae.toUpperCase())===H,Xe,Object(p.Tc)((null===ae||void 0===ae?void 0:ae.toUpperCase())===K.Jb.PICKUP,Qe,Ze))},i=b.a.getSortedNearbyStores(n);(null===i||void 0===i?void 0:i.length)>0&&St(i,l)},ht=(e,t)=>null===t||void 0===t?void 0:t.map(((t,o)=>({...t,distance:e[o]}))),St=(e,t)=>{const o={data:Object(p.B)(e,t,null,fe,null===Se||void 0===Se?void 0:Se.latLong),store:e,tenantId:re,setStatusFlag:!1,isFavoritePage:!1};J(Object(O.d)(o))};Object(l.useEffect)((()=>{gt({userLat:Ue.userLat,userLong:Ue.userLong})}),[dt.length,Ue]);const gt=e=>{var t,o;const l=localStorage.getItem(K.gd.STORE_INFO),n=l&&void 0!==l&&JSON.parse(l),i=null!==ct&&void 0!==ct&&ct.length?ct.filter((e=>e.isPrimary)):[],a=n&&ut?n:(null===i||void 0===i?void 0:i.length)&&i[0];Object(v.a)(null===a||void 0===a||null===(t=a.location)||void 0===t?void 0:t.latitude,null===a||void 0===a||null===(o=a.location)||void 0===o?void 0:o.longitude,dt,pt)},pt=e=>{const t=Object(p.Tc)((null===ae||void 0===ae?void 0:ae.toUpperCase())===W,K.ee,ae),o=null===e||void 0===e?void 0:e.map((e=>{var t,o,l,n,i,a;return{availableServicesPerChannel:null===e||void 0===e?void 0:e.availableServicesPerChannel,distance:{distance:null===e||void 0===e?void 0:e.distance},duration:null===e||void 0===e?void 0:e.duration,id:null===e||void 0===e||null===(t=e.storeBasic)||void 0===t?void 0:t.id,name:null===e||void 0===e||null===(o=e.storeBasic)||void 0===o?void 0:o.dname,amenities:null===e||void 0===e||null===(l=e.storeBasic)||void 0===l?void 0:l.amenities,addresses:null===e||void 0===e||null===(n=e.storeBasic)||void 0===n?void 0:n.address,additionalAttributes:null===e||void 0===e||null===(i=e.storeBasic)||void 0===i?void 0:i.additionalProperties,location:null===e||void 0===e||null===(a=e.storeBasic)||void 0===a?void 0:a.location}})),l={data:Object(p.B)(o,t,null,fe,null===Se||void 0===Se?void 0:Se.latLong),store:o,tenantId:re,setStatusFlag:!1,isFavoritePage:!1};!ie&&l.data.length&&J(Object(O.h)(l))},Et=e=>{const t=we(e,Ce,ye);Ke(t),oe({type:k,value:{eligibleStore:t}})},ft=Object(s.jsx)(Le,{singInClickhandler:e=>{e.stopPropagation(),e.preventDefault(),localStorage.setItem(L,JSON.stringify(!0)),Object(j.O)(),Object(f.b)()},formContent:Fe,storeData:Be,onStoreSelectFinish:N,eligibleStoreData:He,storeCardLimit:De,userPositionHandler:e=>{J(Object(S.b)()),J(Object(O.u)()),je&&Y(Object(w.d)({key:K.qe.LAT_LONG,value:{lat:null===e||void 0===e?void 0:e.userLat,lng:null===e||void 0===e?void 0:e.userLong}})),Ve({userLat:e.userLat,userLong:e.userLong}),He&&Ke([]),vt(e.userLat,e.userLong),setTimeout((()=>{J(Object(S.a)())}),2e3)},currentMarket:Ae,dispositionType:null===ae||void 0===ae?void 0:ae.toUpperCase(),seteligibleStoreData:Ke,storeSelection:pe,eligibleFavoriteStoreData:Ye,findAKFC:ie,finAKFCContentData:x,isMobile:T,setShowStores:Pe,showStores:Me}),mt=Object(s.jsx)(d,{handleClose:rt,orderModeTypeItem:ft,headerText:Object(g.translateWithI18Next)(ke),handleGoBack:e=>{e.stopPropagation(),e.preventDefault(),Pe(!1),Oe&&(null===ae||void 0===ae?void 0:ae.toUpperCase())===ee?(oe({type:null===Z.a||void 0===Z.a?void 0:Z.a.ENABLE_ADDRESS_LOCALISATION,value:!0}),oe({type:null===Z.a||void 0===Z.a?void 0:Z.a.SHOW_MAP_VIEW_BUTTON,value:!1})):(oe({type:y,value:{showDisposition:Te}}),oe({type:R,value:{showSearchStore:Re,configSearchScreen:z.a,searchedPlaceNonLocalized:null===ne||void 0===ne?void 0:ne.searchedPlaceNonLocalized}}))},modalTitleId:"search-store",className:"search-store-global-container ".concat(Object(p.db)(Object(p.yd)(ae),"catering-modal")),backDataTestId:"back-btn-global-modal-id"});return null!==te&&void 0!==te&&te.findAKFC?ft:mt};_e.defaultProps=m.a;t.default=_e},908:function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var l=o(3),n=o(25),i=o(139),a=o(175),s=o(18),r=o.n(s),d=o(214),c=o(0),u=o(2);const v=(e,t)=>{if(e&&t){const o={};e.replace(/%(.*?)%/g,((e,t)=>{o[e]=t})),Object.entries(o).forEach((o=>{const[l,n]=o,i=((e,t)=>{var o;return null!==(o=e[t])&&void 0!==o?o:"N/A"})(t,n);if("string"==typeof i){const t=new RegExp(l,"ig");e=e.replace(t,i)}else{let t=JSON.parse(e);for(let e in t)t[e]===l&&(t[e]=i);e=JSON.stringify(t)}}))}return e},b=e=>{let{page:t,seoObj:o,seoTemplate:s}=e;const[b,O]=Object(l.useState)(null),[j,h]=Object(l.useState)(""),{seoContent:S}=Object(n.c)((e=>{var t,o,l;return{seoContent:null!==(t=null===e||void 0===e||null===(o=e.contentReducer)||void 0===o||null===(l=o.response)||void 0===l?void 0:l.seoStructureData)&&void 0!==t?t:null}}));return Object(l.useEffect)((()=>{var e,l,n,i,u,b;const j={...o,PageURL:null!==(e=null===(l=window)||void 0===l||null===(n=l.location)||void 0===n?void 0:n.href)&&void 0!==e?e:"",HomeURL:null!==(i=null===(u=window)||void 0===u||null===(b=u.location)||void 0===b?void 0:b.origin)&&void 0!==i?i:"/"};if(!r()(S)){var g,p;const e=null!==(g=null!==s&&void 0!==s?s:null===S||void 0===S||null===(p=S.seo)||void 0===p?void 0:p.find((e=>{var o;return(null===(o=e.fields)||void 0===o?void 0:o.title)===t})))&&void 0!==g?g:{},{fields:{templateData:o={},data:l={}}={}}=e,{template:n={}}=null!==S&&void 0!==S?S:{},i=Object(d.documentToHtmlString)(n);if(!r()(i)){let e=Object(a.a)(i.replace(/<p>|<\/p>/gi,""));e=v(e,o),e=v(e,j);const t=Object(a.a)(e);h(null===t||void 0===t?void 0:t.filter((e=>{var t;return!((null===e||void 0===e?void 0:e.type)===c.qf&&"N/A"===(null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.children))})))}if(!r()(l)){let e=JSON.stringify(l);e=v(e,j),O(e)}}}),[t,S,o,s]),Object(u.jsxs)(i.a,{children:[j,Object(u.jsx)("script",{type:"application/ld+json",children:b})]})};b.defaultProps={page:"",seoTemplate:null,seoObj:null}}}]);