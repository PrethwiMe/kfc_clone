(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[97],{1108:function(e,d,i){"use strict";var o=i(3),t=i(25),r=i(102),l=i(22),n=i(76),c=i(5),a=i(0),s=i(958),u=i(939),v=i(215),O=i(267),p=i(64),b=i(18),j=i.n(b),f=i(69),m=i(110),S=i(331);d.a=e=>{var d,i,b,R,D,I,h,E,C,T,y,g,w;const{orderDetails:A,updateSetOrderDetails:P,children:_}=e,k=Object(t.b)(),{userOrderState:N,userOrderStateDispatch:L}=Object(o.useContext)(n.a),{tenantReducer:F,appStateReducer:U,orderReducer:K,postOrderReducer:M,cartReducer:x,storesReducer:G,paymentsContentReducer:Q,helpReducer:Y,profileReducer:W,paymentsReducer:X,contentReducer:H,menuReducer:J}=Object(t.c)((e=>e)),V=Object(c.Jd)(N.dispositionNew)?JSON.parse(localStorage.getItem(a.gd.DISPOSITION_NEW)):N.dispositionNew,B=()=>{P({isMobileView:Object(c.Ud)(window.innerWidth)})},q=(null===(d=window)||void 0===d||null===(i=d.location)||void 0===i?void 0:i.pathname)===(null===a.Ae||void 0===a.Ae?void 0:a.Ae.ORDER_SUMMARY),Z=Object(m.b)(f.b);return Object(o.useEffect)((()=>(!j()(null===A||void 0===A?void 0:A.service)&&k(Object(O.n)(null===A||void 0===A?void 0:A.service)),()=>{k(p.a.resetReducer())})),[null===A||void 0===A?void 0:A.service]),Object(o.useEffect)((()=>(window.addEventListener(a.we,B),Object(v.j)()&&k(Object(r.e)()),Object(v.X)()&&k(Object(r.e)()),()=>{window.removeEventListener(a.we,B),P(s.n)})),[]),Object(o.useEffect)((()=>{k&&null!==F&&void 0!==F&&F.tenantId&&Object(s.w)({props:e,dispatch:k,tenantReducer:F,dispositionPaymentPage:V,updateSetOrderDetails:P})}),[k,null===F||void 0===F?void 0:F.tenantId]),Object(o.useEffect)((()=>{Object(s.t)({helpReducer:Y,updateSetOrderDetails:P})}),[Y]),Object(o.useEffect)((()=>{var e;const d=null===X||void 0===X||null===(e=X.addHopePayResponse)||void 0===e?void 0:e.reference;(null===A||void 0===A?void 0:A.tenantId)&&Object(v.j)()&&d&&d!==(null===A||void 0===A?void 0:A.miscPaymentReferenceId)&&P({miscPaymentReferenceId:d,status:null===a.Qd||void 0===a.Qd?void 0:a.Qd.MISC_PAYMENT_INPROGRESS})}),[null===X||void 0===X||null===(b=X.addHopePayResponse)||void 0===b?void 0:b.reference,null===A||void 0===A?void 0:A.tenantId]),Object(o.useEffect)((()=>{var e;const d=null===X||void 0===X||null===(e=X.giftCardPayResponse)||void 0===e?void 0:e.reference;(null===A||void 0===A?void 0:A.tenantId)&&Object(v.X)()&&d&&d!==(null===A||void 0===A?void 0:A.wiCodePurchaseId)&&P({wiCodePurchaseId:d,status:null===a.Qd||void 0===a.Qd?void 0:a.Qd.MISC_PAYMENT_INPROGRESS})}),[null===X||void 0===X||null===(R=X.giftCardPayResponse)||void 0===R?void 0:R.reference,null===A||void 0===A?void 0:A.tenantId]),Object(o.useEffect)((()=>{Object(v.X)()&&k&&(null===A||void 0===A?void 0:A.tenantId)&&(null===A||void 0===A?void 0:A.wiCodePurchaseId)&&Object(u.j)({dispatch:k,orderDetails:A,updateSetOrderDetails:P})}),[k,null===A||void 0===A?void 0:A.tenantId,null===A||void 0===A?void 0:A.wiCodePurchaseId]),Object(o.useEffect)((()=>{Object(v.j)()&&k&&(null===A||void 0===A?void 0:A.tenantId)&&(null===A||void 0===A?void 0:A.miscPaymentReferenceId)&&Object(u.i)({dispatch:k,orderDetails:A,updateSetOrderDetails:P})}),[k,null===A||void 0===A?void 0:A.tenantId,null===A||void 0===A?void 0:A.miscPaymentReferenceId]),Object(o.useEffect)((()=>{null!==U&&void 0!==U&&U.userStatus&&Object(s.q)({appStateReducer:U,updateSetOrderDetails:P})}),[null===U||void 0===U?void 0:U.userStatus]),Object(o.useEffect)((()=>{(null!==W&&void 0!==W&&W.favouriteOrders||null!==W&&void 0!==W&&W.savedAddresses)&&Object(s.u)({profileReducer:W,orderDetails:A,updateSetOrderDetails:P})}),[null===W||void 0===W?void 0:W.favouriteOrders,null===W||void 0===W?void 0:W.savedAddresses]),Object(o.useEffect)((()=>{var e,d;const i=sessionStorage.getItem(a.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT);var o;null!==U&&void 0!==U&&null!==(e=U.userStatus)&&void 0!==e&&e.loggedIn&&i!==(null===W||void 0===W||null===(d=W.basic)||void 0===d?void 0:d.id)&&(sessionStorage.removeItem(a.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT),P({customerId:null===W||void 0===W||null===(o=W.basic)||void 0===o?void 0:o.id,customer:null===W||void 0===W?void 0:W.basic}))}),[null===U||void 0===U||null===(D=U.userStatus)||void 0===D?void 0:D.loggedIn,null===W||void 0===W||null===(I=W.basic)||void 0===I?void 0:I.id]),Object(o.useEffect)((()=>{const e=sessionStorage.getItem(a.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT);(null!==A&&void 0!==A&&A.orderTrackingID||null!==A&&void 0!==A&&A.tenantId&&!e&&!Object(v.j)()&&!Object(v.X)())&&(Object(u.s)({dispatch:k,postOrderReducer:M,orderReducer:K,orderDetails:A,updateSetOrderDetails:P}),(async()=>{await l.b.BindOrder()})())}),[null===A||void 0===A?void 0:A.tenantId]),Object(o.useEffect)((()=>{Object(u.a)({orderReducer:K,paymentsContentReducer:Q,orderDetails:A,updateSetOrderDetails:P,props:e,tenantReducer:F})}),[null===K||void 0===K||null===(h=K.response)||void 0===h?void 0:h.order]),Object(o.useEffect)((()=>{G&&Object(s.v)({storesReducer:G,updateSetOrderDetails:P}),Object(u.t)(G,A,P)}),[G]),Object(o.useEffect)((()=>{Object(s.a)({orderDetails:A,orderReducer:K,postOrderReducer:M,paymentsContentReducer:Q,updateSetOrderDetails:P,dispatch:k,tenantReducer:F,userOrderState:N})}),[null===A||void 0===A?void 0:A.tenantId,null===M||void 0===M?void 0:M.orderAccepted,null===M||void 0===M?void 0:M.addHopeOrderResponse,null===M||void 0===M?void 0:M.giftCardPurchaseResponse,null===K||void 0===K?void 0:K.pastOrderResponse]),Object(o.useEffect)((()=>{const e=sessionStorage.getItem(a.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT);null!==A&&void 0!==A&&A.orderId&&!e&&(Object(u.o)({dispatch:k,postOrderReducer:M,orderReducer:K,orderDetails:A,updateSetOrderDetails:P}),null!==A&&void 0!==A&&A.isGetStoreStatus||!q||(Object(u.c)({orderDetails:A,dispatch:k,latLong:null===Z||void 0===Z?void 0:Z.latLong}),Object(u.n)({orderDetails:A,dispositionPaymentPage:V,userOrderStateDispatch:L}),L({isGetStoreStatus:!0}),P({orderSummarySaveYourOrderCompleted:Object(s.m)(A)})))}),[null===A||void 0===A?void 0:A.orderId,null===A||void 0===A?void 0:A.miscPaymentReferenceId,null===A||void 0===A?void 0:A.wiCodePurchaseId]),Object(o.useEffect)((()=>{((null===A||void 0===A?void 0:A.orderId)||(null===A||void 0===A?void 0:A.miscPaymentReferenceId)||(null===A||void 0===A?void 0:A.wiCodePurchaseId))&&(null===A||void 0===A?void 0:A.orderStatus)&&Object(u.l)({dispatch:k,orderDetails:A,cartReducer:x,userOrderState:N,appStateReducer:U,updateSetOrderDetails:P})}),[null===A||void 0===A?void 0:A.orderStatus]),Object(o.useEffect)((()=>{(null===A||void 0===A?void 0:A.tenantId)&&Object(v.sb)(A)&&(null===A||void 0===A?void 0:A.displayOrderProcessingPage)&&(null===A||void 0===A?void 0:A.retryCountForGetOrderStatus)>0&&Object(u.o)({dispatch:k,postOrderReducer:M,orderReducer:K,orderDetails:A,updateSetOrderDetails:P,userOrderStateDispatch:L})}),[null===A||void 0===A?void 0:A.retryCountForGetOrderStatus]),Object(o.useEffect)((()=>{var d;null!==M&&void 0!==M&&null!==(d=M.orderAccepted)&&void 0!==d&&d.isWicodeFinaliseFailed&&(localStorage.setItem(a.Td.STATUS_TEXT,a.Td.FAILED),Object(c.Se)(e))}),[null===M||void 0===M||null===(E=M.orderAccepted)||void 0===E?void 0:E.isWicodeFinaliseFailed]),Object(o.useEffect)((()=>{var e,d,i,o,t,r,l,n,c,a;(null===A||void 0===A?void 0:A.orderId)&&((null===M||void 0===M||null===(e=M.orderAccepted)||void 0===e?void 0:e.id)&&(null===A||void 0===A?void 0:A.orderId)!==(null===M||void 0===M||null===(d=M.orderAccepted)||void 0===d?void 0:d.id)||(null===K||void 0===K||null===(i=K.pastOrderResponse)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.id)&&(null===A||void 0===A?void 0:A.orderId)!==(null===K||void 0===K||null===(t=K.pastOrderResponse)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.id)||(null===K||void 0===K||null===(l=K.response)||void 0===l||null===(n=l.order)||void 0===n?void 0:n.id)&&(null===A||void 0===A?void 0:A.orderId)!==(null===K||void 0===K||null===(c=K.response)||void 0===c||null===(a=c.order)||void 0===a?void 0:a.id))&&(null===A||void 0===A?void 0:A.dispatchDeliveryOrderTrackerTimer)&&clearTimeout(null===A||void 0===A?void 0:A.dispatchDeliveryOrderTrackerTimer)}),[null===A||void 0===A?void 0:A.dispatchDeliveryOrderTrackerTimer,null===A||void 0===A?void 0:A.orderId,null===M||void 0===M||null===(C=M.orderAccepted)||void 0===C?void 0:C.id,null===K||void 0===K?void 0:K.pastOrderResponse,null===K||void 0===K||null===(T=K.response)||void 0===T||null===(y=T.order)||void 0===y?void 0:y.id]),Object(o.useEffect)((()=>{Object(s.r)({contentReducer:H,updateSetOrderDetails:P})}),[null===H||void 0===H||null===(g=H.response)||void 0===g?void 0:g.homeContentfulResp]),Object(o.useEffect)((()=>{var e;F.isUberServiceableEnabled&&Object(S.e)(null===A||void 0===A||null===(e=A.deliveryDetails)||void 0===e?void 0:e.partnerName)&&P({showDeliveryTrackingMap:!0,showOrderSummaryInfoDetails:!0})}),[F.isUberServiceableEnabled,null===A||void 0===A||null===(w=A.deliveryDetails)||void 0===w?void 0:w.partnerName,null===A||void 0===A?void 0:A.fullAddressDetails]),_}},887:function(e,d,i){"use strict";i.r(d);var o=i(3),t=i(25),r=i(0),l=i(52),n=i(6),c=i(171),a=i(4),s=i(15),u=i(5),v=i(215),O=i(958),p=i(2);var b=e=>{const{orderDetails:d,updateSetOrderDetails:i}=e,{orderSummarySaveYourOrderCompleted:t,service:r,orderStatus:b,enableRetryCountForPickupOrderTracking:j,displayOrderId:f}=d;return Object(o.useEffect)((()=>{Object(u.he)(r)&&(Object(u.ce)()?i({orderSummaryInfoDetailsShowInAccordion:!0,pickupClosingSoonModal:!0}):i({orderSummaryInfoDetailsShowInAccordion:Object(u.Ad)(r)}))}),[r]),Object(o.useEffect)((()=>{Object(u.he)(b)&&i({orderSummaryInfoDetailsOpenAccordion:j?Object(O.b)(d):!Object(v.Q)(d)})}),[b,f]),Object(o.useEffect)((()=>{t&&!Object(u.ce)()&&(l.b.dark(Object(p.jsx)("div",{className:"img-text-div",children:Object(p.jsxs)("span",{className:"notifyText notifyText-in",children:[Object(p.jsx)("img",{src:null===s.a||void 0===s.a?void 0:s.a.SaveNotifyTick,alt:"tick",className:"TickImg"}),Object(n.translateWithI18Next)(null===a.a||void 0===a.a?void 0:a.a.SAVED_THIS_ORDER_IN_MY_FAVORITE_MENU)]})}),{bodyClassName:"toast-for-favorite",hideProgressBar:!0,position:l.b.POSITION.BOTTOM_CENTER}),setTimeout((()=>{l.b.dismiss()}),4e3))}),[t]),(e=>Object(p.jsx)(c.a,{...e,testId:"order_summary_view",importPath:"ORDER_SUMMARY_VIEW"}))(e)},j=i(939),f=i(1108),m=i(110),S=i(64),R=i(18),D=i.n(R),I=i(63),h=i(11),E=i(331);d.default=e=>{var d,i,l,n,c,a,s,v,R,C,T,y,g,w,A;const P=Object(t.b)(),[_,k]=Object(o.useState)(O.n),[N,L]=Object(o.useState)(null),F=null!==(d=Object(m.b)(S.c))&&void 0!==d?d:{},{postOrderReducer:U,tenantReducer:K,storesReducer:M,profileReducer:x}=Object(t.c)((e=>e)),G=null===K||void 0===K?void 0:K.shouldCalculateEstimatedDeliveryTime,Q=null===K||void 0===K?void 0:K.isUberServiceableEnabled,Y=null===x||void 0===x?void 0:x.savedAddresses,W=null===(i=new URLSearchParams(window.location.search))||void 0===i?void 0:i.get("orderId"),X=(null===(l=new URLSearchParams(window.location.search))||void 0===l?void 0:l.get("email"))||(null===(n=new URLSearchParams(window.location.search))||void 0===n?void 0:n.get("PhoneNo")),H=null===(c=window)||void 0===c||null===(a=c.location)||void 0===a||null===(s=a.pathname)||void 0===s?void 0:s.includes("order-tracking"),J=null===K||void 0===K?void 0:K.pastOrderTimeFormat,V=()=>{var e,d,i;const{googleDistanceData:o}=M,t=null===o||void 0===o||null===(e=o[0])||void 0===e||null===(d=e.distance)||void 0===d||null===(i=d.duration)||void 0===i?void 0:i.value;if(t){const e=Object(h.i)(t,J);L(e)}};Object(o.useEffect)((()=>{H&&W&&X&&B({orderTrackingID:W,orderTrackingEmail:X,disableTrackingFields:!0})}),[H,X,W]);const B=Object(o.useCallback)((e=>{k&&k((d=>({...d,...e})))}),[]);Object(o.useEffect)((()=>{var e;!D()(null===F||void 0===F?void 0:F.orderTracking)&&Object(O.o)(null===F||void 0===F?void 0:F.orderTracking,_,B,Q&&Object(E.e)(null===_||void 0===_||null===(e=_.deliveryDetails)||void 0===e?void 0:e.partnerName))}),[null===_||void 0===_?void 0:_.orderStatus,null===F||void 0===F?void 0:F.orderTracking]),Object(o.useEffect)((()=>{(null===_||void 0===_?void 0:_.orderSummarycontentData)&&Object(O.i)(_)}),[null===_||void 0===_?void 0:_.orderSummarycontentData]);const q=()=>Object(j.m)({dispatch:P,beforeUnload:!0,orderDetails:_});return Object(o.useEffect)((()=>(window.scrollTo(0,0),window.removeEventListener(r.v,q,!0),window.addEventListener(r.v,q,!0),Object(j.f)(P),Object(j.d)(P),()=>{window.removeEventListener(r.v,q,!0),Object(j.m)({dispatch:P,orderDetails:_})})),[]),Object(o.useEffect)((()=>(Object(j.k)({dispatch:P,orderDetails:_,updateSetOrderDetails:B}),()=>{(null===_||void 0===_?void 0:_.dispatchDeliveryOrderTrackerTimer)&&clearTimeout(null===_||void 0===_?void 0:_.dispatchDeliveryOrderTrackerTimer)})),[null===_||void 0===_?void 0:_.retryCountForGetOrderTrackingStatus]),Object(o.useEffect)((()=>{(null===_||void 0===_?void 0:_.pickupCancelOrder)&&Object(j.g)({dispatch:P,orderDetails:_,updateSetOrderDetails:B})}),[null===_||void 0===_?void 0:_.pickupCancelOrder]),Object(o.useEffect)((()=>{(null===_||void 0===_?void 0:_.isPickupOrderUserConfirmedToCheckIn)&&Object(j.h)({dispatch:P,orderDetails:_,updateSetOrderDetails:B})}),[null===_||void 0===_?void 0:_.isPickupOrderUserConfirmedToCheckIn]),Object(o.useEffect)((()=>{var e,d,i,o,t,r,l,n,c,a,s,v,O,p,b,j,f;if(!G||null===U||void 0===U||null===(e=U.orderAccepted)||void 0===e||null===(d=e.deliveryAddress)||void 0===d||!d.location||null===U||void 0===U||null===(i=U.orderAccepted)||void 0===i||null===(o=i.deliveryDetails)||void 0===o||!o.riderLocation||null===U||void 0===U||!U.orderAccepted)return;const m={destination:["".concat(null===U||void 0===U||null===(t=U.orderAccepted)||void 0===t||null===(r=t.deliveryAddress)||void 0===r||null===(l=r.location)||void 0===l?void 0:l.latitude,",").concat(null===U||void 0===U||null===(n=U.orderAccepted)||void 0===n||null===(c=n.deliveryAddress)||void 0===c||null===(a=c.location)||void 0===a?void 0:a.longitude)],origin:["".concat(null===U||void 0===U||null===(s=U.orderAccepted)||void 0===s||null===(v=s.deliveryDetails)||void 0===v||null===(O=v.riderLocation)||void 0===O?void 0:O.latitude,",").concat(null===U||void 0===U||null===(p=U.orderAccepted)||void 0===p||null===(b=p.deliveryDetails)||void 0===b||null===(j=b.riderLocation)||void 0===j?void 0:j.longitude)],store:[""],googleConfig:Object(u.Zb)(),distanceMetrics:null===K||void 0===K||null===(f=K.storeSearch)||void 0===f?void 0:f.distanceMetrics,setStatusFlag:!0,successCallback:V};P(Object(I.g)(m))}),[null===U||void 0===U||null===(v=U.orderAccepted)||void 0===v||null===(R=v.deliveryDetails)||void 0===R?void 0:R.deliveryStatus,null===U||void 0===U||null===(C=U.orderAccepted)||void 0===C||null===(T=C.deliveryDetails)||void 0===T||null===(y=T.riderLocation)||void 0===y?void 0:y.latitude,null===U||void 0===U||null===(g=U.orderAccepted)||void 0===g||null===(w=g.deliveryDetails)||void 0===w||null===(A=w.riderLocation)||void 0===A?void 0:A.longitude,G]),Object(p.jsx)(f.a,{...e,orderDetails:_,updateSetOrderDetails:B,children:Object(p.jsx)(b,{...e,orderDetails:_,updateSetOrderDetails:B,arrivalTime:N,showDeliveryEstimatedTime:G,savedAddresses:Y,pastOrderTimeFormat:J})})}}}]);