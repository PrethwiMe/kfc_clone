(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[26],{1108:function(e,d,t){"use strict";var o=t(3),i=t(25),r=t(102),l=t(22),n=t(76),s=t(5),u=t(0),c=t(958),v=t(939),a=t(215),O=t(267),p=t(64),b=t(18),j=t.n(b),f=t(69),R=t(110),S=t(331);d.a=e=>{var d,t,b,I,m,D,E,C,P,h,g,y,T;const{orderDetails:w,updateSetOrderDetails:A,children:_}=e,N=Object(i.b)(),{userOrderState:K,userOrderStateDispatch:F}=Object(o.useContext)(n.a),{tenantReducer:G,appStateReducer:L,orderReducer:U,postOrderReducer:k,cartReducer:Q,storesReducer:M,paymentsContentReducer:W,helpReducer:x,profileReducer:X,paymentsReducer:J,contentReducer:Y,menuReducer:H}=Object(i.c)((e=>e)),q=Object(s.Jd)(K.dispositionNew)?JSON.parse(localStorage.getItem(u.gd.DISPOSITION_NEW)):K.dispositionNew,V=()=>{A({isMobileView:Object(s.Ud)(window.innerWidth)})},z=(null===(d=window)||void 0===d||null===(t=d.location)||void 0===t?void 0:t.pathname)===(null===u.Ae||void 0===u.Ae?void 0:u.Ae.ORDER_SUMMARY),B=Object(R.b)(f.b);return Object(o.useEffect)((()=>(!j()(null===w||void 0===w?void 0:w.service)&&N(Object(O.n)(null===w||void 0===w?void 0:w.service)),()=>{N(p.a.resetReducer())})),[null===w||void 0===w?void 0:w.service]),Object(o.useEffect)((()=>(window.addEventListener(u.we,V),Object(a.j)()&&N(Object(r.e)()),Object(a.X)()&&N(Object(r.e)()),()=>{window.removeEventListener(u.we,V),A(c.n)})),[]),Object(o.useEffect)((()=>{N&&null!==G&&void 0!==G&&G.tenantId&&Object(c.w)({props:e,dispatch:N,tenantReducer:G,dispositionPaymentPage:q,updateSetOrderDetails:A})}),[N,null===G||void 0===G?void 0:G.tenantId]),Object(o.useEffect)((()=>{Object(c.t)({helpReducer:x,updateSetOrderDetails:A})}),[x]),Object(o.useEffect)((()=>{var e;const d=null===J||void 0===J||null===(e=J.addHopePayResponse)||void 0===e?void 0:e.reference;(null===w||void 0===w?void 0:w.tenantId)&&Object(a.j)()&&d&&d!==(null===w||void 0===w?void 0:w.miscPaymentReferenceId)&&A({miscPaymentReferenceId:d,status:null===u.Qd||void 0===u.Qd?void 0:u.Qd.MISC_PAYMENT_INPROGRESS})}),[null===J||void 0===J||null===(b=J.addHopePayResponse)||void 0===b?void 0:b.reference,null===w||void 0===w?void 0:w.tenantId]),Object(o.useEffect)((()=>{var e;const d=null===J||void 0===J||null===(e=J.giftCardPayResponse)||void 0===e?void 0:e.reference;(null===w||void 0===w?void 0:w.tenantId)&&Object(a.X)()&&d&&d!==(null===w||void 0===w?void 0:w.wiCodePurchaseId)&&A({wiCodePurchaseId:d,status:null===u.Qd||void 0===u.Qd?void 0:u.Qd.MISC_PAYMENT_INPROGRESS})}),[null===J||void 0===J||null===(I=J.giftCardPayResponse)||void 0===I?void 0:I.reference,null===w||void 0===w?void 0:w.tenantId]),Object(o.useEffect)((()=>{Object(a.X)()&&N&&(null===w||void 0===w?void 0:w.tenantId)&&(null===w||void 0===w?void 0:w.wiCodePurchaseId)&&Object(v.j)({dispatch:N,orderDetails:w,updateSetOrderDetails:A})}),[N,null===w||void 0===w?void 0:w.tenantId,null===w||void 0===w?void 0:w.wiCodePurchaseId]),Object(o.useEffect)((()=>{Object(a.j)()&&N&&(null===w||void 0===w?void 0:w.tenantId)&&(null===w||void 0===w?void 0:w.miscPaymentReferenceId)&&Object(v.i)({dispatch:N,orderDetails:w,updateSetOrderDetails:A})}),[N,null===w||void 0===w?void 0:w.tenantId,null===w||void 0===w?void 0:w.miscPaymentReferenceId]),Object(o.useEffect)((()=>{null!==L&&void 0!==L&&L.userStatus&&Object(c.q)({appStateReducer:L,updateSetOrderDetails:A})}),[null===L||void 0===L?void 0:L.userStatus]),Object(o.useEffect)((()=>{(null!==X&&void 0!==X&&X.favouriteOrders||null!==X&&void 0!==X&&X.savedAddresses)&&Object(c.u)({profileReducer:X,orderDetails:w,updateSetOrderDetails:A})}),[null===X||void 0===X?void 0:X.favouriteOrders,null===X||void 0===X?void 0:X.savedAddresses]),Object(o.useEffect)((()=>{var e,d;const t=sessionStorage.getItem(u.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT);var o;null!==L&&void 0!==L&&null!==(e=L.userStatus)&&void 0!==e&&e.loggedIn&&t!==(null===X||void 0===X||null===(d=X.basic)||void 0===d?void 0:d.id)&&(sessionStorage.removeItem(u.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT),A({customerId:null===X||void 0===X||null===(o=X.basic)||void 0===o?void 0:o.id,customer:null===X||void 0===X?void 0:X.basic}))}),[null===L||void 0===L||null===(m=L.userStatus)||void 0===m?void 0:m.loggedIn,null===X||void 0===X||null===(D=X.basic)||void 0===D?void 0:D.id]),Object(o.useEffect)((()=>{const e=sessionStorage.getItem(u.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT);(null!==w&&void 0!==w&&w.orderTrackingID||null!==w&&void 0!==w&&w.tenantId&&!e&&!Object(a.j)()&&!Object(a.X)())&&(Object(v.s)({dispatch:N,postOrderReducer:k,orderReducer:U,orderDetails:w,updateSetOrderDetails:A}),(async()=>{await l.b.BindOrder()})())}),[null===w||void 0===w?void 0:w.tenantId]),Object(o.useEffect)((()=>{Object(v.a)({orderReducer:U,paymentsContentReducer:W,orderDetails:w,updateSetOrderDetails:A,props:e,tenantReducer:G})}),[null===U||void 0===U||null===(E=U.response)||void 0===E?void 0:E.order]),Object(o.useEffect)((()=>{M&&Object(c.v)({storesReducer:M,updateSetOrderDetails:A}),Object(v.t)(M,w,A)}),[M]),Object(o.useEffect)((()=>{Object(c.a)({orderDetails:w,orderReducer:U,postOrderReducer:k,paymentsContentReducer:W,updateSetOrderDetails:A,dispatch:N,tenantReducer:G,userOrderState:K})}),[null===w||void 0===w?void 0:w.tenantId,null===k||void 0===k?void 0:k.orderAccepted,null===k||void 0===k?void 0:k.addHopeOrderResponse,null===k||void 0===k?void 0:k.giftCardPurchaseResponse,null===U||void 0===U?void 0:U.pastOrderResponse]),Object(o.useEffect)((()=>{const e=sessionStorage.getItem(u.Ke.ORDER_TRACKING_CLICK_KFC_ACCOUNT);null!==w&&void 0!==w&&w.orderId&&!e&&(Object(v.o)({dispatch:N,postOrderReducer:k,orderReducer:U,orderDetails:w,updateSetOrderDetails:A}),null!==w&&void 0!==w&&w.isGetStoreStatus||!z||(Object(v.c)({orderDetails:w,dispatch:N,latLong:null===B||void 0===B?void 0:B.latLong}),Object(v.n)({orderDetails:w,dispositionPaymentPage:q,userOrderStateDispatch:F}),F({isGetStoreStatus:!0}),A({orderSummarySaveYourOrderCompleted:Object(c.m)(w)})))}),[null===w||void 0===w?void 0:w.orderId,null===w||void 0===w?void 0:w.miscPaymentReferenceId,null===w||void 0===w?void 0:w.wiCodePurchaseId]),Object(o.useEffect)((()=>{((null===w||void 0===w?void 0:w.orderId)||(null===w||void 0===w?void 0:w.miscPaymentReferenceId)||(null===w||void 0===w?void 0:w.wiCodePurchaseId))&&(null===w||void 0===w?void 0:w.orderStatus)&&Object(v.l)({dispatch:N,orderDetails:w,cartReducer:Q,userOrderState:K,appStateReducer:L,updateSetOrderDetails:A})}),[null===w||void 0===w?void 0:w.orderStatus]),Object(o.useEffect)((()=>{(null===w||void 0===w?void 0:w.tenantId)&&Object(a.sb)(w)&&(null===w||void 0===w?void 0:w.displayOrderProcessingPage)&&(null===w||void 0===w?void 0:w.retryCountForGetOrderStatus)>0&&Object(v.o)({dispatch:N,postOrderReducer:k,orderReducer:U,orderDetails:w,updateSetOrderDetails:A,userOrderStateDispatch:F})}),[null===w||void 0===w?void 0:w.retryCountForGetOrderStatus]),Object(o.useEffect)((()=>{var d;null!==k&&void 0!==k&&null!==(d=k.orderAccepted)&&void 0!==d&&d.isWicodeFinaliseFailed&&(localStorage.setItem(u.Td.STATUS_TEXT,u.Td.FAILED),Object(s.Se)(e))}),[null===k||void 0===k||null===(C=k.orderAccepted)||void 0===C?void 0:C.isWicodeFinaliseFailed]),Object(o.useEffect)((()=>{var e,d,t,o,i,r,l,n,s,u;(null===w||void 0===w?void 0:w.orderId)&&((null===k||void 0===k||null===(e=k.orderAccepted)||void 0===e?void 0:e.id)&&(null===w||void 0===w?void 0:w.orderId)!==(null===k||void 0===k||null===(d=k.orderAccepted)||void 0===d?void 0:d.id)||(null===U||void 0===U||null===(t=U.pastOrderResponse)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.id)&&(null===w||void 0===w?void 0:w.orderId)!==(null===U||void 0===U||null===(i=U.pastOrderResponse)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.id)||(null===U||void 0===U||null===(l=U.response)||void 0===l||null===(n=l.order)||void 0===n?void 0:n.id)&&(null===w||void 0===w?void 0:w.orderId)!==(null===U||void 0===U||null===(s=U.response)||void 0===s||null===(u=s.order)||void 0===u?void 0:u.id))&&(null===w||void 0===w?void 0:w.dispatchDeliveryOrderTrackerTimer)&&clearTimeout(null===w||void 0===w?void 0:w.dispatchDeliveryOrderTrackerTimer)}),[null===w||void 0===w?void 0:w.dispatchDeliveryOrderTrackerTimer,null===w||void 0===w?void 0:w.orderId,null===k||void 0===k||null===(P=k.orderAccepted)||void 0===P?void 0:P.id,null===U||void 0===U?void 0:U.pastOrderResponse,null===U||void 0===U||null===(h=U.response)||void 0===h||null===(g=h.order)||void 0===g?void 0:g.id]),Object(o.useEffect)((()=>{Object(c.r)({contentReducer:Y,updateSetOrderDetails:A})}),[null===Y||void 0===Y||null===(y=Y.response)||void 0===y?void 0:y.homeContentfulResp]),Object(o.useEffect)((()=>{var e;G.isUberServiceableEnabled&&Object(S.e)(null===w||void 0===w||null===(e=w.deliveryDetails)||void 0===e?void 0:e.partnerName)&&A({showDeliveryTrackingMap:!0,showOrderSummaryInfoDetails:!0})}),[G.isUberServiceableEnabled,null===w||void 0===w||null===(T=w.deliveryDetails)||void 0===T?void 0:T.partnerName,null===w||void 0===w?void 0:w.fullAddressDetails]),_}},539:function(e,d,t){"use strict";t.r(d);var o=t(3),i=t(5),r=t(25),l=t(171),n=t(2);var s=e=>(e=>Object(n.jsx)(l.a,{...e,testId:"order_processing_view",importPath:"ORDER_PROCESSING_VIEW"}))(e),u=t(958),c=t(939),v=t(1108),a=t(215),O=t(0),p=t(167);d.default=e=>{var d,t,l,b,j;const f=Object(r.c)((e=>e.tenantReducer)),{redirectToOrderProcessingForPhonePe:R}=null===f||void 0===f||null===(d=f.componentOptions)||void 0===d||null===(t=d.web)||void 0===t?void 0:t.orderPages,S=null===(l=new URLSearchParams(window.location.search))||void 0===l?void 0:l.get("orderId"),[I,m]=Object(o.useState)(u.n),{orderReducer:D,profileReducer:E,paymentsReducer:C}=Object(r.c)((e=>e)),P=(null===C||void 0===C?void 0:C.isPhonePePGStatusLoading)||!1,[h,g]=Object(o.useState)(P),y=Object(r.b)(),T=Object(o.useCallback)((e=>{m&&m((d=>({...d,...e})))}),[]);return Object(o.useEffect)((()=>{S&&T({orderId:S,status:null===O.Qd||void 0===O.Qd?void 0:O.Qd.ACCEPTED,retryCountForGetOrderStatus:0,isExternalTrackOrder:!1,displayOrderProcessingPage:!0})}),[S]),Object(o.useEffect)((()=>(Object(c.b)(e),()=>{console.debug("useEffect [] return => ")})),[]),Object(o.useEffect)((()=>{if(Object(a.i)(I))(null===I||void 0===I||!I.displayOrderProcessingPage)&&Object(i.Ce)(e);else if(R){var d,t,o,r;(null===I||void 0===I||null===(d=I.paymentReferences)||void 0===d||null===(t=d[0])||void 0===t?void 0:t.paymentStatus)===O.Td.SUCCESS?Object(i.Te)(e):(null===I||void 0===I||null===(o=I.paymentReferences)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.paymentStatus)===O.Td.FAILED&&Object(i.Se)(e)}else{var l;(!Object(i.zd)(null===e||void 0===e||null===(l=e.history)||void 0===l?void 0:l.location)||Object(a.W)(I))&&(null===I||void 0===I||!I.displayOrderProcessingPage)&&Object(i.Re)(e)}}),[null===I||void 0===I?void 0:I.displayOrderProcessingPage]),Object(o.useEffect)((()=>{var e,d;const t=null===D||void 0===D||null===(e=D.response)||void 0===e||null===(d=e.order)||void 0===d?void 0:d.id,o=null===f||void 0===f?void 0:f.tenantId,i=null===E||void 0===E?void 0:E.customerId,r={dispatch:y,tenantId:o,data:{queryProps:{orderId:t}},customerId:i};Object(p.h)(r)}),[null===D||void 0===D||null===(b=D.response)||void 0===b||null===(j=b.order)||void 0===j?void 0:j.id]),Object(o.useEffect)((()=>{var d;!P&&h&&((null===C||void 0===C||null===(d=C.phonePeStatus)||void 0===d?void 0:d.status)===O.Td.FAILURE&&Object(i.Se)(e));g(P)}),[P]),Object(n.jsx)(v.a,{...e,orderDetails:I,updateSetOrderDetails:T,children:Object(n.jsx)(s,{...e,orderDetails:I,updateSetOrderDetails:T})})}}}]);