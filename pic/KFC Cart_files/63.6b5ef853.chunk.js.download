(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[63],{1050:function(e,t,n){"use strict";var d=n(6),o=n(951),r=n(3),i=n(5),l=n(222),s=n(2);t.a=e=>{const{CURRENT_ORDER:t="",PROCESSING:n="",PROCESSING_YOUR:c="",ORDER_READY_IN_JUST:u="",SECOND:a="",CONFIRMING_YOUR_ORDER:v="",READY_IN_JUST_A_SECOND:O=""}=l.a,[E,I]=Object(r.useState)(Object(i.Ud)(window.innerWidth)),b=()=>{const e=Object(i.Ud)(window.innerWidth);I(e)};return Object(r.useEffect)((()=>{window.addEventListener("resize",b)}),[E]),Object(r.useEffect)((()=>{if(e.retryCount>=0&&e.retryCount<=o.a){const t=document.getElementById("progressBarContainer"),n=document.getElementById("progressBar");console.log(t.offsetWidth);const d=t.offsetWidth/o.a*(e.retryCount+1);console.log(d),n.style.width=d+"px"}}),[e.retryCount]),Object(s.jsx)("div",{children:E?Object(s.jsx)("div",{className:"orderConfirmScreenMob","data-testid":"orderConfirmItems-component",children:Object(s.jsxs)("div",{className:"statusBar",children:[Object(s.jsx)("div",{className:"currentStatusMob",children:Object(d.translateWithI18Next)(t)}),Object(s.jsx)("div",{id:"progressBarContainer",className:"ProgressMob",children:Object(s.jsx)("div",{id:"progressBar",className:"barMob","data-testid":"load-component"})}),Object(s.jsx)("div",{className:"progressBarMob",children:Object(d.translateWithI18Next)(n)}),Object(s.jsx)("div",{className:"confirmOrderMobile",children:Object(d.translateWithI18Next)(c)}),Object(s.jsxs)("div",{className:"confirmOrderMobile",children:[" ",Object(d.translateWithI18Next)(u)]}),Object(s.jsxs)("div",{className:"confirmOrderMobile",children:[" ",Object(d.translateWithI18Next)(a)]})]})}):Object(s.jsx)("div",{className:"orderConfirmScreen","data-testid":"orderConfirmItems-component",children:Object(s.jsxs)("div",{className:"statusBar",children:[Object(s.jsx)("div",{className:"currentStatus",children:Object(d.translateWithI18Next)(t)}),Object(s.jsx)("div",{id:"progressBarContainer",className:"Progress",children:Object(s.jsx)("div",{id:"progressBar",className:"bar"})}),Object(s.jsx)("div",{className:"progressBar",children:Object(d.translateWithI18Next)(n)}),Object(s.jsx)("div",{className:"confirmOrder",children:Object(d.translateWithI18Next)(v)}),Object(s.jsxs)("div",{className:"confirmOrder",children:[" ",Object(d.translateWithI18Next)(O)," "]})]})})})}},1052:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var d=n(3),o=n.n(d),r=n(25),i=n(912),l=n(920),s=n(5),c=n(2);const u=e=>t=>{let n=null,d=null;const i=Object(r.c)((e=>{var t,n;return{homePageContent:Object(s.od)(null===e||void 0===e||null===(t=e.contentReducer)||void 0===t?void 0:t.response),marketPageContent:Object(s.od)(null===e||void 0===e||null===(n=e.marketConfigReducer)||void 0===n?void 0:n.response),tenantReducerContent:Object(s.od)(null===e||void 0===e?void 0:e.tenantReducer)}}));if(i.marketPageContent&&i.tenantReducerContent&&i.homePageContent){var l;const{header:e={},footer:t={}}=Object(s.kd)(null===i||void 0===i||null===(l=i.marketPageContent)||void 0===l?void 0:l.headerData);n=Object(s.cc)(e),d=Object(s.Sb)(t)}const u=Object(r.c)((e=>e.appStateReducer.userStatus));return Object(c.jsxs)(o.a.Fragment,{children:[a(n,i,u,!0,!1),Object(c.jsx)(e,{...t}),v(d,t.history,i)," "]})},a=(e,t,n,d,o)=>Object(s.Kd)(e)&&Object(c.jsx)(i.b,{contentData:e,tenantReducerData:t.tenantReducerContent,userParams:n,paymentHeader:d,checkoutHeader:o}),v=(e,t,n)=>Object(s.Kd)(e)&&Object(c.jsx)(l.a,{contentData:e,history:t,tenantReducerData:n.tenantReducerContent})},859:function(e,t,n){"use strict";n.r(t);var d=n(3),o=n(25),r=n(5),i=n(0),l=n(1050),s=n(972),c=n(1052),u=n(2);t.default=e=>{const t=Object(o.b)(),{tenantReducer:n,orderReducer:a}=Object(o.c)((e=>e));return Object(d.useEffect)((()=>{Object(s.t)(t)}),[]),Object(d.useEffect)((()=>{if(null!==n&&void 0!==n&&n.tenantId){const e=window.location.search.split("?")[1],d=new URLSearchParams(e),o=Object.fromEntries(d.entries());Object(s.b)(t,{tenantId:null===n||void 0===n?void 0:n.tenantId,...o})}}),[null===n||void 0===n?void 0:n.tenantId]),Object(d.useEffect)((()=>{var t;if(null!==n&&void 0!==n&&n.tenantId&&null!==a&&void 0!==a&&a.pastOrderResponse&&null!==a&&void 0!==a&&null!==(t=a.pastOrderResponse)&&void 0!==t&&t.length){const t=null===a||void 0===a?void 0:a.pastOrderResponse[0];null!==t&&void 0!==t&&t.id?(sessionStorage.setItem(i.gd.ORDER_TRACKING,JSON.stringify(Object(s.w)(null===n||void 0===n?void 0:n.tenantId,t,!0))),Object(r.Te)(e)):(console.error(JSON.stringify(t)),Object(r.Se)(e))}}),[null===n||void 0===n?void 0:n.tenantId,null===a||void 0===a?void 0:a.pastOrderResponse]),Object(c.a)(Object(u.jsx)("div",{className:"PostPaymentProcessComponent",children:Object(u.jsx)(l.a,{showLoader:"false"})}))}},912:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var d=n(171),o=n(2);const r=e=>Object(o.jsx)(d.a,{testId:"header-container-test",importPath:"HEADER_CONTAINER",...e}),i=e=>Object(o.jsx)(d.a,{testId:"header-container-test",importPath:"SECONDARY_HEADER_CONTAINER",...e})},920:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var d=n(171),o=n(2);const r=e=>Object(o.jsx)(d.a,{testId:"account-container-test",importPath:"FOOTER_PAGE",...e})},951:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return i}));const d=20,o=5e3,r=15e3,i=18e4},972:function(e,t,n){"use strict";n.d(t,"p",(function(){return a})),n.d(t,"o",(function(){return v})),n.d(t,"l",(function(){return O})),n.d(t,"f",(function(){return E})),n.d(t,"m",(function(){return I})),n.d(t,"n",(function(){return b})),n.d(t,"h",(function(){return j})),n.d(t,"j",(function(){return m})),n.d(t,"i",(function(){return f})),n.d(t,"g",(function(){return D})),n.d(t,"k",(function(){return h})),n.d(t,"r",(function(){return p})),n.d(t,"a",(function(){return N})),n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return g})),n.d(t,"s",(function(){return _})),n.d(t,"v",(function(){return T})),n.d(t,"q",(function(){return L})),n.d(t,"u",(function(){return P})),n.d(t,"w",(function(){return x})),n.d(t,"e",(function(){return y})),n.d(t,"t",(function(){return Y}));var d=n(138),o=n(102),r=n(30),i=n(5),l=n(0),s=n(951),c=n(22),u=n(42);const a=e=>R(e)===l.Od.STAGED_ACCEPTED,v=e=>R(e)===l.Od.PICKUP_DELIVERY_DINE_IN,O=e=>Object(i.ef)(null===e||void 0===e?void 0:e.service)===l.Lb.DELIVERY&&v(e),E=e=>Object(i.ef)(null===e||void 0===e?void 0:e.service)===l.Lb.DELIVERY&&(O(e)||j(e)||m(e)||f(e)),I=e=>E(e)&&(null===e||void 0===e?void 0:e.deliveryPartner),b=e=>E(e)&&!f(e)&&!D(e),j=e=>R(e)===l.Od.DELIVERY_DISTA_CREATE_ASSIGN,m=e=>R(e)===l.Od.DELIVERY_DISTA,f=e=>R(e)===l.Od.DELIVERY_DISTA_DELIVERED,D=e=>R(e)===l.Od.CANCELLED,h=e=>m(e)||D(e)||f(e),R=e=>{switch(Object(i.ef)(null===e||void 0===e?void 0:e.status)){case l.Qd.STAGED:case l.Qd.ACCEPTED:return c.b.shouldGoogleSpotIgnoreOloFailure?l.Od.PICKUP_DELIVERY_DINE_IN:l.Od.STAGED_ACCEPTED;case l.Qd.SENT_TO_POS_COMPLETED:if(Object(i.ef)(null===e||void 0===e?void 0:e.service)===l.Lb.PICKUP||Object(i.ef)(null===e||void 0===e?void 0:e.service)===l.Lb.DINE_IN||Object(i.ef)(null===e||void 0===e?void 0:e.service)===l.Lb.DELIVERY||Object(i.ef)(null===e||void 0===e?void 0:e.service)===l.Lb.CHRISTMAS_ORDERING)return l.Od.PICKUP_DELIVERY_DINE_IN;break;case l.Qd.CREATED:case l.Qd.ASSIGNED:return l.Od.DELIVERY_DISTA_CREATE_ASSIGN;case l.Qd.PICKED_UP:case l.Qd.OUT_FOR_DELIVERY:case l.Qd.ARRIVED:return l.Od.DELIVERY_DISTA;case l.Qd.DELIVERED:return l.Od.DELIVERY_DISTA_DELIVERED;case l.Qd.CANCELLED:case l.Qd.CANCEL:return Object(i.ef)(null===e||void 0===e?void 0:e.service)===l.Lb.DELIVERY?l.Od.CANCELLED:l.Od.FAILED;case l.Qd.SENT_TO_POS_FAILED:case l.Qd.PAYMENT_FAILED:return l.Od.FAILED}},p=(e,t,n)=>{if(null!==e&&void 0!==e&&e.orderAcceptedLoading)return Promise.resolve(!1);switch(R(e)){case l.Od.STAGED_ACCEPTED:return t(!0),Promise.resolve(!1);case l.Od.PICKUP_DELIVERY_DINE_IN:return t(!1),Promise.resolve(!0);case l.Od.DELIVERY_DISTA_CREATE_ASSIGN:case l.Od.DELIVERY_DISTA:case l.Od.DELIVERY_DISTA_DELIVERED:case l.Od.CANCELLED:return t(!1),Promise.resolve(!1);case l.Od.FAILED:return localStorage.setItem(l.Td.STATUS_TEXT,l.Td.FAILED),Object(i.Se)(n),Promise.resolve(!1)}},N=e=>{let{dispatch:t,orderDetails:n,orderAccepted:d,cartData:o,userOrderState:s,appStateReducer:u,isBasketLoading:a,status:v,qrCodeScanTime:O}=e;if(v){const e=u.userStatus,v=c.b.shouldGoogleSpotIgnoreOloFailure||Object(i.ef)(null===d||void 0===d?void 0:d.status)===l.Qd.SENT_TO_POS_COMPLETED;Object(i.l)(v,!a,null===o||void 0===o?void 0:o.id,e.localized,null===n||void 0===n?void 0:n.tenantId)&&Object(i.G)(t,r.f,null===n||void 0===n?void 0:n.tenantId,s,O)}},C=(e,t,n)=>{t&&(n=setTimeout((()=>{t(e),n&&clearTimeout(n)}),s.c))},S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r={emailId:null===t||void 0===t?void 0:t.userEmail,phoneNo:null===t||void 0===t?void 0:t.userPhone,orderNo:null===t||void 0===t?void 0:t.posOrderId,tenantId:null===t||void 0===t?void 0:t.tenantId},i=n+1;e(Object(o.d)(r,(()=>C(i,d,null))))},A=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r={orderId:null===t||void 0===t?void 0:t.orderId,tenantId:null===t||void 0===t?void 0:t.tenantId,customerId:null===t||void 0===t?void 0:t.customerId},i=n+1;e(Object(d.f)(r,(()=>C(i,o,null))))},g=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null!==t&&void 0!==t&&t.isExternalTrackOrder?S(e,t,n,d):A(e,t,n,d)},_=(e,t,n,d,o,r)=>{null!==t&&void 0!==t&&t.orderId?0===n||a(d)&&n<s.a?g(e,t,n,o):a(d)&&n>=s.a&&(localStorage.setItem("paymentStatus",l.Td.FAILED),Object(i.Se)(r)):Object(i.Me)(r)},T=(e,t,n,d,o)=>{d&&O(e)?Object(i.Se)(o):null!==e&&void 0!==e&&e.status&&(null===e||void 0===e?void 0:e.status)!==(null===t||void 0===t?void 0:t.status)?n({...t,status:null===e||void 0===e?void 0:e.status,orderAcceptedLoading:null===e||void 0===e?void 0:e.orderAcceptedLoading,deliveryPartner:null===e||void 0===e?void 0:e.deliveryPartner,deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1}):n({...t,deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1})},L=(e,t,n)=>{if(O(e)&&!t){const e=setTimeout((()=>{e&&clearTimeout(e)}),s.d)}},P=(e,t,n,d)=>{var o,r;return{...x(e,t,!1,n),orderAcceptedLoading:(null===t||void 0===t?void 0:t.orderAcceptedLoading)||!1,deliveryPartner:null,deliveryDistaRetryCountFlag:0,operatingTime:null===d||void 0===d||null===(o=d.store)||void 0===o||null===(r=o.summary)||void 0===r?void 0:r.timings}},x=function(e,t){var n,d,o,r,i,l,s,c;let u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const O={orderId:(null===t||void 0===t?void 0:t.id)||(null===a||void 0===a?void 0:a.id),customerId:(null===t||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.id)||(null===a||void 0===a||null===(d=a.customer)||void 0===d?void 0:d.id),tenantId:e,service:(null===t||void 0===t?void 0:t.service)||(null===a||void 0===a?void 0:a.service),status:(null===t||void 0===t?void 0:t.status)||(null===a||void 0===a?void 0:a.status),orderTime:(null===t||void 0===t?void 0:t.fulfillmentDateTime)||(null===a||void 0===a?void 0:a.fulfillmentDateTime),deliveryPartner:(null===t||void 0===t?void 0:t.deliveryPartner)||(null===a||void 0===a?void 0:a.deliveryPartner),posOrderId:(null===t||void 0===t?void 0:t.posOrderId)||(null===a||void 0===a?void 0:a.posOrderId),userEmail:(null===t||void 0===t||null===(o=t.customer)||void 0===o?void 0:o.email)||(null===a||void 0===a||null===(r=a.customer)||void 0===r?void 0:r.email),userPhone:(null===t||void 0===t||null===(i=t.customer)||void 0===i?void 0:i.phoneNumber)||(null===t||void 0===t||null===(l=t.customer)||void 0===l?void 0:l.phone)||(null===a||void 0===a||null===(s=a.customer)||void 0===s?void 0:s.phoneNumber),postOrderDetails:t,isExternalTrackOrder:u};var E,I,b;null!==v&&void 0!==v&&null!==(c=v.storesWithStatus)&&void 0!==c&&c.length&&(O.operatingTime=null===v||void 0===v||null===(E=v.storesWithStatus)||void 0===E||null===(I=E[0])||void 0===I||null===(b=I.summary)||void 0===b?void 0:b.timings);return O},y=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],d=(e=>{var t;return null!==e&&void 0!==e&&e.orderAccepted&&Object.keys(null===e||void 0===e?void 0:e.orderAccepted).length&&null!==e&&void 0!==e&&null!==(t=e.orderAccepted)&&void 0!==t&&t.id?null===e||void 0===e?void 0:e.orderAccepted:null})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return null===d&&(d=(e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.pastOrderResponse)&&void 0!==t&&t.length&&null!==e&&void 0!==e&&e.pastOrderResponse[0].id?null===e||void 0===e?void 0:e.pastOrderResponse[0]:null})(e),n&&null===d&&(d=t&&Object.keys(null===t||void 0===t?void 0:t.postOrderDetails).length?null===t||void 0===t?void 0:t.postOrderDetails:{})),d||{}},Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(localStorage.getItem(l.gd.PAYMENT_STATUS)!==l.Td.FAILED){var n,r,i,s;if(t&&(null===(n=window)||void 0===n||null===(r=n.location)||void 0===r?void 0:r.pathname)===(null===l.Ae||void 0===l.Ae?void 0:l.Ae.PAYMENT_SUCCESS)||(null===(i=window)||void 0===i||null===(s=i.location)||void 0===s?void 0:s.pathname)===(null===l.Ae||void 0===l.Ae?void 0:l.Ae.CHECKOUT))return!1;(e=>{e(Object(d.h)())})(e),(e=>{e(Object(o.e)())})(e)}(e=>{e(Object(u.z)())})(e),(e=>{e(Object(o.a)({value:[]}))})(e),sessionStorage.removeItem(l.gd.ORDER_TRACKING)}}}]);