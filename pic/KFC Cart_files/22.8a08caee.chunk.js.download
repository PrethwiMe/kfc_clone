(this["webpackJsonpreusable-comps"]=this["webpackJsonpreusable-comps"]||[]).push([[22],{1099:function(e,t,d){"use strict";d.d(t,"a",(function(){return O})),d.d(t,"b",(function(){return T})),d.d(t,"g",(function(){return S})),d.d(t,"e",(function(){return _})),d.d(t,"f",(function(){return b})),d.d(t,"d",(function(){return D})),d.d(t,"c",(function(){return j}));var o=d(30),i=d(102),n=d(138),l=d(972),r=d(5),u=d(0),c=d(215),s=d(6),a=d(4),v=d(23);const{PAYMENT_FAILED_SCREEN_TEXT:E}=v.a,O=e=>{"giftCardPurchase"===localStorage.getItem(u.gd.POST_PAYMENT_TYPE)&&(localStorage.setItem(u.gd.PAYMENT_STATUS,u.Td.FAILED),Object(r.Ke)(e,!0))},I=(e,t,d)=>{Object(r.G)(e,o.f,t,d),A(e)},T=e=>{const{orderReducer:t,tenantId:d,dispatch:o,userOrderState:i,props:n,setShowFailedScreen:c}=e;var s;if(d&&null!==t&&void 0!==t&&t.response&&Object.keys(null===t||void 0===t?void 0:t.response).length)if(null!==t&&void 0!==t&&null!==(s=t.response)&&void 0!==s&&s.order){var a,v,E,O,T;const e={orderId:null===t||void 0===t||null===(a=t.response)||void 0===a||null===(v=a.order)||void 0===v?void 0:v.id,tenantId:d,customerId:null===t||void 0===t||null===(E=t.response)||void 0===E||null===(O=E.order)||void 0===O||null===(T=O.customer)||void 0===T?void 0:T.id};Object(l.d)(o,e)}else Object(r.ce)()?(localStorage.setItem(u.gd.PAYMENT_STATUS,u.Td.FAILED),c(!0)):(I(o,d,i),Object(r.Me)(n))},S=e=>{const{orderAccepted:t,dispatch:d,tenantId:o,userOrderState:i,setShowFailedScreen:n,props:c}=e;t&&Object.keys(t).length&&(localStorage.setItem(u.gd.PAYMENT_STATUS,u.Td.FAILED),Object(r.ce)()?n(!0):null!==t&&void 0!==t&&t.id?Object(r.ef)(null===t||void 0===t?void 0:t.status)===u.Qd.SENT_TO_POS_FAILED||Object(r.ef)(null===t||void 0===t?void 0:t.status)===u.Qd.ACCEPTED||Object(l.l)(t)?n(!0):(Object(r.Ge)(c,!0),n(!1)):(I(d,o,i),Object(r.Me)(c)))},_=e=>{const{createBalanceReducer:t,setShowFailedScreen:d}=e,{isSuccess:o}=null===t||void 0===t?void 0:t.response;!o&&d(!0)},b=e=>{const{postOrderReducer:t,setShowFailedScreen:d}=e,{miscPaymentReferenceId:o,status:i}=null===t||void 0===t?void 0:t.giftCardPurchaseResponse;o&&(Object(c.U)(i)||Object(c.V)(i))&&d(!0)},D=e=>{const{postOrderReducer:t,setShowFailedScreen:d}=e,{miscPaymentReferenceId:o,status:i}=null===t||void 0===t?void 0:t.addHopeOrderResponse;o&&(Object(c.g)(i)||Object(c.h)(i))&&d(!0)},A=e=>{e(Object(i.e)()),e(Object(n.h)()),localStorage.setItem(u.gd.PAYMENT_STATUS,""),localStorage.setItem(u.gd.POST_PAYMENT_TYPE,""),sessionStorage.setItem(u.Ke.POST_PAYMENT_TYPE,"")},j=(e,t,d)=>{switch(e){case null===E||void 0===E?void 0:E.TITLE:return Object(s.translateWithI18Next)(null===a.a||void 0===a.a?void 0:a.a.THAT_AINT_RIGHT);case null===E||void 0===E?void 0:E.DESCRIPTION:return Object(s.translateWithI18Next)(d||(t?null===a.a||void 0===a.a?void 0:a.a.REVIEW_CARD_AND_BILLING_ADDRESS:null===a.a||void 0===a.a?void 0:a.a.POST_ORDER_ERROR_MSG_AU));case null===E||void 0===E?void 0:E.BUTTON_TEXT:return t?Object(s.translateWithI18Next)(null===a.a||void 0===a.a?void 0:a.a.RETURN_TO_PAYMENT_OPTIONS):Object(r.uc)();default:return""}}},527:function(e,t,d){"use strict";d.r(t),d.d(t,"getFailImage",(function(){return T})),d.d(t,"isWicodeFailedErr",(function(){return _}));var o=d(3),i=d.n(o),n=d(36),l=d(5),r=d(15),u=d(102),c=d(215),s=d(1099),a=d(23),v=d(6),E=d(4),O=d(0),I=d(2);const T=e=>e?null===r.a||void 0===r.a?void 0:r.a.BucketIssue:null===r.a||void 0===r.a?void 0:r.a.Issue,{PAYMENT_FAILED_SCREEN_TEXT:S}=a.a,_=(e,t,d)=>e?Object(I.jsx)("div",{className:"couponFailure",children:Object(v.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.POST_ORDER_COUPON_FAILURE)}):Object(s.c)(null===S||void 0===S?void 0:S.DESCRIPTION,t,d),b=e=>{const{isCardValidateFailedScreen:t,location:d,shouldNavigateToCheckout:i,isWicodeFinaliseFailed:r,paymentResponseError:a}=e,{isAddNewCard:b}=d;let D;try{var A,j,m,N,f;D=null!==a&&void 0!==a&&null!==(A=a.reasons)&&void 0!==A&&null!==(j=A[2])&&void 0!==j&&j.message?null===(m=JSON.parse(null===a||void 0===a||null===(N=a.reasons)||void 0===N||null===(f=N[2])||void 0===f?void 0:f.message))||void 0===m?void 0:m.uiErrorCode:""}catch(g){D=""}Object(o.useEffect)((()=>{var e,t;window.scrollTo(0,0);const d=null===(e=JSON.parse(null===(t=localStorage)||void 0===t?void 0:t.getItem(O.gd.DISPOSITION_NEW)))||void 0===e?void 0:e.type;!Object(c.X)()&&Object(l.sf)(d)}),[]);const R=d=>{d||e.dispatch(Object(u.e)()),Object(c.j)()?Object(l.Be)(e):Object(c.X)()?Object(l.Ke)(e,!0):Object(c.T)()?Object(l.Ke)(e,!1):b?Object(l.De)(e):t?Object(l.Ge)(e,!1,!0):Object(l.Ee)(e,!1,r)};return Object(I.jsx)("div",{className:"PaymentFailedScreen au",children:Object(I.jsx)("div",{className:"paymentFailed",children:Object(I.jsxs)("div",{className:"FailedDisplay",children:[Object(I.jsx)("div",{className:"Failimage",children:Object(I.jsx)("img",{src:T(t),alt:"issue_img"})}),Object(c.X)()?Object(I.jsxs)("div",{className:"notRightGiftCard",children:[Object(I.jsx)("div",{children:Object(v.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.GIFT_CARD_PAYMENT_NOT_SUCCESSFUL_HEADLINE_PART_ONE)}),Object(I.jsx)("div",{children:Object(v.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.GIFT_CARD_PAYMENT_NOT_SUCCESSFUL_HEADLINE_PART_TWO)})]}):Object(I.jsx)("div",{className:"notRight",children:Object(s.c)(null===S||void 0===S?void 0:S.TITLE,t,D)}),Object(c.X)()?Object(I.jsx)("div",{className:"ReasonGiftCard col-12",children:Object(v.translateWithI18Next)(null===E.a||void 0===E.a?void 0:E.a.GIFT_CARD_PAYMENT_NOT_SUCCESSFUL_DESCRIPTION)}):Object(I.jsx)("div",{className:"Reason col-sm-8 col-12",children:!Object(c.T)()&&_(r,t,D)}),Object(I.jsx)("div",{className:"backToCart",children:Object(I.jsx)(n.a,{"data-testid":"Back-Cart-Button",className:"button  blackBorder back-To-Cart ".concat(t?"bgClr":"whiteButton"),onClick:()=>R(t),children:Object(s.c)(null===S||void 0===S?void 0:S.BUTTON_TEXT,t,D)})})]})})})};t.default=i.a.memo(b)},951:function(e,t,d){"use strict";d.d(t,"a",(function(){return o})),d.d(t,"c",(function(){return i})),d.d(t,"b",(function(){return n})),d.d(t,"d",(function(){return l}));const o=20,i=5e3,n=15e3,l=18e4},972:function(e,t,d){"use strict";d.d(t,"p",(function(){return a})),d.d(t,"o",(function(){return v})),d.d(t,"l",(function(){return E})),d.d(t,"f",(function(){return O})),d.d(t,"m",(function(){return I})),d.d(t,"n",(function(){return T})),d.d(t,"h",(function(){return S})),d.d(t,"j",(function(){return _})),d.d(t,"i",(function(){return b})),d.d(t,"g",(function(){return D})),d.d(t,"k",(function(){return A})),d.d(t,"r",(function(){return m})),d.d(t,"a",(function(){return N})),d.d(t,"b",(function(){return R})),d.d(t,"d",(function(){return g})),d.d(t,"c",(function(){return h})),d.d(t,"s",(function(){return P})),d.d(t,"v",(function(){return C})),d.d(t,"q",(function(){return p})),d.d(t,"u",(function(){return L})),d.d(t,"w",(function(){return F})),d.d(t,"e",(function(){return Y})),d.d(t,"t",(function(){return y}));var o=d(138),i=d(102),n=d(30),l=d(5),r=d(0),u=d(951),c=d(22),s=d(42);const a=e=>j(e)===r.Od.STAGED_ACCEPTED,v=e=>j(e)===r.Od.PICKUP_DELIVERY_DINE_IN,E=e=>Object(l.ef)(null===e||void 0===e?void 0:e.service)===r.Lb.DELIVERY&&v(e),O=e=>Object(l.ef)(null===e||void 0===e?void 0:e.service)===r.Lb.DELIVERY&&(E(e)||S(e)||_(e)||b(e)),I=e=>O(e)&&(null===e||void 0===e?void 0:e.deliveryPartner),T=e=>O(e)&&!b(e)&&!D(e),S=e=>j(e)===r.Od.DELIVERY_DISTA_CREATE_ASSIGN,_=e=>j(e)===r.Od.DELIVERY_DISTA,b=e=>j(e)===r.Od.DELIVERY_DISTA_DELIVERED,D=e=>j(e)===r.Od.CANCELLED,A=e=>_(e)||D(e)||b(e),j=e=>{switch(Object(l.ef)(null===e||void 0===e?void 0:e.status)){case r.Qd.STAGED:case r.Qd.ACCEPTED:return c.b.shouldGoogleSpotIgnoreOloFailure?r.Od.PICKUP_DELIVERY_DINE_IN:r.Od.STAGED_ACCEPTED;case r.Qd.SENT_TO_POS_COMPLETED:if(Object(l.ef)(null===e||void 0===e?void 0:e.service)===r.Lb.PICKUP||Object(l.ef)(null===e||void 0===e?void 0:e.service)===r.Lb.DINE_IN||Object(l.ef)(null===e||void 0===e?void 0:e.service)===r.Lb.DELIVERY||Object(l.ef)(null===e||void 0===e?void 0:e.service)===r.Lb.CHRISTMAS_ORDERING)return r.Od.PICKUP_DELIVERY_DINE_IN;break;case r.Qd.CREATED:case r.Qd.ASSIGNED:return r.Od.DELIVERY_DISTA_CREATE_ASSIGN;case r.Qd.PICKED_UP:case r.Qd.OUT_FOR_DELIVERY:case r.Qd.ARRIVED:return r.Od.DELIVERY_DISTA;case r.Qd.DELIVERED:return r.Od.DELIVERY_DISTA_DELIVERED;case r.Qd.CANCELLED:case r.Qd.CANCEL:return Object(l.ef)(null===e||void 0===e?void 0:e.service)===r.Lb.DELIVERY?r.Od.CANCELLED:r.Od.FAILED;case r.Qd.SENT_TO_POS_FAILED:case r.Qd.PAYMENT_FAILED:return r.Od.FAILED}},m=(e,t,d)=>{if(null!==e&&void 0!==e&&e.orderAcceptedLoading)return Promise.resolve(!1);switch(j(e)){case r.Od.STAGED_ACCEPTED:return t(!0),Promise.resolve(!1);case r.Od.PICKUP_DELIVERY_DINE_IN:return t(!1),Promise.resolve(!0);case r.Od.DELIVERY_DISTA_CREATE_ASSIGN:case r.Od.DELIVERY_DISTA:case r.Od.DELIVERY_DISTA_DELIVERED:case r.Od.CANCELLED:return t(!1),Promise.resolve(!1);case r.Od.FAILED:return localStorage.setItem(r.Td.STATUS_TEXT,r.Td.FAILED),Object(l.Se)(d),Promise.resolve(!1)}},N=e=>{let{dispatch:t,orderDetails:d,orderAccepted:o,cartData:i,userOrderState:u,appStateReducer:s,isBasketLoading:a,status:v,qrCodeScanTime:E}=e;if(v){const e=s.userStatus,v=c.b.shouldGoogleSpotIgnoreOloFailure||Object(l.ef)(null===o||void 0===o?void 0:o.status)===r.Qd.SENT_TO_POS_COMPLETED;Object(l.l)(v,!a,null===i||void 0===i?void 0:i.id,e.localized,null===d||void 0===d?void 0:d.tenantId)&&Object(l.G)(t,n.f,null===d||void 0===d?void 0:d.tenantId,u,E)}},f=(e,t,d)=>{t&&(d=setTimeout((()=>{t(e),d&&clearTimeout(d)}),u.c))},R=function(e,t){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n={emailId:null===t||void 0===t?void 0:t.userEmail,phoneNo:null===t||void 0===t?void 0:t.userPhone,orderNo:null===t||void 0===t?void 0:t.posOrderId,tenantId:null===t||void 0===t?void 0:t.tenantId},l=d+1;e(Object(i.d)(n,(()=>f(l,o,null))))},g=function(e,t){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const n={orderId:null===t||void 0===t?void 0:t.orderId,tenantId:null===t||void 0===t?void 0:t.tenantId,customerId:null===t||void 0===t?void 0:t.customerId},l=d+1;e(Object(o.f)(n,(()=>f(l,i,null))))},h=function(e,t){let d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null!==t&&void 0!==t&&t.isExternalTrackOrder?R(e,t,d,o):g(e,t,d,o)},P=(e,t,d,o,i,n)=>{null!==t&&void 0!==t&&t.orderId?0===d||a(o)&&d<u.a?h(e,t,d,i):a(o)&&d>=u.a&&(localStorage.setItem("paymentStatus",r.Td.FAILED),Object(l.Se)(n)):Object(l.Me)(n)},C=(e,t,d,o,i)=>{o&&E(e)?Object(l.Se)(i):null!==e&&void 0!==e&&e.status&&(null===e||void 0===e?void 0:e.status)!==(null===t||void 0===t?void 0:t.status)?d({...t,status:null===e||void 0===e?void 0:e.status,orderAcceptedLoading:null===e||void 0===e?void 0:e.orderAcceptedLoading,deliveryPartner:null===e||void 0===e?void 0:e.deliveryPartner,deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1}):d({...t,deliveryDistaRetryCountFlag:(null===t||void 0===t?void 0:t.deliveryDistaRetryCountFlag)+1})},p=(e,t,d)=>{if(E(e)&&!t){const e=setTimeout((()=>{e&&clearTimeout(e)}),u.d)}},L=(e,t,d,o)=>{var i,n;return{...F(e,t,!1,d),orderAcceptedLoading:(null===t||void 0===t?void 0:t.orderAcceptedLoading)||!1,deliveryPartner:null,deliveryDistaRetryCountFlag:0,operatingTime:null===o||void 0===o||null===(i=o.store)||void 0===i||null===(n=i.summary)||void 0===n?void 0:n.timings}},F=function(e,t){var d,o,i,n,l,r,u,c;let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const E={orderId:(null===t||void 0===t?void 0:t.id)||(null===a||void 0===a?void 0:a.id),customerId:(null===t||void 0===t||null===(d=t.customer)||void 0===d?void 0:d.id)||(null===a||void 0===a||null===(o=a.customer)||void 0===o?void 0:o.id),tenantId:e,service:(null===t||void 0===t?void 0:t.service)||(null===a||void 0===a?void 0:a.service),status:(null===t||void 0===t?void 0:t.status)||(null===a||void 0===a?void 0:a.status),orderTime:(null===t||void 0===t?void 0:t.fulfillmentDateTime)||(null===a||void 0===a?void 0:a.fulfillmentDateTime),deliveryPartner:(null===t||void 0===t?void 0:t.deliveryPartner)||(null===a||void 0===a?void 0:a.deliveryPartner),posOrderId:(null===t||void 0===t?void 0:t.posOrderId)||(null===a||void 0===a?void 0:a.posOrderId),userEmail:(null===t||void 0===t||null===(i=t.customer)||void 0===i?void 0:i.email)||(null===a||void 0===a||null===(n=a.customer)||void 0===n?void 0:n.email),userPhone:(null===t||void 0===t||null===(l=t.customer)||void 0===l?void 0:l.phoneNumber)||(null===t||void 0===t||null===(r=t.customer)||void 0===r?void 0:r.phone)||(null===a||void 0===a||null===(u=a.customer)||void 0===u?void 0:u.phoneNumber),postOrderDetails:t,isExternalTrackOrder:s};var O,I,T;null!==v&&void 0!==v&&null!==(c=v.storesWithStatus)&&void 0!==c&&c.length&&(E.operatingTime=null===v||void 0===v||null===(O=v.storesWithStatus)||void 0===O||null===(I=O[0])||void 0===I||null===(T=I.summary)||void 0===T?void 0:T.timings);return E},Y=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=(e=>{var t;return null!==e&&void 0!==e&&e.orderAccepted&&Object.keys(null===e||void 0===e?void 0:e.orderAccepted).length&&null!==e&&void 0!==e&&null!==(t=e.orderAccepted)&&void 0!==t&&t.id?null===e||void 0===e?void 0:e.orderAccepted:null})(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return null===o&&(o=(e=>{var t;return null!==e&&void 0!==e&&null!==(t=e.pastOrderResponse)&&void 0!==t&&t.length&&null!==e&&void 0!==e&&e.pastOrderResponse[0].id?null===e||void 0===e?void 0:e.pastOrderResponse[0]:null})(e),d&&null===o&&(o=t&&Object.keys(null===t||void 0===t?void 0:t.postOrderDetails).length?null===t||void 0===t?void 0:t.postOrderDetails:{})),o||{}},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(localStorage.getItem(r.gd.PAYMENT_STATUS)!==r.Td.FAILED){var d,n,l,u;if(t&&(null===(d=window)||void 0===d||null===(n=d.location)||void 0===n?void 0:n.pathname)===(null===r.Ae||void 0===r.Ae?void 0:r.Ae.PAYMENT_SUCCESS)||(null===(l=window)||void 0===l||null===(u=l.location)||void 0===u?void 0:u.pathname)===(null===r.Ae||void 0===r.Ae?void 0:r.Ae.CHECKOUT))return!1;(e=>{e(Object(o.h)())})(e),(e=>{e(Object(i.e)())})(e)}(e=>{e(Object(s.z)())})(e),(e=>{e(Object(i.a)({value:[]}))})(e),sessionStorage.removeItem(r.gd.ORDER_TRACKING)}}}]);